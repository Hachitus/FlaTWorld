<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src\components\map\core\UI.js - FlaTWorld</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="FlaTWorld" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/flatworld.eventListeners.html">flatworld.eventListeners</a></li>
                                <li><a href="../classes/flatworld.extensions.baseEventlisteners.html">flatworld.extensions.baseEventlisteners</a></li>
                                <li><a href="../classes/flatworld.extensions.hexagons.ObjectHexaTerrain.html">flatworld.extensions.hexagons.ObjectHexaTerrain</a></li>
                                <li><a href="../classes/flatworld.extensions.hexagons.ObjectHexaUnit.html">flatworld.extensions.hexagons.ObjectHexaUnit</a></li>
                                <li><a href="../classes/flatworld.extensions.hexagons.selectHexagonObject.html">flatworld.extensions.hexagons.selectHexagonObject</a></li>
                                <li><a href="../classes/flatworld.extensions.hexagons.setupHexagonClick.html">flatworld.extensions.hexagons.setupHexagonClick</a></li>
                                <li><a href="../classes/flatworld.extensions.hexagons.utils.html">flatworld.extensions.hexagons.utils</a></li>
                                <li><a href="../classes/flatworld.extensions.mapDrag.html">flatworld.extensions.mapDrag</a></li>
                                <li><a href="../classes/flatworld.extensions.mapMovement.html">flatworld.extensions.mapMovement</a></li>
                                <li><a href="../classes/flatworld.extensions.mapZoom.html">flatworld.extensions.mapZoom</a></li>
                                <li><a href="../classes/flatworld.Flatworld.html">flatworld.Flatworld</a></li>
                                <li><a href="../classes/flatworld.generalUtils.arrays.html">flatworld.generalUtils.arrays</a></li>
                                <li><a href="../classes/flatworld.generalUtils.environmentDetections.html">flatworld.generalUtils.environmentDetections</a></li>
                                <li><a href="../classes/flatworld.generalUtils.polyfills.html">flatworld.generalUtils.polyfills</a></li>
                                <li><a href="../classes/flatworld.log.html">flatworld.log</a></li>
                                <li><a href="../classes/flatworld.mapApi.html">flatworld.mapApi</a></li>
                                <li><a href="../classes/flatworld.MapDataManipulator.html">flatworld.MapDataManipulator</a></li>
                                <li><a href="../classes/flatworld.mapEvents.html">flatworld.mapEvents</a></li>
                                <li><a href="../classes/flatworld.maplayers.MapLayer.html">flatworld.maplayers.MapLayer</a></li>
                                <li><a href="../classes/flatworld.maplayers.MapLayerParent.html">flatworld.maplayers.MapLayerParent</a></li>
                                <li><a href="../classes/flatworld.maplayers.MapSubcontainer.html">flatworld.maplayers.MapSubcontainer</a></li>
                                <li><a href="../classes/flatworld.mapStates.html">flatworld.mapStates</a></li>
                                <li><a href="../classes/flatworld.ObjectManager.html">flatworld.ObjectManager</a></li>
                                <li><a href="../classes/flatworld.objects.ObjectSprite.html">flatworld.objects.ObjectSprite</a></li>
                                <li><a href="../classes/flatworld.objects.ObjectSpriteTerrain.html">flatworld.objects.ObjectSpriteTerrain</a></li>
                                <li><a href="../classes/flatworld.objects.ObjectSpriteUnit.html">flatworld.objects.ObjectSpriteUnit</a></li>
                                <li><a href="../classes/flatworld.Preload.html">flatworld.Preload</a></li>
                                <li><a href="../classes/flatworld.UI.html">flatworld.UI</a></li>
                                <li><a href="../classes/flatworld.UIs.default.html">flatworld.UIs.default</a></li>
                                <li><a href="../classes/flatworld.utils.dataManipulation.html">flatworld.utils.dataManipulation</a></li>
                                <li><a href="../classes/flatworld.utils.effects.html">flatworld.utils.effects</a></li>
                                <li><a href="../classes/flatworld.utils.environment.html">flatworld.utils.environment</a></li>
                                <li><a href="../classes/flatworld.utils.general.html">flatworld.utils.general</a></li>
                                <li><a href="../classes/flatworld.utils.mouse.html">flatworld.utils.mouse</a></li>
                                <li><a href="../classes/flatworld.utils.Quadtree.html">flatworld.utils.Quadtree</a></li>
                                <li><a href="../classes/flatworld.utils.resize.html">flatworld.utils.resize</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src\components\map\core\UI.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
(function () {
  &#x27;use strict&#x27;;

  /*---------------------
  ------- IMPORT --------
  ----------------------*/
  var mapLog = window.flatworld.log;

  /*---------------------
  ------ VARIABLES ------
  ----------------------*/
  var scope;

  /*---------------------
  -------- PUBLIC -------
  ----------------------*/
  /**
   * Main class for showing UI on the map, like unit selections, movements and such. Has nothing to do with showing off-map data, like
   * datagrams of the resources player has or other players status etc.
   * Good examples for what this shows are: selected units-list, selection highlight (like a circle on the selected unit), unit movement.
   * How it works is that this is basically the interface that shows what the UI theme class can (or must) implement.
   *
   * @namespace flatworld
   * @class UI
   * @static
   * @param {Object} UITheme        Module that will be used for the UI theme
   * @param {Map} givenMap          Map instance that is used
   * @return {Object}               UI module
  */
  function UI (UITheme, givenMap) {
    var map;

    /* SINGLETON MODULE */
    if (scope) {
      return scope;
    }

    if (!UITheme || !givenMap) {
      throw new Error(&quot;UI-module requires UITheme and map object, This is an singletong class, so it&#x27;s possible it should have been &quot;+
        &quot;already called earlier&quot;);
    }

    map = givenMap;
    scope = {};

    /**
     * Responsible for showing what objects have been selected for inspection or if the player selects only one object, we hightlihgt it.
     * For example if there are several objects in one tile on the map and the player needs to be able to select one
     * specific unit on the stack. This is always defined in the UI theme-module Selecting one unit, highlight it, which means,
     * e.g. bringing the unit on top on the map and showing selection circle around it.
     *
     * @method showSelections
     * @static
     * @param  {Array|Object} objects           Objects that have been selected.
     * @param {Object} getDatas                 This is an object made of functions, that get wanted data from the object. For example if
     * you have objects name in object.data.specialData.name, then you have an object getDatas.name(), which retrieves this. This should be
     * standardized maybe in MapDataManipulator, so that we can change the template between different game setups easier. Lets say if one
     * game modification has different attributes than another, then maybe it should still have standard interface.
     * @param {Object} getDatas.name            Retrieves object name
     * @param {Object} {}                       Extra options
     * @param {MapDataManipulator} {}.filters   Filters objects
     * @param {Object} {}.options               Extra options that are passed to the UITheme class
     * @return {Boolean}
     *
     * @todo the getDatas function should be standardized, so that most UIs would work with most different setups.
     * */
    scope.showSelections = function (objects, getDatas, { filters, UIThemeOptions } = {}) {
      if (filters) {
        objects = filters.filterObjects(objects);
      }

      objects = Array.isArray(objects) ? objects : [objects];

      if (objects.length === 1) {
        return UITheme.highlightSelectedObject(objects[0], getDatas, UIThemeOptions);
      } else if (objects.length &gt; 1) {
        return UITheme.showSelections(objects, getDatas, UIThemeOptions);
      } else {
        // Delete the UI objects, as player clicked somewhere that doesn&#x27;t have any selectable objects
        return UITheme.showSelections([]);
      }

      mapLog.error(&quot;No objects found&quot; + objects.length);
      return [];
    };
    /**
     * Shows arrow or movement or what ever to indicate the selected unit is moving to the given location
     *
     * @method showUnitMovement
     * @static
     * @param {Object} options        Extra options. Like dropping a shadow etc.
     * */
    scope.showUnitMovement = function (objects, to, { filters, UIThemeOptions } = {}) {
      if (filters) {
        objects = filters.filterObjects(objects);
      }

      if (Array.isArray(objects) || typeof objects !== &#x27;object&#x27; || objects === null) {
        mapLog.error(&quot;Object was an Array, should be plain object: &quot; + objects.length);
      }
      return UITheme.showUnitMovement(objects, to, UIThemeOptions);
    };

    /**
     * Adds a new method to this class
     *
     * @method extend
     * @static
     * @param  {String} newMethod   Name of the new method
     */
    scope.extend = function(newMethod) {
      scope[newMethod] = function () {
        UITheme[newMethod]();
      };
    };

    return scope;
  }

  /*---------------------
  --------- API ---------
  ----------------------*/
  window.flatworld.UI = UI;
})();
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
