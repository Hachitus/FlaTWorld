{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap ca9dfa73e9bbdfcd2597","webpack:///./src/bundle.js","webpack:///./src/core/index.js","webpack:///./src/core/utils/index.js","webpack:///./src/core/utils/dataManipulation.js","webpack:///./src/core/utils/effects.js","webpack:///./src/core/utils/environment.js","webpack:///./src/core/utils/general.js","webpack:///./src/core/utils/mouse.js","webpack:///./~/pixi.js/bin/pixi.min.js","webpack:///./src/core/utils/polyfills.js","webpack:///./src/core/utils/resize.js","webpack:///./src/core/utils/shapes.js","webpack:///./src/core/constants.js","webpack:///./src/core/eventlisteners.js","webpack:///./src/core/Flatworld.js","webpack:///./~/q/q.js","webpack:///./~/process/browser.js","webpack:///./~/timers-browserify/main.js","webpack:///./src/core/log.js","webpack:///./~/loglevel/lib/loglevel.js","webpack:///./src/core/mapAPI.js","webpack:///./~/whatwg-fetch/fetch.js","webpack:///./src/core/MapDataManipulator.js","webpack:///./src/core/mapEvents.js","webpack:///./~/eventemitter3/index.js","webpack:///./src/core/MapLayers.js","webpack:///./src/core/mapStates.js","webpack:///./~/javascript-state-machine/state-machine.js","webpack:///./src/core/ObjectManager.js","webpack:///./src/core/Objects.js","webpack:///./src/core/Sound.js","webpack:///./~/howler/dist/howler.js","webpack:///./src/core/UI.js","webpack:///./src/extensions/index.js","webpack:///./src/extensions/baseEventListeners/baseEventlisteners.js","webpack:///./~/hammerjs/hammer.js","webpack:///./~/hamsterjs/hamster.js","webpack:///./src/extensions/fogOfWars/index.js","webpack:///./src/extensions/fogOfWars/simpleFogOfWar.js","webpack:///./src/extensions/hexagons/index.js","webpack:///./src/extensions/hexagons/eventListeners/units.js","webpack:///./src/extensions/hexagons/pathFinding/findPath.js","webpack:///./src/extensions/hexagons/utils/index.js","webpack:///./src/extensions/hexagons/utils/createHexagon.js","webpack:///./src/extensions/hexagons/utils/hexagonMath.js","webpack:///./src/extensions/hexagons/selectHexagonPlugin.js","webpack:///./src/extensions/hexagons/Objects.js","webpack:///./src/extensions/mapMovement/mapMovement.js","webpack:///./src/extensions/minimaps/index.js","webpack:///./src/extensions/minimaps/pixelizedMinimap.js","webpack:///./src/extensions/move/mapDrag.js","webpack:///./src/extensions/zoom/mapZoom.js","webpack:///./src/UIs/index.js","webpack:///./src/UIs/default/index.js","webpack:///./src/UIs/default/default.js","webpack:///./src/UIs/default/layout/index.js","webpack:///./src/UIs/default/layout/multiSelection.handlebars","webpack:///./~/handlebars/runtime.js","webpack:///./~/handlebars/dist/cjs/handlebars.runtime.js","webpack:///./~/handlebars/dist/cjs/handlebars/base.js","webpack:///./~/handlebars/dist/cjs/handlebars/utils.js","webpack:///./~/handlebars/dist/cjs/handlebars/exception.js","webpack:///./~/handlebars/dist/cjs/handlebars/helpers.js","webpack:///./~/handlebars/dist/cjs/handlebars/helpers/block-helper-missing.js","webpack:///./~/handlebars/dist/cjs/handlebars/helpers/each.js","webpack:///./~/handlebars/dist/cjs/handlebars/helpers/helper-missing.js","webpack:///./~/handlebars/dist/cjs/handlebars/helpers/if.js","webpack:///./~/handlebars/dist/cjs/handlebars/helpers/log.js","webpack:///./~/handlebars/dist/cjs/handlebars/helpers/lookup.js","webpack:///./~/handlebars/dist/cjs/handlebars/helpers/with.js","webpack:///./~/handlebars/dist/cjs/handlebars/decorators.js","webpack:///./~/handlebars/dist/cjs/handlebars/decorators/inline.js","webpack:///./~/handlebars/dist/cjs/handlebars/logger.js","webpack:///./~/handlebars/dist/cjs/handlebars/safe-string.js","webpack:///./~/handlebars/dist/cjs/handlebars/runtime.js","webpack:///./~/handlebars/dist/cjs/handlebars/no-conflict.js","webpack:///./src/UIs/default/layout/singleSelection.handlebars","webpack:///./src/UIs/default/utils/arrows.js","webpack:///./src/preloading/Preload.js","webpack:///./src/factories/hexaFactory.js"],"names":["core","UIModule","preloading","hexaFactory","UIs","toBeExported","extensions","factories","module","exports","utils","constants","eventListeners","Flatworld","log","mapAPI","MapDataManipulator","mapEvents","mapLayers","mapStates","ObjectManager","objects","Sound","UI","UIStates","dataManipulation","effects","environment","general","mouse","polyfills","resize","shapes","mapObjectsToArray","Object","keys","map","objGroup","flattenArrayBy1Level","merged","concat","apply","dropShadow","getPixelRatio","canvasElement","DPR","window","devicePixelRatio","ctx","getContext","document","createElement","bsr","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","isWebglSupported","canvas","WebGLRenderingContext","e","isTouchDevice","documentElement","isMobile","screenSize","screen","width","matchMedia","matches","features","navigator","maxTouchPoints","msMaxTouchPoints","PIXEL_EPSILON","epsilonEquality","x","y","Math","abs","requireParameter","className","paramName","Error","flatten2Levels","arr","chunkArray","array","chunkSize","result","i","length","push","slice","pixelEpsilonEquality","PIXI","isRightClick","which","disableContextMenu","addEventListener","preventDefault","getPointerCoords","Point","offsetX","offsetY","getHAMMERPointerCoords","center","getGlobalCoordinates","isSupportedTouch","coordinatesFromGlobalToRelative","coordinates","element","elementPosition","getElementPositionInWindow","el","xPos","yPos","tagName","toLowerCase","xScroll","scrollLeft","yScroll","scrollTop","offsetLeft","clientLeft","offsetTop","clientTop","offsetParent","eventMouseCoords","pos","event","pageX","pageY","clientX","clientY","body","toggleMouseTextSelection","getElementsByTagName","style","webkitTouchCallout","webkitUserSelect","khtmlUserSelect","mozUserSelect","msUserSelect","userSelect","eventData","arrayFind","Array","prototype","find","predicate","TypeError","list","thisArg","arguments","value","call","undefined","objectAssign","assign","target","output","index","source","nextKey","hasOwnProperty","es6String","String","repeat","defineProperty","object","error","count","string","n","Number","Infinity","RangeError","configurable","writable","setPrototypeOf","obj","proto","__proto__","toggleFullScreen","elem","isInFullScreen","fullScreenElement","mozFullScreen","webkitIsFullScreen","cancelFullScreen","requestFullScreen","requestMethod","webkitCancelFullScreen","mozCancelFullScreen","exitFullscreen","ActiveXObject","wscript","SendKeys","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullScreen","setToFullSize","context","fullSize","size","getWindowSize","height","innerWidth","innerHeight","resizePIXIRenderer","renderer","drawOnNextTick","windowSize","autoResize","fullsizeCanvasCSS","position","display","left","top","createSquare","graphics","Graphics","lineStyle","drawRect","ZERO_COORDINATES","VERSION","stateOfEvents","activeEventListeners","detectors","on","off","isOn","setActivityState","getActivityState","setDetector","clearDetector","type","cb","_createEventListenerWrapper","Set","add","delete","has","newState","cbOn","cbOff","forEach","publish","LAYER_TYPE_STATIC","LAYER_TYPE_MOVABLE","LAYER_TYPE_MINIMAP","_renderers","protectedProperties","_drawMapOnNextTick","isMapReadyPromises","_privateRenderers","_zoomLayer","_movableLayer","_minimapLayer","ParentLayerConstructor","mapCanvas","bounds","mapSize","rendererOptions","antialias","minimapCanvas","subcontainers","maxDetectionOffset","trackFPSCB","defaultScaleMode","SCALE_MODES","DEFAULT","mouseTextSelection","constructor","name","querySelector","innerHTML","view","main","WebGLRenderer","getResponsibleLayer","minimap","plugins","interaction","destroy","getMinimapLayer","MapLayerParent","MapLayer","coord","addChild","overflow","idx","zoomLayer","movableLayer","subcontainersConfig","objectManager","currentlySelectedObjects","layerTypes","staticType","id","movableType","minimapType","preRenderers","allMapObjects","tickCB","options","fullsize","getPrimaryLayers","toggleFullsize","getAllObjects","o","initializeCoordinates","_createArrayStructure","initPlugins","_defaultTick","customTickOn","Promise","resolve","UITheme","all","textureGC","run","layerType","UIName","isArray","_addObjectToUIlayer","deleteUIObjects","toLayer","layer","specialLayer","layerOptions","getSubcontainerConfigs","newLayer","isLocal","multiplier","leftSideCoords","rightSideCoords","toLocal","leftSide","rightSide","x2","y2","offset","round","removeChild","absolute","realCoordinates","getZoom","move","pluginsArray","allPromises","data","plugin","params","parameters","bind","initPlugin","pluginName","promise","init","mapInstance","_properties","message","reject","callback","property","thisPrototype","getPrototypeOf","filters","globalCoords","allCoords","localCoords","allMatchingSubcontainers","_getSubcontainersUnderArea","_retrieveObjects","doesItFilter","filter","allObjects","theseObjs","allObjs","hasSubcontainers","getSubcontainers","subContainer","children","newScale","setZoom","cooldown","previousScale","revert","toGlobal","containers","retrieve","attribute","primaryLayers","thisLayersSubcontainers","getSubcontainersByCoordinates","ONE_SECOND","FPSCount","fpsTimer","Date","getTime","renderStart","totalRenderTime","ticker","shared","render","FPS","FPStime","renderTime","drawCount","addUIObject","getObjects","enableAll","debug","APIs","get","post","remove","update","getAllAPIs","_doFetch","baseUrl","JSON","stringify","cbs","fetchType","completeData","fetch","url","method","then","response","json","catch","ev","rules","classes","k","found","_runRule","some","ruleMatches","matchedType","filtered","thisClass","rule","_getObject","getPropertyWithArray","currentProperty","thisLevel","OBJECT_LAYER","OBJECT_OBJECT","TIMER_FOR_SAME_TYPE","lastTimePublished","EE","subscribe","debounce","removeAllListeners","datas","timestamp","realType","emit","func","wait","immediate","timeout","args","later","callNow","clearTimeout","setTimeout","_UIObjects","selectable","UIObjectList","amount","scale","toFixed","thisChild","UILayer","getUILayer","createUILayer","_removeObjectsFromLayer","Container","oldAddChild","subcontainerList","displayObject","correctContainer","setCorrectSubcontainer","willFilter","subcontainer","foundSubcontainers","_getClosestSubcontainers","MapSubcontainer","MinimapLayer","targetSize","parentLayer","xIndex","floor","yIndex","thisSubcontainer","visible","isHiddenByDefault","givenCoordinates","allFoundSubcontainers","widthIndex","heightIndex","thisXIndex","thisYIndex","StateMachine","create","initial","events","from","to","foundObjs","container","filterChildren","isHit","hitTest","ObjectSprite","texture","exactCoords","set","highlightable","areaWidth","areaHeight","static","minimapColor","_initializeCoordinates","fromFrame","currentFrame","newFrame","innerDraw","anchor","newSprite","Sprite","generateTexture","getMapCoordinates","getCenterCoordinates","ObjectSpriteTerrain","coords","ObjectSpriteUnit","actions","action","Q","_allSounds","urls","loop","volume","src","autoplay","defer","_onend","play","stop","duration","fade","scope","givenMap","validateUITheme","showSelections","getDatas","UIThemeOptions","filterObjects","returnable","showUnitMovement","allRequiredMethods","baseEventlisteners","fogOfWars","hexagons","mapMovement","minimaps","mapDrag","mapZoom","Hammer","caches","hammer","hamster","toggleFullSize","toggleFullscreen","toggleZoom","toggleDrag","toggleSelect","toggleOrder","orderToggle","selectToggle","Manager","resizeCanvas","setPrototype","_setFullScreen","activeCB","removeEventListener","pinch","Pinch","threshold","wheel","unwheel","pan","Pan","pointers","direction","DIRECTION_ALL","tap","Tap","press","Press","clickListener","can","getRenderer","simpleFogOfWar","maskSprite","Texture","EMPTY","renderTexture","RenderTexture","BaseRenderTexture","FoWOverlay","mapRenderer","maskMovableContainer","maskStageContainer","FoWCB","objectsForFoW","color","activateFogOfWar","refreshFoW","getFoWObjectArray","calculateCorrectCoordinates","FOR_TESTS","setObjectsForFoW","createSpecialLayer","ParticleContainer","filterCreator","createOverlay","setupFoW","setEvents","spriteArray","resetFoW","resizeFoW","mask","registerPreRenderer","moveFoW","zoomFoW","changeMaskSize","getBounds","pivot","removeChildren","clear","beginFill","endFill","hexagonPlugin","pathfinding","setupHexagonClick","selectHexagonObject","hexaUtils","findPath","unitLayerFilter","terrainLayerFilter","weight","getObjectData","typeData","FTW","ui","weightFn","_tapListener","_orderListener","getData","allData","objectSelect","getObjectsUnderArea","objectOrder","selectedObject","selectedObjectsCoordinates","objectIndexes","hexagonMath","coordinatesToIndexes","centerCoords","destinationIndexes","pathsToCoordinates","timeUnits","getMapsize","_isBlocked","indexesToCoordinates","objectOrderEnd","correctHexagon","hexagonIndexes","returnedWeight","isInteger","isFinite","_tests","allHexDirections","allNormalDirections","PriorityQueue","items","stack","pop","loss","binarySearch","match","newItem","splice","dest","maxTime","xStart","yStart","allowDiagonal","validateArgs","counter","d","now","hexagonGrid","pathArr","bestDirectionAlg","visited","startMinTime","getMinSteps","queue","start","time","prev","isVisited","resPath","allowedTime","curr","maxRemainingTime","minPossibleTime","directions","next","console","pathListToArray","reduce","res","key","dy","dx","cell","arg","pathList","link","reverse","sortFn","i0","i1","mid","max","createHexagon","radius","orientation","points","coordsToPixiPoints","Polygon","createVisibleHexagon","isFlatTop","drawPolygon","point","globalRadius","globalStartingPoint","globalOrientation","startingPoint","getHexagonPoints","OFFSET","CENTER","angle","PI","cos","sin","calcShortDiagonal","floorNumbers","answer","sqrt","calcLongDiagonal","calcSpecialDistance","hexaHitTest","hitCoords","offsetCoords","realPolygonPoints","_pointInPolygon","createHexagonGridCoordinates","gridSize","rows","columns","gridArray","shortDistance","longDistance","rowHeight","columnWidth","row","column","indexes","vs","inside","xi","xj","yi","yj","intersect","j","isBlocked","createHexagonDataStructure","terrainLayer","startClickListener","getLayers","objArray","correctCoords","shape","ObjectHexaTerrain","minimapShape","calculateHexa","HEXA_WIDTH","HEXA_HEIGHT","ObjectHexaUnit","SIDE","ROW_HEIGHT","hitArea","setAndGetShape","bugFixedContains","VIEWPORT_OFFSET","CHECK_INTERVAL","SUBCONTAINERS_TO_HANDLE_IN_TIMEOUT","viewportArea","offsetSize","addAll","check","startEventListeners","_testObject","isObjectOutsideViewport","checkAndSetSubcontainers","getViewportWithOffset","testRectangleIntersect","_setMap","setOffsetSize","FlaTWorld_mapMovement_subCheck","visibleContainers","invisibleContainers","containerCoords","cont2","flatworld","FlaTWorld_mapMovement_deactivate","setupViewportArea","processing","setupHandleViewportArea","moveCb","resizeCb","zoomCb","globalArea","getSubcontainerArea","isOutside","scaledViewport","largerViewportAreaWithOffset","containersUnderChangedArea","promises","theseLayers","thesesContainers","thisContainer","err","getViewportArea","calculateOffset","zoom","a","b","pixelizedMinimap","paddingX","paddingY","minimapViewport","coordinateConverterCB","mapMoveTimestamp","dynamicContainer","initMinimap","UIImage","minimapSize","staticCB","dynamicCB","coordinateConvCB","givenMinimapViewport","xPadding","yPadding","setMinimapUI","setupBackgroundLayer","setupDynamicLayer","_setMinimapArea","setupMinimapViewportEvents","setupMinimapClickEvent","backgroundContainer","createMinimapLayer","cacheAsBitmap","updateCB","reactToMapMovement","reactToMapScale","moveViewport","minimapCoordinates","getCurrentMapCoordinates","globalCoordinates","mapCoordinates","srcEvent","layerX","layerY","moveMap","noEvent","minimapClickDetector","_minimapRenderer","_offsetCoords","eventListenerCB","_startDragListener","initialized","startDrag","setOffset","isFinal","_mapMovement","getOffset","moved","offsetCoordsPrivate","TIMEOUT_AFTER_ZOOM","mobileInitialized","difference","zoomLimit","farther","closer","zoomModifier","zoomIn","zoomOut","setZoomLimits","setZoomModifier","unifiedEventCB","presentScale","IS_ZOOM_IN","_zoom","delta","deltaX","deltaY","handleZoomEventDesktop","handleZoomEventMobile","mouseWheelDelta","oldScale","_calculateCenterMoveCoordinates","changeX","changeY","eventType","_isOverZoomLimit","isZoomIn","halfWindowSize","realMovement","UIDefault","templates","UINAME","styleSheetElement","cssClasses","elementList","modal","styles","elements","RADIUS","addStyleElement","createdCSS","select","addCSSRulesToScriptTag","showModal","highlightSelectedObject","unSelect","_getElement","shadow","distance","alpha","blur","highlightableObject","_highlightSelectedObject","path","arrows","removeUIObject","_createArrow","clonedObject","clone","createHighlight","localFrom","localTo","UI_CONTAINER_NAME","objCoords","highlighterObject","sheet","insertRule","_styleElement","appendChild","createTextNode","head","multiSelection","title","singleSelection","classList","drawArrow","x1","y1","angle1","topx","topy","angle2","botx","boty","parseInt","toDrawHead","drawHead","dist","ratio","tox","toy","fromx","fromy","beginStroke","moveTo","lineTo","lineangle","atan2","h","x0","y0","backdist","arcTo","fill","cpx","cpy","quadraticCurveTo","cp1x","cp1y","cp2x","cp2y","shiftamt","xback","yback","xmid","ymid","m","bezierCurveTo","drawArcedArrow","r","startangle","endangle","anticlockwise","sx","sy","destx","desty","beginPath","arc","stroke","strokeStyle","drawLine","Preload","concurrency","crossOrigin","preloaderClass","loaders","Loader","load","once","loader","resources","resource","errorCB","progressCB","installPlugin","scaleMode","pixelRatio","DATA_MAP","parse","DATA_TYPE","DATA_GAME","game","DATA_GRAPHIC","graphic","WINDOW_SIZE","functionsInObj","ObjectTerrain","ObjectUnit","mapProperties","resolution","transparent","layers","layerData","drawOutsideViewport","thisLayer","addLayer","objectGroups","spritesheetType","objectGroup","typeImageData","objTypeData","objectOptions","newObject","objType","toString","image","activeData","hexagonRadius","initialScale","startPoint"],"mappings":"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ACL;;AAEA;AACA,MAAK;AACL;;AAEA;AACA,MAAK;AACL;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;;AAEA,EAAC;AACD;;AAEA;AACA;AACA;AACA,EAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,cAAa;AACb;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,eAAc,gBAAgB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA,sBAAqB;AACrB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B,KAAK;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,kBAAkB;AACrC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,SAAS;AACpB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,kBAAiB,yBAAyB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gDAA+C;AAC/C;AACA;AACA,UAAS;AACT;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C;AAC1C;AACA;AACA;;AAEA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA,gCAA+B;AAC/B;AACA;AACA,yDAAwD;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb,UAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA,qBAAoB,SAAS;AAC7B;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA,qBAAoB;AACpB,mBAAkB;AAClB,yBAAwB;AACxB,qBAAoB;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb,cAAa;AACb,cAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA,oBAAmB,YAAY;AAC/B,cAAa,KAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA,+CAA8C,SAAS;AACvD;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB;AACrB;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mCAAkC,cAAc,EAAE;AAClD;;AAEA;AACA;AACA;;AAEA;AACA,mCAAkC,cAAc,EAAE;AAClD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL,iBAAgB;AAChB,MAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,MAAK;AACL,iBAAgB;AAChB,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,YAAW,SAAS;AACpB,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAoB,QAAQ;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA,0CAAyC,gCAAgC;AACzE;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT,MAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,YAAY;AACvB;AACA,cAAa,aAAa;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,YAAW,KAAK;AAChB,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,KAAK;AAChB,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW,KAAK;AAChB,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;;AAEA;AACA;AACA;AACA,YAAW,KAAK;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW,KAAK;AAChB,YAAW,OAAO;AAClB,YAAW,KAAK;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,YAAW,KAAK;AAChB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,MAAM,sCAAsC;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,mDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA,cAAa;AACb,UAAS;AACT,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,EAAC;;;;;;;;AC//DD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4BAA2B;AAC3B;AACA;AACA;AACA,6BAA4B,UAAU;;;;;;;ACnLtC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C,iBAAiB;;AAE5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA,G;;;;;;;;;;;;;AC3EA;;;;;;AAEA,oBAASgZ,SAAT;AACA;;;;;AAKA,KAAM/Y,MAAM;AACVgZ,QADU,iBACJjW,CADI,EACD;AACP,wBAASiW,KAAT,CAAejW,CAAf;AACD,IAHS;AAIV8G,QAJU,iBAIJ9G,CAJI,EAID;AACP,wBAAS8G,KAAT,CAAe9G,CAAf;AACD;AANS,EAAZ;;AASA;;;mBAGe/C,G;;;;;;;ACpBf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA,EAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,0BAAyB;AACzB,UAAS;AACT;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW;;AAEX;AACA;AACA;AACA,sEAAqE;AACrE,YAAW;AACX;;AAEA;AACA;;AAEA;AACA;AACA,YAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C;AAC1C;AACA,gBAAe;AACf;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,sBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,EAAC;;;;;;;;;;;;;AC3ND;;AACA;;AAEA;;;AAGA;;;;;;;AATA;;;AAgBA,KAAMC,SAAU,YAAW;AACzB,OAAMgZ,OAAO,EAAb;;AAEA;;;AAGA,UAAO;AACLC,aADK;AAELC,eAFK;AAGLhL,aAHK;AAILiL,mBAJK;AAKLC,mBALK;AAMLC;AANK,IAAP;;AASA;;;AAGA;;;;;;;;;AASA,YAASJ,GAAT,CAAanL,IAAb,EAAmBqH,MAAnB,EAA2B;AACzB,YAAOmE,SAAS,KAAT,EAAgBxL,IAAhB,EAAsBqH,MAAtB,CAAP;AACD;AACD;;;;;;;;;;;AAWA,YAAS+D,IAAT,CAAcpL,IAAd,EAAoBqH,MAApB,EAA4B;AAC1B,YAAOmE,SAAS,MAAT,EAAiBxL,IAAjB,EAAuBqH,MAAvB,CAAP;AACD;AACD;;;;;;;;;;;;;;;AAeA,YAASjH,GAAT,CAAaJ,IAAb,EAAmBC,EAAnB,EAAuBwL,OAAvB,EAAgC;AAC9B,SAAIP,KAAKlL,IAAL,CAAJ,EAAgB;AACd,kBAAOiL,KAAP,CAAa,sDAAsDjL,IAAtD,GAA6D,IAA7D,GAAoEyL,OAApE,GAA8E,IAA9E,GAAqFC,KAAKC,SAAL,CAAe1L,EAAf,CAAlG;AACD;;AAEDiL,UAAKlL,IAAL,IAAa;AACXyL,uBADW;AAEXG,YAAK3L,KAAK,CAACA,EAAD,CAAL,GAAY;AAFN,MAAb;AAID;AACD;;;;;;AAMA,YAASoL,MAAT,CAAgBrL,IAAhB,EAAsB;AACpB,SAAI,CAACkL,KAAKlL,IAAL,CAAL,EAAiB;AACf,kBAAOiL,KAAP,CAAa,sCAAb;AACD;;AAED,YAAOC,KAAKlL,IAAL,CAAP;AACD;AACD;;;;;;;;AAQA,YAASsL,MAAT,CAAgBtL,IAAhB,EAAsBC,EAAtB,EAA0B;AACxB,SAAI,CAACiL,KAAKlL,IAAL,CAAD,IAAe,CAACkL,KAAKlL,IAAL,EAAW4L,GAA/B,EAAoC;AAClC,kBAAOX,KAAP,CAAa,sCAAb;AACD;;AAEDC,UAAKlL,IAAL,EAAW4L,GAAX,CAAe7U,IAAf,CAAoBkJ,EAApB;AACD;AACD;;;;;;;;;;;;;AAaA,YAASuL,QAAT,CAAkBK,SAAlB,EAA6B7L,IAA7B,EAAmCqH,MAAnC,EAA2C;AACzC,SAAI,CAAC6D,KAAKlL,IAAL,CAAL,EAAiB;AACf,kBAAOlE,KAAP,CAAa,uCAAuC+P,SAAvC,GAAmD,GAAnD,GAAyD7L,IAAzD,GAAgE,IAAhE,IAAwEqH,SAASA,OAAO,CAAP,CAAT,GAAqB,WAA7F,CAAb;AACA;AACD;;AAED,SAAIyE,eAAeZ,KAAKlL,IAAL,CAAnB;;AAEAkL,UAAKlL,IAAL,EAAW4L,GAAX,CAAelL,OAAf,CAAuB,UAACT,EAAD,EAAQ;AAC7B6L,sBAAe7L,GAAG4L,SAAH,EAAcC,YAAd,EAA4BzE,MAA5B,CAAf;AACD,MAFD;;AAIA,YAAO0E,MAAMD,aAAaE,GAAnB,EAAwB;AAC7BC,eAAQJ,SADqB;AAE7BnS,aAAMoS,aAAapS;AAFU,MAAxB,EAIJwS,IAJI,CAIC,UAAUC,QAAV,EAAoB;AACxB,cAAOA,SAASC,IAAT,EAAP;AACD,MANI,EAMFF,IANE,CAMG,UAAUE,IAAV,EAAgB;AACtB,kBAAOnB,KAAP,CAAa,aAAb,EAA4BmB,IAA5B;AACD,MARI,EAQFC,KARE,CAQI,UAAUC,EAAV,EAAc;AACrB,kBAAOrB,KAAP,CAAa,4BAAb,EAA2CqB,EAA3C;AACD,MAVI,CAAP;AAWD;AACD;;;;;;;AAOA,YAASf,UAAT,GAAsB;AACpB,YAAOL,IAAP;AACD;AACF,EAhJc,EAAf;;AAkJA;;;mBAGehZ,M;;;;;;;ACrKf;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,QAAO;;AAEP,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAwC,mBAAmB;AAC3D;AACA;;AAEA;AACA;AACA,mCAAkC,oBAAoB;AACtD;AACA;;AAEA;AACA;AACA,yCAAwC,4BAA4B;AACpE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA,wDAAuD;AACvD,UAAS;AACT;AACA,UAAS;AACT,+EAA8E;AAC9E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA8B,uBAAuB;AACrD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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Aa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0CAAyC,SAAS;AAClD;AACA;;AAEA;AACA,IAAG;AACH;AACA;;AAEA,gBAAe,YAAY;AAC3B;;AAEA;AACA,4DAA2D;AAC3D,gEAA+D;AAC/D,oEAAmE;AACnE,wEAAuE;AACvE;AACA,2DAA0D,SAAS;AACnE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW,cAAc;AACzB,YAAW,SAAS;AACpB,YAAW,MAAM;AACjB,cAAa,aAAa;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW,cAAc;AACzB,YAAW,SAAS;AACpB,YAAW,MAAM;AACjB,cAAa,aAAa;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW,cAAc;AACzB,YAAW,SAAS;AACpB,YAAW,MAAM;AACjB,YAAW,QAAQ;AACnB,cAAa,aAAa;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,4DAA2D,YAAY;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW,cAAc;AACzB,cAAa,aAAa;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACtTA;;KAAY8E,I;;AACZ;;;;;;;;;;A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AEA,uCAAsC,MAAM;AAC5C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB;AAChB;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wDAAuD;;AAEvD;AACA;AACA;;AAEA;AACA,8EAA6E;AAC7E;AACA,kDAAiD;AACjD,iDAAgD;AAChD,iDAAgD;AAChD,iDAAgD;AAChD,iDAAgD;AAChD,mDAAkD;AAClD,oDAAmD,uCAAuC,uCAAuC;AACjI,oDAAmD,uCAAuC,uCAAuC;AACjI,mDAAkD;AAClD,mDAAkD;AAClD,mDAAkD;AAClD,sDAAqD,wCAAwC;AAC7F;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,oBAAmB,sBAAsB;AACzC;AACA,wBAAuB,iCAAiC;AACxD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;;AAEP;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iCAAgC,YAAY;AAC5C,mCAAkC,aAAa;AAC/C,mCAAkC,aAAa;AAC/C,6CAA4C,kBAAkB;AAC9D,qCAAoC,cAAc;AAClD,mCAAkC,aAAa;AAC/C,mCAAkC,aAAa;AAC/C,mCAAkC,aAAa;AAC/C,uCAAsC,eAAe;AACrD,mCAAkC,aAAa;AAC/C,mCAAkC,aAAa;;AAE/C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,oBAAoB;AACvC;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mCAAkC,KAAK;AACvC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,cAAc;AAC9B,iBAAgB,QAAQ;AACxB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,sBAAqB,uBAAuB;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW;AACX;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;AACA;;AAEA,oBAAmB,cAAc;AACjC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAe;AACf;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB,QAAQ;AACxB,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;AACA;;AAEA,oBAAmB,cAAc;AACjC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAe;AACf;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,QAAQ;AACxB,iBAAgB,OAAO;AACvB,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA,oBAAmB,cAAc;AACjC;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAW;AACX;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;;AAEX;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAqB,aAAa;AAClC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB,OAAO;AACvB,iBAAgB,OAAO;AACvB,iBAAgB,OAAO;AACvB,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;AACA;;AAEA;AACA;AACA,oBAAmB,cAAc;AACjC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,aAAa;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,oBAAmB,cAAc;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;;AAEX;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAqB,aAAa;AAClC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB,QAAQ;AACxB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,OAAO;AACvB;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iDAAgD;;AAEhD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAe,wBAAwB;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB,SAAS;AACzB,iBAAgB,OAAO;AACvB,iBAAgB,OAAO;AACvB,iBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA,6BAA4B,2BAA2B,IAAI,eAAe;AAC1E;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB,SAAS;AACzB,iBAAgB,OAAO;AACvB,iBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP;AACA;AACA,kBAAiB,eAAe;AAChC;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB,SAAS;AACzB,iBAAgB,OAAO;AACvB,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB,OAAO;AACvB,iBAAgB,OAAO;AACvB,iBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA,kCAAiC,MAAM;AACvC;AACA;AACA;AACA,YAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,MAAM;AACtB,iBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB,OAAO;AACvB;AACA;AACA;;AAEA;AACA,oBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,MAAM;AACtB;AACA;AACA;;AAEA;;AAEA;AACA,oBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,uBAAuB;AACtC;AACA;AACA;AACA;;AAEA;AACA,sCAAqC,MAAM;AAC3C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB,MAAM;AACtB;AACA;AACA;;AAEA;AACA;AACA,sBAAqB,uBAAuB;AAC5C;AACA;;AAEA;AACA,QAAO;AACP;AACA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,MAAM;AACtB,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa,gDAAgD,EAAE;AAC/D;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,2BAA0B;AAC1B;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,eAAc,KAAK;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,mBAAkB,GAAG;AACrB;AACA;AACA;AACA,oBAAmB,eAAe;AAClC;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,eAAc,YAAY;AAC1B,eAAc,KAAK;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;;AAEA;AACA;AACA,eAAc,KAAK;AACnB,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAsB;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG,0CAA0C;AAC7C;AACA;AACA;AACA;AACA;AACA,EAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAc,OAAO;AACrB,eAAc,cAAc;AAC5B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,qCAAoC,MAAM;AAC1C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,aAAa;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,aAAa;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,eAAc,SAAS;AACvB,eAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uCAAsC,eAAe;AACrD,iCAAgC,YAAY;AAC5C,iDAAgD,oBAAoB;;AAEpE;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,YAAY;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,cAAc;AAC/B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,WAAW;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,cAAc;AAC/B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,WAAW;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,cAAc;AAC/B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,YAAY;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,cAAc;AAC/B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,eAAc,SAAS;AACvB,eAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,eAAc,SAAS;AACvB,eAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA,eAAc,MAAM;AACpB,cAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;;;;;;;;ACnsFD;;AAEA;;;AAGA,KAAMwhB,QAAQ,EAAd;;AAEA;;;AAGA;;;;;;;;;;;;;;;;;;AAkBA,UAASvhB,EAAT,CAAYwS,OAAZ,EAAqBgP,QAArB,EAA+BlT,mBAA/B,EAAoD;AAAE;;AAEpD;AACA,OAAI3N,OAAOC,IAAP,CAAY2gB,KAAZ,EAAmBnd,MAAnB,KAA8B,CAAlC,EAAqC;AACnC,YAAOmd,KAAP;AACD;;AAED,OA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A;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,SAAS;AACpB,YAAW,OAAO;AAClB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAqD,UAAU;;AAE/D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,UAAU;AACrB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA2B,0BAA0B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,QAAQ;AACnB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA,YAAW,SAAS;AACpB,YAAW,SAAS;AACpB,YAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,iBAAiB;AAC5B,YAAW,MAAM;AACjB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,EAAE;AACb,YAAW,EAAE;AACb,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,YAAY;AACvB,YAAW,OAAO;AAClB,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA,YAAW,YAAY;AACvB,YAAW,OAAO;AAClB,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,YAAW,YAAY;AACvB,YAAW,YAAY;AACvB,aAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,eAAe;AAC3B;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,MAAM,OAAO,KAAK,EAAE,KAAK,EAAE,KAAK;AAC3C,YAAW,OAAO;AAClB,YAAW,QAAQ;AACnB,cAAa,MAAM,GAAG,KAAK,EAAE,KAAK;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,iBAAiB;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,YAAY;AACvB,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAW,QAAQ;AACnB,YAAW,SAAS;AACpB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAAyB,EAAE;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,QAAQ;AACnB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,MAAM;AACjB,aAAY,OAAO;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO,KAAK;AACvB,YAAW,OAAO,KAAK;AACvB,YAAW,MAAM;AACjB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,MAAM;AACjB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,MAAM;AACjB,aAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,MAAM;AACjB,aAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0BAAyB;;AAEzB;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,EAAC;;AAED;AACA,WAAU;AACV,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,gBAAgB;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,EAAC;;AAED;AACA,WAAU;AACV,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,gBAAgB;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAmB,6BAA6B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gDAA+C;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,QAAQ;AACnB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,kBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA,6BAA4B,8BAA8B;;AAE1D;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAc;AACd;AACA,iBAAgB;;AAEhB;AACA;AACA,gBAAe,OAAO;AACtB,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,WAAW;AAC1B,kBAAiB,WAAW;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,WAAW;AAC1B,kBAAiB,WAAW;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,WAAW;AAC1B,kBAAiB,WAAW;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,WAAW;AAC1B,kBAAiB,WAAW;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,WAAW;AAC1B,kBAAiB;AACjB;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kCAAiC;;AAEjC,qCAAoC;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA,uCAAsC;;AAEtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,kBAAiB,MAAM;AACvB;AACA,mCAAkC,EAAE;;AAEpC;AACA;AACA;AACA,kBAAiB;AACjB;AACA,iCAAgC,EAAE;;AAElC;AACA;AACA;AACA;AACA;AACA,wBAAuB;AACvB;;AAEA;AACA;AACA,YAAW,MAAM;AACjB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,MAAM;AACjB,cAAa;AACb;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,kBAAkB;AAC7B,YAAW,WAAW;AACtB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,gBAAe,OAAO;AACtB,kBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,gBAAe,OAAO;AACtB,kBAAiB,EAAE;AACnB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA,YAAW,YAAY;AACvB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;;AAEA;AACA,eAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;;AAEA;AACA;AACA,eAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA,6BAA4B,cAAc;AAC1C,4BAA2B,cAAc;AACzC,4BAA2B,gCAAgC;AAC3D,0BAAyB,gCAAgC;AACzD;AACA,0BAAyB,4BAA4B;AACrD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAW,YAAY;AACvB,YAAW,OAAO;AAClB;AACA;AACA;AACA,6BAA4B,gCAAgC;;AAE5D;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,kBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,gBAAe,QAAQ;AACvB;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAkE;AAClE;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,kBAAkB;AACjC,kBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,gBAAe,WAAW;AAC1B,kBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,kBAAkB;AACjC,kBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,SAAS;AACxB,kBAAiB,aAAa;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,SAAS;AACxB,kBAAiB,aAAa;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,QAAQ;AACnB,YAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA,oGAAmG,GAAG;AACtG;;AAEA;AACA;AACA;AACA,MAAK;AACL,EAAC;AACD;AACA,EAAC;AACD;AACA;;AAEA,EAAC;;;;;;;ACllFD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa,YAAY;AACzB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,QAAQ;AACvB,gBAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,QAAQ;AACvB,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,OAAO;AACtB,gBAAe,SAAS;AACxB,gBAAe,QAAQ;AACvB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,OAAO;AACtB,gBAAe,SAAS;AACxB,gBAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA,oBAAmB;AACnB;AACA,mDAAkD,SAAS;AAC3D;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC;AACzC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAG;;AAEH;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH,EAAC;AACD;AACA;AACA,EAAC;AACD;AACA;AACA;;AAEA,EAAC;;;;;;;;;;;;;ACtUD;;;;;;mBAEe;AACb0C;AADa,E;;;;;;;;;;;;;ACFf;;KAAYngB,I;;AACZ;;;;;;KACQhE,M,eAAAA,M;;AAER;;;AAGA;;;;;;;AAMA,KAAMmkB,iBAAkB,YAAW;AACjC,OAAMC,aAAa,IAAIpgB,KAAKyb,MAAT,CAAgBzb,KAAKqgB,OAAL,CAAaC,KAA7B,CAAnB;AACA,OAAMC,gBAAgB,IAAIvgB,KAAKwgB,aAAT,CAAuB,IAAIxgB,KAAKygB,iBAAT,CAA2BzkB,OAAO+K,aAAP,GAAuBlI,CAAlD,EAAqD7C,OAAO+K,aAAP,GAAuBjI,CAA5E,CAAvB,CAAtB;AACA,OAAM4hB,aAAa,IAAI1gB,KAAK+H,QAAT,EAAnB;AACA,OAAIuE,kBAAJ;AACA,OAAIqU,oBAAJ;AACA,OAAIC,6BAAJ;AACA,OAAIC,2BAAJ;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AY;AACZ,eAAc;AACd,eAAc;AACd,eAAc;AACd,eAAc;AACd;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,sCAAqC,SAAS;AAC9C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA,wBAAuB;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA2C;;;;;;;AC3H3C;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,oBAAmB,yBAAyB;AAC5C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,4CAA2C;;;;;;;ACvC3C;;AAEA;AACA;AACA;;AAEA,uCAAsC,uCAAuC,kBAAkB;;AAE/F;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C;;;;;;;AC7C3C;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,oBAAmB;AACnB;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;AACA,4CAA2C;;;;;;;ACtC3C;;AAEA;AACA;;AAEA,uCAAsC,uCAAuC,kBAAkB;;AAE/F;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA,qCAAoC,OAAO;AAC3C;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAG;AACH;;AAEA;AACA,4CAA2C;;;;;;;AC7F3C;;AAEA;AACA;;AAEA,uCAAsC,uCAAuC,kBAAkB;;AAE/F;;AAEA;;AAEA;AACA;AACA;AACA,iCAAgC,KAAK;AACrC;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA,4CAA2C;;;;;;;ACxB3C;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;;AAEH;AACA,4DAA2D,+DAA+D;AAC1H,IAAG;AACH;;AAEA;AACA,4CAA2C;;;;;;;AC5B3C;;AAEA;;AAEA;AACA;AACA;AACA;AACA,oBAAmB,0BAA0B;AAC7C;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA,IAAG;AACH;;AAEA;AACA,4CAA2C;;;;;;;ACzB3C;;AAEA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA,4CAA2C;;;;;;;ACX3C;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA,IAAG;AACH;;AAEA;AACA,4CAA2C;;;;;;;AChC3C;;AAEA;AACA;AACA;;AAEA,uCAAsC,uCAAuC,kBAAkB;;AAE/F;;AAEA;;AAEA;AACA;AACA;AACA,4CAA2C;;;;;;;ACf3C;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C;AAC7C;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAG;AACH;;AAEA;AACA,4CAA2C;;;;;;;AC5B3C;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,4FAA2F,aAAa;AACxG;AACA;;AAEA,+CAA8C;AAC9C;AACA;AACA;;AAEA;AACA;AACA,4CAA2C;;;;;;;AC9C3C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,4CAA2C;;;;;;;ACd3C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uCAAsC,uCAAuC,kBAAkB;;AAE/F;;AAEA,wCAAuC,6BAA6B,YAAY,EAAE,OAAO,iBAAiB,mBAAmB,uBAAuB,4EAA4E,EAAE,EAAE,yBAAyB,eAAe,EAAE;;AAE9Q;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,gCAA+B;AAC/B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC,OAAO;AAChD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,sBAAqB,SAAS;AAC9B;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA,8BAA6B;AAC7B;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA,2EAA0E;;AAE1E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,2EAA0E;;AAE1E;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,yCAAwC;AACxC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C;;;;;;;ACnS3C;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4CAA2C;;;;;;;;ACnB3C;AACA,0BAAyB,uDAAuD;AAChF,kEAAiE;AACjE;;AAEA,uCAAsC,cAAc,mBAAmB;AACvE,gNAA+M,EAAE,wBAAwB,aAAa;AACtP;AACA;AACA;AACA,EAAC,gBAAgB,E;;;;;;;;;;;ACVjB;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CC;AACD,UAASE,SAAT,CAAmBvL,KAAnB,EAA0BwL,EA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","file":"flatworld.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"flatworld\"] = factory();\n\telse\n\t\troot[\"flatworld\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap ca9dfa73e9bbdfcd2597\n **/","import * as core from './core/';\r\nimport { default as extensions } from './extensions/';\r\nimport * as UIModule from './UIs/';\r\nimport * as preloading from './preloading/Preload';\r\nimport * as hexaFactory from './factories/hexaFactory';\r\n\r\nconst UIs = UIModule.UIs;\r\n\r\nconst toBeExported = core;\r\ntoBeExported.extensions = extensions;\r\ntoBeExported.UIs = UIs;\r\ntoBeExported.preloading = preloading;\r\ntoBeExported.factories = hexaFactory;\r\n\r\nmodule.exports = toBeExported;\n\n\n/** WEBPACK FOOTER **\n ** ./src/bundle.js\n **/","import { default as utils } from './utils/';\r\nimport { default as constants } from './constants';\r\nimport { default as eventListeners } from './eventlisteners';\r\nimport { default as Flatworld } from './Flatworld';\r\nimport { default as log } from './log';\r\nimport { default as mapAPI } from './mapAPI';\r\nimport { default as MapDataManipulator } from './MapDataManipulator';\r\nimport { default as mapEvents } from './mapEvents';\r\nimport { default as mapLayers } from './MapLayers';\r\nimport { default as mapStates } from './mapStates';\r\nimport { default as ObjectManager } from './ObjectManager';\r\nimport { default as objects } from './Objects';\r\nimport { default as Sound } from './Sound';\r\nimport { default as UI } from './UI';\r\nimport { default as UIStates } from './UIStates';\r\n\r\nexport {\r\n  utils,\r\n  constants,\r\n  eventListeners,\r\n  Flatworld,\r\n  log,\r\n  mapAPI,\r\n  MapDataManipulator,\r\n  mapEvents,\r\n  mapLayers,\r\n  mapStates,\r\n  ObjectManager,\r\n  objects,\r\n  Sound,\r\n  UI,\r\n  UIStates,\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/index.js\n **/","import { default as dataManipulation } from './dataManipulation';\r\nimport { default as effects } from './effects';\r\nimport { default as environment } from './environment';\r\nimport { default as general } from './general';\r\nimport { default as mouse } from './mouse';\r\nimport { default as polyfills } from './polyfills';\r\nimport { default as resize } from './resize';\r\nimport { default as shapes } from './shapes';\r\n\r\n\r\nexport default {\r\n  dataManipulation,\r\n  effects,\r\n  environment,\r\n  general,\r\n  mouse,\r\n  polyfills,\r\n  resize,\r\n  shapes,\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/utils/index.js\n **/","/*---------------------\r\n-------- PUBLIC -------\r\n----------------------*/\r\n/**\r\n * These are utils for manipulating the data, that our classes and functions use.\r\n *\r\n * @class utils.dataManipulation\r\n * @return {Object}      mapObjectsToArray, flattenArrayBy1Level\r\n */\r\n\r\n/**\r\n * Changes the data from e.g. getting objects from the map based on coordinate. The data is like this normally:\r\n * {\r\n *   units: [{\r\n *     {... the objects datas ...}\r\n *   }]\r\n * }\r\n * We change it to this:\r\n * [\r\n *   [{\r\n *     {... the objects datas ...}\r\n *   }]\r\n * ]\r\n *\r\n * @method mapObjectsToArray\r\n * @param  {Object} objects       Object that holds objects\r\n * @return {Array}                Returns the transformed array\r\n */\r\nfunction mapObjectsToArray(objects) {\r\n  return Object.keys(objects).map(objGroup => {\r\n    return objects[objGroup];\r\n  });\r\n}\r\n/**\r\n * @method flattenArrayBy1Level\r\n * @param  {Array} objects\r\n */\r\nfunction flattenArrayBy1Level(objects) {\r\n  const merged = [];\r\n\r\n  return merged.concat.apply(merged, objects);\r\n}\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default {\r\n  mapObjectsToArray,\r\n  flattenArrayBy1Level\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/utils/dataManipulation.js\n **/","/*---------------------\r\n-------- PUBLIC -------\r\n----------------------*/\r\n/**\r\n * This module will hold the most common graphical effects used in the map. It is still very stub as the development\r\n * hasn't proceeded to this stage yet.\r\n *\r\n * @class utils.effects\r\n * @return {Object}      init, _startDragListener\r\n */\r\n\r\n/**\r\n * @method dropShadow\r\n * @param  {Object} options\r\n */\r\nfunction dropShadow(/*options = { color: '#000000', distance: 5, alpha: 0.5, amgöe: 45, blur: 5 }*/) {\r\n    /*\r\n    var shadow  = new PIXI.filters.DropShadowFilter();\r\n\r\n    shadow.color  = options.color;\r\n    shadow.distance = options.distance;\r\n    shadow.alpha  = options.alpha;\r\n    shadow.angle  = options.angle;\r\n    shadow.blur   = options.blur;\r\n\r\n    this.filters = [shadow];\r\n    */\r\n}\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default {\r\n  dropShadow\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/utils/effects.js\n **/","/**\r\n * @class utils.environment\r\n * @return {Object}      getPixelRatio\r\n */\r\n\r\n/**\r\n * @method getPixelRatio\r\n * @requires Canvas element in the DOM. This needs to be found\r\n * @param  {HTMLElement} canvasElement       HTML canvas element\r\n * @return {Number}\r\n */\r\nfunction getPixelRatio(canvasElement) {\r\n  const DPR = window.devicePixelRatio || 1;\r\n  const ctx = (canvasElement && canvasElement.getContext('2d')) || document.createElement('canvas').getContext('2d');\r\n  const bsr = ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio ||\r\n            ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio ||\r\n            ctx.backingStorePixelRatio || 1;\r\n\r\n  return DPR / bsr;\r\n}\r\n\r\n/**\r\n * Detects wether webGL is supported or not\r\n *\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author author mr.doob / http://mrdoob.com/\r\n * From three.js: https://github.com/mrdoob/three.js/blob/master/examples/js/Detector.js\r\n */\r\nfunction isWebglSupported() {\r\n  try {\r\n    const canvas = document.createElement( 'canvas' );\r\n\r\n    return !! ( window.WebGLRenderingContext &&\r\n      ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) );\r\n  } catch ( e ) {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Detect if device supports touch events\r\n *\r\n * @method isMobile\r\n * @return {Boolean}\r\n */\r\nfunction isTouchDevice() {\r\n  if ('ontouchstart' in document.documentElement) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Detect mobile environment\r\n *\r\n * @method isMobile\r\n * @return {Boolean}\r\n */\r\nfunction isMobile() {\r\n  const screenSize = (screen.width <= 640) || (window.matchMedia && window.matchMedia('only screen and (max-width: 640px)').matches);\r\n  const features = ('ontouchstart' in window) || (navigator.maxTouchPoints > 0) || (navigator.msMaxTouchPoints > 0);\r\n\r\n  return features && screenSize;\r\n}\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default {\r\n  getPixelRatio,\r\n  isWebglSupported,\r\n  isTouchDevice,\r\n  isMobile\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/utils/environment.js\n **/","/**\r\n * @class utils.general\r\n * @return {Object}      pixelEpsilonEquality\r\n */\r\nconst PIXEL_EPSILON = 0.01;\r\n\r\n/**\r\n * @method epsilonEquality\r\n * @param  {Number} x\r\n * @param  {Number} y\r\n */\r\nfunction epsilonEquality(x, y) {\r\n  return (Math.abs(x) - Math.abs(y)) < PIXEL_EPSILON;\r\n}\r\n\r\n/**\r\n * Helper for creating required parameters\r\n *\r\n * @param {String} className Name of the function / class used\r\n * @param {String} paramName Name of the parameter that is required\r\n */\r\nfunction requireParameter(className, paramName) {\r\n  throw new Error(`Function '${className}' requires parameter ${paramName}`);\r\n}\r\n\r\n/**\r\n * Flattern 2 levels deep, 2-dimensional arrays. Credits: http://stackoverflow.com/a/15030117/1523545\r\n *\r\n * @method flatten2Levels\r\n * @param  {Array} arr        Array to flatten\r\n * @return {Array}            Flattened array\r\n */\r\nfunction flatten2Levels(arr) {\r\n  return [].concat(...arr);\r\n}\r\n/**\r\n * This function takes an array and slices it to proper chunks.\r\n *\r\n * @method chunkArray\r\n * @param {Array} array             The array to be chunked\r\n * @param {Integer} chunksize       size of the chunks\r\n * from: http://stackoverflow.com/a/34847417/1523545\r\n */\r\nfunction chunkArray(array, chunkSize) {\r\n  const result = [];\r\n\r\n  for (let i = 0; i < array.length; i += chunkSize) {\r\n    result.push(array.slice(i, chunkSize + i));\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default {\r\n  pixelEpsilonEquality: epsilonEquality,\r\n  requireParameter,\r\n  flatten2Levels,\r\n  chunkArray\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/utils/general.js\n **/","import * as PIXI from 'pixi.js';\r\n\r\n/**\r\n * @class utils.mouse\r\n * @return {Object}      isRightClick, eventData.getPointerCoords, eventData.getHAMMERPointerCoords, eventMouseCoords\r\n */\r\n\r\n/**\r\n * Detects if the mouse click has been the right mouse button\r\n *\r\n * @method isRightClick\r\n * @param {Event} e   The event where the click occured\r\n */\r\nfunction isRightClick(e) {\r\n  return e.which === 3;\r\n}\r\n/**\r\n * Disabled the right click (or something else in mobile) context menu from appearing\r\n */\r\nfunction disableContextMenu(canvas) {\r\n  canvas.addEventListener('contextmenu', (e) => {\r\n    e.preventDefault();\r\n  });\r\n}\r\n/**\r\n * @method getPointerCoords\r\n * @param  {Event} e    Event object\r\n * @return {Object}\r\n */\r\nfunction getPointerCoords(e) {\r\n  return new PIXI.Point(e.offsetX, e.offsetY);\r\n}\r\n/**\r\n * @method getHAMMERPointerCoords\r\n * @param  {Event} e    Event object\r\n * @return {Object}\r\n */\r\nfunction getHAMMERPointerCoords(e) {\r\n  return new PIXI.Point(e.center.x, e.center.y);\r\n}\r\n\r\n\r\nfunction getGlobalCoordinates(e, isSupportedTouch) {\r\n  return isSupportedTouch ? getHAMMERPointerCoords(e) : getPointerCoords(e);\r\n}\r\n/**\r\n * Transform coordinates that are in the window to become relative with the given element\r\n *\r\n * @param  {[type]} coordinates [description]\r\n * @param  {[type]} element     [description]\r\n * @return {[type]}             [description]\r\n */\r\nfunction coordinatesFromGlobalToRelative(coordinates, element) {\r\n  const elementPosition = getElementPositionInWindow(element);\r\n\r\n  return {\r\n    x: coordinates.x - elementPosition.x,\r\n    y: coordinates.y - elementPosition.y\r\n  };\r\n}\r\n/**\r\n * Gets given elements position relative to window\r\n *\r\n * @param  {[type]} el [description]\r\n * @return {[type]}    [description]\r\n */\r\nfunction getElementPositionInWindow(el) {\r\n  let xPos = 0;\r\n  let yPos = 0;\r\n\r\n  while (el) {\r\n    if (el.tagName.toLowerCase() === 'body') {\r\n      // deal with browser quirks with body/window/document and page scroll\r\n      const xScroll = el.scrollLeft || document.documentElement.scrollLeft;\r\n      const yScroll = el.scrollTop || document.documentElement.scrollTop;\r\n\r\n      xPos += (el.offsetLeft - xScroll + el.clientLeft);\r\n      yPos += (el.offsetTop - yScroll + el.clientTop);\r\n    } else {\r\n      // for all other non-BODY elements\r\n      xPos += (el.offsetLeft - el.scrollLeft + el.clientLeft);\r\n      yPos += (el.offsetTop - el.scrollTop + el.clientTop);\r\n    }\r\n\r\n    el = el.offsetParent;\r\n  }\r\n  return {\r\n    x: xPos,\r\n    y: yPos\r\n  };\r\n}\r\n\r\n/**\r\n * @method eventMouseCoords\r\n * @param  {Event} e    Event object\r\n * @return {Object}\r\n */\r\nfunction eventMouseCoords(e) {\r\n  const pos = {\r\n    x: 0,\r\n    y: 0\r\n  };\r\n\r\n  if (!e) {\r\n    e = window.event;\r\n  }\r\n  if (e.pageX || e.pageY) {\r\n    pos.x = e.pageX;\r\n    pos.y = e.pageY;\r\n  } else if (e.clientX || e.clientY) {\r\n    pos.x = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n    pos.y = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n  }\r\n  // posx and posy contain the mouse position relative to the document\r\n  // Do something with this information\r\n  return pos;\r\n}\r\n\r\n/**\r\n * Deactivate the selection of text, by dragging\r\n *\r\n * @method toggleMouseTextSelection\r\n */\r\nfunction toggleMouseTextSelection(element = document.getElementsByTagName('body')[0]) {\r\n  element.style.webkitTouchCallout = 'none';\r\n  element.style.webkitUserSelect = 'none';\r\n  element.style.khtmlUserSelect = 'none';\r\n  element.style.mozUserSelect = 'none';\r\n  element.style.msUserSelect = 'none';\r\n  element.style.userSelect = 'none';\r\n}\r\n\r\nexport default {\r\n  isRightClick,\r\n  disableContextMenu,\r\n  eventData: {\r\n    getPointerCoords,\r\n    getHAMMERPointerCoords,\r\n    getGlobalCoordinates\r\n  },\r\n  coordinatesFromGlobalToRelative,\r\n  eventMouseCoords,\r\n  toggleMouseTextSelection\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/utils/mouse.js\n **/","/*!\n * pixi.js - v4.1.0\n * Compiled Tue Oct 18 2016 23:32:22 GMT-0700 (Pacific Daylight Time)\n *\n * pixi.js is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\n!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var e;e=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,e.PIXI=t()}}(function(){var t;return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u=\"function\"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var h=new Error(\"Cannot find module '\"+s+\"'\");throw h.code=\"MODULE_NOT_FOUND\",h}var l=r[s]={exports:{}};e[s][0].call(l.exports,function(t){var r=e[s][1][t];return i(r?r:t)},l,l.exports,t,e,r,n)}return r[s].exports}for(var o=\"function\"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){\"use strict\";\"use restrict\";function n(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}var i=32;r.INT_BITS=i,r.INT_MAX=2147483647,r.INT_MIN=-1<<i-1,r.sign=function(t){return(t>0)-(t<0)},r.abs=function(t){var e=t>>i-1;return(t^e)-e},r.min=function(t,e){return e^(t^e)&-(t<e)},r.max=function(t,e){return t^(t^e)&-(t<e)},r.isPow2=function(t){return!(t&t-1||!t)},r.log2=function(t){var e,r;return e=(t>65535)<<4,t>>>=e,r=(t>255)<<3,t>>>=r,e|=r,r=(t>15)<<2,t>>>=r,e|=r,r=(t>3)<<1,t>>>=r,e|=r,e|t>>1},r.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},r.popCount=function(t){return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24},r.countTrailingZeros=n,r.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},r.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},r.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,27030>>>t&1};var o=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=n<<i&255}}(o),r.reverse=function(t){return o[255&t]<<24|o[t>>>8&255]<<16|o[t>>>16&255]<<8|o[t>>>24&255]},r.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},r.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),t=65535&(t|t>>>16),t<<16>>16},r.interleave3=function(t,e,r){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),t|r<<2},r.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),t=1023&(t|t>>>16),t<<22>>22},r.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},{}],2:[function(t,e,r){\"use strict\";function n(t,e,r){r=r||2;var n=e&&e.length,o=n?e[0]*r:t.length,a=i(t,0,o,r,!0),u=[];if(!a)return u;var h,l,f,d,p,v,y;if(n&&(a=c(t,e,a,r)),t.length>80*r){h=f=t[0],l=d=t[1];for(var g=r;g<o;g+=r)p=t[g],v=t[g+1],p<h&&(h=p),v<l&&(l=v),p>f&&(f=p),v>d&&(d=v);y=Math.max(f-h,d-l)}return s(a,u,r,h,l,y),u}function i(t,e,r,n,i){var o,s;if(i===D(t,e,r,n)>0)for(o=e;o<r;o+=n)s=P(o,t[o],t[o+1],s);else for(o=r-n;o>=e;o-=n)s=P(o,t[o],t[o+1],s);return s&&T(s,s.next)&&(C(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var r,n=t;do if(r=!1,n.steiner||!T(n,n.next)&&0!==x(n.prev,n,n.next))n=n.next;else{if(C(n),n=e=n.prev,n===n.next)return null;r=!0}while(r||n!==e);return e}function s(t,e,r,n,i,c,f){if(t){!f&&c&&v(t,n,i,c);for(var d,p,y=t;t.prev!==t.next;)if(d=t.prev,p=t.next,c?u(t,n,i,c):a(t))e.push(d.i/r),e.push(t.i/r),e.push(p.i/r),C(t),t=p.next,y=p.next;else if(t=p,t===y){f?1===f?(t=h(t,e,r),s(t,e,r,n,i,c,2)):2===f&&l(t,e,r,n,i,c):s(o(t),e,r,n,i,c,1);break}}}function a(t){var e=t.prev,r=t,n=t.next;if(x(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(_(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&x(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,r,n){var i=t.prev,o=t,s=t.next;if(x(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,h=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,l=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,c=g(a,u,e,r,n),f=g(h,l,e,r,n),d=t.nextZ;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&_(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&x(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=t.prevZ;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&_(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&x(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function h(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!T(i,o)&&w(i,n,n.next,o)&&S(i,o)&&S(o,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(o.i/r),C(n),C(n.next),n=t=o),n=n.next}while(n!==t);return n}function l(t,e,r,n,i,a){var u=t;do{for(var h=u.next.next;h!==u.prev;){if(u.i!==h.i&&b(u,h)){var l=M(u,h);return u=o(u,u.next),l=o(l,l.next),s(u,e,r,n,i,a),void s(l,e,r,n,i,a)}h=h.next}u=u.next}while(u!==t)}function c(t,e,r,n){var s,a,u,h,l,c=[];for(s=0,a=e.length;s<a;s++)u=e[s]*n,h=s<a-1?e[s+1]*n:t.length,l=i(t,u,h,n,!1),l===l.next&&(l.steiner=!0),c.push(m(l));for(c.sort(f),s=0;s<c.length;s++)d(c[s],r),r=o(r,r.next);return r}function f(t,e){return t.x-e.x}function d(t,e){if(e=p(t,e)){var r=M(e,t);o(r,r.next)}}function p(t,e){var r,n=e,i=t.x,o=t.y,s=-(1/0);do{if(o<=n.y&&o>=n.next.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>s){if(s=a,a===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===s)return r.prev;var u,h=r,l=r.x,c=r.y,f=1/0;for(n=r.next;n!==h;)i>=n.x&&n.x>=l&&_(o<c?i:s,o,l,c,o<c?s:i,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(i-n.x),(u<f||u===f&&n.x>r.x)&&S(n,t)&&(r=n,f=u)),n=n.next;return r}function v(t,e,r,n){var i=t;do null===i.z&&(i.z=g(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,y(i)}function y(t){var e,r,n,i,o,s,a,u,h=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,n=r,a=0,e=0;e<h&&(a++,n=n.nextZ,n);e++);for(u=h;a>0||u>0&&n;)0===a?(i=n,n=n.nextZ,u--):0!==u&&n?r.z<=n.z?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,u--):(i=r,r=r.nextZ,a--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,h*=2}while(s>1);return t}function g(t,e,r,n,i){return t=32767*(t-r)/i,e=32767*(e-n)/i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function m(t){var e=t,r=t;do e.x<r.x&&(r=e),e=e.next;while(e!==t);return r}function _(t,e,r,n,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(n-a)-(r-s)*(e-a)>=0&&(r-s)*(o-a)-(i-s)*(n-a)>=0}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!E(t,e)&&S(t,e)&&S(e,t)&&O(t,e)}function x(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function T(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,r,n){return!!(T(t,e)&&T(r,n)||T(t,n)&&T(r,e))||x(t,e,r)>0!=x(t,e,n)>0&&x(r,n,t)>0!=x(r,n,e)>0}function E(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&w(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function S(t,e){return x(t.prev,t,t.next)<0?x(t,e,t.next)>=0&&x(t,t.prev,e)>=0:x(t,e,t.prev)<0||x(t,t.next,e)<0}function O(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do r.y>o!=r.next.y>o&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function M(t,e){var r=new R(t.i,t.x,t.y),n=new R(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function P(t,e,r,n){var i=new R(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function C(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function R(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function D(t,e,r,n){for(var i=0,o=e,s=r-n;o<r;o+=n)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}e.exports=n,n.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,s=Math.abs(D(t,0,o,r));if(i)for(var a=0,u=e.length;a<u;a++){var h=e[a]*r,l=a<u-1?e[a+1]*r:t.length;s-=Math.abs(D(t,h,l,r))}var c=0;for(a=0;a<n.length;a+=3){var f=n[a]*r,d=n[a+1]*r,p=n[a+2]*r;c+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},n.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r}},{}],3:[function(t,e,r){\"use strict\";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(){this._events=new n,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,a=\"~\";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(a=!1)),o.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)s.call(t,e)&&r.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},o.prototype.listeners=function(t,e){var r=a?a+t:t,n=this._events[r];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},o.prototype.emit=function(t,e,r,n,i,o){var s=a?a+t:t;if(!this._events[s])return!1;var u,h,l=this._events[s],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,n),!0;case 5:return l.fn.call(l.context,e,r,n,i),!0;case 6:return l.fn.call(l.context,e,r,n,i,o),!0}for(h=1,u=new Array(c-1);h<c;h++)u[h-1]=arguments[h];l.fn.apply(l.context,u)}else{var f,d=l.length;for(h=0;h<d;h++)switch(l[h].once&&this.removeListener(t,l[h].fn,void 0,!0),c){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,e);break;case 3:l[h].fn.call(l[h].context,e,r);break;case 4:l[h].fn.call(l[h].context,e,r,n);break;default:if(!u)for(f=1,u=new Array(c-1);f<c;f++)u[f-1]=arguments[f];l[h].fn.apply(l[h].context,u)}}return!0},o.prototype.on=function(t,e,r){var n=new i(e,r||this),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},o.prototype.once=function(t,e,r){var n=new i(e,r||this,(!0)),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},o.prototype.removeListener=function(t,e,r,i){var o=a?a+t:t;if(!this._events[o])return this;if(!e)return 0===--this._eventsCount?this._events=new n:delete this._events[o],this;var s=this._events[o];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||(0===--this._eventsCount?this._events=new n:delete this._events[o]);else{for(var u=0,h=[],l=s.length;u<l;u++)(s[u].fn!==e||i&&!s[u].once||r&&s[u].context!==r)&&h.push(s[u]);h.length?this._events[o]=1===h.length?h[0]:h:0===--this._eventsCount?this._events=new n:delete this._events[o]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&(0===--this._eventsCount?this._events=new n:delete this._events[e])):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=a,o.EventEmitter=o,\"undefined\"!=typeof e&&(e.exports=o)},{}],4:[function(e,r,n){!function(e){var n=/iPhone/i,i=/iPod/i,o=/iPad/i,s=/(?=.*\\bAndroid\\b)(?=.*\\bMobile\\b)/i,a=/Android/i,u=/(?=.*\\bAndroid\\b)(?=.*\\bSD4930UR\\b)/i,h=/(?=.*\\bAndroid\\b)(?=.*\\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\\b)/i,l=/IEMobile/i,c=/(?=.*\\bWindows\\b)(?=.*\\bARM\\b)/i,f=/BlackBerry/i,d=/BB10/i,p=/Opera Mini/i,v=/(CriOS|Chrome)(?=.*\\bMobile\\b)/i,y=/(?=.*\\bFirefox\\b)(?=.*\\bMobile\\b)/i,g=new RegExp(\"(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)\",\"i\"),m=function(t,e){return t.test(e)},_=function(t){var e=t||navigator.userAgent,r=e.split(\"[FBAN\");if(\"undefined\"!=typeof r[1]&&(e=r[0]),r=e.split(\"Twitter\"),\"undefined\"!=typeof r[1]&&(e=r[0]),this.apple={phone:m(n,e),ipod:m(i,e),tablet:!m(n,e)&&m(o,e),device:m(n,e)||m(i,e)||m(o,e)},this.amazon={phone:m(u,e),tablet:!m(u,e)&&m(h,e),device:m(u,e)||m(h,e)},this.android={phone:m(u,e)||m(s,e),tablet:!m(u,e)&&!m(s,e)&&(m(h,e)||m(a,e)),device:m(u,e)||m(h,e)||m(s,e)||m(a,e)},this.windows={phone:m(l,e),tablet:m(c,e),device:m(l,e)||m(c,e)},this.other={blackberry:m(f,e),blackberry10:m(d,e),opera:m(p,e),firefox:m(y,e),chrome:m(v,e),device:m(f,e)||m(d,e)||m(p,e)||m(y,e)||m(v,e)},this.seven_inch=m(g,e),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,\"undefined\"==typeof window)return this},b=function(){var t=new _;return t.Class=_,t};\"undefined\"!=typeof r&&r.exports&&\"undefined\"==typeof window?r.exports=_:\"undefined\"!=typeof r&&r.exports&&\"undefined\"!=typeof window?r.exports=b():\"function\"==typeof t&&t.amd?t(\"isMobile\",[],e.isMobile=b()):e.isMobile=b()}(this)},{}],5:[function(t,e,r){\"use strict\";function n(t){if(null===t||void 0===t)throw new TypeError(\"Object.assign cannot be called with null or undefined\");return Object(t)}function i(){try{if(!Object.assign)return!1;var t=new String(\"abc\");if(t[5]=\"de\",\"5\"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e[\"_\"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if(\"0123456789\"!==n.join(\"\"))return!1;var i={};return\"abcdefghijklmnopqrst\".split(\"\").forEach(function(t){i[t]=t}),\"abcdefghijklmnopqrst\"===Object.keys(Object.assign({},i)).join(\"\")}catch(t){return!1}}var o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=i()?Object.assign:function(t,e){for(var r,i,a=n(t),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var h in r)o.call(r,h)&&(a[h]=r[h]);if(Object.getOwnPropertySymbols){i=Object.getOwnPropertySymbols(r);for(var l=0;l<i.length;l++)s.call(r,i[l])&&(a[i[l]]=r[i[l]])}}return a}},{}],6:[function(t,e,r){\"use strict\";e.exports=function(t,e){e=e||{};for(var r={key:[\"source\",\"protocol\",\"authority\",\"userInfo\",\"user\",\"password\",\"host\",\"port\",\"relative\",\"path\",\"directory\",\"file\",\"query\",\"anchor\"],q:{name:\"queryKey\",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/}},n=r.parser[e.strictMode?\"strict\":\"loose\"].exec(t),i={},o=14;o--;)i[r.key[o]]=n[o]||\"\";return i[r.q.name]={},i[r.key[12]].replace(r.q.parser,function(t,e,n){e&&(i[r.q.name][e]=n)}),i}},{}],7:[function(t,e,r){(function(t){function e(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];\".\"===i?t.splice(n,1):\"..\"===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift(\"..\");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var i=/^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/,o=function(t){return i.exec(t).slice(1)};r.resolve=function(){for(var r=\"\",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:t.cwd();if(\"string\"!=typeof s)throw new TypeError(\"Arguments to path.resolve must be strings\");s&&(r=s+\"/\"+r,i=\"/\"===s.charAt(0))}return r=e(n(r.split(\"/\"),function(t){return!!t}),!i).join(\"/\"),(i?\"/\":\"\")+r||\".\"},r.normalize=function(t){var i=r.isAbsolute(t),o=\"/\"===s(t,-1);return t=e(n(t.split(\"/\"),function(t){return!!t}),!i).join(\"/\"),t||i||(t=\".\"),t&&o&&(t+=\"/\"),(i?\"/\":\"\")+t},r.isAbsolute=function(t){return\"/\"===t.charAt(0)},r.join=function(){var t=Array.prototype.slice.call(arguments,0);return r.normalize(n(t,function(t,e){if(\"string\"!=typeof t)throw new TypeError(\"Arguments to path.join must be strings\");return t}).join(\"/\"))},r.relative=function(t,e){function n(t){for(var e=0;e<t.length&&\"\"===t[e];e++);for(var r=t.length-1;r>=0&&\"\"===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=r.resolve(t).substr(1),e=r.resolve(e).substr(1);for(var i=n(t.split(\"/\")),o=n(e.split(\"/\")),s=Math.min(i.length,o.length),a=s,u=0;u<s;u++)if(i[u]!==o[u]){a=u;break}for(var h=[],u=a;u<i.length;u++)h.push(\"..\");return h=h.concat(o.slice(a)),h.join(\"/\")},r.sep=\"/\",r.delimiter=\":\",r.dirname=function(t){var e=o(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):\".\"},r.basename=function(t,e){var r=o(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},r.extname=function(t){return o(t)[3]};var s=\"b\"===\"ab\".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,t(\"_process\"))},{_process:24}],8:[function(t,e,r){var n=new ArrayBuffer(0),i=function(t,e,r,i){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=i||t.STATIC_DRAW,this.data=n,r&&this.upload(r)};i.prototype.upload=function(t,e,r){r||this.bind();var n=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?n.bufferSubData(this.type,e,t):n.bufferData(this.type,t,this.drawType),this.data=t},i.prototype.bind=function(){var t=this.gl;t.bindBuffer(this.type,this.buffer)},i.createVertexBuffer=function(t,e,r){return new i(t,t.ARRAY_BUFFER,e,r)},i.createIndexBuffer=function(t,e,r){return new i(t,t.ELEMENT_ARRAY_BUFFER,e,r)},i.create=function(t,e,r,n){return new i(t,e,n)},i.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=i},{}],9:[function(t,e,r){var n=t(\"./GLTexture\"),i=function(t,e,r){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=r||100};i.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new n(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},i.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},i.prototype.clear=function(t,e,r,n){this.bind();var i=this.gl;i.clearColor(t,e,r,n),i.clear(i.COLOR_BUFFER_BIT)},i.prototype.bind=function(){var t=this.gl;this.texture&&this.texture.unbind(),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},i.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},i.prototype.resize=function(t,e){var r=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t,e))},i.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},i.createRGBA=function(t,e,r){var o=n.fromData(t,null,e,r);o.enableNearestScaling(),o.enableWrapClamp();var s=new i(t,e,r);return s.enableTexture(o),s.unbind(),s},i.createFloat32=function(t,e,r,o){var s=new n.fromData(t,o,e,r);s.enableNearestScaling(),s.enableWrapClamp();var a=new i(t,e,r);return a.enableTexture(s),a.unbind(),a},e.exports=i},{\"./GLTexture\":11}],10:[function(t,e,r){var n=t(\"./shader/compileProgram\"),i=t(\"./shader/extractAttributes\"),o=t(\"./shader/extractUniforms\"),s=t(\"./shader/generateUniformAccessObject\"),a=function(t,e,r){this.gl=t,this.program=n(t,e,r),this.attributes=i(t,this.program);var a=o(t,this.program);this.uniforms=s(t,a)};a.prototype.bind=function(){this.gl.useProgram(this.program)},a.prototype.destroy=function(){},e.exports=a},{\"./shader/compileProgram\":16,\"./shader/extractAttributes\":18,\"./shader/extractUniforms\":19,\"./shader/generateUniformAccessObject\":20}],11:[function(t,e,r){var n=function(t,e,r,n,i){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||0,this.height=r||0,this.format=n||t.RGBA,this.type=i||t.UNSIGNED_BYTE};n.prototype.upload=function(t){this.bind();var e=this.gl;this.width=t.videoWidth||t.width,this.height=t.videoHeight||t.height,e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t)};var i=!1;n.prototype.uploadData=function(t,e,r){this.bind();var n=this.gl;if(this.width=e||this.width,this.height=r||this.height,t instanceof Float32Array){if(!i){var o=n.getExtension(\"OES_texture_float\");if(!o)throw new Error(\"floating point textures not available\");i=!0}this.type=n.FLOAT}else this.type=n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),n.texImage2D(n.TEXTURE_2D,0,this.format,this.width,this.height,0,this.format,this.type,t||null)},n.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},n.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},n.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},n.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},n.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},n.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},n.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},n.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},n.prototype.destroy=function(){var t=this.gl;t.deleteTexture(this.texture)},n.fromSource=function(t,e,r){var i=new n(t);return i.premultiplyAlpha=r||!1,i.upload(e),i},n.fromData=function(t,e,r,i){var o=new n(t);return o.uploadData(e,r,i),o},e.exports=n},{}],12:[function(t,e,r){function n(t,e){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension(\"OES_vertex_array_object\")||t.getExtension(\"MOZ_OES_vertex_array_object\")||t.getExtension(\"WEBKIT_OES_vertex_array_object\")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var r=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(r),attribState:new Array(r)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var i=t(\"./setVertexAttribArrays\");n.prototype.constructor=n,e.exports=n,n.FORCE_NATIVE=!1,n.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var t=this.gl,e=null,r=0;r<this.attributes.length;r++){var n=this.attributes[r];e!==n.buffer&&(n.buffer.bind(),e=n.buffer),t.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||t.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return i(t,this.attributes,this.nativeState),this.indexBuffer.bind(),this},n.prototype.addAttribute=function(t,e,r,n,i,o){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:r||this.gl.FLOAT,normalized:n||!1,stride:i||0,start:o||0}),this.dirty=!0,this},n.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(t,e,r){var n=this.gl;return n.drawElements(t,e,n.UNSIGNED_SHORT,r||0),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null}},{\"./setVertexAttribArrays\":15}],13:[function(t,e,r){var n=function(t,e){var r=t.getContext(\"webgl\",e)||t.getContext(\"experimental-webgl\",e);if(!r)throw new Error(\"This browser does not support webGL. Try using the canvas renderer\");return r};e.exports=n},{}],14:[function(t,e,r){var n={createContext:t(\"./createContext\"),setVertexAttribArrays:t(\"./setVertexAttribArrays\"),GLBuffer:t(\"./GLBuffer\"),GLFramebuffer:t(\"./GLFramebuffer\"),GLShader:t(\"./GLShader\"),GLTexture:t(\"./GLTexture\"),VertexArrayObject:t(\"./VertexArrayObject\"),shader:t(\"./shader\")};\"undefined\"!=typeof e&&e.exports&&(e.exports=n),\"undefined\"!=typeof window&&(window.pixi={gl:n})},{\"./GLBuffer\":8,\"./GLFramebuffer\":9,\"./GLShader\":10,\"./GLTexture\":11,\"./VertexArrayObject\":12,\"./createContext\":13,\"./setVertexAttribArrays\":15,\"./shader\":21}],15:[function(t,e,r){var n=function(t,e,r){var n;if(r){var i=r.tempAttribState,o=r.attribState;for(n=0;n<i.length;n++)i[n]=!1;for(n=0;n<e.length;n++)i[e[n].attribute.location]=!0;for(n=0;n<o.length;n++)o[n]!==i[n]&&(o[n]=i[n],r.attribState[n]?t.enableVertexAttribArray(n):t.disableVertexAttribArray(n))}else for(n=0;n<e.length;n++){var s=e[n];t.enableVertexAttribArray(s.attribute.location)}};e.exports=n},{}],16:[function(t,e,r){var n=function(t,e,r){var n=i(t,t.VERTEX_SHADER,e),o=i(t,t.FRAGMENT_SHADER,r),s=t.createProgram();return t.attachShader(s,n),t.attachShader(s,o),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(console.error(\"Pixi.js Error: Could not initialize shader.\"),console.error(\"gl.VALIDATE_STATUS\",t.getProgramParameter(s,t.VALIDATE_STATUS)),console.error(\"gl.getError()\",t.getError()),\"\"!==t.getProgramInfoLog(s)&&console.warn(\"Pixi.js Warning: gl.getProgramInfoLog()\",t.getProgramInfoLog(s)),t.deleteProgram(s),s=null),t.deleteShader(n),t.deleteShader(o),s},i=function(t,e,r){var n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.log(t.getShaderInfoLog(n)),null)};e.exports=n},{}],17:[function(t,e,r){var n=function(t,e){switch(t){case\"float\":return 0;case\"vec2\":return new Float32Array(2*e);case\"vec3\":return new Float32Array(3*e);case\"vec4\":return new Float32Array(4*e);case\"int\":case\"sampler2D\":return 0;case\"ivec2\":return new Int32Array(2*e);case\"ivec3\":return new Int32Array(3*e);case\"ivec4\":return new Int32Array(4*e);case\"bool\":return!1;case\"bvec2\":return i(2*e);case\"bvec3\":return i(3*e);case\"bvec4\":return i(4*e);case\"mat2\":return new Float32Array([1,0,0,1]);case\"mat3\":return new Float32Array([1,0,0,0,1,0,0,0,1]);case\"mat4\":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},i=function(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e};e.exports=n},{}],18:[function(t,e,r){var n=t(\"./mapType\"),i=t(\"./mapSize\"),o=function(t,e){for(var r={},o=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<o;a++){var u=t.getActiveAttrib(e,a),h=n(t,u.type);r[u.name]={type:h,size:i(h),location:t.getAttribLocation(e,u.name),pointer:s}}return r},s=function(t,e,r,n){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,r||0,n||0)};e.exports=o},{\"./mapSize\":22,\"./mapType\":23}],19:[function(t,e,r){var n=t(\"./mapType\"),i=t(\"./defaultValue\"),o=function(t,e){for(var r={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),s=0;s<o;s++){var a=t.getActiveUniform(e,s),u=a.name.replace(/\\[.*?\\]/,\"\"),h=n(t,a.type);r[u]={type:h,size:a.size,location:t.getUniformLocation(e,u),value:i(h,a.size)}}return r};e.exports=o},{\"./defaultValue\":17,\"./mapType\":23}],20:[function(t,e,r){var n=function(t,e){var r={data:{}};r.gl=t;for(var n=Object.keys(e),a=0;a<n.length;a++){var u=n[a],h=u.split(\".\"),l=h[h.length-1],c=s(h,r),f=e[u];c.data[l]=f,c.gl=t,Object.defineProperty(c,l,{get:i(l),set:o(l,f)})}return r},i=function(t){var e=a.replace(\"%%\",t);return new Function(e)},o=function(t,e){var r,n=u.replace(/%%/g,t);return r=1===e.size?h[e.type]:l[e.type],r&&(n+=\"\\nthis.gl.\"+r+\";\"),new Function(\"value\",n)},s=function(t,e){for(var r=e,n=0;n<t.length-1;n++){var i=r[t[n]]||{data:{}};r[t[n]]=i,r=i}return r},a=[\"return this.data.%%.value;\"].join(\"\\n\"),u=[\"this.data.%%.value = value;\",\"var location = this.data.%%.location;\"].join(\"\\n\"),h={float:\"uniform1f(location, value)\",vec2:\"uniform2f(location, value[0], value[1])\",vec3:\"uniform3f(location, value[0], value[1], value[2])\",vec4:\"uniform4f(location, value[0], value[1], value[2], value[3])\",int:\"uniform1i(location, value)\",ivec2:\"uniform2i(location, value[0], value[1])\",ivec3:\"uniform3i(location, value[0], value[1], value[2])\",ivec4:\"uniform4i(location, value[0], value[1], value[2], value[3])\",bool:\"uniform1i(location, value)\",bvec2:\"uniform2i(location, value[0], value[1])\",bvec3:\"uniform3i(location, value[0], value[1], value[2])\",bvec4:\"uniform4i(location, value[0], value[1], value[2], value[3])\",mat2:\"uniformMatrix2fv(location, false, value)\",mat3:\"uniformMatrix3fv(location, false, value)\",mat4:\"uniformMatrix4fv(location, false, value)\",sampler2D:\"uniform1i(location, value)\"},l={float:\"uniform1fv(location, value)\",vec2:\"uniform2fv(location, value)\",vec3:\"uniform3fv(location, value)\",vec4:\"uniform4fv(location, value)\",int:\"uniform1iv(location, value)\",ivec2:\"uniform2iv(location, value)\",ivec3:\"uniform3iv(location, value)\",ivec4:\"uniform4iv(location, value)\",bool:\"uniform1iv(location, value)\",bvec2:\"uniform2iv(location, value)\",bvec3:\"uniform3iv(location, value)\",bvec4:\"uniform4iv(location, value)\",sampler2D:\"uniform1iv(location, value)\"};e.exports=n},{}],21:[function(t,e,r){e.exports={compileProgram:t(\"./compileProgram\"),defaultValue:t(\"./defaultValue\"),extractAttributes:t(\"./extractAttributes\"),extractUniforms:t(\"./extractUniforms\"),generateUniformAccessObject:t(\"./generateUniformAccessObject\"),mapSize:t(\"./mapSize\"),mapType:t(\"./mapType\")}},{\"./compileProgram\":16,\"./defaultValue\":17,\"./extractAttributes\":18,\"./extractUniforms\":19,\"./generateUniformAccessObject\":20,\"./mapSize\":22,\"./mapType\":23}],22:[function(t,e,r){var n=function(t){return i[t]},i={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=n},{}],23:[function(t,e,r){var n=function(t,e){if(!i){var r=Object.keys(o);i={};for(var n=0;n<r.length;++n){var s=r[n];i[t[s]]=o[s]}}return i[e]},i=null,o={FLOAT:\"float\",FLOAT_VEC2:\"vec2\",FLOAT_VEC3:\"vec3\",FLOAT_VEC4:\"vec4\",INT:\"int\",INT_VEC2:\"ivec2\",INT_VEC3:\"ivec3\",INT_VEC4:\"ivec4\",BOOL:\"bool\",BOOL_VEC2:\"bvec2\",BOOL_VEC3:\"bvec3\",BOOL_VEC4:\"bvec4\",FLOAT_MAT2:\"mat2\",FLOAT_MAT3:\"mat3\",FLOAT_MAT4:\"mat4\",SAMPLER_2D:\"sampler2D\"};e.exports=n},{}],24:[function(t,e,r){function n(){throw new Error(\"setTimeout has not been defined\")}function i(){throw new Error(\"clearTimeout has not been defined\")}function o(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){\ntry{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function s(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){y&&p&&(y=!1,p.length?v=p.concat(v):g=-1,v.length&&u())}function u(){if(!y){var t=o(a);y=!0;for(var e=v.length;e;){for(p=v,v=[];++g<e;)p&&p[g].run();g=-1,e=v.length}p=null,y=!1,s(t)}}function h(t,e){this.fun=t,this.array=e}function l(){}var c,f,d=e.exports={};!function(){try{c=\"function\"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{f=\"function\"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var p,v=[],y=!1,g=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];v.push(new h(t,e)),1!==v.length||y||o(u)},h.prototype.run=function(){this.fun.apply(null,this.array)},d.title=\"browser\",d.browser=!0,d.env={},d.argv=[],d.version=\"\",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.binding=function(t){throw new Error(\"process.binding is not supported\")},d.cwd=function(){return\"/\"},d.chdir=function(t){throw new Error(\"process.chdir is not supported\")},d.umask=function(){return 0}},{}],25:[function(e,r,n){(function(e){!function(i){function o(t){throw new RangeError(L[t])}function s(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function a(t,e){var r=t.split(\"@\"),n=\"\";r.length>1&&(n=r[0]+\"@\",t=r[1]),t=t.replace(I,\".\");var i=t.split(\".\"),o=s(i,e).join(\".\");return n+o}function u(t){for(var e,r,n=[],i=0,o=t.length;i<o;)e=t.charCodeAt(i++),e>=55296&&e<=56319&&i<o?(r=t.charCodeAt(i++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--)):n.push(e);return n}function h(t){return s(t,function(t){var e=\"\";return t>65535&&(t-=65536,e+=B(t>>>10&1023|55296),t=56320|1023&t),e+=B(t)}).join(\"\")}function l(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:w}function c(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function f(t,e,r){var n=0;for(t=r?F(t/M):t>>1,t+=F(t/e);t>j*S>>1;n+=w)t=F(t/j);return F(n+(j+1)*t/(t+O))}function d(t){var e,r,n,i,s,a,u,c,d,p,v=[],y=t.length,g=0,m=C,_=P;for(r=t.lastIndexOf(R),r<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&o(\"not-basic\"),v.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<y;){for(s=g,a=1,u=w;i>=y&&o(\"invalid-input\"),c=l(t.charCodeAt(i++)),(c>=w||c>F((T-g)/a))&&o(\"overflow\"),g+=c*a,d=u<=_?E:u>=_+S?S:u-_,!(c<d);u+=w)p=w-d,a>F(T/p)&&o(\"overflow\"),a*=p;e=v.length+1,_=f(g-s,e,0==s),F(g/e)>T-m&&o(\"overflow\"),m+=F(g/e),g%=e,v.splice(g++,0,m)}return h(v)}function p(t){var e,r,n,i,s,a,h,l,d,p,v,y,g,m,_,b=[];for(t=u(t),y=t.length,e=C,r=0,s=P,a=0;a<y;++a)v=t[a],v<128&&b.push(B(v));for(n=i=b.length,i&&b.push(R);n<y;){for(h=T,a=0;a<y;++a)v=t[a],v>=e&&v<h&&(h=v);for(g=n+1,h-e>F((T-r)/g)&&o(\"overflow\"),r+=(h-e)*g,e=h,a=0;a<y;++a)if(v=t[a],v<e&&++r>T&&o(\"overflow\"),v==e){for(l=r,d=w;p=d<=s?E:d>=s+S?S:d-s,!(l<p);d+=w)_=l-p,m=w-p,b.push(B(c(p+_%m,0))),l=F(_/m);b.push(B(c(l,0))),s=f(r,g,n==i),r=0,++n}++r,++e}return b.join(\"\")}function v(t){return a(t,function(t){return D.test(t)?d(t.slice(4).toLowerCase()):t})}function y(t){return a(t,function(t){return A.test(t)?\"xn--\"+p(t):t})}var g=\"object\"==typeof n&&n&&!n.nodeType&&n,m=\"object\"==typeof r&&r&&!r.nodeType&&r,_=\"object\"==typeof e&&e;_.global!==_&&_.window!==_&&_.self!==_||(i=_);var b,x,T=2147483647,w=36,E=1,S=26,O=38,M=700,P=72,C=128,R=\"-\",D=/^xn--/,A=/[^\\x20-\\x7E]/,I=/[\\x2E\\u3002\\uFF0E\\uFF61]/g,L={overflow:\"Overflow: input needs wider integers to process\",\"not-basic\":\"Illegal input >= 0x80 (not a basic code point)\",\"invalid-input\":\"Invalid input\"},j=w-E,F=Math.floor,B=String.fromCharCode;if(b={version:\"1.4.1\",ucs2:{decode:u,encode:h},decode:d,encode:p,toASCII:y,toUnicode:v},\"function\"==typeof t&&\"object\"==typeof t.amd&&t.amd)t(\"punycode\",function(){return b});else if(g&&m)if(r.exports==g)m.exports=b;else for(x in b)b.hasOwnProperty(x)&&(g[x]=b[x]);else i.punycode=b}(this)}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{}],26:[function(t,e,r){\"use strict\";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,r,o){e=e||\"&\",r=r||\"=\";var s={};if(\"string\"!=typeof t||0===t.length)return s;var a=/\\+/g;t=t.split(e);var u=1e3;o&&\"number\"==typeof o.maxKeys&&(u=o.maxKeys);var h=t.length;u>0&&h>u&&(h=u);for(var l=0;l<h;++l){var c,f,d,p,v=t[l].replace(a,\"%20\"),y=v.indexOf(r);y>=0?(c=v.substr(0,y),f=v.substr(y+1)):(c=v,f=\"\"),d=decodeURIComponent(c),p=decodeURIComponent(f),n(s,d)?i(s[d])?s[d].push(p):s[d]=[s[d],p]:s[d]=p}return s};var i=Array.isArray||function(t){return\"[object Array]\"===Object.prototype.toString.call(t)}},{}],27:[function(t,e,r){\"use strict\";function n(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var i=function(t){switch(typeof t){case\"string\":return t;case\"boolean\":return t?\"true\":\"false\";case\"number\":return isFinite(t)?t:\"\";default:return\"\"}};e.exports=function(t,e,r,a){return e=e||\"&\",r=r||\"=\",null===t&&(t=void 0),\"object\"==typeof t?n(s(t),function(s){var a=encodeURIComponent(i(s))+r;return o(t[s])?n(t[s],function(t){return a+encodeURIComponent(i(t))}).join(e):a+encodeURIComponent(i(t[s]))}).join(e):a?encodeURIComponent(i(a))+r+encodeURIComponent(i(t)):\"\"};var o=Array.isArray||function(t){return\"[object Array]\"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],28:[function(t,e,r){\"use strict\";r.decode=r.parse=t(\"./decode\"),r.encode=r.stringify=t(\"./encode\")},{\"./decode\":26,\"./encode\":27}],29:[function(t,e,r){\"use strict\";function n(t,e){a.call(this),e=e||u,this.baseUrl=t||\"\",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._buffer=[],this._numToLoad=0,this._queue=o.queue(this._boundLoadResource,e),this.resources={}}var i=t(\"parse-uri\"),o=t(\"./async\"),s=t(\"./Resource\"),a=t(\"eventemitter3\"),u=10,h=100;n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.add=n.prototype.enqueue=function(t,e,r,n){if(Array.isArray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if(\"object\"==typeof t&&(n=e||t.callback||t.onComplete,r=t,e=t.url,t=t.name||t.key||t.url),\"string\"!=typeof e&&(n=r,r=e,e=t),\"string\"!=typeof e)throw new Error(\"No url passed to add resource to loader.\");if(\"function\"==typeof r&&(n=r,r=null),this.resources[t])throw new Error('Resource with name \"'+t+'\" already exists.');return e=this._prepareUrl(e),this.resources[t]=new s(t,e,r),\"function\"==typeof n&&this.resources[t].once(\"afterMiddleware\",n),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[t]),this._progressChunk=(h-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[t]),this._progressChunk=h/this._buffer.length),this},n.prototype.before=n.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},n.prototype.after=n.prototype.use=function(t){return this._afterMiddleware.push(t),this},n.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1;for(var t in this.resources){var e=this.resources[t];e.off(\"complete\",this._onLoad,this),e.isLoading&&e.abort()}return this.resources={},this},n.prototype.load=function(t){if(\"function\"==typeof t&&this.once(\"complete\",t),this._queue.started)return this;this.emit(\"start\",this),this.loading=!0;for(var e=0;e<this._buffer.length;++e)this._queue.push(this._buffer[e]);return this._buffer.length=0,this},n.prototype._prepareUrl=function(t){var e=i(t,{strictMode:!0});return e.protocol||!e.path||0===e.path.indexOf(\"//\")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf(\"/\")!==this.baseUrl.length-1&&\"/\"!==t.charAt(0)?this.baseUrl+\"/\"+t:this.baseUrl+t},n.prototype._loadResource=function(t,e){var r=this;t._dequeue=e,o.eachSeries(this._beforeMiddleware,function(e,n){e.call(r,t,function(){n(t.isComplete?{}:null)})},function(){t.isComplete?r._onLoad(t):(t.once(\"complete\",r._onLoad,r),t.load())})},n.prototype._onComplete=function(){this.loading=!1,this.emit(\"complete\",this,this.resources)},n.prototype._onLoad=function(t){var e=this;o.eachSeries(this._afterMiddleware,function(r,n){r.call(e,t,n)},function(){t.emit(\"afterMiddleware\",t),e._numToLoad--,e.progress+=e._progressChunk,e.emit(\"progress\",e,t),t.error?e.emit(\"error\",t.error,e,t):e.emit(\"load\",e,t),0===e._numToLoad&&(e.progress=100,e._onComplete())}),t._dequeue()},n.LOAD_TYPE=s.LOAD_TYPE,n.XHR_RESPONSE_TYPE=s.XHR_RESPONSE_TYPE},{\"./Resource\":30,\"./async\":31,eventemitter3:3,\"parse-uri\":6}],30:[function(t,e,r){\"use strict\";function n(t,e,r){if(s.call(this),r=r||{},\"string\"!=typeof t||\"string\"!=typeof e)throw new Error(\"Both name and url are required for constructing a resource.\");this.name=t,this.url=e,this.isDataUrl=0===this.url.indexOf(\"data:\"),this.data=null,this.crossOrigin=r.crossOrigin===!0?\"anonymous\":r.crossOrigin,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this.isComplete=!1,this.isLoading=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function i(t){return t.toString().replace(\"object \",\"\")}function o(t,e,r){e&&0===e.indexOf(\".\")&&(e=e.substring(1)),e&&(t[e]=r)}var s=t(\"eventemitter3\"),a=t(\"parse-uri\"),u=!(!window.XDomainRequest||\"withCredentials\"in new XMLHttpRequest),h=null,l=0,c=200,f=204;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener(\"error\",this._boundOnError,!1),this.data.removeEventListener(\"load\",this._boundComplete,!1),this.data.removeEventListener(\"progress\",this._boundOnProgress,!1),this.data.removeEventListener(\"canplaythrough\",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener(\"error\",this._boundXhrOnError,!1),this.xhr.removeEventListener(\"abort\",this._boundXhrOnAbort,!1),this.xhr.removeEventListener(\"progress\",this._boundOnProgress,!1),this.xhr.removeEventListener(\"load\",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error(\"Complete called again for an already completed resource.\");this.isComplete=!0,this.isLoading=!1,this.emit(\"complete\",this)},n.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(\"undefined\"!=typeof this.data.src)this.data.src=\"\";else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},n.prototype.load=function(t){if(!this.isLoading)if(this.isComplete){if(t){var e=this;setTimeout(function(){t(e)},1)}}else switch(t&&this.once(\"complete\",t),this.isLoading=!0,this.emit(\"start\",this),this.crossOrigin!==!1&&\"string\"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case n.LOAD_TYPE.IMAGE:this._loadElement(\"image\");break;case n.LOAD_TYPE.AUDIO:this._loadSourceElement(\"audio\");break;case n.LOAD_TYPE.VIDEO:this._loadSourceElement(\"video\");break;case n.LOAD_TYPE.XHR:default:u&&this.crossOrigin?this._loadXdr():this._loadXhr()}},n.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:\"image\"===t&&\"undefined\"!=typeof window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url);var e=\"is\"+t[0].toUpperCase()+t.substring(1);this[e]===!1&&(this[e]=!0),this.data.addEventListener(\"error\",this._boundOnError,!1),this.data.addEventListener(\"load\",this._boundComplete,!1),this.data.addEventListener(\"progress\",this._boundOnProgress,!1)},n.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:\"audio\"===t&&\"undefined\"!=typeof window.Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)return void this.abort(\"Unsupported element \"+t);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(t,this.url[e]));else this.data.appendChild(this._createSource(t,this.url));this[\"is\"+t[0].toUpperCase()+t.substring(1)]=!0,this.data.addEventListener(\"error\",this._boundOnError,!1),this.data.addEventListener(\"load\",this._boundComplete,!1),this.data.addEventListener(\"progress\",this._boundOnProgress,!1),this.data.addEventListener(\"canplaythrough\",this._boundComplete,!1),this.data.load()},n.prototype._loadXhr=function(){\"string\"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open(\"GET\",this.url,!0),this.xhrType===n.XHR_RESPONSE_TYPE.JSON||this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=n.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener(\"error\",this._boundXhrOnError,!1),t.addEventListener(\"abort\",this._boundXhrOnAbort,!1),t.addEventListener(\"progress\",this._boundOnProgress,!1),t.addEventListener(\"load\",this._boundXhrOnLoad,!1),t.send()},n.prototype._loadXdr=function(){\"string\"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open(\"GET\",this.url,!0),setTimeout(function(){t.send()},0)},n.prototype._createSource=function(t,e,r){r||(r=t+\"/\"+e.substr(e.lastIndexOf(\".\")+1));var n=document.createElement(\"source\");return n.src=e,n.type=r,n},n.prototype._onError=function(t){this.abort(\"Failed to load element using \"+t.target.nodeName)},n.prototype._onProgress=function(t){t&&t.lengthComputable&&this.emit(\"progress\",this,t.loaded/t.total)},n.prototype._xhrOnError=function(){var t=this.xhr;this.abort(i(t)+\" Request failed. Status: \"+t.status+', text: \"'+t.statusText+'\"')},n.prototype._xhrOnAbort=function(){this.abort(i(this.xhr)+\" Request was aborted by the user.\")},n.prototype._xdrOnTimeout=function(){this.abort(i(this.xhr)+\" Request timed out.\")},n.prototype._xhrOnLoad=function(){var t=this.xhr,e=\"undefined\"==typeof t.status?t.status:c;if(!(e===c||e===f||e===l&&t.responseText.length>0))return void this.abort(\"[\"+t.status+\"]\"+t.statusText+\":\"+t.responseURL);if(this.xhrType===n.XHR_RESPONSE_TYPE.TEXT)this.data=t.responseText;else if(this.xhrType===n.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t.responseText),this.isJson=!0}catch(t){return void this.abort(\"Error trying to parse loaded json:\",t)}else if(this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var r=new DOMParser;this.data=r.parseFromString(t.responseText,\"text/xml\")}else{var i=document.createElement(\"div\");i.innerHTML=t.responseText,this.data=i}this.isXml=!0}catch(t){return void this.abort(\"Error trying to parse loaded xml:\",t)}else this.data=t.response||t.responseText;this.complete()},n.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf(\"data:\"))return\"\";e=e||window.location,h||(h=document.createElement(\"a\")),h.href=t,t=a(h.href,{strictMode:!0});var r=!t.port&&\"\"===e.port||t.port===e.port,n=t.protocol?t.protocol+\":\":\"\";return t.host===e.hostname&&r&&n===e.protocol?\"\":\"anonymous\"},n.prototype._determineXhrType=function(){return n._xhrTypeMap[this._getExtension()]||n.XHR_RESPONSE_TYPE.TEXT},n.prototype._determineLoadType=function(){return n._loadTypeMap[this._getExtension()]||n.LOAD_TYPE.XHR},n.prototype._getExtension=function(){var t=this.url,e=\"\";if(this.isDataUrl){var r=t.indexOf(\"/\");e=t.substring(r+1,t.indexOf(\";\",r))}else{var n=t.indexOf(\"?\");n!==-1&&(t=t.substring(0,n)),e=t.substring(t.lastIndexOf(\".\")+1)}return e.toLowerCase()},n.prototype._getMimeFromXhrType=function(t){switch(t){case n.XHR_RESPONSE_TYPE.BUFFER:return\"application/octet-binary\";case n.XHR_RESPONSE_TYPE.BLOB:return\"application/blob\";case n.XHR_RESPONSE_TYPE.DOCUMENT:return\"application/xml\";case n.XHR_RESPONSE_TYPE.JSON:return\"application/json\";case n.XHR_RESPONSE_TYPE.DEFAULT:case n.XHR_RESPONSE_TYPE.TEXT:default:return\"text/plain\"}},n.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},n.XHR_RESPONSE_TYPE={DEFAULT:\"text\",BUFFER:\"arraybuffer\",BLOB:\"blob\",DOCUMENT:\"document\",JSON:\"json\",TEXT:\"text\"},n._loadTypeMap={gif:n.LOAD_TYPE.IMAGE,png:n.LOAD_TYPE.IMAGE,bmp:n.LOAD_TYPE.IMAGE,jpg:n.LOAD_TYPE.IMAGE,jpeg:n.LOAD_TYPE.IMAGE,tif:n.LOAD_TYPE.IMAGE,tiff:n.LOAD_TYPE.IMAGE,webp:n.LOAD_TYPE.IMAGE,tga:n.LOAD_TYPE.IMAGE,\"svg+xml\":n.LOAD_TYPE.IMAGE},n._xhrTypeMap={xhtml:n.XHR_RESPONSE_TYPE.DOCUMENT,html:n.XHR_RESPONSE_TYPE.DOCUMENT,htm:n.XHR_RESPONSE_TYPE.DOCUMENT,xml:n.XHR_RESPONSE_TYPE.DOCUMENT,tmx:n.XHR_RESPONSE_TYPE.DOCUMENT,tsx:n.XHR_RESPONSE_TYPE.DOCUMENT,svg:n.XHR_RESPONSE_TYPE.DOCUMENT,gif:n.XHR_RESPONSE_TYPE.BLOB,png:n.XHR_RESPONSE_TYPE.BLOB,bmp:n.XHR_RESPONSE_TYPE.BLOB,jpg:n.XHR_RESPONSE_TYPE.BLOB,jpeg:n.XHR_RESPONSE_TYPE.BLOB,tif:n.XHR_RESPONSE_TYPE.BLOB,tiff:n.XHR_RESPONSE_TYPE.BLOB,webp:n.XHR_RESPONSE_TYPE.BLOB,tga:n.XHR_RESPONSE_TYPE.BLOB,json:n.XHR_RESPONSE_TYPE.JSON,text:n.XHR_RESPONSE_TYPE.TEXT,txt:n.XHR_RESPONSE_TYPE.TEXT},n.setExtensionLoadType=function(t,e){o(n._loadTypeMap,t,e)},n.setExtensionXhrType=function(t,e){o(n._xhrTypeMap,t,e)}},{eventemitter3:3,\"parse-uri\":6}],31:[function(t,e,r){\"use strict\";function n(){}function i(t,e,r){var n=0,i=t.length;!function o(s){return s||n===i?void(r&&r(s)):void e(t[n++],o)}()}function o(t){return function(){if(null===t)throw new Error(\"Callback was already called.\");var e=t;t=null,e.apply(this,arguments)}}function s(t,e){function r(t,e,r){if(null!=r&&\"function\"!=typeof r)throw new Error(\"task callback must be a function\");if(a.started=!0,null==t&&a.idle())return void setTimeout(function(){a.drain()},1);var i={data:t,callback:\"function\"==typeof r?r:n};e?a._tasks.unshift(i):a._tasks.push(i),setTimeout(function(){a.process()},1)}function i(t){return function(){s-=1,t.callback.apply(t,arguments),null!=arguments[0]&&a.error(arguments[0],t.data),s<=a.concurrency-a.buffer&&a.unsaturated(),a.idle()&&a.drain(),a.process()}}if(null==e)e=1;else if(0===e)throw new Error(\"Concurrency must not be zero\");var s=0,a={_tasks:[],concurrency:e,saturated:n,unsaturated:n,buffer:e/4,empty:n,drain:n,error:n,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){a.drain=n,a._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!a.paused&&s<a.concurrency&&a._tasks.length;){var e=a._tasks.shift();0===a._tasks.length&&a.empty(),s+=1,s===a.concurrency&&a.saturated(),t(e.data,o(i(e)))}},length:function(){return a._tasks.length},running:function(){return s},idle:function(){return a._tasks.length+s===0},pause:function(){a.paused!==!0&&(a.paused=!0)},resume:function(){if(a.paused!==!1){a.paused=!1;for(var t=1;t<=a.concurrency;t++)a.process()}}};return a}e.exports={eachSeries:i,queue:s}},{}],32:[function(t,e,r){\"use strict\";e.exports={_keyStr:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",encodeBinary:function(t){for(var e,r=\"\",n=new Array(4),i=0,o=0,s=0;i<t.length;){for(e=new Array(3),o=0;o<e.length;o++)i<t.length?e[o]=255&t.charCodeAt(i++):e[o]=0;switch(n[0]=e[0]>>2,n[1]=(3&e[0])<<4|e[1]>>4,n[2]=(15&e[1])<<2|e[2]>>6,n[3]=63&e[2],s=i-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(o=0;o<n.length;o++)r+=this._keyStr.charAt(n[o])}return r}}},{}],33:[function(t,e,r){\"use strict\";e.exports=t(\"./Loader\"),e.exports.Resource=t(\"./Resource\"),e.exports.middleware={caching:{memory:t(\"./middlewares/caching/memory\")},parsing:{blob:t(\"./middlewares/parsing/blob\")}},e.exports.async=t(\"./async\")},{\"./Loader\":29,\"./Resource\":30,\"./async\":31,\"./middlewares/caching/memory\":34,\"./middlewares/parsing/blob\":35}],34:[function(t,e,r){\"use strict\";var n={};e.exports=function(){return function(t,e){n[t.url]?(t.data=n[t.url],t.complete()):t.once(\"complete\",function(){n[this.url]=this.data}),e()}}},{}],35:[function(t,e,r){\"use strict\";var n=t(\"../../Resource\"),i=t(\"../../b64\"),o=window.URL||window.webkitURL;e.exports=function(){return function(t,e){if(!t.data)return void e();if(t.xhr&&t.xhrType===n.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&\"string\"!=typeof t.data){if(0===t.data.type.indexOf(\"image\")){var r=o.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.isImage=!0,void(t.data.onload=function(){o.revokeObjectURL(r),t.data.onload=null,e()})}}else{var s=t.xhr.getResponseHeader(\"content-type\");if(s&&0===s.indexOf(\"image\"))return t.data=new Image,t.data.src=\"data:\"+s+\";base64,\"+i.encodeBinary(t.xhr.responseText),t.isImage=!0,void(t.data.onload=function(){t.data.onload=null,e()})}e()}}},{\"../../Resource\":30,\"../../b64\":32}],36:[function(t,e,r){\"use strict\";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,r){if(t&&h.isObject(t)&&t instanceof n)return t;var i=new n;return i.parse(t,e,r),i}function o(t){return h.isString(t)&&(t=i(t)),t instanceof n?t.format():n.prototype.format.call(t)}function s(t,e){return i(t,!1,!0).resolve(e)}function a(t,e){return t?i(t,!1,!0).resolveObject(e):e}var u=t(\"punycode\"),h=t(\"./util\");r.parse=i,r.resolve=s,r.resolveObject=a,r.format=o,r.Url=n;var l=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,f=/^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,d=[\"<\",\">\",'\"',\"`\",\" \",\"\\r\",\"\\n\",\"\\t\"],p=[\"{\",\"}\",\"|\",\"\\\\\",\"^\",\"`\"].concat(d),v=[\"'\"].concat(p),y=[\"%\",\"/\",\"?\",\";\",\"#\"].concat(v),g=[\"/\",\"?\",\"#\"],m=255,_=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,\"javascript:\":!0},T={javascript:!0,\"javascript:\":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,\"http:\":!0,\"https:\":!0,\"ftp:\":!0,\"gopher:\":!0,\"file:\":!0},E=t(\"querystring\");n.prototype.parse=function(t,e,r){if(!h.isString(t))throw new TypeError(\"Parameter 'url' must be a string, not \"+typeof t);var n=t.indexOf(\"?\"),i=n!==-1&&n<t.indexOf(\"#\")?\"?\":\"#\",o=t.split(i),s=/\\\\/g;o[0]=o[0].replace(s,\"/\"),t=o.join(i);var a=t;if(a=a.trim(),!r&&1===t.split(\"#\").length){var c=f.exec(a);if(c)return this.path=a,this.href=a,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=E.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search=\"\",this.query={}),this}var d=l.exec(a);if(d){d=d[0];var p=d.toLowerCase();this.protocol=p,a=a.substr(d.length)}if(r||d||a.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)){var S=\"//\"===a.substr(0,2);!S||d&&T[d]||(a=a.substr(2),this.slashes=!0)}if(!T[d]&&(S||d&&!w[d])){for(var O=-1,M=0;M<g.length;M++){var P=a.indexOf(g[M]);P!==-1&&(O===-1||P<O)&&(O=P)}var C,R;R=O===-1?a.lastIndexOf(\"@\"):a.lastIndexOf(\"@\",O),R!==-1&&(C=a.slice(0,R),a=a.slice(R+1),this.auth=decodeURIComponent(C)),O=-1;for(var M=0;M<y.length;M++){var P=a.indexOf(y[M]);P!==-1&&(O===-1||P<O)&&(O=P)}O===-1&&(O=a.length),this.host=a.slice(0,O),a=a.slice(O),this.parseHost(),this.hostname=this.hostname||\"\";var D=\"[\"===this.hostname[0]&&\"]\"===this.hostname[this.hostname.length-1];if(!D)for(var A=this.hostname.split(/\\./),M=0,I=A.length;M<I;M++){var L=A[M];if(L&&!L.match(_)){for(var j=\"\",F=0,B=L.length;F<B;F++)j+=L.charCodeAt(F)>127?\"x\":L[F];if(!j.match(_)){var k=A.slice(0,M),N=A.slice(M+1),U=L.match(b);U&&(k.push(U[1]),N.unshift(U[2])),N.length&&(a=\"/\"+N.join(\".\")+a),this.hostname=k.join(\".\");break}}}this.hostname.length>m?this.hostname=\"\":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=u.toASCII(this.hostname));var X=this.port?\":\"+this.port:\"\",W=this.hostname||\"\";this.host=W+X,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),\"/\"!==a[0]&&(a=\"/\"+a))}if(!x[p])for(var M=0,I=v.length;M<I;M++){var G=v[M];if(a.indexOf(G)!==-1){var Y=encodeURIComponent(G);Y===G&&(Y=escape(G)),a=a.split(G).join(Y)}}var H=a.indexOf(\"#\");H!==-1&&(this.hash=a.substr(H),a=a.slice(0,H));var z=a.indexOf(\"?\");if(z!==-1?(this.search=a.substr(z),this.query=a.substr(z+1),e&&(this.query=E.parse(this.query)),a=a.slice(0,z)):e&&(this.search=\"\",this.query={}),a&&(this.pathname=a),w[p]&&this.hostname&&!this.pathname&&(this.pathname=\"/\"),this.pathname||this.search){var X=this.pathname||\"\",V=this.search||\"\";this.path=X+V}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||\"\";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,\":\"),t+=\"@\");var e=this.protocol||\"\",r=this.pathname||\"\",n=this.hash||\"\",i=!1,o=\"\";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(\":\")===-1?this.hostname:\"[\"+this.hostname+\"]\"),this.port&&(i+=\":\"+this.port)),this.query&&h.isObject(this.query)&&Object.keys(this.query).length&&(o=E.stringify(this.query));var s=this.search||o&&\"?\"+o||\"\";return e&&\":\"!==e.substr(-1)&&(e+=\":\"),this.slashes||(!e||w[e])&&i!==!1?(i=\"//\"+(i||\"\"),r&&\"/\"!==r.charAt(0)&&(r=\"/\"+r)):i||(i=\"\"),n&&\"#\"!==n.charAt(0)&&(n=\"#\"+n),s&&\"?\"!==s.charAt(0)&&(s=\"?\"+s),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace(\"#\",\"%23\"),e+i+r+s+n},n.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(h.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var r=new n,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];r[s]=this[s]}if(r.hash=t.hash,\"\"===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),u=0;u<a.length;u++){var l=a[u];\"protocol\"!==l&&(r[l]=t[l])}return w[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname=\"/\"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!w[t.protocol]){for(var c=Object.keys(t),f=0;f<c.length;f++){var d=c[f];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||T[t.protocol])r.pathname=t.pathname;else{for(var p=(t.pathname||\"\").split(\"/\");p.length&&!(t.host=p.shift()););t.host||(t.host=\"\"),t.hostname||(t.hostname=\"\"),\"\"!==p[0]&&p.unshift(\"\"),p.length<2&&p.unshift(\"\"),r.pathname=p.join(\"/\")}if(r.search=t.search,r.query=t.query,r.host=t.host||\"\",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var v=r.pathname||\"\",y=r.search||\"\";r.path=v+y}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var g=r.pathname&&\"/\"===r.pathname.charAt(0),m=t.host||t.pathname&&\"/\"===t.pathname.charAt(0),_=m||g||r.host&&t.pathname,b=_,x=r.pathname&&r.pathname.split(\"/\")||[],p=t.pathname&&t.pathname.split(\"/\")||[],E=r.protocol&&!w[r.protocol];if(E&&(r.hostname=\"\",r.port=null,r.host&&(\"\"===x[0]?x[0]=r.host:x.unshift(r.host)),r.host=\"\",t.protocol&&(t.hostname=null,t.port=null,t.host&&(\"\"===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),_=_&&(\"\"===p[0]||\"\"===x[0])),m)r.host=t.host||\"\"===t.host?t.host:r.host,r.hostname=t.hostname||\"\"===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,x=p;else if(p.length)x||(x=[]),x.pop(),x=x.concat(p),r.search=t.search,r.query=t.query;else if(!h.isNullOrUndefined(t.search)){if(E){r.hostname=r.host=x.shift();var S=!!(r.host&&r.host.indexOf(\"@\")>0)&&r.host.split(\"@\");S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return r.search=t.search,r.query=t.query,h.isNull(r.pathname)&&h.isNull(r.search)||(r.path=(r.pathname?r.pathname:\"\")+(r.search?r.search:\"\")),r.href=r.format(),r}if(!x.length)return r.pathname=null,r.search?r.path=\"/\"+r.search:r.path=null,r.href=r.format(),r;for(var O=x.slice(-1)[0],M=(r.host||t.host||x.length>1)&&(\".\"===O||\"..\"===O)||\"\"===O,P=0,C=x.length;C>=0;C--)O=x[C],\".\"===O?x.splice(C,1):\"..\"===O?(x.splice(C,1),P++):P&&(x.splice(C,1),P--);if(!_&&!b)for(;P--;P)x.unshift(\"..\");!_||\"\"===x[0]||x[0]&&\"/\"===x[0].charAt(0)||x.unshift(\"\"),M&&\"/\"!==x.join(\"/\").substr(-1)&&x.push(\"\");var R=\"\"===x[0]||x[0]&&\"/\"===x[0].charAt(0);if(E){r.hostname=r.host=R?\"\":x.length?x.shift():\"\";var S=!!(r.host&&r.host.indexOf(\"@\")>0)&&r.host.split(\"@\");S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return _=_||r.host&&x.length,_&&!R&&x.unshift(\"\"),x.length?r.pathname=x.join(\"/\"):(r.pathname=null,r.path=null),h.isNull(r.pathname)&&h.isNull(r.search)||(r.path=(r.pathname?r.pathname:\"\")+(r.search?r.search:\"\")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=c.exec(t);e&&(e=e[0],\":\"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{\"./util\":37,punycode:25,querystring:28}],37:[function(t,e,r){\"use strict\";e.exports={isString:function(t){return\"string\"==typeof t},isObject:function(t){return\"object\"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],38:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var s=t(\"../core\"),a=i(s),u=t(\"ismobilejs\"),h=n(u),l=t(\"./accessibleTarget\"),c=n(l);Object.assign(a.DisplayObject.prototype,c.default);var f=9,d=100,p=0,v=0,y=2,g=1,m=-1e3,_=-1e3,b=2,x=function(){function t(e){o(this,t),!h.default.tablet&&!h.default.phone||navigator.isCocoonJS||this.createTouchHook();var r=document.createElement(\"div\");r.style.width=d+\"px\",r.style.height=d+\"px\",r.style.position=\"absolute\",r.style.top=p+\"px\",r.style.left=v+\"px\",r.style.zIndex=y,this.div=r,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener(\"keydown\",this._onKeyDown,!1)}return t.prototype.createTouchHook=function(){var t=this,e=document.createElement(\"button\");e.style.width=g+\"px\",e.style.height=g+\"px\",e.style.position=\"absolute\",e.style.top=m+\"px\",e.style.left=_+\"px\",e.style.zIndex=b,e.style.backgroundColor=\"#FF0000\",e.title=\"HOOK DIV\",e.addEventListener(\"focus\",function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},t.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener(\"mousemove\",this._onMouseMove,!0),window.removeEventListener(\"keydown\",this._onKeyDown,!1),this.renderer.on(\"postrender\",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener(\"mousemove\",this._onMouseMove),window.addEventListener(\"keydown\",this._onKeyDown,!1),this.renderer.off(\"postrender\",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,r=e.length-1;r>=0;r--)this.updateAccessibleObjects(e[r])}},t.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,r=t.height/this.renderer.height,n=this.div;n.style.left=t.left+\"px\",n.style.top=t.top+\"px\",n.style.width=this.renderer.width+\"px\",n.style.height=this.renderer.height+\"px\";\nfor(var i=0;i<this.children.length;i++){var o=this.children[i];if(o.renderId!==this.renderId)o._accessibleActive=!1,a.utils.removeItems(this.children,i,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,i--,0===this.children.length&&this.deactivate();else{n=o._accessibleDiv;var s=o.hitArea,u=o.worldTransform;o.hitArea?(n.style.left=(u.tx+s.x*u.a)*e+\"px\",n.style.top=(u.ty+s.y*u.d)*r+\"px\",n.style.width=s.width*u.a*e+\"px\",n.style.height=s.height*u.d*r+\"px\"):(s=o.getBounds(),this.capHitArea(s),n.style.left=s.x*e+\"px\",n.style.top=s.y*r+\"px\",n.style.width=s.width*e+\"px\",n.style.height=s.height*r+\"px\")}}this.renderId++}},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement(\"button\"),e.style.width=d+\"px\",e.style.height=d+\"px\",e.style.backgroundColor=this.debug?\"rgba(255,0,0,0.5)\":\"transparent\",e.style.position=\"absolute\",e.style.zIndex=y,e.style.borderStyle=\"none\",e.addEventListener(\"click\",this._onClick.bind(this)),e.addEventListener(\"focus\",this._onFocus.bind(this)),e.addEventListener(\"focusout\",this._onFocusOut.bind(this))),t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleTitle||t.accessibleHint||(e.title=\"displayObject \"+this.tabIndex),t.accessibleHint&&e.setAttribute(\"aria-label\",t.accessibleHint),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,\"click\",e.eventData)},t.prototype._onFocus=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,\"mouseover\",e.eventData)},t.prototype._onFocusOut=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,\"mouseout\",e.eventData)},t.prototype._onKeyDown=function(t){t.keyCode===f&&this.activate()},t.prototype._onMouseMove=function(){this.deactivate()},t.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener(\"mousemove\",this._onMouseMove),window.removeEventListener(\"keydown\",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();r.default=x,a.WebGLRenderer.registerPlugin(\"accessibility\",x),a.CanvasRenderer.registerPlugin(\"accessibility\",x)},{\"../core\":61,\"./accessibleTarget\":39,ismobilejs:4}],39:[function(t,e,r){\"use strict\";r.__esModule=!0,r.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],40:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t(\"./accessibleTarget\");Object.defineProperty(r,\"accessibleTarget\",{enumerable:!0,get:function(){return n(i).default}});var o=t(\"./AccessibilityManager\");Object.defineProperty(r,\"AccessibilityManager\",{enumerable:!0,get:function(){return n(o).default}})},{\"./AccessibilityManager\":38,\"./accessibleTarget\":39}],41:[function(t,e,r){\"use strict\";function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function i(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function o(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){if(t instanceof Array){if(\"precision\"!==t[0].substring(0,9)){var e=t.slice(0);return e.unshift(\"precision \"+u.PRECISION.DEFAULT+\" float;\"),e}}else if(\"precision\"!==t.substring(0,9))return\"precision \"+u.PRECISION.DEFAULT+\" float;\\n\"+t;return t}r.__esModule=!0;var a=t(\"pixi-gl-core\"),u=t(\"./const\"),h=function(t){function e(r,o,a){return n(this,e),i(this,t.call(this,r,s(o),s(a)))}return o(e,t),e}(a.GLShader);r.default=h},{\"./const\":42,\"pixi-gl-core\":14}],42:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.SPRITE_MAX_TEXTURES=r.SPRITE_BATCH_SIZE=r.TEXT_GRADIENT=r.TRANSFORM_MODE=r.PRECISION=r.SHAPES=r.SVG_SIZE=r.DATA_URI=r.URL_FILE_EXTENSION=r.DEFAULT_RENDER_OPTIONS=r.FILTER_RESOLUTION=r.RESOLUTION=r.RETINA_PREFIX=r.MIPMAP_TEXTURES=r.GC_MODES=r.WRAP_MODES=r.SCALE_MODES=r.DRAW_MODES=r.BLEND_MODES=r.RENDERER_TYPE=r.TARGET_FPMS=r.DEG_TO_RAD=r.RAD_TO_DEG=r.PI_2=r.VERSION=void 0;var i=t(\"./utils/maxRecommendedTextures\"),o=n(i);r.VERSION=\"4.1.0\",r.PI_2=2*Math.PI,r.RAD_TO_DEG=180/Math.PI,r.DEG_TO_RAD=Math.PI/180,r.TARGET_FPMS=.06,r.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},r.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},r.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},r.SCALE_MODES={DEFAULT:0,LINEAR:0,NEAREST:1},r.WRAP_MODES={DEFAULT:0,CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},r.GC_MODES={DEFAULT:0,AUTO:0,MANUAL:1},r.MIPMAP_TEXTURES=!0,r.RETINA_PREFIX=/@(.+)x/,r.RESOLUTION=1,r.FILTER_RESOLUTION=1,r.DEFAULT_RENDER_OPTIONS={view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},r.URL_FILE_EXTENSION=/\\.(\\w{3,4})(?:$|\\?|#)/i,r.DATA_URI=/^\\s*data:(?:([\\w-]+)\\/([\\w+.-]+))?(?:;(charset=[\\w-]+|base64))?,(.*)/i,r.SVG_SIZE=/<svg[^>]*(?:\\s(width|height)=\"(\\d*(?:\\.\\d+)?)(?:px)?\")[^>]*(?:\\s(width|height)=\"(\\d*(?:\\.\\d+)?)(?:px)?\")[^>]*>/i,r.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},r.PRECISION={DEFAULT:\"mediump\",LOW:\"lowp\",MEDIUM:\"mediump\",HIGH:\"highp\"},r.TRANSFORM_MODE={DEFAULT:0,STATIC:0,DYNAMIC:1},r.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},r.SPRITE_BATCH_SIZE=4096,r.SPRITE_MAX_TEXTURES=(0,o.default)(32)},{\"./utils/maxRecommendedTextures\":116}],43:[function(t,e,r){\"use strict\";function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var i=t(\"../math\"),o=function(){function t(){n(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0),this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0)},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?i.Rectangle.EMPTY:(t=t||new i.Rectangle(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,r=this.minY,n=this.maxX,i=this.maxY,o=t[0],s=t[1];e=o<e?o:e,r=s<r?s:r,n=o>n?o:n,i=s>i?s:i,o=t[2],s=t[3],e=o<e?o:e,r=s<r?s:r,n=o>n?o:n,i=s>i?s:i,o=t[4],s=t[5],e=o<e?o:e,r=s<r?s:r,n=o>n?o:n,i=s>i?s:i,o=t[6],s=t[7],e=o<e?o:e,r=s<r?s:r,n=o>n?o:n,i=s>i?s:i,this.minX=e,this.minY=r,this.maxX=n,this.maxY=i},t.prototype.addFrame=function(t,e,r,n,i){var o=t.worldTransform,s=o.a,a=o.b,u=o.c,h=o.d,l=o.tx,c=o.ty,f=this.minX,d=this.minY,p=this.maxX,v=this.maxY,y=s*e+u*r+l,g=a*e+h*r+c;f=y<f?y:f,d=g<d?g:d,p=y>p?y:p,v=g>v?g:v,y=s*n+u*r+l,g=a*n+h*r+c,f=y<f?y:f,d=g<d?g:d,p=y>p?y:p,v=g>v?g:v,y=s*e+u*i+l,g=a*e+h*i+c,f=y<f?y:f,d=g<d?g:d,p=y>p?y:p,v=g>v?g:v,y=s*n+u*i+l,g=a*n+h*i+c,f=y<f?y:f,d=g<d?g:d,p=y>p?y:p,v=g>v?g:v,this.minX=f,this.minY=d,this.maxX=p,this.maxY=v},t.prototype.addVertices=function(t,e,r,n){for(var i=t.worldTransform,o=i.a,s=i.b,a=i.c,u=i.d,h=i.tx,l=i.ty,c=this.minX,f=this.minY,d=this.maxX,p=this.maxY,v=r;v<n;v+=2){var y=e[v],g=e[v+1],m=o*y+a*g+h,_=u*g+s*y+l;c=m<c?m:c,f=_<f?_:f,d=m>d?m:d,p=_>p?_:p}this.minX=c,this.minY=f,this.maxX=d,this.maxY=p},t.prototype.addBounds=function(t){var e=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>i?t.maxY:i},t.prototype.addBoundsMask=function(t,e){var r=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=i&&n<=o){var s=this.minX,a=this.minY,u=this.maxX,h=this.maxY;this.minX=r<s?r:s,this.minY=n<a?n:a,this.maxX=i>u?i:u,this.maxY=o>h?o:h}},t.prototype.addBoundsArea=function(t,e){var r=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=i&&n<=o){var s=this.minX,a=this.minY,u=this.maxX,h=this.maxY;this.minX=r<s?r:s,this.minY=n<a?n:a,this.maxX=i>u?i:u,this.maxY=o>h?o:h}},t}();r.default=o},{\"../math\":66}],44:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(\"../utils\"),h=t(\"./DisplayObject\"),l=n(h),c=function(t){function e(){i(this,e);var r=o(this,t.call(this));return r.children=[],r}return s(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0;n<e.length;++n){var i=e[n];i.parent&&i.parent.removeChild(i),i.parent=this,this.transform._parentID=-1,this._boundsID++,this.children.push(i),this.onChildrenChange(this.children.length-1),i.emit(\"added\",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+\"addChildAt: The index \"+e+\" supplied is out of bounds \"+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.onChildrenChange(e),t.emit(\"added\",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var r=this.getChildIndex(t),n=this.getChildIndex(e);this.children[r]=e,this.children[n]=t,this.onChildrenChange(r<n?r:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(e===-1)throw new Error(\"The supplied DisplayObject must be a child of the caller\");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error(\"The supplied index is out of bounds\");var r=this.getChildIndex(t);(0,u.removeItems)(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error(\"getChildAt: Index (\"+t+\") does not exist.\");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0;n<e.length;++n){var i=e[n],o=this.children.indexOf(i);o!==-1&&(i.parent=null,(0,u.removeItems)(this.children,o,1),this.onChildrenChange(o),i.emit(\"removed\",this))}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,(0,u.removeItems)(this.children,t,1),this.onChildrenChange(t),e.emit(\"removed\",this),e},e.prototype.removeChildren=function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments[1],r=t,n=\"number\"==typeof e?e:this.children.length,i=n-r,o=void 0;if(i>0&&i<=n){o=this.children.splice(r,i);for(var s=0;s<o.length;++s)o[s].parent=null;this.onChildrenChange(t);for(var a=0;a<o.length;++a)o[a].emit(\"removed\",this);return o}if(0===i&&0===this.children.length)return[];throw new RangeError(\"removeChildren: numeric values are outside the acceptable range.\")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.currentRenderer.flush();var e=this._filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}r&&t.maskManager.pushMask(this,this._mask),t.currentRenderer.start(),this._renderWebGL(t);for(var i=0,o=this.children.length;i<o;i++)this.children[i].renderWebGL(t);t.currentRenderer.flush(),r&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter(),t.currentRenderer.start()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var r=\"boolean\"==typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(r)for(var i=0;i<n.length;++i)n[i].destroy(e)},a(e,[{key:\"width\",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;0!==e?this.scale.x=t/e:this.scale.x=1,this._width=t}},{key:\"height\",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;0!==e?this.scale.y=t/e:this.scale.y=1,this._height=t}}]),e}(l.default);r.default=c,c.prototype.containerUpdateTransform=c.prototype.updateTransform},{\"../utils\":115,\"./DisplayObject\":45}],45:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(\"eventemitter3\"),h=n(u),l=t(\"../const\"),c=t(\"./TransformStatic\"),f=n(c),d=t(\"./Transform\"),p=n(d),v=t(\"./Bounds\"),y=n(v),g=t(\"../math\"),m=function(t){function e(){i(this,e);var r=o(this,t.call(this)),n=l.TRANSFORM_MODE.DEFAULT===l.TRANSFORM_MODE.STATIC?f.default:p.default;return r.tempDisplayObjectParent=null,r.transform=new n,r.alpha=1,r.visible=!0,r.renderable=!0,r.parent=null,r.worldAlpha=1,r.filterArea=null,r._filters=null,r._enabledFilters=null,r._bounds=new y.default,r._boundsID=0,r._lastBoundsID=-1,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r}return s(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new g.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new g.Rectangle),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=r,this.transform=e,n},e.prototype.toGlobal=function(t,e){var r=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,r,n){return e&&(t=e.toGlobal(t,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error(\"setParent: Argument must be a Container\");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?1:arguments[2],n=arguments.length<=3||void 0===arguments[3]?1:arguments[3],i=arguments.length<=4||void 0===arguments[4]?0:arguments[4],o=arguments.length<=5||void 0===arguments[5]?0:arguments[5],s=arguments.length<=6||void 0===arguments[6]?0:arguments[6],a=arguments.length<=7||void 0===arguments[7]?0:arguments[7],u=arguments.length<=8||void 0===arguments[8]?0:arguments[8];return this.position.x=t,this.position.y=e,this.scale.x=r?r:1,this.scale.y=n?n:1,this.rotation=i,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=u,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1},a(e,[{key:\"_tempDisplayObjectParent\",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:\"x\",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:\"y\",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:\"worldTransform\",get:function(){return this.transform.worldTransform}},{key:\"localTransform\",get:function(){return this.transform.localTransform}},{key:\"position\",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:\"scale\",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:\"pivot\",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:\"skew\",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:\"rotation\",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:\"worldVisible\",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:\"mask\",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},{key:\"filters\",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(h.default);r.default=m,m.prototype.displayObjectUpdateTransform=m.prototype.updateTransform},{\"../const\":42,\"../math\":66,\"./Bounds\":43,\"./Transform\":46,\"./TransformStatic\":48,eventemitter3:3}],46:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(\"../math\"),h=t(\"./TransformBase\"),l=n(h),c=function(t){function e(){i(this,e);var r=o(this,t.call(this));return r.position=new u.Point(0,0),r.scale=new u.Point(1,1),r.skew=new u.ObservablePoint(r.updateSkew,r,0,0),r.pivot=new u.Point(0,0),r._rotation=0,r._sr=Math.sin(0),r._cr=Math.cos(0),r._cy=Math.cos(0),r._sy=Math.sin(0),r._nsx=Math.sin(0),r._cx=Math.cos(0),r}return s(e,t),e.prototype.updateSkew=function(){this._cy=Math.cos(this.skew.y),this._sy=Math.sin(this.skew.y),this._nsx=Math.sin(this.skew.x),this._cx=Math.cos(this.skew.x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform,e=this._cr*this.scale.x,r=this._sr*this.scale.x,n=-this._sr*this.scale.y,i=this._cr*this.scale.y;t.a=this._cy*e+this._sy*n,t.b=this._cy*r+this._sy*i,t.c=this._nsx*e+this._cx*n,t.d=this._nsx*r+this._cx*i},e.prototype.updateTransform=function(t){var e=t.worldTransform,r=this.worldTransform,n=this.localTransform,i=this._cr*this.scale.x,o=this._sr*this.scale.x,s=-this._sr*this.scale.y,a=this._cr*this.scale.y;n.a=this._cy*i+this._sy*s,n.b=this._cy*o+this._sy*a,n.c=this._nsx*i+this._cx*s,n.d=this._nsx*o+this._cx*a,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),r.a=n.a*e.a+n.b*e.c,r.b=n.a*e.b+n.b*e.d,r.c=n.c*e.a+n.d*e.c,r.d=n.c*e.b+n.d*e.d,r.tx=n.tx*e.a+n.ty*e.c+e.tx,r.ty=n.tx*e.b+n.ty*e.d+e.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},a(e,[{key:\"rotation\",get:function(){return this._rotation},set:function(t){this._rotation=t,this._sr=Math.sin(t),this._cr=Math.cos(t)}}]),e}(l.default);r.default=c},{\"../math\":66,\"./TransformBase\":47}],47:[function(t,e,r){\"use strict\";function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var i=t(\"../math\"),o=function(){function t(){n(this,t),this.worldTransform=new i.Matrix,this.localTransform=new i.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,r=this.worldTransform,n=this.localTransform;r.a=n.a*e.a+n.b*e.c,r.b=n.a*e.b+n.b*e.d,r.c=n.c*e.a+n.d*e.c,r.d=n.c*e.b+n.d*e.d,r.tx=n.tx*e.a+n.ty*e.c+e.tx,r.ty=n.tx*e.b+n.ty*e.d+e.ty,this._worldID++},t}();r.default=o,o.prototype.updateWorldTransform=o.prototype.updateTransform,o.IDENTITY=new o},{\"../math\":66}],48:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(\"../math\"),h=t(\"./TransformBase\"),l=n(h),c=function(t){function e(){i(this,e);var r=o(this,t.call(this));return r.position=new u.ObservablePoint(r.onChange,r,0,0),r.scale=new u.ObservablePoint(r.onChange,r,1,1),r.pivot=new u.ObservablePoint(r.onChange,r,0,0),r.skew=new u.ObservablePoint(r.updateSkew,r,0,0),r._rotation=0,r._sr=Math.sin(0),r._cr=Math.cos(0),r._cy=Math.cos(0),r._sy=Math.sin(0),r._nsx=Math.sin(0),r._cx=Math.cos(0),r._localID=0,r._currentLocalID=0,r}return s(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cy=Math.cos(this.skew._y),this._sy=Math.sin(this.skew._y),this._nsx=Math.sin(this.skew._x),this._cx=Math.cos(this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;if(this._localID!==this._currentLocalID){var e=this._cr*this.scale._x,r=this._sr*this.scale._x,n=-this._sr*this.scale._y,i=this._cr*this.scale._y;t.a=this._cy*e+this._sy*n,t.b=this._cy*r+this._sy*i,t.c=this._nsx*e+this._cx*n,t.d=this._nsx*r+this._cx*i,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1}},e.prototype.updateTransform=function(t){var e=t.worldTransform,r=this.worldTransform,n=this.localTransform;if(this._localID!==this._currentLocalID){var i=this._cr*this.scale._x,o=this._sr*this.scale._x,s=-this._sr*this.scale._y,a=this._cr*this.scale._y;n.a=this._cy*i+this._sy*s,n.b=this._cy*o+this._sy*a,n.c=this._nsx*i+this._cx*s,n.d=this._nsx*o+this._cx*a,n.tx=this.position._x-(this.pivot._x*n.a+this.pivot._y*n.c),n.ty=this.position._y-(this.pivot._x*n.b+this.pivot._y*n.d),this._currentLocalID=this._localID,this._parentID=-1}this._parentID!==t._worldID&&(r.a=n.a*e.a+n.b*e.c,r.b=n.a*e.b+n.b*e.d,r.c=n.c*e.a+n.d*e.c,r.d=n.c*e.b+n.d*e.d,r.tx=n.tx*e.a+n.ty*e.c+e.tx,r.ty=n.tx*e.b+n.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},a(e,[{key:\"rotation\",get:function(){return this._rotation},set:function(t){this._rotation=t,this._sr=Math.sin(t),this._cr=Math.cos(t),this._localID++}}]),e}(l.default);r.default=c},{\"../math\":66,\"./TransformBase\":47}],49:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(\"../display/Container\"),u=n(a),h=t(\"../textures/RenderTexture\"),l=n(h),c=t(\"../textures/Texture\"),f=n(c),d=t(\"./GraphicsData\"),p=n(d),v=t(\"../sprites/Sprite\"),y=n(v),g=t(\"../math\"),m=t(\"../utils\"),_=t(\"../const\"),b=t(\"../display/Bounds\"),x=n(b),T=t(\"./utils/bezierCurveTo\"),w=n(T),E=t(\"../renderers/canvas/CanvasRenderer\"),S=n(E),O=void 0,M=new g.Matrix,P=new g.Point,C=new Float32Array(4),R=new Float32Array(4),D=function(t){function e(){i(this,e);var r=o(this,t.call(this));return r.fillAlpha=1,r.lineWidth=0,r.lineColor=0,r.graphicsData=[],r.tint=16777215,r._prevTint=16777215,r.blendMode=_.BLEND_MODES.NORMAL,r.currentPath=null,r._webGL={},r.isMask=!1,r.boundsPadding=0,r._localBounds=new x.default,r.dirty=0,r.fastRectDirty=-1,r.clearDirty=0,r.boundsDirty=-1,r.cachedSpriteDirty=!1,r._spriteRect=null,r._fastRect=!1,r}return s(e,t),e.prototype.clone=function t(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var r=0;r<this.graphicsData.length;++r)t.graphicsData.push(this.graphicsData[r].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype.lineStyle=function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?1:arguments[2];if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=r,this.currentPath)if(this.currentPath.shape.points.length){var n=new g.Polygon(this.currentPath.shape.points.slice(-2));n.closed=!1,this.drawShape(n)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},e.prototype.moveTo=function(t,e){var r=new g.Polygon([t,e]);return r.closed=!1,this.drawShape(r),this},e.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty++,this},e.prototype.quadraticCurveTo=function(t,e,r,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i=20,o=this.currentPath.shape.points,s=0,a=0;0===o.length&&this.moveTo(0,0);for(var u=o[o.length-2],h=o[o.length-1],l=1;l<=i;++l){var c=l/i;s=u+(t-u)*c,a=h+(e-h)*c,o.push(s+(t+(r-t)*c-s)*c,a+(e+(n-e)*c-a)*c)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,e,r,n,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,a=s[s.length-2],u=s[s.length-1];return s.length-=2,(0,w.default)(a,u,t,e,r,n,i,o,s),this.dirty++,this},e.prototype.arcTo=function(t,e,r,n,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1],u=a-e,h=s-t,l=n-e,c=r-t,f=Math.abs(u*c-h*l);if(f<1e-8||0===i)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var d=u*u+h*h,p=l*l+c*c,v=u*l+h*c,y=i*Math.sqrt(d)/f,g=i*Math.sqrt(p)/f,m=y*v/d,_=g*v/p,b=y*c+g*h,x=y*l+g*u,T=h*(g+m),w=u*(g+m),E=c*(y+_),S=l*(y+_),O=Math.atan2(w-x,T-b),M=Math.atan2(S-x,E-b);this.arc(b+t,x+e,i,O,M,h*l>c*u)}return this.dirty++,this},e.prototype.arc=function(t,e,r,n,i){var o=!(arguments.length<=5||void 0===arguments[5])&&arguments[5];if(n===i)return this;!o&&i<=n?i+=2*Math.PI:o&&n<=i&&(n+=2*Math.PI);var s=o?n-i:i-n,a=40*Math.ceil(Math.abs(s)/(2*Math.PI));\nif(0===s)return this;var u=t+Math.cos(n)*r,h=e+Math.sin(n)*r,l=this.currentPath.shape.points;this.currentPath?l[l.length-2]===u&&l[l.length-1]===h||l.push(u,h):this.moveTo(u,h);for(var c=s/(2*a),f=2*c,d=Math.cos(c),p=Math.sin(c),v=a-1,y=v%1/v,g=0;g<=v;++g){var m=g+y*g,_=c+n+f*m,b=Math.cos(_),x=-Math.sin(_);l.push((d*b+p*x)*r+t,(d*-x+p*b)*r+e)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments.length<=1||void 0===arguments[1]?1:arguments[1];return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,r,n){return this.drawShape(new g.Rectangle(t,e,r,n)),this},e.prototype.drawRoundedRect=function(t,e,r,n,i){return this.drawShape(new g.RoundedRectangle(t,e,r,n,i)),this},e.prototype.drawCircle=function(t,e,r){return this.drawShape(new g.Circle(t,e,r)),this},e.prototype.drawEllipse=function(t,e,r,n){return this.drawShape(new g.Ellipse(t,e,r,n)),this},e.prototype.drawPolygon=function(t){var e=t,r=!0;if(e instanceof g.Polygon&&(r=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}var i=new g.Polygon(e);return i.closed=r,this.drawShape(i),this},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===_.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var r=this.graphicsData[0].shape;if(!this._spriteRect){if(!e._SPRITE_TEXTURE){e._SPRITE_TEXTURE=l.default.create(10,10);var n=document.createElement(\"canvas\");n.width=10,n.height=10;var i=n.getContext(\"2d\");i.fillStyle=\"white\",i.fillRect(0,0,10,10),e._SPRITE_TEXTURE=f.default.fromCanvas(n)}this._spriteRect=new y.default(e._SPRITE_TEXTURE)}if(16777215===this.tint)this._spriteRect.tint=this.graphicsData[0].fillColor;else{var o=C,s=R;(0,m.hex2rgb)(this.graphicsData[0].fillColor,o),(0,m.hex2rgb)(this.tint,s),o[0]*=s[0],o[1]*=s[1],o[2]*=s[2],this._spriteRect.tint=(0,m.rgb2hex)(o)}this._spriteRect.alpha=this.graphicsData[0].fillAlpha,this._spriteRect.worldAlpha=this.worldAlpha*this._spriteRect.alpha,e._SPRITE_TEXTURE._frame.width=r.width,e._SPRITE_TEXTURE._frame.height=r.height,this._spriteRect.transform.worldTransform=this.transform.worldTransform,this._spriteRect.anchor.set(-r.x/r.width,-r.y/r.height),this._spriteRect._onAnchorUpdate(),this._spriteRect._renderWebGL(t)},e.prototype._renderCanvas=function(t){this.isMask!==!0&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.dirty++,this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,P);for(var e=this.graphicsData,r=0;r<e.length;++r){var n=e[r];if(n.fill&&n.shape&&n.shape.contains(P.x,P.y))return!0}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-(1/0),r=1/0,n=-(1/0);if(this.graphicsData.length)for(var i=0,o=0,s=0,a=0,u=0,h=0;h<this.graphicsData.length;h++){var l=this.graphicsData[h],c=l.type,f=l.lineWidth;if(i=l.shape,c===_.SHAPES.RECT||c===_.SHAPES.RREC)o=i.x-f/2,s=i.y-f/2,a=i.width+f,u=i.height+f,t=o<t?o:t,e=o+a>e?o+a:e,r=s<r?s:r,n=s+u>n?s+u:n;else if(c===_.SHAPES.CIRC)o=i.x,s=i.y,a=i.radius+f/2,u=i.radius+f/2,t=o-a<t?o-a:t,e=o+a>e?o+a:e,r=s-u<r?s-u:r,n=s+u>n?s+u:n;else if(c===_.SHAPES.ELIP)o=i.x,s=i.y,a=i.width+f/2,u=i.height+f/2,t=o-a<t?o-a:t,e=o+a>e?o+a:e,r=s-u<r?s-u:r,n=s+u>n?s+u:n;else for(var d=i.points,p=0;p<d.length;p+=2)o=d[p],s=d[p+1],t=o-f<t?o-f:t,e=o+f>e?o+f:e,r=s-f<r?s-f:r,n=s+f>n?s+f:n}else t=0,e=0,r=0,n=0;var v=this.boundsPadding;this._localBounds.minX=t-v,this._localBounds.maxX=e+2*v,this._localBounds.minY=r-v,this._localBounds.maxY=n+2*v},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new p.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(e),e.type===_.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length<=1||void 0===arguments[1]?1:arguments[1],r=this.getLocalBounds(),n=l.default.create(r.width,r.height,t,e);O||(O=new S.default),M.tx=-r.x,M.ty=-r.y,O.render(this,n,!1,M);var i=f.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,t);return i.baseTexture.resolution=e,i.baseTexture.update(),i},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();for(var n in this._webgl)for(var i=0;i<this._webgl[n].data.length;++i)this._webgl[n].data[i].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},e}(u.default);r.default=D,D._SPRITE_TEXTURE=null},{\"../const\":42,\"../display/Bounds\":43,\"../display/Container\":44,\"../math\":66,\"../renderers/canvas/CanvasRenderer\":73,\"../sprites/Sprite\":97,\"../textures/RenderTexture\":107,\"../textures/Texture\":108,\"../utils\":115,\"./GraphicsData\":50,\"./utils/bezierCurveTo\":52}],50:[function(t,e,r){\"use strict\";function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var i=function(){function t(e,r,i,o,s,a,u){n(this,t),this.lineWidth=e,this.lineColor=r,this.lineAlpha=i,this._lineTint=r,this.fillColor=o,this.fillAlpha=s,this._fillTint=o,this.fill=a,this.holes=[],this.shape=u,this.type=u.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();r.default=i},{}],51:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var o=t(\"../../renderers/canvas/CanvasRenderer\"),s=n(o),a=t(\"../../const\"),u=function(){function t(e){i(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,r=e.context,n=t.worldAlpha,i=t.transform.worldTransform,o=e.resolution;this._prevTint!==this.tint&&(this.dirty=!0),r.setTransform(i.a*o,i.b*o,i.c*o,i.d*o,i.tx*o,i.ty*o),t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1),e.setBlendMode(t.blendMode);for(var s=0;s<t.graphicsData.length;s++){var u=t.graphicsData[s],h=u.shape,l=u._fillTint,c=u._lineTint;if(r.lineWidth=u.lineWidth,u.type===a.SHAPES.POLY){r.beginPath(),this.renderPolygon(h.points,h.closed,r);for(var f=0;f<u.holes.length;f++)this.renderPolygon(u.holes[f].points,!0,r);u.fill&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle=\"#\"+(\"00000\"+(0|l).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle=\"#\"+(\"00000\"+(0|c).toString(16)).substr(-6),r.stroke())}else if(u.type===a.SHAPES.RECT)(u.fillColor||0===u.fillColor)&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle=\"#\"+(\"00000\"+(0|l).toString(16)).substr(-6),r.fillRect(h.x,h.y,h.width,h.height)),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle=\"#\"+(\"00000\"+(0|c).toString(16)).substr(-6),r.strokeRect(h.x,h.y,h.width,h.height));else if(u.type===a.SHAPES.CIRC)r.beginPath(),r.arc(h.x,h.y,h.radius,0,2*Math.PI),r.closePath(),u.fill&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle=\"#\"+(\"00000\"+(0|l).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle=\"#\"+(\"00000\"+(0|c).toString(16)).substr(-6),r.stroke());else if(u.type===a.SHAPES.ELIP){var d=2*h.width,p=2*h.height,v=h.x-d/2,y=h.y-p/2;r.beginPath();var g=.5522848,m=d/2*g,_=p/2*g,b=v+d,x=y+p,T=v+d/2,w=y+p/2;r.moveTo(v,w),r.bezierCurveTo(v,w-_,T-m,y,T,y),r.bezierCurveTo(T+m,y,b,w-_,b,w),r.bezierCurveTo(b,w+_,T+m,x,T,x),r.bezierCurveTo(T-m,x,v,w+_,v,w),r.closePath(),u.fill&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle=\"#\"+(\"00000\"+(0|l).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle=\"#\"+(\"00000\"+(0|c).toString(16)).substr(-6),r.stroke())}else if(u.type===a.SHAPES.RREC){var E=h.x,S=h.y,O=h.width,M=h.height,P=h.radius,C=Math.min(O,M)/2|0;P=P>C?C:P,r.beginPath(),r.moveTo(E,S+P),r.lineTo(E,S+M-P),r.quadraticCurveTo(E,S+M,E+P,S+M),r.lineTo(E+O-P,S+M),r.quadraticCurveTo(E+O,S+M,E+O,S+M-P),r.lineTo(E+O,S+P),r.quadraticCurveTo(E+O,S,E+O-P,S),r.lineTo(E+P,S),r.quadraticCurveTo(E,S,E,S+P),r.closePath(),(u.fillColor||0===u.fillColor)&&(r.globalAlpha=u.fillAlpha*n,r.fillStyle=\"#\"+(\"00000\"+(0|l).toString(16)).substr(-6),r.fill()),u.lineWidth&&(r.globalAlpha=u.lineAlpha*n,r.strokeStyle=\"#\"+(\"00000\"+(0|c).toString(16)).substr(-6),r.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint;for(var e=(t.tint>>16&255)/255,r=(t.tint>>8&255)/255,n=(255&t.tint)/255,i=0;i<t.graphicsData.length;++i){var o=t.graphicsData[i],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*r*255<<8)+(255&s)/255*n*255,o._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*n*255}},t.prototype.renderPolygon=function(t,e,r){r.moveTo(t[0],t[1]);for(var n=1;n<t.length/2;++n)r.lineTo(t[2*n],t[2*n+1]);e&&r.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();r.default=u,s.default.registerPlugin(\"graphics\",u)},{\"../../const\":42,\"../../renderers/canvas/CanvasRenderer\":73}],52:[function(t,e,r){\"use strict\";function n(t,e,r,n,i,o,s,a){var u=arguments.length<=8||void 0===arguments[8]?[]:arguments[8],h=20,l=0,c=0,f=0,d=0,p=0;u.push(t,e);for(var v=1,y=0;v<=h;++v)y=v/h,l=1-y,c=l*l,f=c*l,d=y*y,p=d*y,u.push(f*t+3*c*y*r+3*l*d*i+p*s,f*e+3*c*y*n+3*l*d*o+p*a);return u}r.__esModule=!0,r.default=n},{}],53:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(\"../../utils\"),u=t(\"../../const\"),h=t(\"../../renderers/webgl/utils/ObjectRenderer\"),l=n(h),c=t(\"../../renderers/webgl/WebGLRenderer\"),f=n(c),d=t(\"./WebGLGraphicsData\"),p=n(d),v=t(\"./shaders/PrimitiveShader\"),y=n(v),g=t(\"./utils/buildPoly\"),m=n(g),_=t(\"./utils/buildRectangle\"),b=n(_),x=t(\"./utils/buildRoundedRectangle\"),T=n(x),w=t(\"./utils/buildCircle\"),E=n(w),S=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));return n.graphicsDataPool=[],n.primitiveShader=null,n.gl=r.gl,n.CONTEXT_UID=0,n}return s(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new y.default(this.gl)},e.prototype.destroy=function(){l.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,r=e.gl,n=void 0,i=t._webGL[this.CONTEXT_UID];i&&t.dirty===i.dirty||(this.updateGraphics(t),i=t._webGL[this.CONTEXT_UID]);var o=this.primitiveShader;e.bindShader(o),e.state.setBlendMode(t.blendMode);for(var s=0,u=i.data.length;s<u;s++){n=i.data[s];var h=n.shader;e.bindShader(h),h.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),h.uniforms.tint=(0,a.hex2rgb)(t.tint),h.uniforms.alpha=t.worldAlpha,n.vao.bind().draw(r.TRIANGLE_STRIP,n.indices.length).unbind()}},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,r=t._webGL[this.CONTEXT_UID];if(r||(r=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),r.dirty=t.dirty,t.clearDirty!==r.clearDirty){r.clearDirty=t.clearDirty;for(var n=0;n<r.data.length;n++)this.graphicsDataPool.push(r.data[n]);r.data.length=0,r.lastIndex=0}for(var i=void 0,o=r.lastIndex;o<t.graphicsData.length;o++){var s=t.graphicsData[o];i=this.getWebGLData(r,0),s.type===u.SHAPES.POLY&&(0,m.default)(s,i),s.type===u.SHAPES.RECT?(0,b.default)(s,i):s.type===u.SHAPES.CIRC||s.type===u.SHAPES.ELIP?(0,E.default)(s,i):s.type===u.SHAPES.RREC&&(0,T.default)(s,i),r.lastIndex++}for(var a=0;a<r.data.length;a++)i=r.data[a],i.dirty&&i.upload()},e.prototype.getWebGLData=function(t,e){var r=t.data[t.data.length-1];return(!r||r.points.length>32e4)&&(r=this.graphicsDataPool.pop()||new p.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),r.reset(e),t.data.push(r)),r.dirty=!0,r},e}(l.default);r.default=S,f.default.registerPlugin(\"graphics\",S)},{\"../../const\":42,\"../../renderers/webgl/WebGLRenderer\":80,\"../../renderers/webgl/utils/ObjectRenderer\":90,\"../../utils\":115,\"./WebGLGraphicsData\":54,\"./shaders/PrimitiveShader\":55,\"./utils/buildCircle\":56,\"./utils/buildPoly\":58,\"./utils/buildRectangle\":59,\"./utils/buildRoundedRectangle\":60}],54:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var o=t(\"pixi-gl-core\"),s=n(o),a=function(){function t(e,r,n){i(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=s.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=s.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.glPoints=null,this.glIndices=null,this.shader=r,this.vao=new s.default.VertexArrayObject(e,n).addIndex(this.indexBuffer).addAttribute(this.buffer,r.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,r.attributes.aColor,e.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();r.default=a},{\"pixi-gl-core\":14}],55:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(\"../../../Shader\"),u=n(a),h=function(t){function e(r){return i(this,e),o(this,t.call(this,r,[\"attribute vec2 aVertexPosition;\",\"attribute vec4 aColor;\",\"uniform mat3 translationMatrix;\",\"uniform mat3 projectionMatrix;\",\"uniform float alpha;\",\"uniform vec3 tint;\",\"varying vec4 vColor;\",\"void main(void){\",\"   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\",\"   vColor = aColor * vec4(tint * alpha, alpha);\",\"}\"].join(\"\\n\"),[\"varying vec4 vColor;\",\"void main(void){\",\"   gl_FragColor = vColor;\",\"}\"].join(\"\\n\")))}return s(e,t),e}(u.default);r.default=h},{\"../../../Shader\":41}],56:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var r=t.shape,n=r.x,i=r.y,o=void 0,h=void 0;t.type===a.SHAPES.CIRC?(o=r.radius,h=r.radius):(o=r.width,h=r.height);var l=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(r.width+r.height)),c=2*Math.PI/l;if(t.fill){var f=(0,u.hex2rgb)(t.fillColor),d=t.fillAlpha,p=f[0]*d,v=f[1]*d,y=f[2]*d,g=e.points,m=e.indices,_=g.length/6;m.push(_);for(var b=0;b<l+1;b++)g.push(n,i,p,v,y,d),g.push(n+Math.sin(c*b)*o,i+Math.cos(c*b)*h,p,v,y,d),m.push(_++,_++);m.push(_-1)}if(t.lineWidth){var x=t.points;t.points=[];for(var T=0;T<l+1;T++)t.points.push(n+Math.sin(c*T)*o,i+Math.cos(c*T)*h);(0,s.default)(t,e),t.points=x}}r.__esModule=!0,r.default=i;var o=t(\"./buildLine\"),s=n(o),a=t(\"../../../const\"),u=t(\"../../../utils\")},{\"../../../const\":42,\"../../../utils\":115,\"./buildLine\":57}],57:[function(t,e,r){\"use strict\";function n(t,e){var r=t.points;if(0!==r.length){var n=new i.Point(r[0],r[1]),s=new i.Point(r[r.length-2],r[r.length-1]);if(n.x===s.x&&n.y===s.y){r=r.slice(),r.pop(),r.pop(),s=new i.Point(r[r.length-2],r[r.length-1]);var a=s.x+.5*(n.x-s.x),u=s.y+.5*(n.y-s.y);r.unshift(a,u),r.push(a,u)}var h=e.points,l=e.indices,c=r.length/2,f=r.length,d=h.length/6,p=t.lineWidth/2,v=(0,o.hex2rgb)(t.lineColor),y=t.lineAlpha,g=v[0]*y,m=v[1]*y,_=v[2]*y,b=r[0],x=r[1],T=r[2],w=r[3],E=0,S=0,O=-(x-w),M=b-T,P=0,C=0,R=0,D=0,A=Math.sqrt(O*O+M*M);O/=A,M/=A,O*=p,M*=p,h.push(b-O,x-M,g,m,_,y),h.push(b+O,x+M,g,m,_,y);for(var I=1;I<c-1;++I){b=r[2*(I-1)],x=r[2*(I-1)+1],T=r[2*I],w=r[2*I+1],E=r[2*(I+1)],S=r[2*(I+1)+1],O=-(x-w),M=b-T,A=Math.sqrt(O*O+M*M),O/=A,M/=A,O*=p,M*=p,P=-(w-S),C=T-E,A=Math.sqrt(P*P+C*C),P/=A,C/=A,P*=p,C*=p;var L=-M+x-(-M+w),j=-O+T-(-O+b),F=(-O+b)*(-M+w)-(-O+T)*(-M+x),B=-C+S-(-C+w),k=-P+T-(-P+E),N=(-P+E)*(-C+w)-(-P+T)*(-C+S),U=L*k-B*j;if(Math.abs(U)<.1)U+=10.1,h.push(T-O,w-M,g,m,_,y),h.push(T+O,w+M,g,m,_,y);else{var X=(j*N-k*F)/U,W=(B*F-L*N)/U,G=(X-T)*(X-T)+(W-w)*(W-w);G>196*p*p?(R=O-P,D=M-C,A=Math.sqrt(R*R+D*D),R/=A,D/=A,R*=p,D*=p,h.push(T-R,w-D),h.push(g,m,_,y),h.push(T+R,w+D),h.push(g,m,_,y),h.push(T-R,w-D),h.push(g,m,_,y),f++):(h.push(X,W),h.push(g,m,_,y),h.push(T-(X-T),w-(W-w)),h.push(g,m,_,y))}}b=r[2*(c-2)],x=r[2*(c-2)+1],T=r[2*(c-1)],w=r[2*(c-1)+1],O=-(x-w),M=b-T,A=Math.sqrt(O*O+M*M),O/=A,M/=A,O*=p,M*=p,h.push(T-O,w-M),h.push(g,m,_,y),h.push(T+O,w+M),h.push(g,m,_,y),l.push(d);for(var Y=0;Y<f;++Y)l.push(d++);l.push(d-1)}}r.__esModule=!0,r.default=n;var i=t(\"../../../math\"),o=t(\"../../../utils\")},{\"../../../math\":66,\"../../../utils\":115}],58:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){t.points=t.shape.points.slice();var r=t.points;if(t.fill&&r.length>=6){for(var n=[],i=t.holes,o=0;o<i.length;o++){var u=i[o];n.push(r.length/2),r=r.concat(u.points)}var l=e.points,c=e.indices,f=r.length/2,d=(0,a.hex2rgb)(t.fillColor),p=t.fillAlpha,v=d[0]*p,y=d[1]*p,g=d[2]*p,m=(0,h.default)(r,n,2);if(!m)return;for(var _=l.length/6,b=0;b<m.length;b+=3)c.push(m[b]+_),c.push(m[b]+_),c.push(m[b+1]+_),c.push(m[b+2]+_),c.push(m[b+2]+_);for(var x=0;x<f;x++)l.push(r[2*x],r[2*x+1],v,y,g,p)}t.lineWidth>0&&(0,s.default)(t,e)}r.__esModule=!0,r.default=i;var o=t(\"./buildLine\"),s=n(o),a=t(\"../../../utils\"),u=t(\"earcut\"),h=n(u)},{\"../../../utils\":115,\"./buildLine\":57,earcut:2}],59:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var r=t.shape,n=r.x,i=r.y,o=r.width,u=r.height;if(t.fill){var h=(0,a.hex2rgb)(t.fillColor),l=t.fillAlpha,c=h[0]*l,f=h[1]*l,d=h[2]*l,p=e.points,v=e.indices,y=p.length/6;p.push(n,i),p.push(c,f,d,l),p.push(n+o,i),p.push(c,f,d,l),p.push(n,i+u),p.push(c,f,d,l),p.push(n+o,i+u),p.push(c,f,d,l),v.push(y,y,y+1,y+2,y+3,y+3)}if(t.lineWidth){var g=t.points;t.points=[n,i,n+o,i,n+o,i+u,n,i+u,n,i],(0,s.default)(t,e),t.points=g}}r.__esModule=!0,r.default=i;var o=t(\"./buildLine\"),s=n(o),a=t(\"../../../utils\")},{\"../../../utils\":115,\"./buildLine\":57}],60:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var r=t.shape,n=r.x,i=r.y,s=r.width,u=r.height,c=r.radius,f=[];if(f.push(n,i+c),o(n,i+u-c,n,i+u,n+c,i+u,f),o(n+s-c,i+u,n+s,i+u,n+s,i+u-c,f),o(n+s,i+c,n+s,i,n+s-c,i,f),o(n+c,i,n,i,n,i+c+1e-10,f),t.fill){for(var d=(0,l.hex2rgb)(t.fillColor),p=t.fillAlpha,v=d[0]*p,y=d[1]*p,g=d[2]*p,m=e.points,_=e.indices,b=m.length/6,x=(0,a.default)(f,null,2),T=0,w=x.length;T<w;T+=3)_.push(x[T]+b),_.push(x[T]+b),_.push(x[T+1]+b),_.push(x[T+2]+b),_.push(x[T+2]+b);for(var E=0,S=f.length;E<S;E++)m.push(f[E],f[++E],v,y,g,p)}if(t.lineWidth){var O=t.points;t.points=f,(0,h.default)(t,e),t.points=O}}function o(t,e,r,n,i,o){function s(t,e,r){var n=e-t;return t+n*r}for(var a=arguments.length<=6||void 0===arguments[6]?[]:arguments[6],u=20,h=a,l=0,c=0,f=0,d=0,p=0,v=0,y=0,g=0;y<=u;++y)g=y/u,l=s(t,r,g),c=s(e,n,g),f=s(r,i,g),d=s(n,o,g),p=s(l,f,g),v=s(c,d,g),h.push(p,v);return h}r.__esModule=!0,r.default=i;var s=t(\"earcut\"),a=n(s),u=t(\"./buildLine\"),h=n(u),l=t(\"../../../utils\")},{\"../../../utils\":115,\"./buildLine\":57,earcut:2}],61:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(){var t=arguments.length<=0||void 0===arguments[0]?800:arguments[0],e=arguments.length<=1||void 0===arguments[1]?600:arguments[1],r=arguments[2],n=arguments[3];return!n&&N.isWebGLSupported()?new H.default(t,e,r):new G.default(t,e,r)}r.__esModule=!0,r.Filter=r.SpriteMaskFilter=r.Quad=r.RenderTarget=r.ObjectRenderer=r.WebGLManager=r.Shader=r.CanvasRenderTarget=r.TextureUvs=r.VideoBaseTexture=r.BaseRenderTexture=r.RenderTexture=r.BaseTexture=r.Texture=r.CanvasGraphicsRenderer=r.GraphicsRenderer=r.GraphicsData=r.Graphics=r.TextStyle=r.Text=r.SpriteRenderer=r.CanvasTinter=r.CanvasSpriteRenderer=r.Sprite=r.TransformBase=r.TransformStatic=r.Transform=r.Container=r.DisplayObject=r.glCore=r.WebGLRenderer=r.CanvasRenderer=r.ticker=r.utils=void 0;var s=t(\"./const\");Object.keys(s).forEach(function(t){\"default\"!==t&&\"__esModule\"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return s[t]}})});var a=t(\"./math\");Object.keys(a).forEach(function(t){\"default\"!==t&&\"__esModule\"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return a[t]}})});var u=t(\"pixi-gl-core\");Object.defineProperty(r,\"glCore\",{enumerable:!0,get:function(){return i(u).default}});var h=t(\"./display/DisplayObject\");Object.defineProperty(r,\"DisplayObject\",{enumerable:!0,get:function(){return i(h).default}});var l=t(\"./display/Container\");Object.defineProperty(r,\"Container\",{enumerable:!0,get:function(){return i(l).default}});var c=t(\"./display/Transform\");Object.defineProperty(r,\"Transform\",{enumerable:!0,get:function(){return i(c).default}});var f=t(\"./display/TransformStatic\");Object.defineProperty(r,\"TransformStatic\",{enumerable:!0,get:function(){return i(f).default}});var d=t(\"./display/TransformBase\");Object.defineProperty(r,\"TransformBase\",{enumerable:!0,get:function(){return i(d).default}});var p=t(\"./sprites/Sprite\");Object.defineProperty(r,\"Sprite\",{enumerable:!0,get:function(){return i(p).default}});var v=t(\"./sprites/canvas/CanvasSpriteRenderer\");Object.defineProperty(r,\"CanvasSpriteRenderer\",{enumerable:!0,get:function(){return i(v).default}});var y=t(\"./sprites/canvas/CanvasTinter\");Object.defineProperty(r,\"CanvasTinter\",{enumerable:!0,get:function(){return i(y).default}});var g=t(\"./sprites/webgl/SpriteRenderer\");Object.defineProperty(r,\"SpriteRenderer\",{enumerable:!0,get:function(){return i(g).default}});var m=t(\"./text/Text\");Object.defineProperty(r,\"Text\",{enumerable:!0,get:function(){return i(m).default}});var _=t(\"./text/TextStyle\");Object.defineProperty(r,\"TextStyle\",{enumerable:!0,get:function(){return i(_).default}});var b=t(\"./graphics/Graphics\");Object.defineProperty(r,\"Graphics\",{enumerable:!0,get:function(){return i(b).default}});var x=t(\"./graphics/GraphicsData\");Object.defineProperty(r,\"GraphicsData\",{enumerable:!0,get:function(){return i(x).default}});var T=t(\"./graphics/webgl/GraphicsRenderer\");Object.defineProperty(r,\"GraphicsRenderer\",{enumerable:!0,get:function(){return i(T).default}});var w=t(\"./graphics/canvas/CanvasGraphicsRenderer\");Object.defineProperty(r,\"CanvasGraphicsRenderer\",{enumerable:!0,get:function(){return i(w).default}});var E=t(\"./textures/Texture\");Object.defineProperty(r,\"Texture\",{enumerable:!0,get:function(){return i(E).default}});var S=t(\"./textures/BaseTexture\");Object.defineProperty(r,\"BaseTexture\",{enumerable:!0,get:function(){return i(S).default}});var O=t(\"./textures/RenderTexture\");Object.defineProperty(r,\"RenderTexture\",{enumerable:!0,get:function(){return i(O).default}});var M=t(\"./textures/BaseRenderTexture\");Object.defineProperty(r,\"BaseRenderTexture\",{enumerable:!0,get:function(){return i(M).default}});var P=t(\"./textures/VideoBaseTexture\");Object.defineProperty(r,\"VideoBaseTexture\",{enumerable:!0,get:function(){return i(P).default}});var C=t(\"./textures/TextureUvs\");Object.defineProperty(r,\"TextureUvs\",{enumerable:!0,get:function(){return i(C).default}});var R=t(\"./renderers/canvas/utils/CanvasRenderTarget\");Object.defineProperty(r,\"CanvasRenderTarget\",{enumerable:!0,get:function(){return i(R).default}});var D=t(\"./Shader\");Object.defineProperty(r,\"Shader\",{enumerable:!0,get:function(){return i(D).default}});var A=t(\"./renderers/webgl/managers/WebGLManager\");Object.defineProperty(r,\"WebGLManager\",{enumerable:!0,get:function(){return i(A).default}});var I=t(\"./renderers/webgl/utils/ObjectRenderer\");Object.defineProperty(r,\"ObjectRenderer\",{enumerable:!0,get:function(){return i(I).default}});var L=t(\"./renderers/webgl/utils/RenderTarget\");Object.defineProperty(r,\"RenderTarget\",{enumerable:!0,get:function(){return i(L).default}});var j=t(\"./renderers/webgl/utils/Quad\");Object.defineProperty(r,\"Quad\",{enumerable:!0,get:function(){return i(j).default}});var F=t(\"./renderers/webgl/filters/spriteMask/SpriteMaskFilter\");Object.defineProperty(r,\"SpriteMaskFilter\",{enumerable:!0,get:function(){return i(F).default}});var B=t(\"./renderers/webgl/filters/Filter\");Object.defineProperty(r,\"Filter\",{enumerable:!0,get:function(){return i(B).default}}),r.autoDetectRenderer=o;var k=t(\"./utils\"),N=n(k),U=t(\"./ticker\"),X=n(U),W=t(\"./renderers/canvas/CanvasRenderer\"),G=i(W),Y=t(\"./renderers/webgl/WebGLRenderer\"),H=i(Y);r.utils=N,r.ticker=X,r.CanvasRenderer=G.default,r.WebGLRenderer=H.default},{\"./Shader\":41,\"./const\":42,\"./display/Container\":44,\"./display/DisplayObject\":45,\"./display/Transform\":46,\"./display/TransformBase\":47,\"./display/TransformStatic\":48,\"./graphics/Graphics\":49,\"./graphics/GraphicsData\":50,\"./graphics/canvas/CanvasGraphicsRenderer\":51,\"./graphics/webgl/GraphicsRenderer\":53,\"./math\":66,\"./renderers/canvas/CanvasRenderer\":73,\"./renderers/canvas/utils/CanvasRenderTarget\":75,\"./renderers/webgl/WebGLRenderer\":80,\"./renderers/webgl/filters/Filter\":82,\"./renderers/webgl/filters/spriteMask/SpriteMaskFilter\":85,\"./renderers/webgl/managers/WebGLManager\":89,\"./renderers/webgl/utils/ObjectRenderer\":90,\"./renderers/webgl/utils/Quad\":91,\"./renderers/webgl/utils/RenderTarget\":92,\"./sprites/Sprite\":97,\"./sprites/canvas/CanvasSpriteRenderer\":98,\"./sprites/canvas/CanvasTinter\":99,\"./sprites/webgl/SpriteRenderer\":101,\"./text/Text\":103,\"./text/TextStyle\":104,\"./textures/BaseRenderTexture\":105,\"./textures/BaseTexture\":106,\"./textures/RenderTexture\":107,\"./textures/Texture\":108,\"./textures/TextureUvs\":109,\"./textures/VideoBaseTexture\":110,\"./ticker\":112,\"./utils\":115,\"pixi-gl-core\":14}],62:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){return t<0?-1:t>0?1:0}function o(){for(var t=0;t<16;t++){var e=[];d.push(e);for(var r=0;r<16;r++)for(var n=i(u[t]*u[r]+l[t]*h[r]),o=i(h[t]*u[r]+c[t]*h[r]),s=i(u[t]*l[r]+l[t]*c[r]),p=i(h[t]*l[r]+c[t]*c[r]),v=0;v<16;v++)if(u[v]===n&&h[v]===o&&l[v]===s&&c[v]===p){e.push(v);break}}for(var y=0;y<16;y++){var g=new a.default;g.set(u[y],h[y],l[y],c[y],0,0),f.push(g)}}r.__esModule=!0;var s=t(\"./Matrix\"),a=n(s),u=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],h=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],l=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],c=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],f=[],d=[];o();var p={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return u[t]},uY:function(t){return h[t]},vX:function(t){return l[t]},vY:function(t){return c[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return d[t][e]},sub:function(t,e){return d[t][p.inv(e)]},rotate180:function(t){return 4^t},isSwapWidthHeight:function(t){return 2===(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?p.S:p.N:2*Math.abs(e)<=Math.abs(t)?t>0?p.E:p.W:e>0?t>0?p.SE:p.SW:t>0?p.NE:p.NW},matrixAppendRotationInv:function(t,e){var r=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=arguments.length<=3||void 0===arguments[3]?0:arguments[3],i=f[p.inv(e)];i.tx=r,i.ty=n,t.append(i)}};r.default=p},{\"./Matrix\":63}],63:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t(\"./Point\"),a=n(s),u=function(){function t(){i(this,t),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,r,n,i,o){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},t.prototype.apply=function(t,e){e=e||new a.default;var r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new a.default;var r=1/(this.a*this.d+this.c*-this.b),n=t.x,i=t.y;return e.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),n=this.a,i=this.c,o=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=i*e-this.d*r,this.d=i*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this},t.prototype.append=function(t){var e=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*i,\nthis.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this},t.prototype.setTransform=function(t,e,r,n,i,o,s,a,u){var h=Math.sin(s),l=Math.cos(s),c=Math.cos(u),f=Math.sin(u),d=-Math.sin(a),p=Math.cos(a),v=l*i,y=h*i,g=-h*o,m=l*o;return this.a=c*v+f*g,this.b=c*y+f*m,this.c=d*v+p*g,this.d=d*y+p*m,this.tx=t+(r*v+n*g),this.ty=e+(r*y+n*m),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var r=this.a,n=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,r=this.b,n=this.c,i=this.d,o=Math.atan2(-n,i),s=Math.atan2(r,e),a=Math.abs(1-o/s);return a<1e-5?(t.rotation=s,e<0&&i>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(n*n+i*i),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,n=this.d,i=this.tx,o=t*n-e*r;return this.a=n/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-n*i)/o,this.ty=-(t*this.ty-e*i)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},o(t,null,[{key:\"IDENTITY\",get:function(){return new t}},{key:\"TEMP_MATRIX\",get:function(){return new t}}]),t}();r.default=u},{\"./Point\":65}],64:[function(t,e,r){\"use strict\";function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(e,r){var i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],o=arguments.length<=3||void 0===arguments[3]?0:arguments[3];n(this,t),this._x=i,this._y=o,this.cb=e,this.scope=r}return t.prototype.set=function(t,e){var r=t||0,n=e||(0!==e?r:0);this._x===r&&this._y===n||(this._x=r,this._y=n,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},i(t,[{key:\"x\",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:\"y\",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();r.default=o},{}],65:[function(t,e,r){\"use strict\";function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var i=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],r=arguments.length<=1||void 0===arguments[1]?0:arguments[1];n(this,t),this.x=e,this.y=r}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();r.default=i},{}],66:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t(\"./Point\");Object.defineProperty(r,\"Point\",{enumerable:!0,get:function(){return n(i).default}});var o=t(\"./ObservablePoint\");Object.defineProperty(r,\"ObservablePoint\",{enumerable:!0,get:function(){return n(o).default}});var s=t(\"./Matrix\");Object.defineProperty(r,\"Matrix\",{enumerable:!0,get:function(){return n(s).default}});var a=t(\"./GroupD8\");Object.defineProperty(r,\"GroupD8\",{enumerable:!0,get:function(){return n(a).default}});var u=t(\"./shapes/Circle\");Object.defineProperty(r,\"Circle\",{enumerable:!0,get:function(){return n(u).default}});var h=t(\"./shapes/Ellipse\");Object.defineProperty(r,\"Ellipse\",{enumerable:!0,get:function(){return n(h).default}});var l=t(\"./shapes/Polygon\");Object.defineProperty(r,\"Polygon\",{enumerable:!0,get:function(){return n(l).default}});var c=t(\"./shapes/Rectangle\");Object.defineProperty(r,\"Rectangle\",{enumerable:!0,get:function(){return n(c).default}});var f=t(\"./shapes/RoundedRectangle\");Object.defineProperty(r,\"RoundedRectangle\",{enumerable:!0,get:function(){return n(f).default}})},{\"./GroupD8\":62,\"./Matrix\":63,\"./ObservablePoint\":64,\"./Point\":65,\"./shapes/Circle\":67,\"./shapes/Ellipse\":68,\"./shapes/Polygon\":69,\"./shapes/Rectangle\":70,\"./shapes/RoundedRectangle\":71}],67:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var o=t(\"./Rectangle\"),s=n(o),a=t(\"../../const\"),u=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],r=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];i(this,t),this.x=e,this.y=r,this.radius=n,this.type=a.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,n=this.x-t,i=this.y-e;return n*=n,i*=i,n+i<=r},t.prototype.getBounds=function(){return new s.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();r.default=u},{\"../../const\":42,\"./Rectangle\":70}],68:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var o=t(\"./Rectangle\"),s=n(o),a=t(\"../../const\"),u=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],r=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],o=arguments.length<=3||void 0===arguments[3]?0:arguments[3];i(this,t),this.x=e,this.y=r,this.width=n,this.height=o,this.type=a.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,n=(e-this.y)/this.height;return r*=r,n*=n,r+n<=1},t.prototype.getBounds=function(){return new s.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();r.default=u},{\"../../const\":42,\"./Rectangle\":70}],69:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var o=t(\"../Point\"),s=n(o),a=t(\"../../const\"),u=function(){function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];if(i(this,t),Array.isArray(r[0])&&(r=r[0]),r[0]instanceof s.default){for(var o=[],u=0,h=r.length;u<h;u++)o.push(r[u].x,r[u].y);r=o}this.closed=!0,this.points=r,this.type=a.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var r=!1,n=this.points.length/2,i=0,o=n-1;i<n;o=++i){var s=this.points[2*i],a=this.points[2*i+1],u=this.points[2*o],h=this.points[2*o+1],l=a>e!=h>e&&t<(u-s)*((e-a)/(h-a))+s;l&&(r=!r)}return r},t}();r.default=u},{\"../../const\":42,\"../Point\":65}],70:[function(t,e,r){\"use strict\";function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t(\"../../const\"),s=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],r=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],s=arguments.length<=3||void 0===arguments[3]?0:arguments[3];n(this,t),this.x=e,this.y=r,this.width=i,this.height=s,this.type=o.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},t.prototype.enlarge=function(e){if(e!==t.EMPTY){var r=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),o=Math.max(this.y+this.height,e.y+e.height);this.x=r,this.width=n-r,this.y=i,this.height=o-i}},i(t,[{key:\"left\",get:function(){return this.x}},{key:\"right\",get:function(){return this.x+this.width}},{key:\"top\",get:function(){return this.y}},{key:\"bottom\",get:function(){return this.y+this.height}}],[{key:\"EMPTY\",get:function(){return new t(0,0,0,0)}}]),t}();r.default=s},{\"../../const\":42}],71:[function(t,e,r){\"use strict\";function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var i=t(\"../../const\"),o=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],r=arguments.length<=1||void 0===arguments[1]?0:arguments[1],o=arguments.length<=2||void 0===arguments[2]?0:arguments[2],s=arguments.length<=3||void 0===arguments[3]?0:arguments[3],a=arguments.length<=4||void 0===arguments[4]?20:arguments[4];n(this,t),this.x=e,this.y=r,this.width=o,this.height=s,this.radius=a,this.type=i.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height)},t}();r.default=o},{\"../../const\":42}],72:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(\"../utils\"),h=t(\"../math\"),l=t(\"../const\"),c=t(\"../display/Container\"),f=n(c),d=t(\"../textures/RenderTexture\"),p=n(d),v=t(\"eventemitter3\"),y=n(v),g=new h.Matrix,m=function(t){function e(r,n,s,a){i(this,e);var h=o(this,t.call(this));if((0,u.sayHello)(r),a)for(var c in l.DEFAULT_RENDER_OPTIONS)\"undefined\"==typeof a[c]&&(a[c]=l.DEFAULT_RENDER_OPTIONS[c]);else a=l.DEFAULT_RENDER_OPTIONS;return h.type=l.RENDERER_TYPE.UNKNOWN,h.width=n||800,h.height=s||600,h.view=a.view||document.createElement(\"canvas\"),h.resolution=a.resolution||l.RESOLUTION,h.transparent=a.transparent,h.autoResize=a.autoResize||!1,h.blendModes=null,h.preserveDrawingBuffer=a.preserveDrawingBuffer,h.clearBeforeRender=a.clearBeforeRender,h.roundPixels=a.roundPixels,h._backgroundColor=0,h._backgroundColorRgba=[0,0,0,0],h._backgroundColorString=\"#000000\",h.backgroundColor=a.backgroundColor||h._backgroundColor,h._tempDisplayObjectParent=new f.default,h._lastObjectRendered=h._tempDisplayObjectParent,h}return s(e,t),e.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+\"px\",this.view.style.height=this.height/this.resolution+\"px\")},e.prototype.generateTexture=function(t,e,r){var n=t.getLocalBounds(),i=p.default.create(0|n.width,0|n.height,e,r);return g.tx=-n.x,g.ty=-n.y,this.render(t,i,!1,g,!0),i},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=l.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this.backgroundColor=0,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},a(e,[{key:\"backgroundColor\",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,u.hex2string)(t),(0,u.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(y.default);r.default=m},{\"../const\":42,\"../display/Container\":44,\"../math\":66,\"../textures/RenderTexture\":107,\"../utils\":115,eventemitter3:3}],73:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(\"../SystemRenderer\"),u=n(a),h=t(\"./utils/CanvasMaskManager\"),l=n(h),c=t(\"./utils/CanvasRenderTarget\"),f=n(c),d=t(\"./utils/mapCanvasBlendModesToPixi\"),p=n(d),v=t(\"../../utils\"),y=t(\"../../const\"),g=function(t){function e(r,n){var s=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];i(this,e);var a=o(this,t.call(this,\"Canvas\",r,n,s));return a.type=y.RENDERER_TYPE.CANVAS,a.rootContext=a.view.getContext(\"2d\",{alpha:a.transparent}),a.refresh=!0,a.maskManager=new l.default(a),a.smoothProperty=\"imageSmoothingEnabled\",a.rootContext.imageSmoothingEnabled||(a.rootContext.webkitImageSmoothingEnabled?a.smoothProperty=\"webkitImageSmoothingEnabled\":a.rootContext.mozImageSmoothingEnabled?a.smoothProperty=\"mozImageSmoothingEnabled\":a.rootContext.oImageSmoothingEnabled?a.smoothProperty=\"oImageSmoothingEnabled\":a.rootContext.msImageSmoothingEnabled&&(a.smoothProperty=\"msImageSmoothingEnabled\")),a.initPlugins(),a.blendModes=(0,p.default)(),a._activeBlendMode=null,a.context=null,a.renderingToScreen=!1,a.resize(r,n),a}return s(e,t),e.prototype.render=function(t,e,r,n,i){if(this.view){this.renderingToScreen=!e,this.emit(\"prerender\"),e?(e=e.baseTexture||e,e._canvasRenderTarget||(e._canvasRenderTarget=new f.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var o=this.context;if(e||(this._lastObjectRendered=t),!i){var s=t.parent,a=this._tempDisplayObjectParent.transform.worldTransform;n?n.copy(a):a.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=s}o.setTransform(1,0,0,1,0,0),o.globalAlpha=1,o.globalCompositeOperation=this.blendModes[y.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(o.fillStyle=\"black\",o.clear()),(void 0!==r?r:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?o.clearRect(0,0,this.width,this.height):(o.fillStyle=this._backgroundColorString,o.fillRect(0,0,this.width,this.height)));var u=this.context;this.context=o,t.renderCanvas(this),this.context=u,this.emit(\"postrender\")}},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,r){t.prototype.resize.call(this,e,r),this.smoothProperty&&(this.rootContext[this.smoothProperty]=y.SCALE_MODES.DEFAULT===y.SCALE_MODES.LINEAR)},e}(u.default);r.default=g,v.pluginTarget.mixin(g)},{\"../../const\":42,\"../../utils\":115,\"../SystemRenderer\":72,\"./utils/CanvasMaskManager\":74,\"./utils/CanvasRenderTarget\":75,\"./utils/mapCanvasBlendModesToPixi\":77}],74:[function(t,e,r){\"use strict\";function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var i=t(\"../../../const\"),o=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var r=t.alpha,n=t.transform.worldTransform,i=e.resolution;e.context.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=r},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,r=t.graphicsData.length;if(0!==r){e.beginPath();for(var n=0;n<r;n++){var o=t.graphicsData[n],s=o.shape;if(o.type===i.SHAPES.POLY){var a=s.points;e.moveTo(a[0],a[1]);for(var u=1;u<a.length/2;u++)e.lineTo(a[2*u],a[2*u+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath()}else if(o.type===i.SHAPES.RECT)e.rect(s.x,s.y,s.width,s.height),e.closePath();else if(o.type===i.SHAPES.CIRC)e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath();else if(o.type===i.SHAPES.ELIP){var h=2*s.width,l=2*s.height,c=s.x-h/2,f=s.y-l/2,d=.5522848,p=h/2*d,v=l/2*d,y=c+h,g=f+l,m=c+h/2,_=f+l/2;e.moveTo(c,_),e.bezierCurveTo(c,_-v,m-p,f,m,f),e.bezierCurveTo(m+p,f,y,_-v,y,_),e.bezierCurveTo(y,_+v,m+p,g,m,g),e.bezierCurveTo(m-p,g,c,_+v,c,_),e.closePath()}else if(o.type===i.SHAPES.RREC){var b=s.x,x=s.y,T=s.width,w=s.height,E=s.radius,S=Math.min(T,w)/2|0;E=E>S?S:E,e.moveTo(b,x+E),e.lineTo(b,x+w-E),e.quadraticCurveTo(b,x+w,b+E,x+w),e.lineTo(b+T-E,x+w),e.quadraticCurveTo(b+T,x+w,b+T,x+w-E),e.lineTo(b+T,x+E),e.quadraticCurveTo(b+T,x,b+T-E,x),e.lineTo(b+E,x),e.quadraticCurveTo(b,x,b,x+E),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore()},t.prototype.destroy=function(){},t}();r.default=o},{\"../../../const\":42}],75:[function(t,e,r){\"use strict\";function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=t(\"../../../const\"),s=function(){function t(e,r,i){n(this,t),this.canvas=document.createElement(\"canvas\"),this.context=this.canvas.getContext(\"2d\"),this.resolution=i||o.RESOLUTION,this.resize(e,r)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},i(t,[{key:\"width\",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:\"height\",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();r.default=s},{\"../../../const\":42}],76:[function(t,e,r){\"use strict\";function n(t){var e=document.createElement(\"canvas\");e.width=6,e.height=1;var r=e.getContext(\"2d\");return r.fillStyle=t,r.fillRect(0,0,6,1),e}function i(){if(\"undefined\"==typeof document)return!1;var t=n(\"#ff00ff\"),e=n(\"#ffff00\"),r=document.createElement(\"canvas\");r.width=6,r.height=1;var i=r.getContext(\"2d\");i.globalCompositeOperation=\"multiply\",i.drawImage(t,0,0),i.drawImage(e,2,0);var o=i.getImageData(2,0,1,1);if(!o)return!1;var s=o.data;return 255===s[0]&&0===s[1]&&0===s[2]}r.__esModule=!0,r.default=i},{}],77:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];return(0,a.default)()?(t[o.BLEND_MODES.NORMAL]=\"source-over\",t[o.BLEND_MODES.ADD]=\"lighter\",t[o.BLEND_MODES.MULTIPLY]=\"multiply\",t[o.BLEND_MODES.SCREEN]=\"screen\",t[o.BLEND_MODES.OVERLAY]=\"overlay\",t[o.BLEND_MODES.DARKEN]=\"darken\",t[o.BLEND_MODES.LIGHTEN]=\"lighten\",t[o.BLEND_MODES.COLOR_DODGE]=\"color-dodge\",t[o.BLEND_MODES.COLOR_BURN]=\"color-burn\",t[o.BLEND_MODES.HARD_LIGHT]=\"hard-light\",t[o.BLEND_MODES.SOFT_LIGHT]=\"soft-light\",t[o.BLEND_MODES.DIFFERENCE]=\"difference\",t[o.BLEND_MODES.EXCLUSION]=\"exclusion\",t[o.BLEND_MODES.HUE]=\"hue\",t[o.BLEND_MODES.SATURATION]=\"saturate\",t[o.BLEND_MODES.COLOR]=\"color\",t[o.BLEND_MODES.LUMINOSITY]=\"luminosity\"):(t[o.BLEND_MODES.NORMAL]=\"source-over\",t[o.BLEND_MODES.ADD]=\"lighter\",t[o.BLEND_MODES.MULTIPLY]=\"source-over\",t[o.BLEND_MODES.SCREEN]=\"source-over\",t[o.BLEND_MODES.OVERLAY]=\"source-over\",t[o.BLEND_MODES.DARKEN]=\"source-over\",t[o.BLEND_MODES.LIGHTEN]=\"source-over\",t[o.BLEND_MODES.COLOR_DODGE]=\"source-over\",t[o.BLEND_MODES.COLOR_BURN]=\"source-over\",t[o.BLEND_MODES.HARD_LIGHT]=\"source-over\",t[o.BLEND_MODES.SOFT_LIGHT]=\"source-over\",t[o.BLEND_MODES.DIFFERENCE]=\"source-over\",t[o.BLEND_MODES.EXCLUSION]=\"source-over\",t[o.BLEND_MODES.HUE]=\"source-over\",t[o.BLEND_MODES.SATURATION]=\"source-over\",t[o.BLEND_MODES.COLOR]=\"source-over\",t[o.BLEND_MODES.LUMINOSITY]=\"source-over\"),t}r.__esModule=!0,r.default=i;var o=t(\"../../../const\"),s=t(\"./canUseNewCanvasBlendModes\"),a=n(s)},{\"../../../const\":42,\"./canUseNewCanvasBlendModes\":76}],78:[function(t,e,r){\"use strict\";function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var i=t(\"../../const\"),o=function(){function t(e){n(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=3600,this.checkCountMax=600,this.mode=i.GC_MODES.DEFAULT}return t.prototype.update=function(){this.count++,this.mode!==i.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,r=!1,n=0;n<e.length;n++){var i=e[n];!i._glRenderTargets&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[n]=null,r=!0)}if(r){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&e.destroyTexture(t._texture,!0);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},t}();r.default=o},{\"../../const\":42}],79:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var o=t(\"pixi-gl-core\"),s=t(\"../../const\"),a=t(\"./utils/RenderTarget\"),u=n(a),h=t(\"../../utils\"),l=function(){function t(e){i(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t){t=t.baseTexture||t;var e=!!t._glRenderTargets;if(!t.hasLoaded)return null;var r=t._glTextures[this.renderer.CONTEXT_UID];if(r)e?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):r.upload(t.source);else{if(e){var n=new u.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);n.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=n,r=n.texture}else r=new o.GLTexture(this.gl),r.premultiplyAlpha=!0,r.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=r,t.on(\"update\",this.updateTexture,this),t.on(\"dispose\",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&r.enableMipmap(),t.wrapMode===s.WRAP_MODES.CLAMP?r.enableWrapClamp():t.wrapMode===s.WRAP_MODES.REPEAT?r.enableWrapRepeat():r.enableWrapMirrorRepeat()):r.enableWrapClamp(),t.scaleMode===s.SCALE_MODES.NEAREST?r.enableNearestScaling():r.enableLinearScaling()}return r},t.prototype.destroyTexture=function(t,e){if(t=t.baseTexture||t,t.hasLoaded&&t._glTextures[this.renderer.CONTEXT_UID]&&(t._glTextures[this.renderer.CONTEXT_UID].destroy(),t.off(\"update\",this.updateTexture,this),t.off(\"dispose\",this.destroyTexture,this),delete t._glTextures[this.renderer.CONTEXT_UID],!e)){var r=this._managedTextures.indexOf(t);r!==-1&&(0,h.removeItems)(this._managedTextures,r,1)}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off(\"update\",this.updateTexture,this),e.off(\"dispose\",this.destroyTexture,this)}this._managedTextures=null},t}();r.default=l},{\"../../const\":42,\"../../utils\":115,\"./utils/RenderTarget\":92,\"pixi-gl-core\":14}],80:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(\"../SystemRenderer\"),u=n(a),h=t(\"./managers/MaskManager\"),l=n(h),c=t(\"./managers/StencilManager\"),f=n(c),d=t(\"./managers/FilterManager\"),p=n(d),v=t(\"./utils/RenderTarget\"),y=n(v),g=t(\"./utils/ObjectRenderer\"),m=n(g),_=t(\"./TextureManager\"),b=n(_),x=t(\"./TextureGarbageCollector\"),T=n(x),w=t(\"./WebGLState\"),E=n(w),S=t(\"./utils/mapWebGLDrawModesToPixi\"),O=n(S),M=t(\"./utils/validateContext\"),P=n(M),C=t(\"../../utils\"),R=t(\"pixi-gl-core\"),D=n(R),A=t(\"../../const\"),I=0,L=function(t){function e(r,n){var s=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];i(this,e);var a=o(this,t.call(this,\"WebGL\",r,n,s));return a.type=A.RENDERER_TYPE.WEBGL,a.handleContextLost=a.handleContextLost.bind(a),a.handleContextRestored=a.handleContextRestored.bind(a),a.view.addEventListener(\"webglcontextlost\",a.handleContextLost,!1),a.view.addEventListener(\"webglcontextrestored\",a.handleContextRestored,!1),a._contextOptions={alpha:a.transparent,antialias:s.antialias,premultipliedAlpha:a.transparent&&\"notMultiplied\"!==a.transparent,stencil:!0,preserveDrawingBuffer:s.preserveDrawingBuffer},a._backgroundColorRgba[3]=a.transparent?0:1,a.maskManager=new l.default(a),a.stencilManager=new f.default(a),a.emptyRenderer=new m.default(a),a.currentRenderer=a.emptyRenderer,a.initPlugins(),s.context&&(0,P.default)(s.context),a.gl=s.context||D.default.createContext(a.view,a._contextOptions),a.CONTEXT_UID=I++,a.state=new E.default(a.gl),a.renderingToScreen=!0,a._initContext(),a.filterManager=new p.default(a),a.drawModes=(0,O.default)(a.gl),a._activeShader=null,a._activeRenderTarget=null,a._activeTextureLocation=999,a._activeTexture=null,a.setBlendMode(0),a}return s(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension(\"WEBGL_lose_context\")&&t.getExtension(\"WEBGL_lose_context\").restoreContext(),this.textureManager=new b.default(this),this.textureGC=new T.default(this),this.state.resetToDefault(),this.rootRenderTarget=new y.default(t,this.width,this.height,null,this.resolution,(!0)),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget),this.emit(\"context\",t),this.resize(this.width,this.height)},e.prototype.render=function(t,e,r,n,i){if(this.renderingToScreen=!e,this.emit(\"prerender\"),this.gl&&!this.gl.isContextLost()){if(e||(this._lastObjectRendered=t),!i){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.bindRenderTexture(e,n),this.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit(\"postrender\")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(t,e){u.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.bindRenderTexture=function(t,e){var r=void 0;if(t){var n=t.baseTexture,i=this.gl;n._glRenderTargets[this.CONTEXT_UID]?(this._activeTextureLocation=n._id,i.activeTexture(i.TEXTURE0+n._id),i.bindTexture(i.TEXTURE_2D,null)):(this.textureManager.updateTexture(n),i.bindTexture(i.TEXTURE_2D,null)),r=n._glRenderTargets[this.CONTEXT_UID],r.setFrame(t.frame)}else r=this.rootRenderTarget;return r.transform=e,this.bindRenderTarget(r),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(t){return this._activeShader!==t&&(this._activeShader=t,t.bind(),t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0)),this},e.prototype.bindTexture=function(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1];t=t.baseTexture||t;var r=this.gl;return this._activeTextureLocation!==e&&(this._activeTextureLocation=e,r.activeTexture(r.TEXTURE0+e)),this._activeTexture=t,t._glTextures[this.CONTEXT_UID]?(t.touched=this.textureGC.count,t._glTextures[this.CONTEXT_UID].bind()):this.textureManager.updateTexture(t),this},e.prototype.createVao=function(){return new D.default.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this._activeTextureLocation=999,this._activeTexture=null,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this._initContext(),this.textureManager.removeAll()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener(\"webglcontextlost\",this.handleContextLost),this.view.removeEventListener(\"webglcontextrestored\",this.handleContextRestored),this.textureManager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),\nthis.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension(\"WEBGL_lose_context\")&&this.gl.getExtension(\"WEBGL_lose_context\").loseContext(),this.gl=null},e}(u.default);r.default=L,C.pluginTarget.mixin(L)},{\"../../const\":42,\"../../utils\":115,\"../SystemRenderer\":72,\"./TextureGarbageCollector\":78,\"./TextureManager\":79,\"./WebGLState\":81,\"./managers/FilterManager\":86,\"./managers/MaskManager\":87,\"./managers/StencilManager\":88,\"./utils/ObjectRenderer\":90,\"./utils/RenderTarget\":92,\"./utils/mapWebGLDrawModesToPixi\":95,\"./utils/validateContext\":96,\"pixi-gl-core\":14}],81:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var o=t(\"./utils/mapWebGLBlendModesToPixi\"),s=n(o),a=0,u=1,h=2,l=3,c=4,f=function(){function t(e){i(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,s.default)(e),this.nativeVaoExtension=e.getExtension(\"OES_vertex_array_object\")||e.getExtension(\"MOZ_OES_vertex_array_object\")||e.getExtension(\"WEBKIT_OES_vertex_array_object\")}return t.prototype.push=function(){var t=this.stack[++this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16));for(var e=0;e<this.activeState.length;e++)this.activeState[e]=t[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[a]),this.setDepthTest(t[u]),this.setFrontFace(t[h]),this.setCullFace(t[l]),this.setBlendMode(t[c])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[a]!==t&&(this.activeState[a]=t,this.gl[t?\"enable\":\"disable\"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){t!==this.activeState[c]&&(this.activeState[c]=t,this.gl.blendFunc(this.blendModes[t][0],this.blendModes[t][1]))},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[u]!==t&&(this.activeState[u]=t,this.gl[t?\"enable\":\"disable\"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[l]!==t&&(this.activeState[l]=t,this.gl[t?\"enable\":\"disable\"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[h]!==t&&(this.activeState[h]=t,this.gl.frontFace(this.gl[t?\"CW\":\"CCW\"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var r=1;r<this.maxAttribs;r++)this.gl.disableVertexAttribArray(r)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();r.default=f},{\"./utils/mapWebGLBlendModesToPixi\":94}],82:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t(\"./extractUniformsFromSrc\"),a=n(s),u=t(\"../../../utils\"),h=t(\"../../../const\"),l={},c=function(){function t(e,r,n){i(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=r||t.defaultFragmentSrc,this.blendMode=h.BLEND_MODES.NORMAL,this.uniformData=n||(0,a.default)(this.vertexSrc,this.fragmentSrc,\"projectionMatrix|uSampler\"),this.uniforms={};for(var o in this.uniformData)this.uniforms[o]=this.uniformData[o].value;this.glShaders={},l[this.vertexSrc+this.fragmentSrc]||(l[this.vertexSrc+this.fragmentSrc]=(0,u.uid)()),this.glShaderKey=l[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=1,this.enabled=!0}return t.prototype.apply=function(t,e,r,n){t.applyFilter(this,e,r,n)},o(t,null,[{key:\"defaultVertexSrc\",get:function(){return[\"attribute vec2 aVertexPosition;\",\"attribute vec2 aTextureCoord;\",\"uniform mat3 projectionMatrix;\",\"uniform mat3 filterMatrix;\",\"varying vec2 vTextureCoord;\",\"varying vec2 vFilterCoord;\",\"void main(void){\",\"   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\",\"   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\",\"   vTextureCoord = aTextureCoord ;\",\"}\"].join(\"\\n\")}},{key:\"defaultFragmentSrc\",get:function(){return[\"varying vec2 vTextureCoord;\",\"varying vec2 vFilterCoord;\",\"uniform sampler2D uSampler;\",\"uniform sampler2D filterSampler;\",\"void main(void){\",\"   vec4 masky = texture2D(filterSampler, vFilterCoord);\",\"   vec4 sample = texture2D(uSampler, vTextureCoord);\",\"   vec4 color;\",\"   if(mod(vFilterCoord.x, 1.0) > 0.5)\",\"   {\",\"     color = vec4(1.0, 0.0, 0.0, 1.0);\",\"   }\",\"   else\",\"   {\",\"     color = vec4(0.0, 1.0, 0.0, 1.0);\",\"   }\",\"   gl_FragColor = mix(sample, masky, 0.5);\",\"   gl_FragColor *= sample.a;\",\"}\"].join(\"\\n\")}}]),t}();r.default=c},{\"../../../const\":42,\"../../../utils\":115,\"./extractUniformsFromSrc\":83}],83:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e,r){var n=o(t,r),i=o(e,r);return Object.assign(n,i)}function o(t){for(var e=new RegExp(\"^(projectionMatrix|uSampler|filterArea)$\"),r={},n=void 0,i=t.replace(/\\s+/g,\" \").split(/\\s*;\\s*/),o=0;o<i.length;o++){var s=i[o].trim();if(s.indexOf(\"uniform\")>-1){var a=s.split(\" \"),h=a[1],l=a[2],c=1;l.indexOf(\"[\")>-1&&(n=l.split(/\\[|\\]/),l=n[0],c*=Number(n[1])),l.match(e)||(r[l]={value:u(h,c),name:l,type:h})}}return r}r.__esModule=!0,r.default=i;var s=t(\"pixi-gl-core\"),a=n(s),u=a.default.shader.defaultValue},{\"pixi-gl-core\":14}],84:[function(t,e,r){\"use strict\";function n(t,e,r){var n=t.identity();return n.translate(e.x/r.width,e.y/r.height),n.scale(r.width,r.height),n}function i(t,e,r){var n=t.identity();n.translate(e.x/r.width,e.y/r.height);var i=r.width/e.width,o=r.height/e.height;return n.scale(i,o),n}function o(t,e,r,n){var i=n.worldTransform.copy(s.Matrix.TEMP_MATRIX),o=n._texture.baseTexture,a=t.identity(),u=r.height/r.width;a.translate(e.x/r.width,e.y/r.height),a.scale(1,u);var h=r.width/o.width,l=r.height/o.height;return i.tx/=o.width*h,i.ty/=o.width*h,i.invert(),a.prepend(i),a.scale(1,1/u),a.scale(h,l),a.translate(n.anchor.x,n.anchor.y),a}r.__esModule=!0,r.calculateScreenSpaceMatrix=n,r.calculateNormalizedScreenSpaceMatrix=i,r.calculateSpriteMatrix=o;var s=t(\"../../../math\")},{\"../../../math\":66}],85:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(\"../Filter\"),u=n(a),h=t(\"../../../../math\"),l=function(t){function e(r){i(this,e);var n=new h.Matrix,s=o(this,t.call(this,\"#define GLSLIFY 1\\nattribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\nuniform mat3 otherMatrix;\\n\\nvarying vec2 vMaskCoord;\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n\\n    vTextureCoord = aTextureCoord;\\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\\n}\\n\",\"#define GLSLIFY 1\\nvarying vec2 vMaskCoord;\\nvarying vec2 vTextureCoord;\\n\\nuniform sampler2D uSampler;\\nuniform float alpha;\\nuniform sampler2D mask;\\n\\nvoid main(void)\\n{\\n    // check clip! this will stop the mask bleeding out from the edges\\n    vec2 text = abs( vMaskCoord - 0.5 );\\n    text = step(0.5, text);\\n\\n    float clip = 1.0 - max(text.y, text.x);\\n    vec4 original = texture2D(uSampler, vTextureCoord);\\n    vec4 masky = texture2D(mask, vMaskCoord);\\n\\n    original *= (masky.r * masky.a * alpha * clip);\\n\\n    gl_FragColor = original;\\n}\\n\"));return r.renderable=!1,s.maskSprite=r,s.maskMatrix=n,s}return s(e,t),e.prototype.apply=function(t,e,r){var n=this.maskSprite;this.uniforms.mask=n._texture,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n),this.uniforms.alpha=n.worldAlpha,t.applyFilter(this,e,r)},e}(u.default);r.default=l},{\"../../../../math\":66,\"../Filter\":82}],86:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var u=t(\"./WebGLManager\"),h=i(u),l=t(\"../utils/RenderTarget\"),c=i(l),f=t(\"../utils/Quad\"),d=i(f),p=t(\"../../../math\"),v=t(\"../../../Shader\"),y=i(v),g=t(\"../filters/filterTransforms\"),m=n(g),_=t(\"bit-twiddle\"),b=i(_),x=function t(){a(this,t),this.renderTarget=null,this.sourceFrame=new p.Rectangle,this.destinationFrame=new p.Rectangle,this.filters=[],this.target=null,this.resolution=1},T=function(t){function e(r){a(this,e);var n=o(this,t.call(this,r));return n.gl=n.renderer.gl,n.quad=new d.default(n.gl,r.state.attribState),n.shaderCache={},n.pool={},n.filterData=null,n}return s(e,t),e.prototype.pushFilter=function(t,e){var r=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var i=new x;i.sourceFrame=i.destinationFrame=this.renderer._activeRenderTarget.size,i.renderTarget=r._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[i]},this.filterData=n}var o=n.stack[++n.index];o||(o=n.stack[n.index]=new x);var s=e[0].resolution,a=0|e[0].padding,u=t.filterArea||t.getBounds(!0),h=o.sourceFrame,l=o.destinationFrame;h.x=(u.x*s|0)/s,h.y=(u.y*s|0)/s,h.width=(u.width*s|0)/s,h.height=(u.height*s|0)/s,n.stack[0].renderTarget.transform||h.fit(n.stack[0].destinationFrame),h.pad(a),l.width=h.width,l.height=h.height;var c=this.getPotRenderTarget(r.gl,h.width,h.height,s);o.target=t,o.filters=e,o.resolution=s,o.renderTarget=c,c.setFrame(l,h),r.bindRenderTarget(c),r.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],r=t.stack[t.index];this.quad.map(r.renderTarget.size,r.sourceFrame).upload();var n=r.filters;if(1===n.length)n[0].apply(this,r.renderTarget,e.renderTarget,!1),this.freePotRenderTarget(r.renderTarget);else{var i=r.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,r.resolution);o.setFrame(r.destinationFrame,r.sourceFrame);var s=0;for(s=0;s<n.length-1;++s){n[s].apply(this,i,o,!0);var a=i;i=o,o=a}n[s].apply(this,i,e.renderTarget,!1),this.freePotRenderTarget(i),this.freePotRenderTarget(o)}t.index--,0===t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,r,n){var i=this.renderer,o=t.glShaders[i.CONTEXT_UID];if(o||(t.glShaderKey?(o=this.shaderCache[t.glShaderKey],o||(o=new y.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[i.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=o)):o=t.glShaders[i.CONTEXT_UID]=new y.default(this.gl,t.vertexSrc,t.fragmentSrc),this.quad.initVao(o)),i.bindRenderTarget(r),n){var s=i.gl;s.disable(s.SCISSOR_TEST),i.clear(),s.enable(s.SCISSOR_TEST)}r===i.maskManager.scissorRenderTarget&&i.maskManager.pushScissorMask(null,i.maskManager.scissorData),i.bindShader(o),this.syncUniforms(o,t),e.texture.bind(0),i._activeTextureLocation=0,i.state.setBlendMode(t.blendMode),this.quad.draw()},e.prototype.syncUniforms=function(t,e){var r=e.uniformData,n=e.uniforms,i=1,o=void 0;if(t.uniforms.data.filterArea){o=this.filterData.stack[this.filterData.index];var s=t.uniforms.filterArea;s[0]=o.renderTarget.size.width,s[1]=o.renderTarget.size.height,s[2]=o.sourceFrame.x,s[3]=o.sourceFrame.y,t.uniforms.filterArea=s}if(t.uniforms.data.filterClamp){o=this.filterData.stack[this.filterData.index];var a=t.uniforms.filterClamp;a[0]=0,a[1]=0,a[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,a[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,t.uniforms.filterClamp=a}for(var u in r)if(\"sampler2D\"===r[u].type){if(t.uniforms[u]=i,n[u].baseTexture)this.renderer.bindTexture(n[u].baseTexture,i);else{var h=this.renderer.gl;this.renderer._activeTextureLocation=h.TEXTURE0+i,h.activeTexture(h.TEXTURE0+i),n[u].texture.bind()}i++}else if(\"mat3\"===r[u].type)void 0!==n[u].a?t.uniforms[u]=n[u].toArray(!0):t.uniforms[u]=n[u];else if(\"vec2\"===r[u].type)if(void 0!==n[u].x){var l=t.uniforms[u]||new Float32Array(2);l[0]=n[u].x,l[1]=n[u].y,t.uniforms[u]=l}else t.uniforms[u]=n[u];else\"float\"===r[u].type?t.uniforms.data[u].value!==r[u]&&(t.uniforms[u]=n[u]):t.uniforms[u]=n[u]},e.prototype.getRenderTarget=function(t,e){var r=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,e||r.resolution);return n.setFrame(r.destinationFrame,r.sourceFrame),n},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return m.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return m.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var r=this.filterData.stack[this.filterData.index];return m.calculateSpriteMatrix(t,r.sourceFrame,r.renderTarget.size,e)},e.prototype.destroy=function(){this.shaderCache=[],this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,r,n){e=b.default.nextPow2(e*n),r=b.default.nextPow2(r*n);var i=(65535&e)<<16|65535&r;this.pool[i]||(this.pool[i]=[]);var o=this.pool[i].pop()||new c.default(t,e,r,null,1);return o.resolution=n,o.defaultFrame.width=o.size.width=e/n,o.defaultFrame.height=o.size.height=r/n,o},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var r=0;r<e.length;r++)e[r].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){var e=t.size.width*t.resolution,r=t.size.height*t.resolution,n=(65535&e)<<16|65535&r;this.pool[n].push(t)},e}(h.default);r.default=T},{\"../../../Shader\":41,\"../../../math\":66,\"../filters/filterTransforms\":84,\"../utils/Quad\":91,\"../utils/RenderTarget\":92,\"./WebGLManager\":89,\"bit-twiddle\":1}],87:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(\"./WebGLManager\"),u=n(a),h=t(\"../filters/spriteMask/SpriteMaskFilter\"),l=n(h),c=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));return n.scissor=!1,n.scissorData=null,n.scissorRenderTarget=null,n.enableScissor=!0,n.alphaMaskPool=[],n.alphaMaskIndex=0,n}return s(e,t),e.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var r=e.worldTransform,n=Math.atan2(r.b,r.a);n=Math.round(n*(180/Math.PI)),n%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new l.default(e)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=e,t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,r),this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var r=this.renderer._activeRenderTarget,n=e.getBounds();n.fit(r.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var i=this.renderer.resolution;this.renderer.gl.scissor(n.x*i,(r.root?r.size.height-n.y-n.height:n.y)*i,n.width*i,n.height*i),this.scissorRenderTarget=r,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(u.default);r.default=c},{\"../filters/spriteMask/SpriteMaskFilter\":85,\"./WebGLManager\":89}],88:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(\"./WebGLManager\"),u=n(a),h=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));return n.stencilMaskStack=null,n}return s(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,r=this.stencilMaskStack;0===r.length&&(e.enable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.stencilFunc(e.ALWAYS,1,1)),r.push(t),e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,r.length),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack,r=e.pop();0===e.length?t.disable(t.STENCIL_TEST):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(r),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,e.length),t.stencilOp(t.KEEP,t.KEEP,t.KEEP))},e.prototype.destroy=function(){u.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(u.default);r.default=h},{\"./WebGLManager\":89}],89:[function(t,e,r){\"use strict\";function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var i=function(){function t(e){n(this,t),this.renderer=e,this.renderer.on(\"context\",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off(\"context\",this.onContextChange,this),this.renderer=null},t}();r.default=i},{}],90:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(\"../managers/WebGLManager\"),u=n(a),h=function(t){function e(){return i(this,e),o(this,t.apply(this,arguments))}return s(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(u.default);r.default=h},{\"../managers/WebGLManager\":89}],91:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var o=t(\"pixi-gl-core\"),s=n(o),a=t(\"../../../utils/createIndicesForQuads\"),u=n(a),h=function(){function t(e,r){i(this,t),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var n=0;n<4;n++)this.interleaved[4*n]=this.vertices[2*n],this.interleaved[4*n+1]=this.vertices[2*n+1],this.interleaved[4*n+2]=this.uvs[2*n],this.interleaved[4*n+3]=this.uvs[2*n+1];this.indices=(0,u.default)(1),this.vertexBuffer=s.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=s.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new s.default.VertexArrayObject(e,r)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+e.width/t.width,this.uvs[3]=n,this.uvs[4]=r+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=r,this.uvs[7]=n+e.height/t.height,r=e.x,n=e.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+e.width,this.vertices[3]=n,this.vertices[4]=r+e.width,this.vertices[5]=n+e.height,this.vertices[6]=r,this.vertices[7]=n+e.height,this},t.prototype.draw=function(){return this.vao.bind().draw(this.gl.TRIANGLES,6,0).unbind(),this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();r.default=h},{\"../../../utils/createIndicesForQuads\":113,\"pixi-gl-core\":14}],92:[function(t,e,r){\"use strict\";function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var i=t(\"../../../math\"),o=t(\"../../../const\"),s=t(\"pixi-gl-core\"),a=function(){function t(e,r,a,u,h,l){n(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new i.Rectangle(0,0,1,1),this.resolution=h||o.RESOLUTION,this.projectionMatrix=new i.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new i.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=u||o.SCALE_MODES.DEFAULT,this.root=l,this.root?(this.frameBuffer=new s.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=s.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===o.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(r,a)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var r=this.projectionMatrix;e=e||t,r.identity(),this.root?(r.a=1/t.width*2,r.d=-1/t.height*2,r.tx=-1-e.x*r.a,r.ty=1-e.y*r.d):(r.a=1/t.width*2,r.d=1/t.height*2,r.tx=-1-e.x*r.a,r.ty=-1-e.y*r.d)},t.prototype.resize=function(t,e){if(t=0|t,e=0|e,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var r=this.frame||this.size;this.calculateProjection(r)}},t.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();r.default=a},{\"../../../const\":42,\"../../../math\":66,\"pixi-gl-core\":14}],93:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var r=!e;if(r){var n=document.createElement(\"canvas\");n.width=1,n.height=1,e=a.default.createContext(n)}for(var i=e.createShader(e.FRAGMENT_SHADER);;){var s=u.replace(/%forloop%/gi,o(t));if(e.shaderSource(i,s),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return r&&e.getExtension(\"WEBGL_lose_context\")&&e.getExtension(\"WEBGL_lose_context\").loseContext(),t}function o(t){for(var e=\"\",r=0;r<t;++r)r>0&&(e+=\"\\nelse \"),r<t-1&&(e+=\"if(test == \"+r+\".0){}\");return e}r.__esModule=!0,r.default=i;var s=t(\"pixi-gl-core\"),a=n(s),u=[\"precision mediump float;\",\"void main(void){\",\"float test = 0.1;\",\"%forloop%\",\"gl_FragColor = vec4(0.0);\",\"}\"].join(\"\\n\")},{\"pixi-gl-core\":14}],94:[function(t,e,r){\"use strict\";function n(t){var e=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return e[i.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[i.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[i.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e}r.__esModule=!0,r.default=n;var i=t(\"../../../const\")},{\"../../../const\":42}],95:[function(t,e,r){\"use strict\";function n(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return e[i.DRAW_MODES.POINTS]=t.POINTS,e[i.DRAW_MODES.LINES]=t.LINES,e[i.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[i.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[i.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[i.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[i.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e}r.__esModule=!0,r.default=n;var i=t(\"../../../const\")},{\"../../../const\":42}],96:[function(t,e,r){\"use strict\";function n(t){var e=t.getContextAttributes();e.stencil||console.warn(\"Provided WebGL context does not have a stencil buffer, masks may not render correctly\")}r.__esModule=!0,r.default=n},{}],97:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(\"../math\"),h=t(\"../utils\"),l=t(\"../const\"),c=t(\"../textures/Texture\"),f=n(c),d=t(\"../display/Container\"),p=n(d),v=new u.Point,y=function(t){function e(r){i(this,e);var n=o(this,t.call(this));return n._anchor=new u.ObservablePoint(n._onAnchorUpdate,n),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=l.BLEND_MODES.NORMAL,n.shader=null,n.cachedTint=16777215,n.texture=r||f.default.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n}return s(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._width&&(this.scale.x=(0,h.sign)(this.scale.x)*this._width/this.texture.orig.width),this._height&&(this.scale.y=(0,h.sign)(this.scale.y)*this._height/this.texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,r=e.a,n=e.b,i=e.c,o=e.d,s=e.tx,a=e.ty,u=this.vertexData,h=t.trim,l=t.orig,c=this._anchor,f=0,d=0,p=0,v=0;h?(d=h.x-c._x*l.width,f=d+h.width,v=h.y-c._y*l.height,p=v+h.height):(f=l.width*(1-c._x),d=l.width*-c._x,p=l.height*(1-c._y),v=l.height*-c._y),u[0]=r*d+i*v+s,u[1]=o*v+n*d+a,u[2]=r*f+i*v+s,u[3]=o*v+n*f+a,u[4]=r*f+i*p+s,u[5]=o*p+n*f+a,u[6]=r*d+i*p+s,u[7]=o*p+n*d+a}},e.prototype.calculateTrimmedVertices=function(){this.vertexTrimmedData||(this.vertexTrimmedData=new Float32Array(8));var t=this._texture,e=this.vertexTrimmedData,r=t.orig,n=this._anchor,i=this.transform.worldTransform,o=i.a,s=i.b,a=i.c,u=i.d,h=i.tx,l=i.ty,c=r.width*(1-n._x),f=r.width*-n._x,d=r.height*(1-n._y),p=r.height*-n._y;\ne[0]=o*f+a*p+h,e[1]=u*p+s*f+l,e[2]=o*c+a*p+h,e[3]=u*p+s*c+l,e[4]=o*c+a*d+h,e[5]=u*d+s*c+l,e[6]=o*f+a*d+h,e[7]=u*d+s*f+l},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this)},e.prototype._renderCanvas=function(t){t.plugins.sprite.render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new u.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,v);var e=this._texture.orig.width,r=this._texture.orig.height,n=-e*this.anchor.x,i=0;return v.x>n&&v.x<n+e&&(i=-r*this.anchor.y,v.y>i&&v.y<i+r)},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._anchor=null;var r=\"boolean\"==typeof e?e:e&&e.texture;if(r){var n=\"boolean\"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null,this.shader=null},e.from=function(t){return new e(f.default.from(t))},e.fromFrame=function(t){var r=h.TextureCache[t];if(!r)throw new Error('The frameId \"'+t+'\" does not exist in the texture cache');return new e(r)},e.fromImage=function(t,r,n){return new e(f.default.fromImage(t,r,n))},a(e,[{key:\"width\",get:function(){return Math.abs(this.scale.x)*this.texture.orig.width},set:function(t){var e=(0,h.sign)(this.scale.x)||1;this.scale.x=e*t/this.texture.orig.width,this._width=t}},{key:\"height\",get:function(){return Math.abs(this.scale.y)*this.texture.orig.height},set:function(t){var e=(0,h.sign)(this.scale.y)||1;this.scale.y=e*t/this.texture.orig.height,this._height=t}},{key:\"anchor\",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:\"tint\",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:\"texture\",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,this._textureID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once(\"update\",this._onTextureUpdate,this)))}}]),e}(p.default);r.default=y},{\"../const\":42,\"../display/Container\":44,\"../math\":66,\"../textures/Texture\":108,\"../utils\":115}],98:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var o=t(\"../../renderers/canvas/CanvasRenderer\"),s=n(o),a=t(\"../../const\"),u=t(\"../../math\"),h=t(\"./CanvasTinter\"),l=n(h),c=new u.Matrix,f=function(){function t(e){i(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,r=this.renderer,n=e._frame.width,i=e._frame.height,o=t.transform.worldTransform,s=0,h=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(r.setBlendMode(t.blendMode),e.valid)){r.context.globalAlpha=t.worldAlpha;var f=e.baseTexture.scaleMode===a.SCALE_MODES.LINEAR;r.smoothProperty&&r.context[r.smoothProperty]!==f&&(r.context[r.smoothProperty]=f),e.trim?(s=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,h=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(s=(.5-t.anchor.x)*e.orig.width,h=(.5-t.anchor.y)*e.orig.height),e.rotate&&(o.copy(c),o=c,u.GroupD8.matrixAppendRotationInv(o,e.rotate,s,h),s=0,h=0),s-=n/2,h-=i/2,r.roundPixels?(r.context.setTransform(o.a,o.b,o.c,o.d,o.tx*r.resolution|0,o.ty*r.resolution|0),s=0|s,h=0|h):r.context.setTransform(o.a,o.b,o.c,o.d,o.tx*r.resolution,o.ty*r.resolution);var d=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint!==t.tint&&(t.cachedTint=t.tint,t.tintedTexture=l.default.getTintedTexture(t,t.tint)),r.context.drawImage(t.tintedTexture,0,0,n*d,i*d,s*r.resolution,h*r.resolution,n*r.resolution,i*r.resolution)):r.context.drawImage(e.baseTexture.source,e._frame.x*d,e._frame.y*d,n*d,i*d,s*r.resolution,h*r.resolution,n*r.resolution,i*r.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();r.default=f,s.default.registerPlugin(\"sprite\",f)},{\"../../const\":42,\"../../math\":66,\"../../renderers/canvas/CanvasRenderer\":73,\"./CanvasTinter\":99}],99:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t(\"../../utils\"),o=t(\"../../renderers/canvas/utils/canUseNewCanvasBlendModes\"),s=n(o),a={getTintedTexture:function(t,e){var r=t.texture;e=a.roundColor(e);var n=\"#\"+(\"00000\"+(0|e).toString(16)).substr(-6);if(r.tintCache=r.tintCache||{},r.tintCache[n])return r.tintCache[n];var i=a.canvas||document.createElement(\"canvas\");if(a.tintMethod(r,e,i),a.convertTintToImage){var o=new Image;o.src=i.toDataURL(),r.tintCache[n]=o}else r.tintCache[n]=i,a.canvas=null;return i},tintWithMultiply:function(t,e,r){var n=r.getContext(\"2d\"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=i.width,r.height=i.height,n.fillStyle=\"#\"+(\"00000\"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation=\"multiply\",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.globalCompositeOperation=\"destination-atop\",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},tintWithOverlay:function(t,e,r){var n=r.getContext(\"2d\"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,r.width=i.width,r.height=i.height,n.globalCompositeOperation=\"copy\",n.fillStyle=\"#\"+(\"00000\"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation=\"destination-atop\",n.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},tintWithPerPixel:function(t,e,r){var n=r.getContext(\"2d\"),o=t._frame.clone(),s=t.baseTexture.resolution;o.x*=s,o.y*=s,o.width*=s,o.height*=s,r.width=o.width,r.height=o.height,n.globalCompositeOperation=\"copy\",n.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var a=(0,i.hex2rgb)(e),u=a[0],h=a[1],l=a[2],c=n.getImageData(0,0,o.width,o.height),f=c.data,d=0;d<f.length;d+=4)f[d+0]*=u,f[d+1]*=h,f[d+2]*=l;n.putImageData(c,0,0)},roundColor:function(t){var e=a.cacheStepsPerColorChannel,r=(0,i.hex2rgb)(t);return r[0]=Math.min(255,r[0]/e*e),r[1]=Math.min(255,r[1]/e*e),r[2]=Math.min(255,r[2]/e*e),(0,i.rgb2hex)(r)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,s.default)(),tintMethod:0};a.tintMethod=a.canUseMultiply?a.tintWithMultiply:a.tintWithPerPixel,r.default=a},{\"../../renderers/canvas/utils/canUseNewCanvasBlendModes\":76,\"../../utils\":115}],100:[function(t,e,r){\"use strict\";function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var i=function(){function t(e){n(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();r.default=i},{}],101:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(\"../../renderers/webgl/utils/ObjectRenderer\"),u=n(a),h=t(\"../../renderers/webgl/WebGLRenderer\"),l=n(h),c=t(\"../../utils/createIndicesForQuads\"),f=n(c),d=t(\"./generateMultiTextureShader\"),p=n(d),v=t(\"../../renderers/webgl/utils/checkMaxIfStatmentsInShader\"),y=n(v),g=t(\"./BatchBuffer\"),m=n(g),_=t(\"../../const\"),b=t(\"pixi-gl-core\"),x=n(b),T=t(\"bit-twiddle\"),w=n(T),E=0,S=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));n.vertSize=5,n.vertByteSize=4*n.vertSize,n.size=_.SPRITE_BATCH_SIZE,n.buffers=[];for(var s=1;s<=w.default.nextPow2(n.size);s*=2)n.buffers.push(new m.default(4*s*n.vertByteSize));n.indices=(0,f.default)(n.size),n.shaders=null,n.currentIndex=0,E=0,n.groups=[];for(var a=0;a<n.size;a++)n.groups[a]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return n.sprites=[],n.vertexBuffers=[],n.vaos=[],n.vaoMax=2,n.vertexCount=0,n.renderer.on(\"prerender\",n.onPrerender,n),n}return s(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),_.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,y.default)(this.MAX_TEXTURES,t),this.shaders=new Array(this.MAX_TEXTURES),this.shaders[0]=(0,p.default)(t,1),this.shaders[1]=(0,p.default)(t,2),this.indexBuffer=x.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW);for(var e=this.shaders[1],r=0;r<this.vaoMax;r++)this.vertexBuffers[r]=x.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),this.vaos[r]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[r],e.attributes.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[r],e.attributes.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[r],e.attributes.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[r],e.attributes.aTextureId,t.FLOAT,!1,this.vertByteSize,16);this.vao=this.vaos[0],this.currentBlendMode=99999},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t.texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=w.default.nextPow2(this.currentIndex),r=w.default.log2(e),n=this.buffers[r],i=this.sprites,o=this.groups,s=n.float32View,a=n.uint32View,u=0,h=void 0,l=void 0,c=1,f=0,d=o[0],v=void 0,y=void 0,g=void 0,m=void 0,_=i[0].blendMode,b=void 0;d.textureCount=0,d.start=0,d.blend=_,E++;var T=void 0;for(T=0;T<this.currentIndex;T++){var S=i[T];if(h=S._texture.baseTexture,_!==S.blendMode&&(_=S.blendMode,l=null,f=this.MAX_TEXTURES,E++),l!==h&&(l=h,h._enabled!==E&&(f===this.MAX_TEXTURES&&(E++,f=0,d.size=T-d.start,d=o[c++],d.textureCount=0,d.blend=_,d.start=T),h._enabled=E,h._id=f,d.textures[d.textureCount++]=h,f++)),v=S.vertexData,y=S._tintRGB+(255*S.worldAlpha<<24),g=S._texture._uvs.uvsUint32,m=h._id,this.renderer.roundPixels){var O=this.renderer.resolution;s[u]=(v[0]*O|0)/O,s[u+1]=(v[1]*O|0)/O,s[u+5]=(v[2]*O|0)/O,s[u+6]=(v[3]*O|0)/O,s[u+10]=(v[4]*O|0)/O,s[u+11]=(v[5]*O|0)/O,s[u+15]=(v[6]*O|0)/O,s[u+16]=(v[7]*O|0)/O}else s[u]=v[0],s[u+1]=v[1],s[u+5]=v[2],s[u+6]=v[3],s[u+10]=v[4],s[u+11]=v[5],s[u+15]=v[6],s[u+16]=v[7];a[u+2]=g[0],a[u+7]=g[1],a[u+12]=g[2],a[u+17]=g[3],a[u+3]=a[u+8]=a[u+13]=a[u+18]=y,s[u+4]=s[u+9]=s[u+14]=s[u+19]=m,u+=20}for(d.size=T-d.start,this.vertexCount++,this.vaoMax<=this.vertexCount&&(this.vaoMax++,b=this.shaders[1],this.vertexBuffers[this.vertexCount]=x.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),this.vaos[this.vertexCount]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[this.vertexCount],b.attributes.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[this.vertexCount],b.attributes.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[this.vertexCount],b.attributes.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[this.vertexCount],b.attributes.aTextureId,t.FLOAT,!1,this.vertByteSize,16)),this.vertexBuffers[this.vertexCount].upload(n.vertices,0),this.vao=this.vaos[this.vertexCount].bind(),T=0;T<c;T++){var M=o[T],P=M.textureCount;b=this.shaders[P-1],b||(b=this.shaders[P-1]=(0,p.default)(t,P)),this.renderer.bindShader(b);for(var C=0;C<P;C++)this.renderer.bindTexture(M.textures[C],C);this.renderer.state.setBlendMode(M.blend),t.drawElements(t.TRIANGLES,6*M.size,t.UNSIGNED_SHORT,6*M.start*2)}this.currentIndex=0}},e.prototype.start=function(){},e.prototype.stop=function(){this.flush(),this.vao.unbind()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e].destroy(),this.vaos[e].destroy();this.indexBuffer.destroy(),this.renderer.off(\"prerender\",this.onPrerender,this),t.prototype.destroy.call(this);for(var r=0;r<this.shaders.length;r++)this.shaders[r]&&this.shaders[r].destroy();this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var n=0;n<this.buffers.length;n++)this.buffers[n].destroy()},e}(u.default);r.default=S,l.default.registerPlugin(\"sprite\",S)},{\"../../const\":42,\"../../renderers/webgl/WebGLRenderer\":80,\"../../renderers/webgl/utils/ObjectRenderer\":90,\"../../renderers/webgl/utils/checkMaxIfStatmentsInShader\":93,\"../../utils/createIndicesForQuads\":113,\"./BatchBuffer\":100,\"./generateMultiTextureShader\":102,\"bit-twiddle\":1,\"pixi-gl-core\":14}],102:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var r=\"#define GLSLIFY 1\\nattribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\nattribute vec4 aColor;\\nattribute float aTextureId;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\nvarying vec4 vColor;\\nvarying float vTextureId;\\n\\nvoid main(void){\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n\\n    vTextureCoord = aTextureCoord;\\n    vTextureId = aTextureId;\\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\\n}\\n\",n=u;n=n.replace(/%count%/gi,e),n=n.replace(/%forloop%/gi,o(e));for(var i=new a.default(t,r,n),s=[],h=0;h<e;h++)s[h]=h;return i.bind(),i.uniforms.uSamplers=s,i}function o(t){var e=\"\";e+=\"\\n\",e+=\"\\n\";for(var r=0;r<t;r++)r>0&&(e+=\"\\nelse \"),r<t-1&&(e+=\"if(textureId == \"+r+\".0)\"),e+=\"\\n{\",e+=\"\\n\\tcolor = texture2D(uSamplers[\"+r+\"], vTextureCoord);\",e+=\"\\n}\";return e+=\"\\n\",e+=\"\\n\"}r.__esModule=!0,r.default=i;var s=t(\"../../Shader\"),a=n(s),u=[\"varying vec2 vTextureCoord;\",\"varying vec4 vColor;\",\"varying float vTextureId;\",\"uniform sampler2D uSamplers[%count%];\",\"void main(void){\",\"vec4 color;\",\"float textureId = floor(vTextureId+0.5);\",\"%forloop%\",\"gl_FragColor = color * vColor;\",\"}\"].join(\"\\n\")},{\"../../Shader\":41}],103:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(\"../sprites/Sprite\"),h=n(u),l=t(\"../textures/Texture\"),c=n(l),f=t(\"../math\"),d=t(\"../utils\"),p=t(\"../const\"),v=t(\"./TextStyle\"),y=n(v),g={texture:!0,children:!1,baseTexture:!0},m=function(t){function e(r,n){i(this,e);var s=document.createElement(\"canvas\");s.width=3,s.height=3;var a=c.default.fromCanvas(s);a.orig=new f.Rectangle,a.trim=new f.Rectangle;var u=o(this,t.call(this,a));return u.canvas=s,u.context=u.canvas.getContext(\"2d\"),u.resolution=p.RESOLUTION,u._text=null,u._style=null,u._styleListener=null,u._font=\"\",u.text=r,u.style=n,u.localStyleID=-1,u}return s(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){var r=\"number\"==typeof e.fontSize?e.fontSize+\"px\":e.fontSize;this._font=e.fontStyle+\" \"+e.fontVariant+\" \"+e.fontWeight+\" \"+r+\" \"+e.fontFamily,this.context.font=this._font;for(var n=e.wordWrap?this.wordWrap(this._text):this._text,i=n.split(/(?:\\r\\n|\\r|\\n)/),o=new Array(i.length),s=0,a=this.determineFontProperties(this._font),u=0;u<i.length;u++){var h=this.context.measureText(i[u]).width+(i[u].length-1)*e.letterSpacing;o[u]=h,s=Math.max(s,h)}var l=s+e.strokeThickness;e.dropShadow&&(l+=e.dropShadowDistance),l+=2*e.padding,this.canvas.width=Math.ceil((l+this.context.lineWidth)*this.resolution);var c=this.style.lineHeight||a.fontSize+e.strokeThickness,f=Math.max(c,a.fontSize+e.strokeThickness)+(i.length-1)*c;e.dropShadow&&(f+=e.dropShadowDistance),this.canvas.height=Math.ceil((f+2*this._style.padding)*this.resolution),this.context.scale(this.resolution,this.resolution),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this._font,this.context.strokeStyle=e.stroke,this.context.lineWidth=e.strokeThickness,this.context.textBaseline=e.textBaseline,this.context.lineJoin=e.lineJoin,this.context.miterLimit=e.miterLimit;var d=void 0,p=void 0;if(e.dropShadow){e.dropShadowBlur>0?(this.context.shadowColor=e.dropShadowColor,this.context.shadowBlur=e.dropShadowBlur):this.context.fillStyle=e.dropShadowColor;for(var v=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,y=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,g=0;g<i.length;g++)d=e.strokeThickness/2,p=e.strokeThickness/2+g*c+a.ascent,\"right\"===e.align?d+=s-o[g]:\"center\"===e.align&&(d+=(s-o[g])/2),e.fill&&(this.drawLetterSpacing(i[g],d+v+e.padding,p+y+e.padding),e.stroke&&e.strokeThickness&&(this.context.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(i[g],d+v+e.padding,p+y+e.padding,!0),this.context.strokeStyle=e.stroke))}this.context.fillStyle=this._generateFillStyle(e,i);for(var m=0;m<i.length;m++)d=e.strokeThickness/2,p=e.strokeThickness/2+m*c+a.ascent,\"right\"===e.align?d+=s-o[m]:\"center\"===e.align&&(d+=(s-o[m])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(i[m],d+e.padding,p+e.padding,!0),e.fill&&this.drawLetterSpacing(i[m],d+e.padding,p+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,r){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],i=this._style,o=i.letterSpacing;if(0===o)return void(n?this.context.strokeText(t,e,r):this.context.fillText(t,e,r));for(var s=String.prototype.split.call(t,\"\"),a=e,u=0,h=\"\";u<t.length;)h=s[u++],n?this.context.strokeText(h,a,r):this.context.fillText(h,a,r),a+=this.context.measureText(h).width+o},e.prototype.updateTexture=function(){var t=this._texture,e=this._style;t.baseTexture.hasLoaded=!0,t.baseTexture.resolution=this.resolution,t.baseTexture.realWidth=this.canvas.width,t.baseTexture.realHeight=this.canvas.height,t.baseTexture.width=this.canvas.width/this.resolution,t.baseTexture.height=this.canvas.height/this.resolution,t.trim.width=t._frame.width=this.canvas.width/this.resolution,t.trim.height=t._frame.height=this.canvas.height/this.resolution,t.trim.x=-e.padding,t.trim.y=-e.padding,t.orig.width=t._frame.width-2*e.padding,t.orig.height=t._frame.height-2*e.padding,this._onTextureUpdate(),t.baseTexture.emit(\"update\",t.baseTexture),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.determineFontProperties=function(t){var r=e.fontPropertiesCache[t];if(!r){r={};var n=e.fontPropertiesCanvas,i=e.fontPropertiesContext;i.font=t;var o=Math.ceil(i.measureText(\"|MÉq\").width),s=Math.ceil(i.measureText(\"M\").width),a=2*s;s=1.4*s|0,n.width=o,n.height=a,i.fillStyle=\"#f00\",i.fillRect(0,0,o,a),i.font=t,i.textBaseline=\"alphabetic\",i.fillStyle=\"#000\",i.fillText(\"|MÉq\",0,s);var u=i.getImageData(0,0,o,a).data,h=u.length,l=4*o,c=0,f=0,d=!1;for(c=0;c<s;++c){for(var p=0;p<l;p+=4)if(255!==u[f+p]){d=!0;break}if(d)break;f+=l}for(r.ascent=s-c,f=h-l,d=!1,c=a;c>s;--c){for(var v=0;v<l;v+=4)if(255!==u[f+v]){d=!0;break}if(d)break;f-=l}r.descent=c-s,r.fontSize=r.ascent+r.descent,e.fontPropertiesCache[t]=r}return r},e.prototype.wordWrap=function(t){for(var e=\"\",r=t.split(\"\\n\"),n=this._style.wordWrapWidth,i=0;i<r.length;i++){for(var o=n,s=r[i].split(\" \"),a=0;a<s.length;a++){var u=this.context.measureText(s[a]).width;if(this._style.breakWords&&u>n)for(var h=s[a].split(\"\"),l=0;l<h.length;l++){var c=this.context.measureText(h[l]).width;c>o?(e+=\"\\n\"+h[l],o=n-c):(0===l&&(e+=\" \"),e+=h[l],o-=c)}else{var f=u+this.context.measureText(\" \").width;0===a||f>o?(a>0&&(e+=\"\\n\"),e+=s[a],o=n-u):(o-=f,e+=\" \"+s[a])}}i<r.length-1&&(e+=\"\\n\")}return e},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var r=void 0,n=void 0,i=void 0,o=void 0,s=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution;if(t.fillGradientType===p.TEXT_GRADIENT.LINEAR_VERTICAL){r=this.context.createLinearGradient(s/2,0,s/2,a),n=(t.fill.length+1)*e.length,i=0;for(var u=0;u<e.length;u++){i+=1;for(var h=0;h<t.fill.length;h++)o=i/n,r.addColorStop(o,t.fill[h]),i++}}else{r=this.context.createLinearGradient(0,a/2,s,a/2),n=t.fill.length+1,i=1;for(var l=0;l<t.fill.length;l++)o=i/n,r.addColorStop(o,t.fill[l]),i++}return r},e.prototype.destroy=function(e){\"boolean\"==typeof e&&(e={children:e}),e=Object.assign({},g,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},a(e,[{key:\"width\",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this.texture.orig.width},set:function(t){this.updateText(!0);var e=(0,d.sign)(this.scale.x)||1;this.scale.x=e*t/this.texture.orig.width,this._width=t}},{key:\"height\",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,d.sign)(this.scale.y)||1;this.scale.y=e*t/this.texture.orig.height,this._height=t}},{key:\"style\",get:function(){return this._style},set:function(t){t=t||{},t instanceof y.default?this._style=t:this._style=new y.default(t),this.localStyleID=-1,this.dirty=!0}},{key:\"text\",get:function(){return this._text},set:function(t){t=t||\" \",t=t.toString(),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(h.default);r.default=m,m.fontPropertiesCache={},m.fontPropertiesCanvas=document.createElement(\"canvas\"),m.fontPropertiesContext=m.fontPropertiesCanvas.getContext(\"2d\")},{\"../const\":42,\"../math\":66,\"../sprites/Sprite\":97,\"../textures/Texture\":108,\"../utils\":115,\"./TextStyle\":104}],104:[function(t,e,r){\"use strict\";function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function i(t){if(\"number\"==typeof t)return(0,a.hex2string)(t);if(Array.isArray(t))for(var e=0;e<t.length;++e)\"number\"==typeof t[e]&&(t[e]=(0,a.hex2string)(t[e]));return t}r.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t(\"../const\"),a=t(\"../utils\"),u={align:\"left\",breakWords:!1,dropShadow:!1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:\"#000000\",dropShadowDistance:5,fill:\"black\",fillGradientType:s.TEXT_GRADIENT.LINEAR_VERTICAL,fontFamily:\"Arial\",fontSize:26,fontStyle:\"normal\",fontVariant:\"normal\",fontWeight:\"normal\",letterSpacing:0,lineHeight:0,lineJoin:\"miter\",miterLimit:10,padding:0,stroke:\"black\",strokeThickness:0,textBaseline:\"alphabetic\",wordWrap:!1,wordWrapWidth:100},h=function(){function t(e){n(this,t),this.styleID=0,Object.assign(this,u,e)}return t.prototype.clone=function(){var e={};for(var r in this._defaults)e[r]=this[r];return new t(e)},t.prototype.reset=function(){Object.assign(this,this._defaults)},o(t,[{key:\"align\",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:\"breakWords\",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:\"dropShadow\",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:\"dropShadowAngle\",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:\"dropShadowBlur\",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:\"dropShadowColor\",get:function(){return this._dropShadowColor},set:function(t){var e=i(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:\"dropShadowDistance\",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:\"fill\",get:function(){return this._fill},set:function(t){var e=i(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:\"fillGradientType\",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:\"fontFamily\",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:\"fontSize\",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:\"fontStyle\",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:\"fontVariant\",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:\"fontWeight\",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:\"letterSpacing\",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:\"lineHeight\",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:\"lineJoin\",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:\"miterLimit\",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:\"padding\",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:\"stroke\",get:function(){return this._stroke},set:function(t){var e=i(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:\"strokeThickness\",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:\"textBaseline\",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:\"wordWrap\",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:\"wordWrapWidth\",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();r.default=h},{\"../const\":42,\"../utils\":115}],105:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(\"./BaseTexture\"),u=n(a),h=t(\"../const\"),l=function(t){function e(){var r=arguments.length<=0||void 0===arguments[0]?100:arguments[0],n=arguments.length<=1||void 0===arguments[1]?100:arguments[1],s=arguments[2],a=arguments[3];i(this,e);var u=o(this,t.call(this,null,s));return u.resolution=a||h.RESOLUTION,u.width=r,u.height=n,u.realWidth=u.width*u.resolution,u.realHeight=u.height*u.resolution,u.scaleMode=s||h.SCALE_MODES.DEFAULT,u.hasLoaded=!0,u._glRenderTargets={},u._canvasRenderTarget=null,u.valid=!1,u}return s(e,t),e.prototype.resize=function(t,e){t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit(\"update\",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(u.default);r.default=l},{\"../const\":42,\"./BaseTexture\":106}],106:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol?\"symbol\":typeof t},u=t(\"../utils\"),h=t(\"../const\"),l=t(\"eventemitter3\"),c=n(l),f=t(\"../utils/determineCrossOrigin\"),d=n(f),p=t(\"bit-twiddle\"),v=n(p),y=function(t){function e(r,n,s){i(this,e);var a=o(this,t.call(this));return a.uid=(0,u.uid)(),a.touched=0,a.resolution=s||h.RESOLUTION,a.width=100,a.height=100,a.realWidth=100,a.realHeight=100,a.scaleMode=n||h.SCALE_MODES.DEFAULT,a.hasLoaded=!1,a.isLoading=!1,a.source=null,a.origSource=null,a.imageType=null,a.sourceScale=1,a.premultipliedAlpha=!0,a.imageUrl=null,a.isPowerOfTwo=!1,a.mipmap=h.MIPMAP_TEXTURES,a.wrapMode=h.WRAP_MODES.DEFAULT,a._glTextures={},a._enabled=0,a._id=0,r&&a.loadSource(r),a}return s(e,t),e.prototype.update=function(){\"svg\"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=v.default.isPow2(this.realWidth)&&v.default.isPow2(this.realHeight)),this.emit(\"update\",this)},e.prototype.loadSource=function(t){var e=this,r=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,r&&this.source&&(this.source.onload=null,this.source.onerror=null);var n=!this.source;if(this.source=t,(t.src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),\"svg\"===this.imageType?this._loadSvgSource():this._sourceLoaded(),\nn&&this.emit(\"loaded\",this);else if(!t.getContext){var i=function(){e.isLoading=!0;var n=e;if(t.onload=function(){if(n._updateImageType(),t.onload=null,t.onerror=null,n.isLoading)return n.isLoading=!1,n._sourceLoaded(),\"svg\"===n.imageType?void n._loadSvgSource():void n.emit(\"loaded\",n)},t.onerror=function(){t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit(\"error\",n))},t.complete&&t.src){if(t.onload=null,t.onerror=null,\"svg\"===n.imageType)return n._loadSvgSource(),{v:void 0};e.isLoading=!1,t.width&&t.height?(e._sourceLoaded(),r&&e.emit(\"loaded\",e)):r&&e.emit(\"error\",e)}}();if(\"object\"===(\"undefined\"==typeof i?\"undefined\":a(i)))return i.v}},e.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,u.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&\"image\"===t.mediaType){var r=t.subType.split(\"+\")[0];if(e=(0,u.getUrlFileExtension)(\".\"+r),!e)throw new Error(\"Invalid image type in data URI.\")}else if(e=(0,u.getUrlFileExtension)(this.imageUrl),!e)throw new Error(\"Invalid image type in URL.\");this.imageType=e}},e.prototype._loadSvgSource=function(){if(\"svg\"===this.imageType){var t=(0,u.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},e.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if(\"base64\"===t.encoding){if(!atob)throw new Error(\"Your browser doesn't support base64 conversions.\");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error(\"Failed to load SVG using XHR.\");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit(\"error\",t)},e.open(\"GET\",this.imageUrl,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var e=(0,u.getSvgSize)(t),r=e.width,n=e.height;if(!r||!n)throw new Error(\"The SVG image must have width and height defined (in pixels), canvas API needs them.\");this.realWidth=Math.round(r*this.sourceScale),this.realHeight=Math.round(n*this.sourceScale),this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=v.default.isPow2(this.realWidth)&&v.default.isPow2(this.realHeight);var i=document.createElement(\"canvas\");i.width=this.realWidth,i.height=this.realHeight,i._pixiId=\"canvas_\"+(0,u.uid)(),i.getContext(\"2d\").drawImage(this.source,0,0,r,n,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=i,u.BaseTextureCache[i._pixiId]=this,this.isLoading=!1,this._sourceLoaded(),this.emit(\"loaded\",this)},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl&&(delete u.BaseTextureCache[this.imageUrl],delete u.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src=\"\")),this.source&&this.source._pixiId&&delete u.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},e.prototype.dispose=function(){this.emit(\"dispose\",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,r,n,i){var o=u.BaseTextureCache[t];if(!o){var s=new Image;void 0===r&&0!==t.indexOf(\"data:\")&&(s.crossOrigin=(0,d.default)(t)),o=new e(s,n),o.imageUrl=t,i&&(o.sourceScale=i),o.resolution=(0,u.getResolutionOfUrl)(t),s.src=t,u.BaseTextureCache[t]=o}return o},e.fromCanvas=function(t,r){t._pixiId||(t._pixiId=\"canvas_\"+(0,u.uid)());var n=u.BaseTextureCache[t._pixiId];return n||(n=new e(t,r),u.BaseTextureCache[t._pixiId]=n),n},e}(c.default);r.default=y},{\"../const\":42,\"../utils\":115,\"../utils/determineCrossOrigin\":114,\"bit-twiddle\":1,eventemitter3:3}],107:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(\"./BaseRenderTexture\"),u=n(a),h=t(\"./Texture\"),l=n(h),c=function(t){function e(r,n){i(this,e);var s=null;if(!(r instanceof u.default)){var a=arguments[1],h=arguments[2],l=arguments[3]||0,c=arguments[4]||1;console.warn(\"Please use RenderTexture.create(\"+a+\", \"+h+\") instead of the ctor directly.\"),s=arguments[0],n=null,r=new u.default(a,h,l,c)}var f=o(this,t.call(this,r,n));return f.legacyRenderer=s,f.valid=!0,f._updateUvs(),f}return s(e,t),e.prototype.resize=function(t,e,r){this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,r,n,i){return new e(new u.default(t,r,n,i))},e}(l.default);r.default=c},{\"./BaseRenderTexture\":105,\"./Texture\":108}],108:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(\"./BaseTexture\"),h=n(u),l=t(\"./VideoBaseTexture\"),c=n(l),f=t(\"./TextureUvs\"),d=n(f),p=t(\"eventemitter3\"),v=n(p),y=t(\"../math\"),g=t(\"../utils\"),m=function(t){function e(r,n,s,a,u){i(this,e);var h=o(this,t.call(this));if(h.noFrame=!1,n||(h.noFrame=!0,n=new y.Rectangle(0,0,1,1)),r instanceof e&&(r=r.baseTexture),h.baseTexture=r,h._frame=n,h.trim=a,h.valid=!1,h.requiresUpdate=!1,h._uvs=null,h.orig=s||n,h._rotate=Number(u||0),u===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error(\"attempt to use diamond-shaped UVs. If you are sure, set rotation manually\");return r.hasLoaded?(h.noFrame&&(n=new y.Rectangle(0,0,r.width,r.height),r.on(\"update\",h.onBaseTextureUpdated,h)),h.frame=n):r.once(\"loaded\",h.onBaseTextureLoaded,h),h._updateID=0,h.transform=null,h}return s(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new y.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on(\"update\",this.onBaseTextureUpdated,this),this.emit(\"update\",this)},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit(\"update\",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(g.TextureCache[this.baseTexture.imageUrl]&&delete g.TextureCache[this.baseTexture.imageUrl],this.baseTexture.destroy()),this.baseTexture.off(\"update\",this.onBaseTextureUpdated,this),this.baseTexture.off(\"loaded\",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,this.off(\"dispose\",this.dispose,this),this.off(\"update\",this.update,this)},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new d.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,r,n,i){var o=g.TextureCache[t];return o||(o=new e(h.default.fromImage(t,r,n,i)),g.TextureCache[t]=o),o},e.fromFrame=function(t){var e=g.TextureCache[t];if(!e)throw new Error('The frameId \"'+t+'\" does not exist in the texture cache');return e},e.fromCanvas=function(t,r){return new e(h.default.fromCanvas(t,r))},e.fromVideo=function(t,r){return\"string\"==typeof t?e.fromVideoUrl(t,r):new e(c.default.fromVideo(t,r))},e.fromVideoUrl=function(t,r){return new e(c.default.fromUrl(t,r))},e.from=function(t){if(\"string\"==typeof t){var r=g.TextureCache[t];if(!r){var n=null!==t.match(/\\.(mp4|webm|ogg|h264|avi|mov)$/);return n?e.fromVideoUrl(t):e.fromImage(t)}return r}return t instanceof HTMLImageElement?new e(new h.default(t)):t instanceof HTMLCanvasElement?e.fromCanvas(t):t instanceof HTMLVideoElement?e.fromVideo(t):t instanceof h.default?new e(t):t},e.addTextureToCache=function(t,e){g.TextureCache[e]=t},e.removeTextureFromCache=function(t){var e=g.TextureCache[t];return delete g.TextureCache[t],delete g.BaseTextureCache[t],e},a(e,[{key:\"frame\",get:function(){return this._frame},set:function(t){if(this._frame=t,this.noFrame=!1,t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height)throw new Error(\"Texture Error: frame does not fit inside the base Texture dimensions \"+this);this.valid=t&&t.width&&t.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:\"rotate\",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:\"width\",get:function(){return this.orig?this.orig.width:0}},{key:\"height\",get:function(){return this.orig?this.orig.height:0}}]),e}(v.default);r.default=m,m.EMPTY=new m(new h.default),m.EMPTY.destroy=function(){},m.EMPTY.on=function(){},m.EMPTY.once=function(){},m.EMPTY.emit=function(){}},{\"../math\":66,\"../utils\":115,\"./BaseTexture\":106,\"./TextureUvs\":109,\"./VideoBaseTexture\":110,eventemitter3:3}],109:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var o=t(\"../math/GroupD8\"),s=n(o),a=function(){function t(){i(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,r){var n=e.width,i=e.height;if(r){var o=t.width/2/n,a=t.height/2/i,u=t.x/n+o,h=t.y/i+a;r=s.default.add(r,s.default.NW),this.x0=u+o*s.default.uX(r),this.y0=h+a*s.default.uY(r),r=s.default.add(r,2),this.x1=u+o*s.default.uX(r),this.y1=h+a*s.default.uY(r),r=s.default.add(r,2),this.x2=u+o*s.default.uX(r),this.y2=h+a*s.default.uY(r),r=s.default.add(r,2),this.x3=u+o*s.default.uX(r),this.y3=h+a*s.default.uY(r)}else this.x0=t.x/n,this.y0=t.y/i,this.x1=(t.x+t.width)/n,this.y1=t.y/i,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/i,this.x3=t.x/n,this.y3=(t.y+t.height)/i;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},t}();r.default=a},{\"../math/GroupD8\":62}],110:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function s(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function a(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){e||(e=\"video/\"+t.substr(t.lastIndexOf(\".\")+1));var r=document.createElement(\"source\");return r.src=t,r.type=e,r}r.__esModule=!0;var h=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=t(\"./BaseTexture\"),c=i(l),f=t(\"../utils\"),d=t(\"../ticker\"),p=n(d),v=function(t){function e(r,n){if(o(this,e),!r)throw new Error(\"No video source element specified.\");(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0);var i=s(this,t.call(this,r,n));return i.width=r.videoWidth,i.height=r.videoHeight,i._autoUpdate=!0,i._isAutoUpdating=!1,i.autoPlay=!0,i.update=i.update.bind(i),i._onCanPlay=i._onCanPlay.bind(i),r.addEventListener(\"play\",i._onPlayStart.bind(i)),r.addEventListener(\"pause\",i._onPlayStop.bind(i)),i.hasLoaded=!1,i.__loaded=!1,i._isSourceReady()?i._onCanPlay():(r.addEventListener(\"canplay\",i._onCanPlay),r.addEventListener(\"canplaythrough\",i._onCanPlay)),i}return a(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&t.paused===!1&&t.ended===!1&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(p.shared.add(this.update,this),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(p.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener(\"canplay\",this._onCanPlay),this.source.removeEventListener(\"canplaythrough\",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit(\"loaded\",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&p.shared.remove(this.update,this),this.source&&this.source._pixiId&&(delete f.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),t.prototype.destroy.call(this)},e.fromVideo=function(t,r){t._pixiId||(t._pixiId=\"video_\"+(0,f.uid)());var n=f.BaseTextureCache[t._pixiId];return n||(n=new e(t,r),f.BaseTextureCache[t._pixiId]=n),n},e.fromUrl=function(t,r){var n=document.createElement(\"video\");if(n.setAttribute(\"webkit-playsinline\",\"\"),n.setAttribute(\"playsinline\",\"\"),Array.isArray(t))for(var i=0;i<t.length;++i)n.appendChild(u(t[i].src||t[i],t[i].mime));else n.appendChild(u(t.src||t,t.mime));return n.load(),e.fromVideo(n,r)},h(e,[{key:\"autoUpdate\",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(p.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(p.shared.add(this.update,this),this._isAutoUpdating=!0))}}]),e}(c.default);r.default=v,v.fromUrls=v.fromUrl},{\"../ticker\":112,\"../utils\":115,\"./BaseTexture\":106}],111:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t(\"../const\"),a=t(\"eventemitter3\"),u=n(a),h=\"tick\",l=function(){function t(){var e=this;i(this,t),this._emitter=new u.default,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/s.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._emitter.listeners(h,!0)&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(h,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){return this._emitter.on(h,t,e),this._startIfPossible(),this},t.prototype.addOnce=function(t,e){return this._emitter.once(h,t,e),this._startIfPossible(),this},t.prototype.remove=function(t,e){return this._emitter.off(h,t,e),this._emitter.listeners(h,!0)||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.update=function(){var t=arguments.length<=0||void 0===arguments[0]?performance.now():arguments[0],e=void 0;t>this.lastTime?(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*s.TARGET_FPMS*this.speed,this._emitter.emit(h,this.deltaTime)):this.deltaTime=this.elapsedMS=0,this.lastTime=t},o(t,[{key:\"FPS\",get:function(){return 1e3/this.elapsedMS}},{key:\"minFPS\",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,s.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();r.default=l},{\"../const\":42,eventemitter3:3}],112:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.Ticker=r.shared=void 0;var i=t(\"./Ticker\"),o=n(i),s=new o.default;s.autoStart=!0,r.shared=s,r.Ticker=o.default},{\"./Ticker\":111}],113:[function(t,e,r){\"use strict\";function n(t){for(var e=6*t,r=new Uint16Array(e),n=0,i=0;n<e;n+=6,i+=4)r[n+0]=i+0,r[n+1]=i+1,r[n+2]=i+2,r[n+3]=i+0,r[n+4]=i+2,r[n+5]=i+3;return r}r.__esModule=!0,r.default=n},{}],114:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=arguments.length<=1||void 0===arguments[1]?window.location:arguments[1];if(0===t.indexOf(\"data:\"))return\"\";e=e||window.location,a||(a=document.createElement(\"a\")),a.href=t,t=s.default.parse(a.href);var r=!t.port&&\"\"===e.port||t.port===e.port;return t.hostname===e.hostname&&r&&t.protocol===e.protocol?\"\":\"anonymous\"}r.__esModule=!0,r.default=i;var o=t(\"url\"),s=n(o),a=void 0},{url:36}],115:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(){return++T}function o(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function s(t){return t=t.toString(16),t=\"000000\".substr(0,6-t.length)+t,\"#\"+t}function a(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]}function u(t){var e=g.RETINA_PREFIX.exec(t);return e?parseFloat(e[1]):1}function h(t){var e=g.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,encoding:e[3]?e[3].toLowerCase():void 0,data:e[4]}}function l(t){var e=g.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase()}function c(t){var e=g.SVG_SIZE.exec(t),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[2])),r[e[3]]=Math.round(parseFloat(e[4]))),r}function f(){w=!0}function d(t){if(!w){if(navigator.userAgent.toLowerCase().indexOf(\"chrome\")>-1){var e=[\"\\n %c %c %c Pixi.js \"+g.VERSION+\" - ✰ \"+t+\" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \\n\\n\",\"background: #ff66a5; padding:5px 0;\",\"background: #ff66a5; padding:5px 0;\",\"color: #ff66a5; background: #030307; padding:5px 0;\",\"background: #ff66a5; padding:5px 0;\",\"background: #ffc3dc; padding:5px 0;\",\"background: #ff66a5; padding:5px 0;\",\"color: #ff2424; background: #fff; padding:5px 0;\",\"color: #ff2424; background: #fff; padding:5px 0;\",\"color: #ff2424; background: #fff; padding:5px 0;\"];window.console.log.apply(console,e)}else window.console&&window.console.log(\"Pixi.js \"+g.VERSION+\" - \"+t+\" - http://www.pixijs.com/\");w=!0}}function p(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement(\"canvas\"),r=e.getContext(\"webgl\",t)||e.getContext(\"experimental-webgl\",t),n=!(!r||!r.getContextAttributes().stencil);if(r){var i=r.getExtension(\"WEBGL_lose_context\");i&&i.loseContext()}return r=null,n}catch(t){return!1}}function v(t){return 0===t?0:t<0?-1:1}function y(t,e,r){var n=t.length;if(!(e>=n||0===r)){r=e+r>n?n-e:r;for(var i=n-r,o=e;o<i;++o)t[o]=t[o+r];t.length=i}}r.__esModule=!0,r.BaseTextureCache=r.TextureCache=r.pluginTarget=r.EventEmitter=void 0,r.uid=i,r.hex2rgb=o,r.hex2string=s,r.rgb2hex=a,r.getResolutionOfUrl=u,r.decomposeDataUri=h,r.getUrlFileExtension=l,r.getSvgSize=c,r.skipHello=f,r.sayHello=d,r.isWebGLSupported=p,r.sign=v,r.removeItems=y;var g=t(\"../const\"),m=t(\"eventemitter3\"),_=n(m),b=t(\"./pluginTarget\"),x=n(b),T=0,w=!1;r.EventEmitter=_.default,r.pluginTarget=x.default;r.TextureCache={},r.BaseTextureCache={}},{\"../const\":42,\"./pluginTarget\":117,eventemitter3:3}],116:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){return s.default.tablet||s.default.phone?2:t}r.__esModule=!0,r.default=i;var o=t(\"ismobilejs\"),s=n(o)},{ismobilejs:4}],117:[function(t,e,r){\"use strict\";function n(t){t.__plugins={},t.registerPlugin=function(e,r){t.__plugins[e]=r},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}r.__esModule=!0,r.default={mixin:function(t){n(t)}}},{}],118:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){}var o=t(\"./core\"),s=n(o),a=t(\"./mesh\"),u=n(a),h=t(\"./particles\"),l=n(h),c=t(\"./extras\"),f=n(c),d=t(\"./filters\"),p=n(d);s.SpriteBatch=function(){throw new ReferenceError(\"SpriteBatch does not exist any more, please use the new ParticleContainer instead.\")},s.AssetLoader=function(){throw new ReferenceError(\"The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.\")},Object.defineProperties(s,{Stage:{enumerable:!0,get:function(){return i(\"You do not need to use a PIXI Stage any more, you can simply render any container.\"),s.Container}},DisplayObjectContainer:{enumerable:!0,get:function(){return i(\"DisplayObjectContainer has been shortened to Container, please use Container from now on.\"),s.Container}},Strip:{enumerable:!0,get:function(){return i(\"The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on.\"),u.Mesh}},Rope:{enumerable:!0,get:function(){return i(\"The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on.\"),u.Rope}},ParticleContainer:{enumerable:!0,get:function(){return i(\"The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on.\"),l.ParticleContainer}},MovieClip:{enumerable:!0,get:function(){return i(\"The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on.\"),f.MovieClip}},TilingSprite:{enumerable:!0,get:function(){return i(\"The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on.\"),f.TilingSprite}},BitmapText:{enumerable:!0,get:function(){return i(\"The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on.\"),f.BitmapText}},blendModes:{enumerable:!0,get:function(){return i(\"The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on.\"),s.BLEND_MODES}},scaleModes:{enumerable:!0,get:function(){return i(\"The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on.\"),s.SCALE_MODES}},BaseTextureCache:{enumerable:!0,get:function(){return i(\"The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on.\"),s.utils.BaseTextureCache}},TextureCache:{enumerable:!0,get:function(){return i(\"The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on.\"),s.utils.TextureCache}},math:{enumerable:!0,get:function(){return i(\"The math namespace is deprecated, please access members already accessible on PIXI.\"),s}},AbstractFilter:{enumerable:!0,get:function(){return i(\"AstractFilter has been renamed to Filter, please use PIXI.Filter\"),s.Filter}},TransformManual:{enumerable:!0,get:function(){return i(\"TransformManual has been renamed to TransformBase, please update your pixi-spine\"),s.TransformBase}}}),s.DisplayObject.prototype.generateTexture=function(t,e,r){return i(\"generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)\"),t.generateTexture(this,e,r)},s.Graphics.prototype.generateTexture=function(t,e){return i(\"graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture\"),this.generateCanvasTexture(t,e)},s.RenderTexture.prototype.render=function(t,e,r,n){this.legacyRenderer.render(t,this,r,e,!n),i(\"RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)\")},s.RenderTexture.prototype.getImage=function(t){return i(\"RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)\"),this.legacyRenderer.extract.image(t)},s.RenderTexture.prototype.getBase64=function(t){return i(\"RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)\"),this.legacyRenderer.extract.base64(t)},s.RenderTexture.prototype.getCanvas=function(t){return i(\"RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)\"),this.legacyRenderer.extract.canvas(t)},s.RenderTexture.prototype.getPixels=function(t){return i(\"RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)\"),this.legacyRenderer.pixels(t)},s.Sprite.prototype.setTexture=function(t){this.texture=t,i(\"setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;\")},f.BitmapText.prototype.setText=function(t){this.text=t,i(\"setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';\")},s.Text.prototype.setText=function(t){this.text=t,i(\"setText is now deprecated, please use the text property, e.g : myText.text = 'my text';\")},s.Text.prototype.setStyle=function(t){this.style=t,i(\"setStyle is now deprecated, please use the style property, e.g : myText.style = style;\")},Object.defineProperties(s.TextStyle.prototype,{font:{get:function(){i(\"text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on\");var t=\"number\"==typeof this._fontSize?this._fontSize+\"px\":this._fontSize;return this._fontStyle+\" \"+this._fontVariant+\" \"+this._fontWeight+\" \"+t+\" \"+this._fontFamily},set:function(t){i(\"text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on\"),t.indexOf(\"italic\")>1?this._fontStyle=\"italic\":t.indexOf(\"oblique\")>-1?this._fontStyle=\"oblique\":this._fontStyle=\"normal\",t.indexOf(\"small-caps\")>-1?this._fontVariant=\"small-caps\":this._fontVariant=\"normal\";var e=t.split(\" \"),r=-1;this._fontSize=26;for(var n=0;n<e.length;++n)if(e[n].match(/(px|pt|em|%)/)){r=n,this._fontSize=e[n];break}this._fontWeight=\"normal\";for(var o=0;o<r;++o)if(e[o].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[o];break}if(r>-1&&r<e.length-1){this._fontFamily=\"\";for(var s=r+1;s<e.length;++s)this._fontFamily+=e[s]+\" \";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily=\"Arial\";this.styleID++}}}),s.Texture.prototype.setFrame=function(t){this.frame=t,i(\"setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;\")},Object.defineProperties(p,{AbstractFilter:{get:function(){return i(\"AstractFilter has been renamed to Filter, please use PIXI.Filter\"),s.AbstractFilter}},SpriteMaskFilter:{get:function(){return i(\"filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on.\"),s.SpriteMaskFilter}}}),s.utils.uuid=function(){return i(\"utils.uuid() is deprecated, please use utils.uid() from now on.\"),s.utils.uid()},s.utils.canUseNewCanvasBlendModes=function(){return i(\"utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on\"),s.CanvasTinter.canUseMultiply}},{\"./core\":61,\"./extras\":129,\"./filters\":140,\"./mesh\":158,\"./particles\":161}],119:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var o=t(\"../../core\"),s=n(o),a=new s.Rectangle,u=function(){function t(e){i(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function t(e){var t=new Image;return t.src=this.base64(e),t},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,o=void 0;t&&(o=t instanceof s.RenderTexture?t:e.generateTexture(t)),o?(r=o.baseTexture._canvasRenderTarget.context,n=o.baseTexture._canvasRenderTarget.resolution,i=o.frame):(r=e.rootContext,i=a,i.width=this.renderer.width,i.height=this.renderer.height);var u=i.width*n,h=i.height*n,l=new s.CanvasRenderTarget(u,h),c=r.getImageData(i.x*n,i.y*n,u,h);return l.context.putImageData(c,0,0),l.canvas},t.prototype.pixels=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,o=void 0;return t&&(o=t instanceof s.RenderTexture?t:e.generateTexture(t)),o?(r=o.baseTexture._canvasRenderTarget.context,n=o.baseTexture._canvasRenderTarget.resolution,i=o.frame):(r=e.rootContext,i=a,i.width=e.width,i.height=e.height),r.getImageData(0,0,i.width*n,i.height*n).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();r.default=u,s.CanvasRenderer.registerPlugin(\"extract\",u)},{\"../../core\":61}],120:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t(\"./webgl/WebGLExtract\");Object.defineProperty(r,\"webgl\",{enumerable:!0,get:function(){return n(i).default}});var o=t(\"./canvas/CanvasExtract\");Object.defineProperty(r,\"canvas\",{enumerable:!0,get:function(){return n(o).default}})},{\"./canvas/CanvasExtract\":119,\"./webgl/WebGLExtract\":121}],121:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var o=t(\"../../core\"),s=n(o),a=new s.Rectangle,u=4,h=function(){function t(e){i(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function t(e){var t=new Image;return t.src=this.base64(e),t},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,o=!1,h=void 0;t&&(h=t instanceof s.RenderTexture?t:this.renderer.generateTexture(t)),h?(r=h.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=r.resolution,i=h.frame,o=!1):(r=this.renderer.rootRenderTarget,n=r.resolution,o=!0,i=a,i.width=r.size.width,i.height=r.size.height);var l=i.width*n,c=i.height*n,f=new s.CanvasRenderTarget(l,c);if(r){e.bindRenderTarget(r);var d=new Uint8Array(u*l*c),p=e.gl;p.readPixels(i.x*n,i.y*n,l,c,p.RGBA,p.UNSIGNED_BYTE,d);var v=f.context.getImageData(0,0,l,c);v.data.set(d),f.context.putImageData(v,0,0),\no&&(f.context.scale(1,-1),f.context.drawImage(f.canvas,0,-c))}return f.canvas},t.prototype.pixels=function(t){var e=this.renderer,r=void 0,n=void 0,i=void 0,o=void 0;t&&(o=t instanceof s.RenderTexture?t:this.renderer.generateTexture(t)),o?(r=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=r.resolution,i=o.frame):(r=this.renderer.rootRenderTarget,n=r.resolution,i=a,i.width=r.size.width,i.height=r.size.height);var h=i.width*n,l=i.height*n,c=new Uint8Array(u*h*l);if(r){e.bindRenderTarget(r);var f=e.gl;f.readPixels(i.x*n,i.y*n,h,l,f.RGBA,f.UNSIGNED_BYTE,c)}return c},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();r.default=h,s.WebGLRenderer.registerPlugin(\"extract\",h)},{\"../../core\":61}],122:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function s(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function a(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t(\"../core\"),l=i(h),c=t(\"../core/math/ObservablePoint\"),f=n(c),d=function(t){function e(r){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o(this,e);var i=s(this,t.call(this));return i.textWidth=0,i.textHeight=0,i._glyphs=[],i._font={tint:void 0!==n.tint?n.tint:16777215,align:n.align||\"left\",name:null,size:0},i.font=n.font,i._text=r,i.maxWidth=0,i.maxLineHeight=0,i._anchor=new f.default(function(){i.dirty=!0},i,0,0),i.dirty=!1,i.updateText(),i}return a(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],r=this._font.size/t.size,n=new l.Point,i=[],o=[],s=null,a=0,u=0,h=0,c=-1,f=0,d=0,p=0;p<this.text.length;p++){var v=this.text.charCodeAt(p);if(/(\\s)/.test(this.text.charAt(p))&&(c=p,f=a),/(?:\\r\\n|\\r|\\n)/.test(this.text.charAt(p)))o.push(a),u=Math.max(u,a),h++,n.x=0,n.y+=t.lineHeight,s=null;else if(c!==-1&&this.maxWidth>0&&n.x*r>this.maxWidth)l.utils.removeItems(i,c,p-c),p=c,c=-1,o.push(f),u=Math.max(u,f),h++,n.x=0,n.y+=t.lineHeight,s=null;else{var y=t.chars[v];y&&(s&&y.kerning[s]&&(n.x+=y.kerning[s]),i.push({texture:y.texture,line:h,charCode:v,position:new l.Point(n.x+y.xOffset,n.y+y.yOffset)}),a=n.x+(y.texture.width+y.xOffset),n.x+=y.xAdvance,d=Math.max(d,y.yOffset+y.texture.height),s=v)}}o.push(a),u=Math.max(u,a);for(var g=[],m=0;m<=h;m++){var _=0;\"right\"===this._font.align?_=u-o[m]:\"center\"===this._font.align&&(_=(u-o[m])/2),g.push(_)}for(var b=i.length,x=this.tint,T=0;T<b;T++){var w=this._glyphs[T];w?w.texture=i[T].texture:(w=new l.Sprite(i[T].texture),this._glyphs.push(w)),w.position.x=(i[T].position.x+g[i[T].line])*r,w.position.y=i[T].position.y*r,w.scale.x=w.scale.y=r,w.tint=x,w.parent||this.addChild(w)}for(var E=b;E<this._glyphs.length;++E)this.removeChild(this._glyphs[E]);if(this.textWidth=u*r,this.textHeight=(n.y+t.lineHeight)*r,0!==this.anchor.x||0!==this.anchor.y)for(var S=0;S<b;S++)this._glyphs[S].x-=this.textWidth*this.anchor.x,this._glyphs[S].y-=this.textHeight*this.anchor.y;this.maxLineHeight=d*r},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},u(e,[{key:\"tint\",get:function(){return this._font.tint},set:function(t){this._font.tint=\"number\"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:\"align\",get:function(){return this._font.align},set:function(t){this._font.align=t||\"left\",this.dirty=!0}},{key:\"anchor\",get:function(){return this._anchor},set:function(t){\"number\"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:\"font\",get:function(){return this._font},set:function(t){t&&(\"string\"==typeof t?(t=t.split(\" \"),this._font.name=1===t.length?t[0]:t.slice(1).join(\" \"),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size=\"number\"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:\"text\",get:function(){return this._text},set:function(t){t=t.toString()||\" \",this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(l.Container);r.default=d,d.fonts={}},{\"../core\":61,\"../core/math/ObservablePoint\":64}],123:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(\"../core\"),h=n(u),l=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r[0]instanceof h.Texture?r[0]:r[0].texture));return n._textures=null,n._durations=null,n.textures=r,n.animationSpeed=1,n.loop=!0,n.onComplete=null,n.onFrameChange=null,n._currentTime=0,n.playing=!1,n}return s(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,h.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,h.ticker.shared.add(this.update,this))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&(this._texture=this._textures[this.currentFrame],this._textureID=-1,this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.gotoAndPlay=function(t){this._currentTime=t,this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,r=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this._texture=this._textures[this.currentFrame],this._textureID=-1,this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(){this.stop(),t.prototype.destroy.call(this)},e.fromFrames=function(t){for(var r=[],n=0;n<t.length;++n)r.push(h.Texture.fromFrame(t[n]));return new e(r)},e.fromImages=function(t){for(var r=[],n=0;n<t.length;++n)r.push(h.Texture.fromImage(t[n]));return new e(r)},a(e,[{key:\"totalFrames\",get:function(){return this._textures.length}},{key:\"textures\",get:function(){return this._textures},set:function(t){if(t[0]instanceof h.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}}},{key:\"currentFrame\",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(h.Sprite);r.default=l},{\"../core\":61}],124:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=t(\"../core/math/Matrix\"),a=n(s),u=new a.default,h=function(){function t(e,r){i(this,t),this._texture=e,this.mapCoord=new a.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=\"undefined\"==typeof r?.5:r}return t.prototype.update=function(t){var e=this.texture;if(e&&e.valid&&(t||this._lastTextureID!==this.texture._updateID)){this._lastTextureID=this.texture._updateID;var r=this.texture._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=e.orig,i=e.trim;i&&(u.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(u));var o=e.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,h=this.clampOffset;s[0]=(e._frame.x+a+h)/o.width,s[1]=(e._frame.y+a+h)/o.height,s[2]=(e._frame.x+e._frame.width-a+h)/o.width,s[3]=(e._frame.y+e._frame.height-a+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight}},o(t,[{key:\"texture\",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();r.default=h},{\"../core/math/Matrix\":63}],125:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function s(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function a(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t(\"../core\"),l=i(h),c=t(\"../core/sprites/canvas/CanvasTinter\"),f=n(c),d=t(\"./TextureTransform\"),p=n(d),v=new l.Point,y=function(t){function e(r){var n=arguments.length<=1||void 0===arguments[1]?100:arguments[1],i=arguments.length<=2||void 0===arguments[2]?100:arguments[2];o(this,e);var a=s(this,t.call(this,r));return a.tileTransform=new l.TransformStatic,a._width=n,a._height=i,a._canvasPattern=null,a.uvTransform=r.transform||new p.default(r),a}return a(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture)},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins.tilingSprite),t.plugins.tilingSprite.render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var r=t.context,n=this.worldTransform,i=t.resolution,o=e.baseTexture,s=e.baseTexture.resolution,a=this.tilePosition.x/this.tileScale.x%e._frame.width,u=this.tilePosition.y/this.tileScale.y%e._frame.height;if(!this._canvasPattern){var h=new l.CanvasRenderTarget(e._frame.width,e._frame.height,s);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=f.default.getTintedTexture(this,this.tint)),h.context.drawImage(this.tintedTexture,0,0)):h.context.drawImage(o.source,-e._frame.x,-e._frame.y),this._canvasPattern=h.context.createPattern(h.canvas,\"repeat\")}r.globalAlpha=this.worldAlpha,r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),r.scale(this.tileScale.x/s,this.tileScale.y/s),r.translate(a+this.anchor.x*-this._width,u+this.anchor.y*-this._height);var c=t.blendModes[this.blendMode];c!==t.context.globalCompositeOperation&&(r.globalCompositeOperation=c),r.fillStyle=this._canvasPattern,r.fillRect(-a,-u,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s)}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,r,n)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new l.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,v);var e=this._width,r=this._height,n=-e*this.anchor._x;if(v.x>n&&v.x<n+e){var i=-r*this.anchor._y;if(v.y>i&&v.y<i+r)return!0}return!1},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.tileTransform=null,this.uvTransform=null},e.from=function(t,r,n){return new e(l.Texture.from(t),r,n)},e.fromFrame=function(t,r,n){var i=l.utils.TextureCache[t];if(!i)throw new Error('The frameId \"'+t+'\" does not exist in the texture cache '+this);return new e(i,r,n)},e.fromImage=function(t,r,n,i,o){return new e(l.Texture.fromImage(t,i,o),r,n)},u(e,[{key:\"clampMargin\",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:\"tileScale\",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:\"tilePosition\",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:\"width\",get:function(){return this._width},set:function(t){this._width=t}},{key:\"height\",get:function(){return this._height},set:function(t){this._height=t}}]),e}(l.Sprite);r.default=y},{\"../core\":61,\"../core/sprites/canvas/CanvasTinter\":99,\"./TextureTransform\":124}],126:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var o=t(\"../core\"),s=n(o),a=s.DisplayObject,u=new s.Matrix;a.prototype._cacheAsBitmap=!1,a.prototype._cacheData=!1;var h=function t(){i(this,t),this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(a.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new h),e=this._cacheData,e.originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this._calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this._calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),a.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},a.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var r=this.getLocalBounds().clone();if(this._filters){var n=this._filters[0].padding;r.pad(n)}var i=t._activeRenderTarget,o=t.filterManager.filterStack,a=s.RenderTexture.create(0|r.width,0|r.height),h=u;h.tx=-r.x,h.ty=-r.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,a,!0,h,!0),t.bindRenderTarget(i),t.filterManager.filterStack=o,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var l=new s.Sprite(a);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-(r.x/r.width),l.anchor.y=-(r.y/r.height),l.alpha=e,l._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.updateTransform(),this.containsPoint=l.containsPoint.bind(l)}},a.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(t))},a.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),r=this.alpha;this.alpha=1;var n=t.context,i=s.RenderTexture.create(0|e.width,0|e.height),o=u;this.transform.worldTransform.copy(o),o.invert(),o.tx-=e.x,o.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,i,!0,o,!1),t.context=n,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var a=new s.Sprite(i);a.transform.worldTransform=this.transform.worldTransform,a.anchor.x=-(e.x/e.width),a.anchor.y=-(e.y/e.height),a._bounds=this._bounds,a.alpha=r,this.updateTransform(),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=a,this.containsPoint=a.containsPoint.bind(a)}},a.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},a.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},a.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null},a.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this.destroy()}},{\"../core\":61}],127:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var i=t(\"../core\"),o=n(i);o.DisplayObject.prototype.name=null,o.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{\"../core\":61}],128:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var i=t(\"../core\"),o=n(i);o.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length<=0||void 0===arguments[0]?new o.Point:arguments[0],e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},{\"../core\":61}],129:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t(\"./TextureTransform\");Object.defineProperty(r,\"TextureTransform\",{enumerable:!0,get:function(){return n(i).default}});var o=t(\"./MovieClip\");Object.defineProperty(r,\"MovieClip\",{enumerable:!0,get:function(){return n(o).default}});var s=t(\"./TilingSprite\");Object.defineProperty(r,\"TilingSprite\",{enumerable:!0,get:function(){return n(s).default}});var a=t(\"./webgl/TilingSpriteRenderer\");Object.defineProperty(r,\"TilingSpriteRenderer\",{enumerable:!0,get:function(){return n(a).default}});var u=t(\"./BitmapText\");Object.defineProperty(r,\"BitmapText\",{enumerable:!0,get:function(){return n(u).default}});var h=t(\"./cacheAsBitmap\");Object.defineProperty(r,\"cacheAsBitmap\",{enumerable:!0,get:function(){return n(h).default}});var l=t(\"./getChildByName\");Object.defineProperty(r,\"getChildByName\",{enumerable:!0,get:function(){return n(l).default}});var c=t(\"./getGlobalPosition\");Object.defineProperty(r,\"getGlobalPosition\",{enumerable:!0,get:function(){return n(c).default}})},{\"./BitmapText\":122,\"./MovieClip\":123,\"./TextureTransform\":124,\"./TilingSprite\":125,\"./cacheAsBitmap\":126,\"./getChildByName\":127,\"./getGlobalPosition\":128,\"./webgl/TilingSpriteRenderer\":130}],130:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0,r.TilingSpriteRenderer=void 0;var a=t(\"../../core\"),u=n(a),h=t(\"../../core/const\"),l=new u.Matrix,c=new Float32Array(4),f=r.TilingSpriteRenderer=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));return n.shader=null,n.simpleShader=null,n.quad=null,n}return s(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new u.Shader(t,\"#define GLSLIFY 1\\nattribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\nuniform mat3 translationMatrix;\\nuniform mat3 uTransform;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n\\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\\n}\\n\",\"#define GLSLIFY 1\\nvarying vec2 vTextureCoord;\\n\\nuniform sampler2D uSampler;\\nuniform vec4 uColor;\\nuniform mat3 uMapCoord;\\nuniform vec4 uClampFrame;\\nuniform vec2 uClampOffset;\\n\\nvoid main(void)\\n{\\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\\n\\n    vec4 sample = texture2D(uSampler, coord);\\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\\n\\n    gl_FragColor = sample * color ;\\n}\\n\"),this.simpleShader=new u.Shader(t,\"#define GLSLIFY 1\\nattribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\nuniform mat3 translationMatrix;\\nuniform mat3 uTransform;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n\\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\\n}\\n\",\"#define GLSLIFY 1\\nvarying vec2 vTextureCoord;\\n\\nuniform sampler2D uSampler;\\nuniform vec4 uColor;\\n\\nvoid main(void)\\n{\\n    vec4 sample = texture2D(uSampler, vTextureCoord);\\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\\n    gl_FragColor = sample * color;\\n}\\n\"),this.quad=new u.Quad(t),this.quad.initVao(this.shader)},e.prototype.render=function(t){var e=this.quad,r=e.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y),r=e.uvs,r[0]=r[6]=-t.anchor.x,r[1]=r[3]=-t.anchor.y,r[2]=r[4]=1-t.anchor.x,r[5]=r[7]=1-t.anchor.y,e.upload();var n=this.renderer,i=t._texture,o=i.baseTexture,s=t.tileTransform.localTransform,a=t.uvTransform,f=o.isPowerOfTwo&&i.frame.width===o.width&&i.frame.height===o.height;f&&(o._glTextures[n.CONTEXT_UID]?f=o.wrapMode!==h.WRAP_MODES.CLAMP:o.wrapMode===h.WRAP_MODES.CLAMP&&(o.wrapMode=h.WRAP_MODES.REPEAT));var d=f?this.simpleShader:this.shader;n.bindShader(d);var p=i.width,v=i.height,y=t._width,g=t._height;l.set(s.a*p/y,s.b*p/g,s.c*v/y,s.d*v/g,s.tx/y,s.ty/g),l.invert(),f?l.append(a.mapCoord):(d.uniforms.uMapCoord=a.mapCoord.toArray(!0),d.uniforms.uClampFrame=a.uClampFrame,d.uniforms.uClampOffset=a.uClampOffset),d.uniforms.uTransform=l.toArray(!0);var m=c;u.utils.hex2rgb(t.tint,m),m[3]=t.worldAlpha,d.uniforms.uColor=m,d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),n.bindTexture(i),n.setBlendMode(t.blendMode),e.draw()},e}(u.ObjectRenderer);u.WebGLRenderer.registerPlugin(\"tilingSprite\",f)},{\"../../core\":61,\"../../core/const\":42}],131:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function s(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function a(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t(\"../../core\"),l=i(h),c=t(\"./BlurXFilter\"),f=n(c),d=t(\"./BlurYFilter\"),p=n(d),v=function(t){function e(r,n,i){o(this,e);var a=s(this,t.call(this));return a.blurXFilter=new f.default,a.blurYFilter=new p.default,a.resolution=1,a.padding=0,a.resolution=i||1,a.quality=n||4,a.blur=r||8,a}return a(e,t),e.prototype.apply=function(t,e,r){var n=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,n,!0),this.blurYFilter.apply(t,n,r,!1),t.returnRenderTarget(n)},u(e,[{key:\"blur\",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:\"quality\",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:\"blurX\",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:\"blurY\",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}}]),e}(l.Filter);r.default=v},{\"../../core\":61,\"./BlurXFilter\":132,\"./BlurYFilter\":133}],132:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function s(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function a(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t(\"../../core\"),l=i(h),c=t(\"./generateBlurVertSource\"),f=n(c),d=t(\"./generateBlurFragSource\"),p=n(d),v=t(\"./getMaxBlurKernelSize\"),y=n(v),g=function(t){function e(r,n,i){o(this,e);var a=(0,f.default)(5,!0),u=(0,p.default)(5),h=s(this,t.call(this,a,u));return h.resolution=i||1,h._quality=0,h.quality=n||4,h.strength=r||8,h.firstRun=!0,h}return a(e,t),e.prototype.apply=function(t,e,r,n){if(this.firstRun){var i=t.renderer.gl,o=(0,y.default)(i);this.vertexSrc=(0,f.default)(o,!0),this.fragmentSrc=(0,p.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.width*(r.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,n);else{for(var s=t.getRenderTarget(!0),a=e,u=s,h=0;h<this.passes-1;h++){t.applyFilter(this,a,u,!0);var l=u;u=a,a=l}t.applyFilter(this,a,r,n),t.returnRenderTarget(s)}},u(e,[{key:\"blur\",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:\"quality\",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(l.Filter);r.default=g},{\"../../core\":61,\"./generateBlurFragSource\":134,\"./generateBlurVertSource\":135,\"./getMaxBlurKernelSize\":136}],133:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function s(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function a(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h=t(\"../../core\"),l=i(h),c=t(\"./generateBlurVertSource\"),f=n(c),d=t(\"./generateBlurFragSource\"),p=n(d),v=t(\"./getMaxBlurKernelSize\"),y=n(v),g=function(t){function e(r,n,i){o(this,e);var a=(0,f.default)(5,!1),u=(0,\np.default)(5),h=s(this,t.call(this,a,u));return h.resolution=i||1,h._quality=0,h.quality=n||4,h.strength=r||8,h.firstRun=!0,h}return a(e,t),e.prototype.apply=function(t,e,r,n){if(this.firstRun){var i=t.renderer.gl,o=(0,y.default)(i);this.vertexSrc=(0,f.default)(o,!1),this.fragmentSrc=(0,p.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.height*(r.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,n);else{for(var s=t.getRenderTarget(!0),a=e,u=s,h=0;h<this.passes-1;h++){t.applyFilter(this,a,u,!0);var l=u;u=a,a=l}t.applyFilter(this,a,r,n),t.returnRenderTarget(s)}},u(e,[{key:\"blur\",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:\"quality\",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(l.Filter);r.default=g},{\"../../core\":61,\"./generateBlurFragSource\":134,\"./generateBlurVertSource\":135,\"./getMaxBlurKernelSize\":136}],134:[function(t,e,r){\"use strict\";function n(t){for(var e=i[t],r=e.length,n=o,s=\"\",a=\"gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;\",u=void 0,h=0;h<t;h++){var l=a.replace(\"%index%\",h);u=h,h>=r&&(u=t-h-1),l=l.replace(\"%value%\",e[u]),s+=l,s+=\"\\n\"}return n=n.replace(\"%blur%\",s),n=n.replace(\"%size%\",t)}r.__esModule=!0,r.default=n;var i={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},o=[\"varying vec2 vBlurTexCoords[%size%];\",\"uniform sampler2D uSampler;\",\"void main(void)\",\"{\",\"    gl_FragColor = vec4(0.0);\",\"    %blur%\",\"}\"].join(\"\\n\")},{}],135:[function(t,e,r){\"use strict\";function n(t,e){var r=Math.ceil(t/2),n=i,o=\"\",s=void 0;s=e?\"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);\":\"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);\";for(var a=0;a<t;a++){var u=s.replace(\"%index%\",a);u=u.replace(\"%sampleIndex%\",a-(r-1)+\".0\"),o+=u,o+=\"\\n\"}return n=n.replace(\"%blur%\",o),n=n.replace(\"%size%\",t)}r.__esModule=!0,r.default=n;var i=[\"attribute vec2 aVertexPosition;\",\"attribute vec2 aTextureCoord;\",\"uniform float strength;\",\"uniform mat3 projectionMatrix;\",\"varying vec2 vBlurTexCoords[%size%];\",\"void main(void)\",\"{\",\"gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\",\"%blur%\",\"}\"].join(\"\\n\")},{}],136:[function(t,e,r){\"use strict\";function n(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),r=15;r>e;)r-=2;return r}r.__esModule=!0,r.default=n},{}],137:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(\"../../core\"),h=n(u),l=function(t){function e(){i(this,e);var r=o(this,t.call(this,\"#define GLSLIFY 1\\nattribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\",\"#define GLSLIFY 1\\nvarying vec2 vTextureCoord;\\nuniform sampler2D uSampler;\\nuniform float m[20];\\n\\nvoid main(void)\\n{\\n\\n    vec4 c = texture2D(uSampler, vTextureCoord);\\n\\n    gl_FragColor.r = (m[0] * c.r);\\n        gl_FragColor.r += (m[1] * c.g);\\n        gl_FragColor.r += (m[2] * c.b);\\n        gl_FragColor.r += (m[3] * c.a);\\n        gl_FragColor.r += m[4] * c.a;\\n\\n    gl_FragColor.g = (m[5] * c.r);\\n        gl_FragColor.g += (m[6] * c.g);\\n        gl_FragColor.g += (m[7] * c.b);\\n        gl_FragColor.g += (m[8] * c.a);\\n        gl_FragColor.g += m[9] * c.a;\\n\\n     gl_FragColor.b = (m[10] * c.r);\\n        gl_FragColor.b += (m[11] * c.g);\\n        gl_FragColor.b += (m[12] * c.b);\\n        gl_FragColor.b += (m[13] * c.a);\\n        gl_FragColor.b += m[14] * c.a;\\n\\n     gl_FragColor.a = (m[15] * c.r);\\n        gl_FragColor.a += (m[16] * c.g);\\n        gl_FragColor.a += (m[17] * c.b);\\n        gl_FragColor.a += (m[18] * c.a);\\n        gl_FragColor.a += m[19] * c.a;\\n\\n//    gl_FragColor = vec4(m[0]);\\n}\\n\"));return r.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],r}return s(e,t),e.prototype._loadMatrix=function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],r=t;e&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r},e.prototype._multiply=function(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.greyscale=function(t,e){var r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var r=Math.cos(t),n=Math.sin(t),i=Math.sqrt,o=1/3,s=i(o),a=r+(1-r)*o,u=o*(1-r)-s*n,h=o*(1-r)+s*n,l=o*(1-r)+s*n,c=r+o*(1-r),f=o*(1-r)-s*n,d=o*(1-r)-s*n,p=o*(1-r)+s*n,v=r+o*(1-r),y=[a,u,h,0,0,l,c,f,0,0,d,p,v,0,0,0,0,0,1,0];this._loadMatrix(y,e)},e.prototype.contrast=function(t,e){var r=(t||0)+1,n=-128*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.saturate=function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments[1],r=2*t/3+1,n=(r-1)*-.5,i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){var e=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.colorTone=function(t,e,r,n,i){t=t||.2,e=e||.15,r=r||16770432,n=n||3375104;var o=(r>>16&255)/255,s=(r>>8&255)/255,a=(255&r)/255,u=(n>>16&255)/255,h=(n>>8&255)/255,l=(255&n)/255,c=[.3,.59,.11,0,0,o,s,a,t,0,u,h,l,e,0,o-u,s-h,a-l,0,0];this._loadMatrix(c,i)},e.prototype.night=function(t,e){t=t||.1;var r=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.predator=function(t,e){var r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},a(e,[{key:\"matrix\",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}}]),e}(h.Filter);r.default=l,l.prototype.grayscale=l.prototype.greyscale},{\"../../core\":61}],138:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(\"../../core\"),h=n(u),l=function(t){function e(r,n){i(this,e);var s=new h.Matrix;r.renderable=!1;var a=o(this,t.call(this,\"#define GLSLIFY 1\\nattribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\nuniform mat3 filterMatrix;\\n\\nvarying vec2 vTextureCoord;\\nvarying vec2 vFilterCoord;\\n\\nvoid main(void)\\n{\\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\\n   vTextureCoord = aTextureCoord;\\n}\",\"#define GLSLIFY 1\\nvarying vec2 vFilterCoord;\\nvarying vec2 vTextureCoord;\\n\\nuniform vec2 scale;\\n\\nuniform sampler2D uSampler;\\nuniform sampler2D mapSampler;\\n\\nuniform vec4 filterClamp;\\n\\nvoid main(void)\\n{\\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\\n\\n   map -= 0.5;\\n   map.xy *= scale;\\n\\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\\n}\\n\"));return a.maskSprite=r,a.maskMatrix=s,a.uniforms.mapSampler=r.texture,a.uniforms.filterMatrix=s.toArray(!0),a.uniforms.scale={x:1,y:1},null!==n&&void 0!==n||(n=20),a.scale=new h.Point(n,n),a}return s(e,t),e.prototype.apply=function(t,e,r){var n=1/r.destinationFrame.width*(r.size.width/e.size.width);this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*n,this.uniforms.scale.y=this.scale.y*n,t.applyFilter(this,e,r)},a(e,[{key:\"map\",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(h.Filter);r.default=l},{\"../../core\":61}],139:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(\"../../core\"),u=n(a),h=function(t){function e(){return i(this,e),o(this,t.call(this,\"#define GLSLIFY 1\\nattribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 v_rgbNW;\\nvarying vec2 v_rgbNE;\\nvarying vec2 v_rgbSW;\\nvarying vec2 v_rgbSE;\\nvarying vec2 v_rgbM;\\n\\nuniform vec4 filterArea;\\n\\nvarying vec2 vTextureCoord;\\n\\nvec2 mapCoord( vec2 coord )\\n{\\n    coord *= filterArea.xy;\\n    coord += filterArea.zw;\\n\\n    return coord;\\n}\\n\\nvec2 unmapCoord( vec2 coord )\\n{\\n    coord -= filterArea.zw;\\n    coord /= filterArea.xy;\\n\\n    return coord;\\n}\\n\\nvoid texcoords(vec2 fragCoord, vec2 resolution,\\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\\n               out vec2 v_rgbM) {\\n    vec2 inverseVP = 1.0 / resolution.xy;\\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\\n    v_rgbM = vec2(fragCoord * inverseVP);\\n}\\n\\nvoid main(void) {\\n\\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n\\n   vTextureCoord = aTextureCoord;\\n\\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\\n\\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\\n}\",'#define GLSLIFY 1\\nvarying vec2 v_rgbNW;\\nvarying vec2 v_rgbNE;\\nvarying vec2 v_rgbSW;\\nvarying vec2 v_rgbSE;\\nvarying vec2 v_rgbM;\\n\\nvarying vec2 vTextureCoord;\\nuniform sampler2D uSampler;\\nuniform vec4 filterArea;\\n\\n/**\\n Basic FXAA implementation based on the code on geeks3d.com with the\\n modification that the texture2DLod stuff was removed since it\\'s\\n unsupported by WebGL.\\n \\n --\\n \\n From:\\n https://github.com/mitsuhiko/webgl-meincraft\\n \\n Copyright (c) 2011 by Armin Ronacher.\\n \\n Some rights reserved.\\n \\n Redistribution and use in source and binary forms, with or without\\n modification, are permitted provided that the following conditions are\\n met:\\n \\n * Redistributions of source code must retain the above copyright\\n notice, this list of conditions and the following disclaimer.\\n \\n * Redistributions in binary form must reproduce the above\\n copyright notice, this list of conditions and the following\\n disclaimer in the documentation and/or other materials provided\\n with the distribution.\\n \\n * The names of the contributors may not be used to endorse or\\n promote products derived from this software without specific\\n prior written permission.\\n \\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\\n \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\\n */\\n\\n#ifndef FXAA_REDUCE_MIN\\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\\n#endif\\n#ifndef FXAA_REDUCE_MUL\\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\\n#endif\\n#ifndef FXAA_SPAN_MAX\\n#define FXAA_SPAN_MAX     8.0\\n#endif\\n\\n//optimized version for mobile, where dependent\\n//texture reads can be a bottleneck\\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\\n          vec2 v_rgbNW, vec2 v_rgbNE,\\n          vec2 v_rgbSW, vec2 v_rgbSE,\\n          vec2 v_rgbM) {\\n    vec4 color;\\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\\n    vec4 texColor = texture2D(tex, v_rgbM);\\n    vec3 rgbM  = texColor.xyz;\\n    vec3 luma = vec3(0.299, 0.587, 0.114);\\n    float lumaNW = dot(rgbNW, luma);\\n    float lumaNE = dot(rgbNE, luma);\\n    float lumaSW = dot(rgbSW, luma);\\n    float lumaSE = dot(rgbSE, luma);\\n    float lumaM  = dot(rgbM,  luma);\\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\\n    \\n    mediump vec2 dir;\\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\\n    \\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\\n    \\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\\n                  dir * rcpDirMin)) * inverseVP;\\n    \\n    vec3 rgbA = 0.5 * (\\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\\n    \\n    float lumaB = dot(rgbB, luma);\\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\\n        color = vec4(rgbA, texColor.a);\\n    else\\n        color = vec4(rgbB, texColor.a);\\n    return color;\\n}\\n\\nvoid main() {\\n\\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\\n\\n      vec4 color;\\n\\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\\n\\n      gl_FragColor = color;\\n}\\n'))}return s(e,t),e}(u.Filter);r.default=h},{\"../../core\":61}],140:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t(\"./fxaa/FXAAFilter\");Object.defineProperty(r,\"FXAAFilter\",{enumerable:!0,get:function(){return n(i).default}});var o=t(\"./noise/NoiseFilter\");Object.defineProperty(r,\"NoiseFilter\",{enumerable:!0,get:function(){return n(o).default}});var s=t(\"./displacement/DisplacementFilter\");Object.defineProperty(r,\"DisplacementFilter\",{enumerable:!0,get:function(){return n(s).default}});var a=t(\"./blur/BlurFilter\");Object.defineProperty(r,\"BlurFilter\",{enumerable:!0,get:function(){return n(a).default}});var u=t(\"./blur/BlurXFilter\");Object.defineProperty(r,\"BlurXFilter\",{enumerable:!0,get:function(){return n(u).default}});var h=t(\"./blur/BlurYFilter\");Object.defineProperty(r,\"BlurYFilter\",{enumerable:!0,get:function(){return n(h).default}});var l=t(\"./colormatrix/ColorMatrixFilter\");Object.defineProperty(r,\"ColorMatrixFilter\",{enumerable:!0,get:function(){return n(l).default}});var c=t(\"./void/VoidFilter\");Object.defineProperty(r,\"VoidFilter\",{enumerable:!0,get:function(){return n(c).default}})},{\"./blur/BlurFilter\":131,\"./blur/BlurXFilter\":132,\"./blur/BlurYFilter\":133,\"./colormatrix/ColorMatrixFilter\":137,\"./displacement/DisplacementFilter\":138,\"./fxaa/FXAAFilter\":139,\"./noise/NoiseFilter\":141,\"./void/VoidFilter\":142}],141:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(\"../../core\"),h=n(u),l=function(t){function e(){i(this,e);var r=o(this,t.call(this,\"#define GLSLIFY 1\\nattribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\",\"precision highp float;\\n#define GLSLIFY 1\\n\\nvarying vec2 vTextureCoord;\\nvarying vec4 vColor;\\n\\nuniform float noise;\\nuniform sampler2D uSampler;\\n\\nfloat rand(vec2 co)\\n{\\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\\n}\\n\\nvoid main()\\n{\\n    vec4 color = texture2D(uSampler, vTextureCoord);\\n\\n    float diff = (rand(gl_FragCoord.xy) - 0.5) * noise;\\n\\n    color.r += diff;\\n    color.g += diff;\\n    color.b += diff;\\n\\n    gl_FragColor = color;\\n}\\n\"));return r.noise=.5,r}return s(e,t),a(e,[{key:\"noise\",get:function(){return this.uniforms.noise},set:function(t){this.uniforms.noise=t}}]),e}(h.Filter);r.default=l},{\"../../core\":61}],142:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(\"../../core\"),u=n(a),h=function(t){function e(){i(this,e);var r=o(this,t.call(this,\"#define GLSLIFY 1\\nattribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n    vTextureCoord = aTextureCoord;\\n}\",\"#define GLSLIFY 1\\nvarying vec2 vTextureCoord;\\n\\nuniform sampler2D uSampler;\\n\\nvoid main(void)\\n{\\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\\n}\\n\"));return r.glShaderKey=\"void\",r}return s(e,t),e}(u.Filter);r.default=h},{\"../../core\":61}],143:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var o=t(\"../core\"),s=n(o),a=function(){function t(){i(this,t),this.global=new s.Point,this.target=null,this.originalEvent=null}return t.prototype.getLocalPosition=function(t,e,r){return t.worldTransform.applyInverse(r||this.global,e)},t}();r.default=a},{\"../core\":61}],144:[function(t,e,r){\"use strict\";function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var i=function(){function t(){n(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();r.default=i},{}],145:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function s(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function a(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var u=t(\"../core\"),h=i(u),l=t(\"./InteractionData\"),c=n(l),f=t(\"./InteractionEvent\"),d=n(f),p=t(\"eventemitter3\"),v=n(p),y=t(\"./interactiveTarget\"),g=n(y),m=t(\"ismobilejs\"),_=n(m);Object.assign(h.DisplayObject.prototype,g.default);var b=function(t){function e(r,n){o(this,e);var i=s(this,t.call(this));return n=n||{},i.renderer=r,i.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,i.interactionFrequency=n.interactionFrequency||10,i.mouse=new c.default,i.mouse.global.set(-999999),i.pointer=new c.default,i.pointer.global.set(-999999),i.eventData=new d.default,i.interactiveDataPool=[],i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.mouseOverRenderer=!1,i.supportsTouchEvents=\"ontouchstart\"in window,i.supportsPointerEvents=!!window.PointerEvent,i.normalizeTouchEvents=!i.supportsPointerEvents&&i.supportsTouchEvents,i.normalizeMouseEvents=!i.supportsPointerEvents&&!_.default.any,i.onMouseUp=i.onMouseUp.bind(i),i.processMouseUp=i.processMouseUp.bind(i),i.onMouseDown=i.onMouseDown.bind(i),i.processMouseDown=i.processMouseDown.bind(i),i.onMouseMove=i.onMouseMove.bind(i),i.processMouseMove=i.processMouseMove.bind(i),i.onMouseOut=i.onMouseOut.bind(i),i.processMouseOverOut=i.processMouseOverOut.bind(i),i.onMouseOver=i.onMouseOver.bind(i),i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.onTouchStart=i.onTouchStart.bind(i),i.processTouchStart=i.processTouchStart.bind(i),i.onTouchEnd=i.onTouchEnd.bind(i),i.processTouchEnd=i.processTouchEnd.bind(i),i.onTouchMove=i.onTouchMove.bind(i),i.processTouchMove=i.processTouchMove.bind(i),i.defaultCursorStyle=\"inherit\",i.currentCursorStyle=\"inherit\",i._tempPoint=new h.Point,i.resolution=1,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return a(e,t),e.prototype.setTargetElement=function(t){var e=arguments.length<=1||void 0===arguments[1]?1:arguments[1];this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(h.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style[\"-ms-content-zooming\"]=\"none\",this.interactionDOMElement.style[\"-ms-touch-action\"]=\"none\"):this.supportsPointerEvents&&(this.interactionDOMElement.style[\"touch-action\"]=\"none\"),window.document.addEventListener(\"mousemove\",this.onMouseMove,!0),this.interactionDOMElement.addEventListener(\"mousedown\",this.onMouseDown,!0),this.interactionDOMElement.addEventListener(\"mouseout\",this.onMouseOut,!0),this.interactionDOMElement.addEventListener(\"mouseover\",this.onMouseOver,!0),window.addEventListener(\"mouseup\",this.onMouseUp,!0),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener(\"touchstart\",this.onTouchStart,!0),this.interactionDOMElement.addEventListener(\"touchend\",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener(\"touchmove\",this.onTouchMove,!0)),this.supportsPointerEvents?(window.document.addEventListener(\"pointermove\",this.onPointerMove,!0),this.interactionDOMElement.addEventListener(\"pointerdown\",this.onPointerDown,!0),this.interactionDOMElement.addEventListener(\"pointerout\",this.onPointerOut,!0),this.interactionDOMElement.addEventListener(\"pointerover\",this.onPointerOver,!0),window.addEventListener(\"pointerup\",this.onPointerUp,!0)):(this.normalizeTouchEvents&&(this.interactionDOMElement.addEventListener(\"touchstart\",this.onPointerDown,!0),this.interactionDOMElement.addEventListener(\"touchend\",this.onPointerUp,!0),this.interactionDOMElement.addEventListener(\"touchmove\",this.onPointerMove,!0)),this.normalizeMouseEvents&&(window.document.addEventListener(\"mousemove\",this.onPointerMove,!0),this.interactionDOMElement.addEventListener(\"mousedown\",this.onPointerDown,!0),this.interactionDOMElement.addEventListener(\"mouseout\",this.onPointerOut,!0),this.interactionDOMElement.addEventListener(\"mouseover\",this.onPointerOver,!0),window.addEventListener(\"mouseup\",this.onPointerUp,!0))),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(h.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style[\"-ms-content-zooming\"]=\"\",this.interactionDOMElement.style[\"-ms-touch-action\"]=\"\"):this.supportsPointerEvents&&(this.interactionDOMElement.style[\"touch-action\"]=\"\"),window.document.removeEventListener(\"mousemove\",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener(\"mousedown\",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener(\"mouseout\",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener(\"mouseover\",this.onMouseOver,!0),window.removeEventListener(\"mouseup\",this.onMouseUp,!0),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener(\"touchstart\",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener(\"touchend\",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener(\"touchmove\",this.onTouchMove,!0)),this.supportsPointerEvents?(window.document.removeEventListener(\"pointermove\",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener(\"pointerdown\",this.onPointerDown,!0),\nthis.interactionDOMElement.removeEventListener(\"pointerout\",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener(\"pointerover\",this.onPointerOver,!0),window.removeEventListener(\"pointerup\",this.onPointerUp,!0)):(this.normalizeTouchEvents&&(this.interactionDOMElement.removeEventListener(\"touchstart\",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener(\"touchend\",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener(\"touchmove\",this.onPointerMove,!0)),this.normalizeMouseEvents&&(window.document.removeEventListener(\"mousemove\",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener(\"mousedown\",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener(\"mouseout\",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener(\"mouseover\",this.onPointerOver,!0),window.removeEventListener(\"mouseup\",this.onPointerUp,!0))),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=this.defaultCursorStyle,this.eventData._reset(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)}},e.prototype.dispatchEvent=function(t,e,r){r.stopped||(r.currentTarget=t,r.type=e,t.emit(e,r),t[e]&&t[e](r))},e.prototype.mapPositionToPoint=function(t,e,r){var n=void 0;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0},t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)/this.resolution,t.y=(r-n.top)*(this.interactionDOMElement.height/n.height)/this.resolution},e.prototype.processInteractive=function(t,e,r,n,i){if(!e||!e.visible)return!1;i=e.interactive||i;var o=!1,s=i;if(e.hitArea&&(s=!1),n&&e._mask&&(e._mask.containsPoint(t)||(n=!1)),n&&e.filterArea&&(e.filterArea.contains(t.x,t.y)||(n=!1)),e.interactiveChildren&&e.children)for(var a=e.children,u=a.length-1;u>=0;u--){var h=a[u];if(this.processInteractive(t,h,r,n,s)){if(!h.parent)continue;o=!0,s=!1,n=!1}}return i&&(n&&!o&&(e.hitArea?(e.worldTransform.applyInverse(t,this._tempPoint),o=e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):e.containsPoint&&(o=e.containsPoint(t))),e.interactive&&(o&&!this.eventData.target&&(this.eventData.target=e,this.mouse.target=e,this.pointer.target=e),r(e,o))),o},e.prototype.onMouseDown=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData._reset(),this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0);var e=2===t.button||3===t.which;this.emit(e?\"rightdown\":\"mousedown\",this.eventData)},e.prototype.processMouseDown=function(t,e){var r=this.mouse.originalEvent,n=2===r.button||3===r.which;e&&(t[n?\"_isRightDown\":\"_isLeftDown\"]=!0,this.dispatchEvent(t,n?\"rightdown\":\"mousedown\",this.eventData))},e.prototype.onMouseUp=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData._reset(),this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0);var e=2===t.button||3===t.which;this.emit(e?\"rightup\":\"mouseup\",this.eventData)},e.prototype.processMouseUp=function(t,e){var r=this.mouse.originalEvent,n=2===r.button||3===r.which,i=n?\"_isRightDown\":\"_isLeftDown\";e?(this.dispatchEvent(t,n?\"rightup\":\"mouseup\",this.eventData),t[i]&&(t[i]=!1,this.dispatchEvent(t,n?\"rightclick\":\"click\",this.eventData))):t[i]&&(t[i]=!1,this.dispatchEvent(t,n?\"rightupoutside\":\"mouseupoutside\",this.eventData))},e.prototype.onMouseMove=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData._reset(),this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.didMove=!0,this.cursor=this.defaultCursorStyle,this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.emit(\"mousemove\",this.eventData),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},e.prototype.processMouseMove=function(t,e){this.processMouseOverOut(t,e),this.moveWhenInside&&!e||this.dispatchEvent(t,\"mousemove\",this.eventData)},e.prototype.onMouseOut=function(t){this.mouseOverRenderer=!1,this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData._reset(),this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.interactionDOMElement.style.cursor=this.defaultCursorStyle,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1),this.emit(\"mouseout\",this.eventData)},e.prototype.processMouseOverOut=function(t,e){e&&this.mouseOverRenderer?(t._mouseOver||(t._mouseOver=!0,this.dispatchEvent(t,\"mouseover\",this.eventData)),t.buttonMode&&(this.cursor=t.defaultCursor)):t._mouseOver&&(t._mouseOver=!1,this.dispatchEvent(t,\"mouseout\",this.eventData))},e.prototype.onMouseOver=function(t){this.mouseOverRenderer=!0,this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData._reset(),this.emit(\"mouseover\",this.eventData)},e.prototype.onPointerDown=function(t){this.normalizeToPointerData(t),this.pointer.originalEvent=t,this.eventData.data=this.pointer,this.eventData._reset(),this.mapPositionToPoint(this.pointer.global,t.clientX,t.clientY),this.autoPreventDefault&&this.pointer.originalEvent.preventDefault(),this.processInteractive(this.pointer.global,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit(\"pointerdown\",this.eventData)},e.prototype.processPointerDown=function(t,e){e&&(t._pointerDown=!0,this.dispatchEvent(t,\"pointerdown\",this.eventData))},e.prototype.onPointerUp=function(t){this.normalizeToPointerData(t),this.pointer.originalEvent=t,this.eventData.data=this.pointer,this.eventData._reset(),this.mapPositionToPoint(this.pointer.global,t.clientX,t.clientY),this.processInteractive(this.pointer.global,this.renderer._lastObjectRendered,this.processPointerUp,!0),this.emit(\"pointerup\",this.eventData)},e.prototype.processPointerUp=function(t,e){e?(this.dispatchEvent(t,\"pointerup\",this.eventData),t._pointerDown&&(t._pointerDown=!1,this.dispatchEvent(t,\"pointertap\",this.eventData))):t._pointerDown&&(t._pointerDown=!1,this.dispatchEvent(t,\"pointerupoutside\",this.eventData))},e.prototype.onPointerMove=function(t){this.normalizeToPointerData(t),this.pointer.originalEvent=t,this.eventData.data=this.pointer,this.eventData._reset(),this.mapPositionToPoint(this.pointer.global,t.clientX,t.clientY),this.processInteractive(this.pointer.global,this.renderer._lastObjectRendered,this.processPointerMove,!0),this.emit(\"pointermove\",this.eventData)},e.prototype.processPointerMove=function(t,e){this.pointer.originalEvent.changedTouches||this.processPointerOverOut(t,e),this.moveWhenInside&&!e||this.dispatchEvent(t,\"pointermove\",this.eventData)},e.prototype.onPointerOut=function(t){this.normalizeToPointerData(t),this.pointer.originalEvent=t,this.eventData.data=this.pointer,this.eventData._reset(),this.mapPositionToPoint(this.pointer.global,t.clientX,t.clientY),this.processInteractive(this.pointer.global,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit(\"pointerout\",this.eventData)},e.prototype.processPointerOverOut=function(t,e){e&&this.mouseOverRenderer?t._pointerOver||(t._pointerOver=!0,this.dispatchEvent(t,\"pointerover\",this.eventData)):t._pointerOver&&(t._pointerOver=!1,this.dispatchEvent(t,\"pointerout\",this.eventData))},e.prototype.onPointerOver=function(t){this.pointer.originalEvent=t,this.eventData.data=this.pointer,this.eventData._reset(),this.emit(\"pointerover\",this.eventData)},e.prototype.onTouchStart=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,r=e.length,n=0;n<r;n++){var i=e[n],o=this.getTouchData(i);o.originalEvent=t,this.eventData.data=o,this.eventData._reset(),this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.emit(\"touchstart\",this.eventData),this.returnTouchData(o)}},e.prototype.processTouchStart=function(t,e){e&&(t._touchDown=!0,this.dispatchEvent(t,\"touchstart\",this.eventData))},e.prototype.onTouchEnd=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,r=e.length,n=0;n<r;n++){var i=e[n],o=this.getTouchData(i);o.originalEvent=t,this.eventData.data=o,this.eventData._reset(),this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.emit(\"touchend\",this.eventData),this.returnTouchData(o)}},e.prototype.processTouchEnd=function(t,e){e?(this.dispatchEvent(t,\"touchend\",this.eventData),t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,\"tap\",this.eventData))):t._touchDown&&(t._touchDown=!1,this.dispatchEvent(t,\"touchendoutside\",this.eventData))},e.prototype.onTouchMove=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,r=e.length,n=0;n<r;n++){var i=e[n],o=this.getTouchData(i);o.originalEvent=t,this.eventData.data=o,this.eventData._reset(),this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchMove,this.moveWhenInside),this.emit(\"touchmove\",this.eventData),this.returnTouchData(o)}},e.prototype.processTouchMove=function(t,e){this.moveWhenInside&&!e||this.dispatchEvent(t,\"touchmove\",this.eventData)},e.prototype.getTouchData=function(t){var e=this.interactiveDataPool.pop()||new c.default;return e.identifier=t.identifier,this.mapPositionToPoint(e.global,t.clientX,t.clientY),navigator.isCocoonJS&&(e.global.x=e.global.x/this.resolution,e.global.y=e.global.y/this.resolution),t.globalX=e.global.x,t.globalY=e.global.y,e},e.prototype.returnTouchData=function(t){this.interactiveDataPool.push(t)},e.prototype.normalizeToPointerData=function(t){this.normalizeTouchEvents&&t.changedTouches?(\"undefined\"==typeof t.button&&(t.button=t.touches.length?1:0),\"undefined\"==typeof t.buttons&&(t.buttons=t.touches.length?1:0),\"undefined\"==typeof t.isPrimary&&(t.isPrimary=1===t.touches.length),\"undefined\"==typeof t.width&&(t.width=t.changedTouches[0].radiusX||1),\"undefined\"==typeof t.height&&(t.height=t.changedTouches[0].radiusY||1),\"undefined\"==typeof t.tiltX&&(t.tiltX=0),\"undefined\"==typeof t.tiltY&&(t.tiltY=0),\"undefined\"==typeof t.pointerType&&(t.pointerType=\"touch\"),\"undefined\"==typeof t.pointerId&&(t.pointerId=t.changedTouches[0].identifier||0),\"undefined\"==typeof t.pressure&&(t.pressure=t.changedTouches[0].force||.5),\"undefined\"==typeof t.rotation&&(t.rotation=t.changedTouches[0].rotationAngle||0),\"undefined\"==typeof t.clientX&&(t.clientX=t.changedTouches[0].clientX),\"undefined\"==typeof t.clientY&&(t.clientY=t.changedTouches[0].clientY),\"undefined\"==typeof t.pageX&&(t.pageX=t.changedTouches[0].pageX),\"undefined\"==typeof t.pageY&&(t.pageY=t.changedTouches[0].pageY),\"undefined\"==typeof t.screenX&&(t.screenX=t.changedTouches[0].screenX),\"undefined\"==typeof t.screenY&&(t.screenY=t.changedTouches[0].screenY),\"undefined\"==typeof t.layerX&&(t.layerX=t.offsetX=t.clientX),\"undefined\"==typeof t.layerY&&(t.layerY=t.offsetY=t.clientY)):this.normalizeMouseEvents&&(\"undefined\"==typeof t.isPrimary&&(t.isPrimary=!0),\"undefined\"==typeof t.width&&(t.width=1),\"undefined\"==typeof t.height&&(t.height=1),\"undefined\"==typeof t.tiltX&&(t.tiltX=0),\"undefined\"==typeof t.tiltY&&(t.tiltY=0),\"undefined\"==typeof t.pointerType&&(t.pointerType=\"mouse\"),\"undefined\"==typeof t.pointerId&&(t.pointerId=1),\"undefined\"==typeof t.pressure&&(t.pressure=.5),\"undefined\"==typeof t.rotation&&(t.rotation=0))},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onMouseOver=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null},e}(v.default);r.default=b,h.WebGLRenderer.registerPlugin(\"interaction\",b),h.CanvasRenderer.registerPlugin(\"interaction\",b)},{\"../core\":61,\"./InteractionData\":143,\"./InteractionEvent\":144,\"./interactiveTarget\":147,eventemitter3:3,ismobilejs:4}],146:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t(\"./InteractionData\");Object.defineProperty(r,\"InteractionData\",{enumerable:!0,get:function(){return n(i).default}});var o=t(\"./InteractionManager\");Object.defineProperty(r,\"InteractionManager\",{enumerable:!0,get:function(){return n(o).default}});var s=t(\"./interactiveTarget\");Object.defineProperty(r,\"interactiveTarget\",{enumerable:!0,get:function(){return n(s).default}})},{\"./InteractionData\":143,\"./InteractionManager\":145,\"./interactiveTarget\":147}],147:[function(t,e,r){\"use strict\";r.__esModule=!0,r.default={interactive:!1,interactiveChildren:!0,hitArea:null,buttonMode:!1,defaultCursor:\"pointer\",_over:!1,_isLeftDown:!1,_isRightDown:!1,_pointerOver:!1,_pointerDown:!1,_touchDown:!1}},{}],148:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){var r={},n=t.data.getElementsByTagName(\"info\")[0],i=t.data.getElementsByTagName(\"common\")[0];r.font=n.getAttribute(\"face\"),r.size=parseInt(n.getAttribute(\"size\"),10),r.lineHeight=parseInt(i.getAttribute(\"lineHeight\"),10),r.chars={};for(var o=t.data.getElementsByTagName(\"char\"),s=0;s<o.length;s++){var u=parseInt(o[s].getAttribute(\"id\"),10),l=new a.Rectangle(parseInt(o[s].getAttribute(\"x\"),10)+e.frame.x,parseInt(o[s].getAttribute(\"y\"),10)+e.frame.y,parseInt(o[s].getAttribute(\"width\"),10),parseInt(o[s].getAttribute(\"height\"),10));r.chars[u]={xOffset:parseInt(o[s].getAttribute(\"xoffset\"),10),yOffset:parseInt(o[s].getAttribute(\"yoffset\"),10),xAdvance:parseInt(o[s].getAttribute(\"xadvance\"),10),kerning:{},texture:new a.Texture(e.baseTexture,l)}}for(var c=t.data.getElementsByTagName(\"kerning\"),f=0;f<c.length;f++){var d=parseInt(c[f].getAttribute(\"first\"),10),p=parseInt(c[f].getAttribute(\"second\"),10),v=parseInt(c[f].getAttribute(\"amount\"),10);r.chars[p]&&(r.chars[p].kerning[d]=v)}t.bitmapFont=r,h.BitmapText.fonts[r.font]=r}r.__esModule=!0,r.parse=i,r.default=function(){return function(t,e){if(!t.data||!t.isXml)return void e();if(0===t.data.getElementsByTagName(\"page\").length||0===t.data.getElementsByTagName(\"info\").length||null===t.data.getElementsByTagName(\"info\")[0].getAttribute(\"face\"))return void e();var r=t.isDataUrl?\"\":s.dirname(t.url);t.isDataUrl&&(\".\"===r&&(r=\"\"),this.baseUrl&&r&&(\"/\"===this.baseUrl.charAt(this.baseUrl.length-1)&&(r+=\"/\"),r=r.replace(this.baseUrl,\"\"))),r&&\"/\"!==r.charAt(r.length-1)&&(r+=\"/\");var n=r+t.data.getElementsByTagName(\"page\")[0].getAttribute(\"file\");if(a.utils.TextureCache[n])i(t,a.utils.TextureCache[n]),e();else{var o={crossOrigin:t.crossOrigin,loadType:u.Resource.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata};this.add(t.name+\"_image\",n,o,function(r){i(t,r.texture),e()})}}};var o=t(\"path\"),s=n(o),a=t(\"../core\"),u=t(\"resource-loader\"),h=t(\"../extras\")},{\"../core\":61,\"../extras\":129,path:7,\"resource-loader\":33}],149:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t(\"./loader\");Object.defineProperty(r,\"Loader\",{enumerable:!0,get:function(){return n(i).default}});var o=t(\"./bitmapFontParser\");Object.defineProperty(r,\"bitmapFontParser\",{enumerable:!0,get:function(){return n(o).default}}),Object.defineProperty(r,\"parseBitmapFontData\",{enumerable:!0,get:function(){return o.parse}});var s=t(\"./spritesheetParser\");Object.defineProperty(r,\"spritesheetParser\",{enumerable:!0,get:function(){return n(s).default}});var a=t(\"./textureParser\");Object.defineProperty(r,\"textureParser\",{enumerable:!0,get:function(){return n(a).default}});var u=t(\"resource-loader\");Object.defineProperty(r,\"Resource\",{enumerable:!0,get:function(){return u.Resource}})},{\"./bitmapFontParser\":148,\"./loader\":150,\"./spritesheetParser\":151,\"./textureParser\":152,\"resource-loader\":33}],150:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(\"resource-loader\"),u=n(a),h=t(\"./textureParser\"),l=n(h),c=t(\"./spritesheetParser\"),f=n(c),d=t(\"./bitmapFontParser\"),p=n(d),v=function(t){function e(r,n){i(this,e);for(var s=o(this,t.call(this,r,n)),a=0;a<e._pixiMiddleware.length;++a)s.use(e._pixiMiddleware[a]());return s}return s(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e}(u.default);r.default=v,v._pixiMiddleware=[u.default.middleware.parsing.blob,l.default,f.default,p.default];var y=u.default.Resource;y.setExtensionXhrType(\"fnt\",y.XHR_RESPONSE_TYPE.DOCUMENT)},{\"./bitmapFontParser\":148,\"./spritesheetParser\":151,\"./textureParser\":152,\"resource-loader\":33}],151:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.default=function(){return function(t,e){var r=void 0,n=t.name+\"_image\";if(!t.data||!t.isJson||!t.data.frames||this.resources[n])return void e();var i={crossOrigin:t.crossOrigin,loadType:o.Resource.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata};r=t.isDataUrl?t.data.meta.image:a.default.dirname(t.url.replace(this.baseUrl,\"\"))+\"/\"+t.data.meta.image,this.add(n,r,i,function(r){function n(e,n){for(var i=e;i-e<n&&i<u.length;){var o=u[i],s=a[o].frame;if(s){var l=null,f=null,d=new h.Rectangle(0,0,a[o].sourceSize.w/c,a[o].sourceSize.h/c);l=a[o].rotated?new h.Rectangle(s.x/c,s.y/c,s.h/c,s.w/c):new h.Rectangle(s.x/c,s.y/c,s.w/c,s.h/c),a[o].trimmed&&(f=new h.Rectangle(a[o].spriteSourceSize.x/c,a[o].spriteSourceSize.y/c,a[o].spriteSourceSize.w/c,a[o].spriteSourceSize.h/c)),t.textures[o]=new h.Texture(r.texture.baseTexture,l,d,f,a[o].rotated?2:0),h.utils.TextureCache[o]=t.textures[o]}i++}}function i(){return f*l<u.length}function o(t){n(f*l,l),f++,setTimeout(t,0)}function s(){o(function(){i()?s():e()})}t.textures={};var a=t.data.frames,u=Object.keys(a),c=h.utils.getResolutionOfUrl(t.url),f=0;u.length<=l?(n(0,l),e()):s()})}};var o=t(\"resource-loader\"),s=t(\"path\"),a=i(s),u=t(\"../core\"),h=n(u),l=1e3},{\"../core\":61,path:7,\"resource-loader\":33}],152:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}r.__esModule=!0,r.default=function(){return function(t,e){if(t.data&&t.isImage){var r=new o.BaseTexture(t.data,null,o.utils.getResolutionOfUrl(t.url));r.imageUrl=t.url,t.texture=new o.Texture(r),o.utils.BaseTextureCache[t.name]=r,o.utils.TextureCache[t.name]=t.texture,t.name!==t.url&&(o.utils.BaseTextureCache[t.url]=r,o.utils.TextureCache[t.url]=t.texture)}e()}};var i=t(\"../core\"),o=n(i)},{\"../core\":61}],153:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(\"../core\"),h=n(u),l=new h.Point,c=new h.Polygon,f=function(t){function e(r,n,s,a,u){i(this,e);var l=o(this,t.call(this));return l._texture=null,l.uvs=s||new Float32Array([0,0,1,0,1,1,0,1]),l.vertices=n||new Float32Array([0,0,100,0,100,100,0,100]),l.indices=a||new Uint16Array([0,1,3,2]),l.dirty=0,l.indexDirty=0,l.blendMode=h.BLEND_MODES.NORMAL,l.canvasPadding=0,l.drawMode=u||e.DRAW_MODES.TRIANGLE_MESH,l.texture=r,l.shader=null,l.tintRgb=new Float32Array([1,1,1]),l._glDatas={},l}return s(e,t),e.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.mesh),t.plugins.mesh.render(this)},e.prototype._renderCanvas=function(t){t.plugins.mesh.render(this)},e.prototype._onTextureUpdate=function(){},e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,l);for(var r=this.vertices,n=c.points,i=this.indices,o=this.indices.length,s=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,a=0;a+2<o;a+=s){var u=2*i[a],h=2*i[a+1],f=2*i[a+2];if(n[0]=r[u],n[1]=r[u+1],n[2]=r[h],n[3]=r[h+1],n[4]=r[f],n[5]=r[f+1],c.contains(l.x,l.y))return!0}return!1},a(e,[{key:\"texture\",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once(\"update\",this._onTextureUpdate,this)))}},{key:\"tint\",get:function(){return h.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=h.utils.hex2rgb(t,this.tintRgb)}}]),e}(h.Container);r.default=f,f.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{\"../core\":61}],154:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=t(\"./Plane\"),h=n(u),l=10,c=function(t){function e(r,n,s,a,u){i(this,e);var h=o(this,t.call(this,r,4,4)),c=h.uvs;return c[6]=c[14]=c[22]=c[30]=1,c[25]=c[27]=c[29]=c[31]=1,h._origWidth=r.width,h._origHeight=r.height,h._uvw=1/h._origWidth,h._uvh=1/h._origHeight,h.width=r.width,h.height=r.height,c[2]=c[10]=c[18]=c[26]=h._uvw*n,c[4]=c[12]=c[20]=c[28]=1-h._uvw*a,c[9]=c[11]=c[13]=c[15]=h._uvh*s,c[17]=c[19]=c[21]=c[23]=1-h._uvh*u,h.leftWidth=\"undefined\"!=typeof n?n:l,h.rightWidth=\"undefined\"!=typeof a?a:l,h.topHeight=\"undefined\"!=typeof s?s:l,h.bottomHeight=\"undefined\"!=typeof u?u:l,h}return s(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices;t[9]=t[11]=t[13]=t[15]=this._topHeight,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices;t[2]=t[10]=t[18]=t[26]=this._leftWidth,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha;var r=this.worldTransform,n=t.resolution;t.roundPixels?e.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n|0,r.ty*n|0):e.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n);var i=this._texture.baseTexture,o=i.source,s=i.width,a=i.height;this.drawSegment(e,o,s,a,0,1,10,11),this.drawSegment(e,o,s,a,2,3,12,13),this.drawSegment(e,o,s,a,4,5,14,15),this.drawSegment(e,o,s,a,8,9,18,19),this.drawSegment(e,o,s,a,10,11,20,21),this.drawSegment(e,o,s,a,12,13,22,23),this.drawSegment(e,o,s,a,16,17,26,27),this.drawSegment(e,o,s,a,18,19,28,29),this.drawSegment(e,o,s,a,20,21,30,31)},e.prototype.drawSegment=function(t,e,r,n,i,o,s,a){var u=this.uvs,h=this.vertices,l=(u[s]-u[i])*r,c=(u[a]-u[o])*n,f=h[s]-h[i],d=h[a]-h[o];l<1&&(l=1),c<1&&(c=1),f<1&&(f=1),d<1&&(d=1),t.drawImage(e,u[i]*r,u[o]*n,l,c,h[i],h[o],f,d)},a(e,[{key:\"width\",get:function(){return this._width},set:function(t){this._width=t,this.updateVerticalVertices()}},{key:\"height\",get:function(){return this._height},set:function(t){this._height=t,this.updateHorizontalVertices()}},{key:\"leftWidth\",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t;var e=this.uvs,r=this.vertices;e[2]=e[10]=e[18]=e[26]=this._uvw*t,r[2]=r[10]=r[18]=r[26]=t,this.dirty=!0}},{key:\"rightWidth\",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t;var e=this.uvs,r=this.vertices;e[4]=e[12]=e[20]=e[28]=1-this._uvw*t,r[4]=r[12]=r[20]=r[28]=this._width-t,this.dirty=!0}},{key:\"topHeight\",get:function(){return this._topHeight},set:function(t){this._topHeight=t;var e=this.uvs,r=this.vertices;e[9]=e[11]=e[13]=e[15]=this._uvh*t,r[9]=r[11]=r[13]=r[15]=t,this.dirty=!0}},{key:\"bottomHeight\",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t;var e=this.uvs,r=this.vertices;e[17]=e[19]=e[21]=e[23]=1-this._uvh*t,r[17]=r[19]=r[21]=r[23]=this._height-t,this.dirty=!0}}]),e}(h.default);r.default=c},{\"./Plane\":155}],155:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(\"./Mesh\"),u=n(a),h=function(t){function e(r,n,s){i(this,e);var a=o(this,t.call(this,r));return a._ready=!0,a.verticesX=n||10,a.verticesY=s||10,a.drawMode=u.default.DRAW_MODES.TRIANGLES,a.refresh(),a}return s(e,t),e.prototype.refresh=function(){for(var t=this.verticesX*this.verticesY,e=[],r=[],n=[],i=[],o=this.texture,s=this.verticesX-1,a=this.verticesY-1,u=o.width/s,h=o.height/a,l=0;l<t;l++){var c=l%this.verticesX,f=l/this.verticesX|0;e.push(c*u,f*h),n.push(o._uvs.x0+(o._uvs.x1-o._uvs.x0)*(c/(this.verticesX-1)),o._uvs.y0+(o._uvs.y3-o._uvs.y0)*(f/(this.verticesY-1)))}for(var d=s*a,p=0;p<d;p++){var v=p%s,y=p/s|0,g=y*this.verticesX+v,m=y*this.verticesX+v+1,_=(y+1)*this.verticesX+v,b=(y+1)*this.verticesX+v+1;i.push(g,m,_),i.push(m,b,_)}this.vertices=new Float32Array(e),this.uvs=new Float32Array(n),this.colors=new Float32Array(r),this.indices=new Uint16Array(i),this.indexDirty=!0},e.prototype._onTextureUpdate=function(){u.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e}(u.default);r.default=h},{\"./Mesh\":153}],156:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function s(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function a(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var u=t(\"./Mesh\"),h=i(u),l=t(\"../core\"),c=n(l),f=function(t){function e(r,n){o(this,e);var i=s(this,t.call(this,r));return i.points=n,i.vertices=new Float32Array(4*n.length),i.uvs=new Float32Array(4*n.length),i.colors=new Float32Array(2*n.length),i.indices=new Uint16Array(2*n.length),i._ready=!0,i.refresh(),i}return a(e,t),e.prototype.refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){var e=this.uvs,r=this.indices,n=this.colors,i=this._texture._uvs,o=new c.Point(i.x0,i.y0),s=new c.Point(i.x2-i.x0,i.y2-i.y0);e[0]=0+o.x,e[1]=0+o.y,e[2]=0+o.x,e[3]=Number(s.y)+o.y,n[0]=1,n[1]=1,r[0]=0,r[1]=1;for(var a=t.length,u=1;u<a;u++){var h=4*u,l=u/(a-1);e[h]=l*s.x+o.x,e[h+1]=0+o.y,e[h+2]=l*s.x+o.x,e[h+3]=Number(s.y)+o.y,h=2*u,n[h]=1,n[h+1]=1,h=2*u,r[h]=h,r[h+1]=h+1}this.dirty=!0,this.indexDirty=!0}},e.prototype._onTextureUpdate=function(){t.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){for(var e=t[0],r=void 0,n=0,i=0,o=this.vertices,s=t.length,a=0;a<s;a++){var u=t[a],h=4*a;r=a<t.length-1?t[a+1]:u,i=-(r.x-e.x),n=r.y-e.y;var l=10*(1-a/(s-1));l>1&&(l=1);var c=Math.sqrt(n*n+i*i),f=this._texture.height/2;n/=c,i/=c,n*=f,i*=f,o[h]=u.x+n,o[h+1]=u.y+i,o[h+2]=u.x-n,o[h+3]=u.y-i,e=u}this.containerUpdateTransform()}},e}(h.default);r.default=f},{\"../core\":61,\"./Mesh\":153}],157:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var s=t(\"../../core\"),a=i(s),u=t(\"../Mesh\"),h=n(u),l=function(){function t(e){o(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,r=e.context,n=t.worldTransform,i=e.resolution;e.roundPixels?r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i|0,n.ty*i|0):r.setTransform(n.a*i,n.b*i,n.c*i,n.d*i,n.tx*i,n.ty*i),t.drawMode===h.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,r=0;r<e-2;r++){var n=2*r;this._renderDrawTriangle(t,n,n+2,n+4)}},t.prototype._renderTriangles=function(t){for(var e=t.indices,r=e.length,n=0;n<r;n+=3){var i=2*e[n],o=2*e[n+1],s=2*e[n+2];this._renderDrawTriangle(t,i,o,s)}},t.prototype._renderDrawTriangle=function(t,e,r,n){var i=this.renderer.context,o=t.uvs,s=t.vertices,a=t._texture;\nif(a.valid){var u=a.baseTexture,h=u.source,l=u.width,c=u.height,f=o[e]*u.width,d=o[r]*u.width,p=o[n]*u.width,v=o[e+1]*u.height,y=o[r+1]*u.height,g=o[n+1]*u.height,m=s[e],_=s[r],b=s[n],x=s[e+1],T=s[r+1],w=s[n+1];if(t.canvasPadding>0){var E=t.canvasPadding/t.worldTransform.a,S=t.canvasPadding/t.worldTransform.d,O=(m+_+b)/3,M=(x+T+w)/3,P=m-O,C=x-M,R=Math.sqrt(P*P+C*C);m=O+P/R*(R+E),x=M+C/R*(R+S),P=_-O,C=T-M,R=Math.sqrt(P*P+C*C),_=O+P/R*(R+E),T=M+C/R*(R+S),P=b-O,C=w-M,R=Math.sqrt(P*P+C*C),b=O+P/R*(R+E),w=M+C/R*(R+S)}i.save(),i.beginPath(),i.moveTo(m,x),i.lineTo(_,T),i.lineTo(b,w),i.closePath(),i.clip();var D=f*y+v*p+d*g-y*p-v*d-f*g,A=m*y+v*b+_*g-y*b-v*_-m*g,I=f*_+m*p+d*b-_*p-m*d-f*b,L=f*y*b+v*_*p+m*d*g-m*y*p-v*d*b-f*_*g,j=x*y+v*w+T*g-y*w-v*T-x*g,F=f*T+x*p+d*w-T*p-x*d-f*w,B=f*y*w+v*T*p+x*d*g-x*y*p-v*d*w-f*T*g;i.transform(A/D,j/D,I/D,F/D,L/D,B/D),i.drawImage(h,0,0,l*u.resolution,c*u.resolution,0,0,l,c),i.restore()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,r=t.vertices,n=r.length/2;e.beginPath();for(var i=1;i<n-2;++i){var o=2*i,s=r[o],a=r[o+1],u=r[o+2],h=r[o+3],l=r[o+4],c=r[o+5];e.moveTo(s,a),e.lineTo(u,h),e.lineTo(l,c)}e.fillStyle=\"#FF0000\",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();r.default=l,a.CanvasRenderer.registerPlugin(\"mesh\",l)},{\"../../core\":61,\"../Mesh\":153}],158:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t(\"./Mesh\");Object.defineProperty(r,\"Mesh\",{enumerable:!0,get:function(){return n(i).default}});var o=t(\"./webgl/MeshRenderer\");Object.defineProperty(r,\"MeshRenderer\",{enumerable:!0,get:function(){return n(o).default}});var s=t(\"./canvas/CanvasMeshRenderer\");Object.defineProperty(r,\"CanvasMeshRenderer\",{enumerable:!0,get:function(){return n(s).default}});var a=t(\"./Plane\");Object.defineProperty(r,\"Plane\",{enumerable:!0,get:function(){return n(a).default}});var u=t(\"./NineSlicePlane\");Object.defineProperty(r,\"NineSlicePlane\",{enumerable:!0,get:function(){return n(u).default}});var h=t(\"./Rope\");Object.defineProperty(r,\"Rope\",{enumerable:!0,get:function(){return n(h).default}})},{\"./Mesh\":153,\"./NineSlicePlane\":154,\"./Plane\":155,\"./Rope\":156,\"./canvas/CanvasMeshRenderer\":157,\"./webgl/MeshRenderer\":159}],159:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function s(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function a(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0,r.MeshRenderer=void 0;var u=t(\"../../core\"),h=i(u),l=t(\"pixi-gl-core\"),c=n(l),f=t(\"../Mesh\"),d=n(f),p=r.MeshRenderer=function(t){function e(r){o(this,e);var n=s(this,t.call(this,r));return n.shader=null,n}return a(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new h.Shader(t,\"#define GLSLIFY 1\\nattribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat3 translationMatrix;\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\n\\nvoid main(void)\\n{\\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\\n\\n    vTextureCoord = aTextureCoord;\\n}\\n\",\"#define GLSLIFY 1\\nvarying vec2 vTextureCoord;\\nuniform float alpha;\\nuniform vec3 tint;\\n\\nuniform sampler2D uSampler;\\n\\nvoid main(void)\\n{\\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * vec4(tint * alpha, alpha);\\n}\\n\")},e.prototype.render=function(t){var e=this.renderer,r=e.gl,n=t._texture;if(n.valid){var i=t._glDatas[e.CONTEXT_UID];i||(i={shader:this.shader,vertexBuffer:c.default.GLBuffer.createVertexBuffer(r,t.vertices,r.STREAM_DRAW),uvBuffer:c.default.GLBuffer.createVertexBuffer(r,t.uvs,r.STREAM_DRAW),indexBuffer:c.default.GLBuffer.createIndexBuffer(r,t.indices,r.STATIC_DRAW),vao:new c.default.VertexArrayObject(r),dirty:t.dirty,indexDirty:t.indexDirty},i.vao=new c.default.VertexArrayObject(r).addIndex(i.indexBuffer).addAttribute(i.vertexBuffer,i.shader.attributes.aVertexPosition,r.FLOAT,!1,8,0).addAttribute(i.uvBuffer,i.shader.attributes.aTextureCoord,r.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=i),t.dirty!==i.dirty&&(i.dirty=t.dirty,i.uvBuffer.upload()),t.indexDirty!==i.indexDirty&&(i.indexDirty=t.indexDirty,i.indexBuffer.upload()),i.vertexBuffer.upload(),e.bindShader(i.shader),e.bindTexture(n,0),e.state.setBlendMode(t.blendMode),i.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),i.shader.uniforms.alpha=t.worldAlpha,i.shader.uniforms.tint=t.tintRgb;var o=t.drawMode===d.default.DRAW_MODES.TRIANGLE_MESH?r.TRIANGLE_STRIP:r.TRIANGLES;i.vao.bind().draw(o,t.indices.length).unbind()}},e}(h.ObjectRenderer);h.WebGLRenderer.registerPlugin(\"mesh\",p)},{\"../../core\":61,\"../Mesh\":153,\"pixi-gl-core\":14}],160:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(\"../core\"),u=n(a),h=function(t){function e(){var r=arguments.length<=0||void 0===arguments[0]?1500:arguments[0],n=arguments[1],s=arguments.length<=2||void 0===arguments[2]?16384:arguments[2];i(this,e);var a=o(this,t.call(this)),h=16384;return s>h&&(s=h),s>r&&(s=r),a._properties=[!1,!0,!1,!1,!1],a._maxSize=r,a._batchSize=s,a._glBuffers={},a._bufferToUpdate=0,a.interactiveChildren=!1,a.blendMode=u.BLEND_MODES.NORMAL,a.roundPixels=!0,a.baseTexture=null,a.setProperties(n),a}return s(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]=\"scale\"in t?!!t.scale:this._properties[0],this._properties[1]=\"position\"in t?!!t.position:this._properties[1],this._properties[2]=\"rotation\"in t?!!t.rotation:this._properties[2],this._properties[3]=\"uvs\"in t?!!t.uvs:this._properties[3],this._properties[4]=\"alpha\"in t?!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once(\"update\",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){var e=Math.floor(t/this._batchSize);e<this._bufferToUpdate&&(this._bufferToUpdate=e)},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,r=this.worldTransform,n=!0,i=0,o=0,s=0,a=0,u=t.blendModes[this.blendMode];u!==e.globalCompositeOperation&&(e.globalCompositeOperation=u),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var h=0;h<this.children.length;++h){var l=this.children[h];if(l.visible){var c=l.texture.frame;if(e.globalAlpha=this.worldAlpha*l.alpha,l.rotation%(2*Math.PI)===0)n&&(e.setTransform(r.a,r.b,r.c,r.d,r.tx*t.resolution,r.ty*t.resolution),n=!1),i=l.anchor.x*(-c.width*l.scale.x)+l.position.x+.5,o=l.anchor.y*(-c.height*l.scale.y)+l.position.y+.5,s=c.width*l.scale.x,a=c.height*l.scale.y;else{n||(n=!0),l.displayObjectUpdateTransform();var f=l.worldTransform;t.roundPixels?e.setTransform(f.a,f.b,f.c,f.d,f.tx*t.resolution|0,f.ty*t.resolution|0):e.setTransform(f.a,f.b,f.c,f.d,f.tx*t.resolution,f.ty*t.resolution),i=l.anchor.x*-c.width+.5,o=l.anchor.y*-c.height+.5,s=c.width,a=c.height}var d=l.texture.baseTexture.resolution;e.drawImage(l.texture.baseTexture.source,c.x*d,c.y*d,c.width*d,c.height*d,i*d,o*d,s*d,a*d)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._properties=null,this._buffers=null},e}(u.Container);r.default=h},{\"../core\":61}],161:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t(\"./ParticleContainer\");Object.defineProperty(r,\"ParticleContainer\",{enumerable:!0,get:function(){return n(i).default}});var o=t(\"./webgl/ParticleRenderer\");Object.defineProperty(r,\"ParticleRenderer\",{enumerable:!0,get:function(){return n(o).default}})},{\"./ParticleContainer\":160,\"./webgl/ParticleRenderer\":163}],162:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}r.__esModule=!0;var o=t(\"pixi-gl-core\"),s=n(o),a=t(\"../../core/utils/createIndicesForQuads\"),u=n(a),h=function(){function t(e,r,n,o){i(this,t),this.gl=e,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=o,this.dynamicProperties=[],this.staticProperties=[];for(var s=0;s<r.length;++s){var a=r[s];a={attribute:a.attribute,size:a.size,uploadFunction:a.uploadFunction,offset:a.offset},n[s]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,u.default)(this.size),this.indexBuffer=s.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){var n=this.dynamicProperties[r];n.offset=e,e+=n.size,this.dynamicStride+=n.size}this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=s.default.GLBuffer.createVertexBuffer(t,this.dynamicData,t.STREAM_DRAW);var i=0;this.staticStride=0;for(var o=0;o<this.staticProperties.length;++o){var a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=s.default.GLBuffer.createVertexBuffer(t,this.staticData,t.STATIC_DRAW),this.vao=new s.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var h=0;h<this.dynamicProperties.length;++h){var l=this.dynamicProperties[h];this.vao.addAttribute(this.dynamicBuffer,l.attribute,t.FLOAT,!1,4*this.dynamicStride,4*l.offset)}for(var c=0;c<this.staticProperties.length;++c){var f=this.staticProperties[c];this.vao.addAttribute(this.staticBuffer,f.attribute,t.FLOAT,!1,4*this.staticStride,4*f.offset)}},t.prototype.uploadDynamic=function(t,e,r){for(var n=0;n<this.dynamicProperties.length;n++){var i=this.dynamicProperties[n];i.uploadFunction(t,e,r,this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,e,r){for(var n=0;n<this.staticProperties.length;n++){var i=this.staticProperties[n];i.uploadFunction(t,e,r,this.staticData,this.staticStride,i.offset)}this.staticBuffer.upload()},t.prototype.bind=function(){this.vao.bind()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},t}();r.default=h},{\"../../core/utils/createIndicesForQuads\":113,\"pixi-gl-core\":14}],163:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function s(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function a(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var u=t(\"../../core\"),h=i(u),l=t(\"./ParticleShader\"),c=n(l),f=t(\"./ParticleBuffer\"),d=n(f),p=function(t){function e(r){o(this,e);var n=s(this,t.call(this,r));return n.shader=null,n.indexBuffer=null,n.properties=null,n.tempMatrix=new h.Matrix,n.CONTEXT_UID=0,n}return a(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new c.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},e.prototype.start=function(){this.renderer.bindShader(this.shader)},e.prototype.render=function(t){var e=t.children,r=t._maxSize,n=t._batchSize,i=e.length;if(0!==i){i>r&&(i=r);var o=t._glBuffers[this.renderer.CONTEXT_UID];o||(o=t._glBuffers[this.renderer.CONTEXT_UID]=this.generateBuffers(t)),this.renderer.setBlendMode(t.blendMode);var s=this.renderer.gl,a=t.worldTransform.copy(this.tempMatrix);a.prepend(this.renderer._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=a.toArray(!0),this.shader.uniforms.uAlpha=t.worldAlpha;var u=e[0]._texture.baseTexture;this.renderer.bindTexture(u);for(var h=0,l=0;h<i;h+=n,l+=1){var c=i-h;c>n&&(c=n);var f=o[l];f.uploadDynamic(e,h,c),t._bufferToUpdate===l&&(f.uploadStatic(e,h,c),t._bufferToUpdate=l+1),f.vao.bind().draw(s.TRIANGLES,6*c).unbind()}}},e.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,r=[],n=t._maxSize,i=t._batchSize,o=t._properties,s=0;s<n;s+=i)r.push(new d.default(e,this.properties,o,i));return r},e.prototype.uploadVertices=function(t,e,r,n,i,o){for(var s=0,a=0,u=0,h=0,l=0;l<r;++l){var c=t[e+l],f=c._texture,d=c.scale.x,p=c.scale.y,v=f.trim,y=f.orig;v?(a=v.x-c.anchor.x*y.width,s=a+v.width,h=v.y-c.anchor.y*y.height,u=h+v.height):(s=y.width*(1-c.anchor.x),a=y.width*-c.anchor.x,u=y.height*(1-c.anchor.y),h=y.height*-c.anchor.y),n[o]=a*d,n[o+1]=h*p,n[o+i]=s*d,n[o+i+1]=h*p,n[o+2*i]=s*d,n[o+2*i+1]=u*p,n[o+3*i]=a*d,n[o+3*i+1]=u*p,o+=4*i}},e.prototype.uploadPosition=function(t,e,r,n,i,o){for(var s=0;s<r;s++){var a=t[e+s].position;n[o]=a.x,n[o+1]=a.y,n[o+i]=a.x,n[o+i+1]=a.y,n[o+2*i]=a.x,n[o+2*i+1]=a.y,n[o+3*i]=a.x,n[o+3*i+1]=a.y,o+=4*i}},e.prototype.uploadRotation=function(t,e,r,n,i,o){for(var s=0;s<r;s++){var a=t[e+s].rotation;n[o]=a,n[o+i]=a,n[o+2*i]=a,n[o+3*i]=a,o+=4*i}},e.prototype.uploadUvs=function(t,e,r,n,i,o){for(var s=0;s<r;++s){var a=t[e+s]._texture._uvs;a?(n[o]=a.x0,n[o+1]=a.y0,n[o+i]=a.x1,n[o+i+1]=a.y1,n[o+2*i]=a.x2,n[o+2*i+1]=a.y2,n[o+3*i]=a.x3,n[o+3*i+1]=a.y3,o+=4*i):(n[o]=0,n[o+1]=0,n[o+i]=0,n[o+i+1]=0,n[o+2*i]=0,n[o+2*i+1]=0,n[o+3*i]=0,n[o+3*i+1]=0,o+=4*i)}},e.prototype.uploadAlpha=function(t,e,r,n,i,o){for(var s=0;s<r;s++){var a=t[e+s].alpha;n[o]=a,n[o+i]=a,n[o+2*i]=a,n[o+3*i]=a,o+=4*i}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),t.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},e}(h.ObjectRenderer);r.default=p,h.WebGLRenderer.registerPlugin(\"particle\",p)},{\"../../core\":61,\"./ParticleBuffer\":162,\"./ParticleShader\":164}],164:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t(\"../../core/Shader\"),u=n(a),h=function(t){function e(r){return i(this,e),o(this,t.call(this,r,[\"attribute vec2 aVertexPosition;\",\"attribute vec2 aTextureCoord;\",\"attribute float aColor;\",\"attribute vec2 aPositionCoord;\",\"attribute vec2 aScale;\",\"attribute float aRotation;\",\"uniform mat3 projectionMatrix;\",\"varying vec2 vTextureCoord;\",\"varying float vColor;\",\"void main(void){\",\"   vec2 v = aVertexPosition;\",\"   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\",\"   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\",\"   v = v + aPositionCoord;\",\"   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\",\"   vTextureCoord = aTextureCoord;\",\"   vColor = aColor;\",\"}\"].join(\"\\n\"),[\"varying vec2 vTextureCoord;\",\"varying float vColor;\",\"uniform sampler2D uSampler;\",\"uniform float uAlpha;\",\"void main(void){\",\"  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;\",\"  if (color.a == 0.0) discard;\",\"  gl_FragColor = color;\",\"}\"].join(\"\\n\")))}return s(e,t),e}(u.default);r.default=h},{\"../../core/Shader\":41}],165:[function(t,e,r){\"use strict\";Math.sign||(Math.sign=function(t){return t=Number(t),0===t||isNaN(t)?t:t>0?1:-1})},{}],166:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}var i=t(\"object-assign\"),o=n(i);Object.assign||(Object.assign=o.default)},{\"object-assign\":5}],167:[function(t,e,r){\"use strict\";t(\"./Object.assign\"),t(\"./requestAnimationFrame\"),t(\"./Math.sign\"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{\"./Math.sign\":165,\"./Object.assign\":166,\"./requestAnimationFrame\":168}],168:[function(t,e,r){(function(t){\"use strict\";var e=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),t.performance&&t.performance.now||!function(){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}();for(var r=Date.now(),n=[\"ms\",\"moz\",\"webkit\",\"o\"],i=0;i<n.length&&!t.requestAnimationFrame;++i){var o=n[i];t.requestAnimationFrame=t[o+\"RequestAnimationFrame\"],t.cancelAnimationFrame=t[o+\"CancelAnimationFrame\"]||t[o+\"CancelRequestAnimationFrame\"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if(\"function\"!=typeof t)throw new TypeError(t+\"is not a function\");var n=Date.now(),i=e+r-n;return i<0&&(i=0),r=n,setTimeout(function(){r=Date.now(),t(performance.now())},i)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{}],169:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){if(e instanceof u.BaseTexture){var r=e.source,n=0===r.width?t.canvas.width:Math.min(t.canvas.width,r.width),i=0===r.height?t.canvas.height:Math.min(t.canvas.height,r.height);return t.ctx.drawImage(r,0,0,n,i,0,0,t.canvas.width,t.canvas.height),!0}return!1}function s(t,e){if(t instanceof u.BaseTexture)return e.indexOf(t)===-1&&e.push(t),!0;if(t._texture&&t._texture instanceof u.Texture){var r=t._texture.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}r.__esModule=!0;var a=t(\"../../core\"),u=n(a),h=u.ticker.shared,l=16,c=4,f=function(){function t(e){i(this,t),this.renderer=e,this.canvas=document.createElement(\"canvas\"),this.canvas.width=l,this.canvas.height=l,this.ctx=this.canvas.getContext(\"2d\"),this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.register(s,o)}return t.prototype.upload=function(e,r){\"function\"==typeof e&&(r=e,e=null),e&&this.add(e),this.queue.length?(this.numLeft=t.UPLOADS_PER_FRAME,r&&this.completes.push(r),this.ticking||(this.ticking=!0,h.add(this.tick,this))):r&&r()},t.prototype.tick=function(){for(;this.queue.length&&this.numLeft>0;){for(var e=this.queue[0],r=!1,n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this,e)){this.numLeft--,this.queue.shift(),r=!0;break}r||this.queue.shift()}if(this.queue.length)this.numLeft=t.UPLOADS_PER_FRAME;else{this.ticking=!1,h.remove(this.tick,this);var o=this.completes.slice(0);this.completes.length=0;for(var s=0,a=o.length;s<a;s++)o[s]()}},t.prototype.register=function(t,e){return t&&this.addHooks.push(t),e&&this.uploadHooks.push(e),this},t.prototype.add=function(t){for(var e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof u.Container)for(var n=t.children.length-1;n>=0;n--)this.add(t.children[n]);return this},t.prototype.destroy=function(){this.ticking&&h.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.ctx=null,this.canvas=null},t}();r.default=f,f.UPLOADS_PER_FRAME=c,u.CanvasRenderer.registerPlugin(\"prepare\",f)},{\"../../core\":61}],170:[function(t,e,r){\"use strict\";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t(\"./webgl/WebGLPrepare\");Object.defineProperty(r,\"webgl\",{enumerable:!0,get:function(){return n(i).default}});var o=t(\"./canvas/CanvasPrepare\");Object.defineProperty(r,\"canvas\",{enumerable:!0,get:function(){return n(o).default}})},{\"./canvas/CanvasPrepare\":169,\"./webgl/WebGLPrepare\":171}],171:[function(t,e,r){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function o(t,e){return e instanceof l.BaseTexture&&(t.textureManager.updateTexture(e),!0)}function s(t,e){return e instanceof l.Graphics&&(t.plugins.graphics.updateGraphics(e),!0)}function a(t,e){if(t instanceof l.BaseTexture)return e.indexOf(t)===-1&&e.push(t),!0;if(t._texture&&t._texture instanceof l.Texture){var r=t._texture.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function u(t,e){return t instanceof l.Graphics&&(e.push(t),!0)}r.__esModule=!0;var h=t(\"../../core\"),l=n(h),c=l.ticker.shared,f=4,d=function(){function t(e){i(this,t),this.renderer=e,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.register(a,o).register(u,s)}return t.prototype.upload=function(e,r){\"function\"==typeof e&&(r=e,e=null),e&&this.add(e),this.queue.length?(this.numLeft=t.UPLOADS_PER_FRAME,r&&this.completes.push(r),this.ticking||(this.ticking=!0,c.add(this.tick,this))):r&&r()},t.prototype.tick=function(){for(;this.queue.length&&this.numLeft>0;){for(var e=this.queue[0],r=!1,n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.renderer,e)){this.numLeft--,this.queue.shift(),r=!0;break}r||this.queue.shift()}if(this.queue.length)this.numLeft=t.UPLOADS_PER_FRAME;else{this.ticking=!1,c.remove(this.tick,this);var o=this.completes.slice(0);this.completes.length=0;for(var s=0,a=o.length;s<a;s++)o[s]()}},t.prototype.register=function(t,e){return t&&this.addHooks.push(t),e&&this.uploadHooks.push(e),this},t.prototype.add=function(t){for(var e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof l.Container)for(var n=t.children.length-1;n>=0;n--)this.add(t.children[n]);return this},t.prototype.destroy=function(){this.ticking&&c.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null},t}();r.default=d,d.UPLOADS_PER_FRAME=f,l.WebGLRenderer.registerPlugin(\"prepare\",d)},{\"../../core\":61}],172:[function(t,e,r){(function(e){\"use strict\";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}r.__esModule=!0,r.loader=r.prepare=r.particles=r.mesh=r.loaders=r.interaction=r.filters=r.extras=r.extract=r.accessibility=void 0;var i=t(\"./deprecation\");Object.keys(i).forEach(function(t){\"default\"!==t&&\"__esModule\"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return i[t]}})});var o=t(\"./core\");Object.keys(o).forEach(function(t){\"default\"!==t&&\"__esModule\"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return o[t]}})}),t(\"./polyfill\");var s=t(\"./accessibility\"),a=n(s),u=t(\"./extract\"),h=n(u),l=t(\"./extras\"),c=n(l),f=t(\"./filters\"),d=n(f),p=t(\"./interaction\"),v=n(p),y=t(\"./loaders\"),g=n(y),m=t(\"./mesh\"),_=n(m),b=t(\"./particles\"),x=n(b),T=t(\"./prepare\"),w=n(T);r.accessibility=a,r.extract=h,r.extras=c,r.filters=d,r.interaction=v,r.loaders=g,r.mesh=_,r.particles=x,r.prepare=w;var E=new g.Loader;r.loader=E,e.PIXI=r}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{\"./accessibility\":40,\"./core\":61,\"./deprecation\":118,\"./extract\":120,\"./extras\":129,\"./filters\":140,\"./interaction\":146,\"./loaders\":149,\"./mesh\":158,\"./particles\":161,\"./polyfill\":167,\"./prepare\":170}]},{},[172])(172)});\n//# sourceMappingURL=pixi.min.js.map\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/pixi.js/bin/pixi.min.js\n ** module id = 9\n ** module chunks = 0\n **/","/**\r\n * @static\r\n * @method arrayFind\r\n */\r\nfunction arrayFind() {\r\n  if (!Array.prototype.find) {\r\n    Array.prototype.find = function (predicate) {\r\n      if (this === null) {\r\n        throw new TypeError('Array.prototype.find called on null or undefined');\r\n      }\r\n      if (typeof predicate !== 'function') {\r\n        throw new TypeError('predicate must be a function');\r\n      }\r\n      const list = Object(this);\r\n      const length = list.length >>> 0;\r\n      const thisArg = arguments[1];\r\n      let value;\r\n\r\n      for (let i = 0; i < length; i++) {\r\n        value = list[i];\r\n        if (predicate.call(thisArg, value, i, list)) {\r\n          return value;\r\n        }\r\n      }\r\n      return undefined;\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Object.assign IE11 polyfill. Credits to Mozillas folk:\r\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\r\n *\r\n * @method objectAssign\r\n * @static\r\n */\r\nfunction objectAssign() {\r\n  if (typeof Object.assign != 'function') { // eslint-disable-line eqeqeq\r\n    (function () {\r\n      Object.assign = function (target) {\r\n        if (target === undefined || target === null) {\r\n          throw new TypeError('Cannot convert undefined or null to object');\r\n        }\r\n\r\n        const output = Object(target);\r\n        for (let index = 1; index < arguments.length; index++) {\r\n          const source = arguments[index];\r\n          if (source !== undefined && source !== null) {\r\n            for (const nextKey in source) {\r\n              if (source.hasOwnProperty(nextKey)) {\r\n                output[nextKey] = source[nextKey];\r\n              }\r\n            }\r\n          }\r\n        }\r\n        return output;\r\n      };\r\n    })();\r\n  }\r\n}\r\n// purely for internet explorer. Though I think this issue is only in EI11,not in edge?\r\nfunction es6String() {\r\n  /*! https://mths.be/repeat v0.2.0 by @mathias */\r\n  if (!String.prototype.repeat) {\r\n    (function () {\r\n      'use strict'; // needed to support `apply`/`call` with `undefined`/`null`\r\n\r\n      let result;\r\n\r\n      const defineProperty = (function () {\r\n        // IE 8 only supports `Object.defineProperty` on DOM elements\r\n        try {\r\n          const object = {};\r\n          const defineProperty = Object.defineProperty;\r\n          result = defineProperty(object, object, object) && defineProperty;\r\n        } catch (error) {\r\n          return result;\r\n        }\r\n        return result;\r\n      }());\r\n      const repeat = function (count) {\r\n        if (this == null) { // eslint-disable-line eqeqeq\r\n          throw TypeError();\r\n        }\r\n        let string = String(this);\r\n        // `ToInteger`\r\n        let n = count ? Number(count) : 0;\r\n        if (n != n) { // eslint-disable-line eqeqeq\r\n          n = 0;\r\n        }\r\n        // Account for out-of-bounds indices\r\n        if (n < 0 || n == Infinity) { // eslint-disable-line eqeqeq\r\n          throw RangeError();\r\n        }\r\n        let result = '';\r\n        while (n) {\r\n          if (n % 2 == 1) { // eslint-disable-line eqeqeq\r\n            result += string;\r\n          }\r\n          if (n > 1) {\r\n            string += string;\r\n          }\r\n          n >>= 1;\r\n        }\r\n        return result;\r\n      };\r\n      if (defineProperty) {\r\n        defineProperty(String.prototype, 'repeat', {\r\n          value: repeat,\r\n          configurable: true,\r\n          writable: true\r\n        });\r\n      } else {\r\n        String.prototype.repeat = repeat;\r\n      }\r\n    }());\r\n  }\r\n}\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf\r\nfunction setPrototypeOf() {\r\n  Object.setPrototypeOf = Object.setPrototypeOf || function(obj, proto) {\r\n    obj.__proto__ = proto;\r\n    return obj; \r\n  }\r\n}\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default {\r\n  arrayFind,\r\n  objectAssign,\r\n  es6String,\r\n  setPrototypeOf\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/utils/polyfills.js\n **/","/**\r\n * @class utils.resize\r\n * @return {Object}      toggleFullScreen, setToFullSize, getWindowSize\r\n */\r\n\r\n/**\r\n * @method toggleFullScreen\r\n */\r\nfunction toggleFullScreen() {\r\n  const elem = document.body; // Make the body go full screen.\r\n  const isInFullScreen = (document.fullScreenElement && document.fullScreenElement !== null) ||\r\n     (\r\n     document.mozFullScreen || document.webkitIsFullScreen);\r\n\r\n  isInFullScreen ? cancelFullScreen(document) : requestFullScreen(elem);\r\n\r\n  return false;\r\n\r\n  /*-------------------------\r\n  --------- PRIVATE ---------\r\n  -------------------------*/\r\n  /* global ActiveXObject */\r\n  function cancelFullScreen(el) {\r\n    const requestMethod = el.cancelFullScreen ||\r\n       el.webkitCancelFullScreen ||\r\n       el.mozCancelFullScreen ||\r\n       el.exitFullscreen;\r\n    if (requestMethod) { // cancel full screen.\r\n      requestMethod.call(el);\r\n    } else if (typeof window.ActiveXObject !== 'undefined') { // Older IE.\r\n      const wscript = new ActiveXObject('WScript.Shell');\r\n      wscript !== null && wscript.SendKeys('{F11}');\r\n    }\r\n  }\r\n  function requestFullScreen(el) {\r\n    // Supports most browsers and their versions.\r\n    const requestMethod = el.requestFullScreen ||\r\n       el.webkitRequestFullScreen ||\r\n       el.mozRequestFullScreen ||\r\n       el.msRequestFullScreen;\r\n\r\n    if (requestMethod) { // Native full screen.\r\n      requestMethod.call(el);\r\n    } else if (typeof window.ActiveXObject !== 'undefined') { // Older IE.\r\n      const wscript = new ActiveXObject('WScript.Shell');\r\n      wscript !== null && wscript.SendKeys('{F11}');\r\n    }\r\n    return false;\r\n  }\r\n}\r\n/**\r\n * Sets canvas size to maximum width and height on the browser, not using fullscreen\r\n *\r\n * @method setToFullSize\r\n * @param {HTMLElement} context        DOMElement Canvas context\r\n */\r\nfunction setToFullSize(context) {\r\n  return function fullSize() {\r\n    const size = getWindowSize();\r\n\r\n    context.canvas.width = size.x;\r\n    context.canvas.height = size.y;\r\n  };\r\n}\r\n/**\r\n * Get browser windows size\r\n *\r\n * @method getWindowSize\r\n * @param {HTMLElement} context        DOMElement Canvas context\r\n */\r\nfunction getWindowSize() {\r\n  return {\r\n    x: window.innerWidth,\r\n    y: window.innerHeight\r\n  };\r\n}\r\n/**\r\n * Resizes the PIXI renderer to the current most wide and high element status. Basically\r\n * canvas size === window size.\r\n *\r\n * @static\r\n * @method resizeRenderer\r\n * @param {PIXI.WebGLRenderer} renderer   The renderer for the map\r\n * @param {Function} drawOnNextTick       Function that handles re-rendering canvas\r\n */\r\nfunction resizePIXIRenderer(renderer, drawOnNextTick) {\r\n  const windowSize = getWindowSize();\r\n\r\n  renderer.autoResize = true; // eslint-disable-line no-param-reassign\r\n  renderer.resize(windowSize.x, windowSize.y);\r\n  drawOnNextTick();\r\n}\r\n\r\n/**\r\n * Setup correct css for setting up fullsize (window size) canvas\r\n *\r\n * @param {Element} canvasElement\r\n */\r\nfunction fullsizeCanvasCSS(canvasElement) {\r\n  canvasElement.style.position = 'absolute';\r\n  canvasElement.style.display = 'block';\r\n  canvasElement.style.left = '0px';\r\n  canvasElement.style.top = '0px';\r\n}\r\n\r\nexport default {\r\n  toggleFullScreen,\r\n  setToFullSize,\r\n  getWindowSize,\r\n  resizePIXIRenderer,\r\n  fullsizeCanvasCSS\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/utils/resize.js\n **/","import * as PIXI from 'pixi.js';\r\n\r\nfunction createSquare() {\r\n  const graphics = new PIXI.Graphics();\r\n\r\n  graphics.lineStyle(2, 0x0000FF, 1);\r\n  graphics.drawRect(50, 250, 100, 100);\r\n\r\n  return graphics;\r\n}\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default {\r\n  createSquare\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/utils/shapes.js\n **/","import * as PIXI from 'pixi.js';\r\n// const { PIXI } = window.flatworld_libraries;\r\n\r\nconst constants = {\r\n  ZERO_COORDINATES: new PIXI.Point(0,0),\r\n  VERSION: '0.6.2'\r\n};\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default constants;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/constants.js\n **/","import { mapEvents } from './index';\r\n\r\n/*-----------------------\r\n------- VARIABLES -------\r\n-----------------------*/\r\nconst stateOfEvents = {};\r\nconst activeEventListeners = {};\r\nconst detectors = {};\r\n\r\n/*-----------------------\r\n-------- PUBLIC ---------\r\n-----------------------*/\r\n/**\r\n * This keeps all the event listeners and detectors in one class. You add detectors / event listener types with addDetector and you add\r\n * event listeners with on.\r\n *\r\n * @namespace flatworld\r\n * @class eventListeners\r\n */\r\nconst eventListeners = (function() {\r\n  /*---------------------------\r\n  ------------ API ------------\r\n  ---------------------------*/\r\n  return {\r\n    on,\r\n    off,\r\n    isOn,\r\n    setActivityState,\r\n    getActivityState,\r\n    setDetector,\r\n    clearDetector\r\n  };\r\n\r\n  /*---------------------------\r\n  ----------- PUBLIC ----------\r\n  ---------------------------*/\r\n  /**\r\n   * Activates the eventListener.\r\n   *\r\n   * @method on\r\n   * @throws {Error}          General error, if detector for this event type has not been set.\r\n   * @param  {String}  type   REQUIRED. The type of event. This type has been created with setDetector.\r\n   * @param  {Boolean} cb     REQUIRED. Callback to do it's eventlistener magic.\r\n   */\r\n  function on(type = '', cb = false) {\r\n    if (!detectors[type] || !detectors[type].on) {\r\n      throw new Error('eventlisteners.on needs to have detector set with this event type!');\r\n    }\r\n\r\n    detectors[type].on(_createEventListenerWrapper('Map' + type, cb));\r\n    activeEventListeners[type] = activeEventListeners[type] || new Set();\r\n    activeEventListeners[type].add(cb);\r\n  }\r\n  /**\r\n   * Deactivates the eventListener. Callback is optional. If is not provided will remove all this types eventListeners\r\n   *\r\n   * @method off\r\n   * @param  {String}  type   REQUIRED. The type of event. This type has been created with setDetector.\r\n   * @param  {Boolean} cb     Callback to do it's eventlistener magic.\r\n   */\r\n  function off(type = '', cb = false) {\r\n    detectors[type].off(cb);\r\n    cb ? activeEventListeners[type].delete(cb) : delete activeEventListeners[type];\r\n  }\r\n  /**\r\n   * Activates the eventListener. Callback is optional. If is not provided will check if the eventlistener type has any listeners active.\r\n   *\r\n   * @method isOn\r\n   * @param  {String}  type   REQUIRED. The type of event. This type has been created with setDetector.\r\n   * @param  {Boolean} cb     Callback to do it's eventlistener magic.\r\n   */\r\n  function isOn(type = '', cb = false) {\r\n    return cb ? activeEventListeners[type].has(cb) : !!activeEventListeners[type].size;\r\n  }\r\n  /**\r\n   * Sets the state of the event. State is very important e.g. for fluent dragging and selecting. When we start to drag, we avoid\r\n   * selecting units and vice versa, when we keep an event state tracking through this.\r\n   *\r\n   * @method setActivityState\r\n   * @param {String} type        EventType\r\n   * @param {Boolean} newState   The new state value\r\n   */\r\n  function setActivityState(type, newState) {\r\n    stateOfEvents[type] = newState;\r\n  }\r\n  /**\r\n   * get activity state of the event\r\n   *\r\n   * @method getActivityState\r\n   * @param  {String} type   EventType\r\n   * @return {Boolean}\r\n   */\r\n  function getActivityState(type = '') {\r\n    return stateOfEvents[type];\r\n  }\r\n  /**\r\n   * Set event detector. If there is already detector of this type, we overwrite it.\r\n   *\r\n   * @method setDetector\r\n   * @param {String}   type    Event type\r\n   * @param {Function} cbOn    Callback which sets activates the detector\r\n   * @param {Function} cbOff   Callback which sets deactivates the detector\r\n   */\r\n  function setDetector(type = '', cbOn = () => {}, cbOff = () => {}) {\r\n    detectors[type] = {};\r\n    detectors[type] = {\r\n      on: cbOn,\r\n      off: cbOff\r\n    };\r\n  }\r\n  /**\r\n   * Clear event detector. We also remove all possible eventlisteners set on this event type.\r\n   *\r\n   * @method clearDetector\r\n   * @param {String}   type  Event type\r\n   */\r\n  function clearDetector(type = '') {\r\n    /* remove all event listeners before we empty the data */\r\n    activeEventListeners[type].forEach(cb => {\r\n      detectors[type].cbOff(cb);\r\n    });\r\n\r\n    /* remove all data / references to event listeners and detector */\r\n    delete activeEventListeners[type];\r\n    delete detectors[type];\r\n  }\r\n\r\n  /*-----------------------------\r\n  ----------- PRIVATE -----------\r\n  ------------------------------*/\r\n  /**\r\n   * This creates a wrapper for callback. The idea is to send map events from this wrapper for all events.\r\n   *\r\n   * @private\r\n   * @static\r\n   * @method _createEventListenerWrapper\r\n   * @param  {String}   type   Event type\r\n   * @param  {Function} cb     Event callback\r\n   */\r\n  function _createEventListenerWrapper(type, cb) {\r\n    /* NOTE! There can be more than one arguments in an event. E.g. Hamster.js */\r\n    return (...args) => {\r\n      /**\r\n       * @event Event gets fired when the specific eventListener trigger. The name consists of \"Map\" + the given event type, like such:\r\n       * \"MapDrag\"\r\n       */\r\n      mapEvents.publish(type);\r\n      cb(...args);\r\n    };\r\n  }\r\n})();\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default eventListeners;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/eventlisteners.js\n **/","import Q from 'q';\r\nimport * as PIXI from 'pixi.js';\r\nimport { mapLayers, ObjectManager, mapEvents, log, utils, constants, UI } from './index';\r\n\r\n/*---------------------\r\n------ VARIABLES ------\r\n----------------------*/\r\nconst LAYER_TYPE_STATIC = 0;\r\nconst LAYER_TYPE_MOVABLE = 1;\r\nconst LAYER_TYPE_MINIMAP = 2;\r\nconst _renderers = {};\r\nconst protectedProperties = {};\r\nlet _drawMapOnNextTick = false;\r\nlet isMapReadyPromises = [];\r\nlet _privateRenderers, _zoomLayer, _movableLayer, _minimapLayer, ParentLayerConstructor;\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nclass Flatworld {\r\n  /**\r\n   * Main class for the engine\r\n   *\r\n   * Initializes the whole structure and plugins and is used as primary API for all operations. This class is e.g. passed to every\r\n   * plugin that get initialized with their init-method.\r\n   *\r\n   * You use the class by instantiating it (new) and then finishing initialization with init-method. Please see examples below.\r\n   *\r\n   * The biggest part of creating the map, is the data structure. There is a clear data structure that you can see from the\r\n   * tests/data-folder, but the factory is responsible for creating the objects, so you can use your own factory implementation. So to\r\n   * understand more, please see e.g. {{#crossLink 'flatworld.factories.hexaFactory'}}{{/crossLink}}.\r\n   *\r\n   * The map consists of layer on top of each other. The example is best understood when thinking typical war strategy game. The\r\n   * structure is this:\r\n   * 1. ZoomLayer: Handles things like scaling / zooming the map\r\n   * 2. MovableLayer: Obviously handles movement of the map. Also is a good place to get map coordinates. Since getting global\r\n   * coordinates won't help you much, half of the time.\r\n   * 3. Different layers: like units, terrain, fog of war, UIs etc. Can also contains special layers like dynamically changed UIlayers.\r\n   * 4. possible subcontainers (used for optimized object selection and map movement). Can also contains special layers like dynamically\r\n   * changed UIlayers.\r\n   * 5. Individual objects, like units, terrains, cities etc...\r\n   *\r\n   * Plugins can be added with activatePlugins-method by sending them to the class. Plugins must always implement init-method, which\r\n   * receives Map instance. Plugins are not yet restricted what they can do and can add functionality without touching map or can modify\r\n   * objects or their prototypes through access to Map instance.\r\n   *\r\n   * @example\r\n   *     var map = new Map(divContainer, mapOptions );\r\n   *     promises = map.init( gameData.pluginsToActivate, mapData.startPoint );\r\n   *\r\n   * A note on the UI part of the map. The UI is not the primary UI interface for the map, but instead it is the UI that is used when\r\n   * interacting with the map and objects in it. So e.g. when user selects a unit on the map. How that unit is highlighted as selected\r\n   * and what kind of possible info-box we show to the user regarding that object, movement of units etc.\r\n   *\r\n   * @namespace flatworld\r\n   * @class Flatworld\r\n   * @constructor\r\n   * @requires PIXI.JS framework in global namespace\r\n   * @requires Canvas (webGL support recommended) HTML5-element supported.\r\n   * @requires Q for promises\r\n   * @requires Hammer for touch events\r\n   * @requires Hamster for mouse scroll events\r\n   *\r\n   * @param {HTMLElement} mapCanvas                       HTML element which will be container for the created canvas element.\r\n   * @param {Object} [props]                              Extra properties\r\n   * @param {Object} props.bounds                         Bounds of the viewport\r\n   * @param {Integer} props.bounds.width                  Bound width\r\n   * @param {Integer} props.bounds.height                 Bound height\r\n   * @param {Object} [props.mapSize]                      The total mapSize\r\n   * @param {Integer} props.mapSize.x                     x-axis\r\n   * @param {Integer} props.mapSize.y                     y-axis\r\n   * @param {Object} props.rendererOptions                Renderer options passed to PIXI.autoDetectRenderer\r\n   * @param {Object} props.subcontainers                  Subcontainers size in pixels. If given, will activate subcontainers. If not\r\n   * given or false, subcontainers are not used.\r\n   * @param {Integer} props.subcontainers.width           Subcontainer width\r\n   * @param {Integer} props.subcontainers.height          Subcontainer height\r\n   * @param {FPSCallback} [trackFPSCB]                    Callback function for tracking FPS in renderer. So this is used for debugging\r\n   * and optimizing.\r\n   *\r\n   * @return {Object}                                      New Map instance\r\n   */\r\n  constructor(mapCanvas = null, {\r\n    bounds = { width: 0, height: 0 },\r\n    mapSize = { x: 0, y: 0 },\r\n    rendererOptions = { autoResize: true, antialias: false },\r\n    minimapCanvas,\r\n    subcontainers = {\r\n      width: 100,\r\n      height: 100,\r\n      maxDetectionOffset: 0 // maxDetectionOffset default set later\r\n    },\r\n    trackFPSCB = false,\r\n    defaultScaleMode = PIXI.SCALE_MODES.DEFAULT } = {},\r\n    mouseTextSelection = false) {\r\n    if (!utils.environment.isWebglSupported()) {\r\n      const error = new Error('Webgl is not supported');\r\n      log.error(error);\r\n      throw error;\r\n    }\r\n    /* Check for the required parameters! */\r\n    if (!mapCanvas) {\r\n      const error = new Error(`${this.constructor.name} needs canvas element!`);\r\n      log.error(error);\r\n      throw error;\r\n    }\r\n\r\n    /* If the constructor was passed mapCanvas as a string and not as an Element, we get the element */\r\n    if (typeof mapCanvas === 'string') {\r\n      mapCanvas = document.querySelector(mapCanvas);\r\n    }\r\n\r\n    /* Make sure the mapCanvas is empty. So there are no nasty surprises */\r\n    mapCanvas.innerHTML = '';\r\n    /* Add the given canvas Element to the options that are passed to PIXI renderer */\r\n    rendererOptions.view = mapCanvas;\r\n    /* Create PIXI renderer. Practically PIXI creates its own canvas and does its magic to it */\r\n    _renderers.main = new PIXI.WebGLRenderer(bounds.width, bounds.height, rendererOptions);\r\n    _renderers.main.getResponsibleLayer = () => _zoomLayer;\r\n    /* Create PIXI renderer for minimap */\r\n    if (minimapCanvas) {\r\n      _renderers.minimap = minimapCanvas ?\r\n        new PIXI.WebGLRenderer(0, 0, { view: minimapCanvas, autoResize: true }) :\r\n        undefined;\r\n      _renderers.minimap.plugins.interaction.destroy();\r\n      _renderers.minimap.getResponsibleLayer = this.getMinimapLayer;\r\n    }\r\n    /* We handle all the events ourselves through addEventListeners-method on canvas, so destroy pixi native method */\r\n    _renderers.main.plugins.interaction.destroy();\r\n\r\n    /* This defines which MapLayer class we use to generate layers on the map. Under movableLayer. These are layers like: Units,\r\n     * terrain, fog of war, UIs etc. */\r\n    ParentLayerConstructor = mapLayers.MapLayerParent;\r\n\r\n    /* These are the 2 topmost layers on the map:\r\n     * - zoomLayer: Keeps at the same coordinates always and is responsible for holding map\r\n     * scale value and possible\r\n     * objects that do not move with the map. ZoomLayer has only one child: _movableLayer\r\n     * - movableLayer: Moves the map, when the user commands. Can hold e.g. UI objects that move\r\n     * with the map. Like\r\n     * graphics that show which area or object is currently selected. */\r\n    _zoomLayer = new mapLayers.MapLayer({ name: 'zoomLayer', coord: { x: 0, y: 0 } });\r\n    _movableLayer = new mapLayers.MapLayer({ name: 'movableLayer', coord: { x: 0, y: 0 } });\r\n    _minimapLayer = new mapLayers.MapLayer({ name: 'minimapLayer', coord: { x: 0, y: 0 } });\r\n    _zoomLayer.addChild(_movableLayer);\r\n\r\n    /* needed to make the canvas fullsize canvas with PIXI */\r\n    utils.resize.fullsizeCanvasCSS(_renderers.main.view);\r\n    /* stop scrollbars of showing */\r\n    mapCanvas.style.overflow = 'hidden';\r\n\r\n    utils.mouse.disableContextMenu(_renderers.main.view);\r\n\r\n    // Disable the selection of text by dragging, from the whole body element\r\n    !mouseTextSelection && utils.mouse.toggleMouseTextSelection();\r\n\r\n    /* We cache the privateRenderers in array format to a module variable */\r\n    _privateRenderers = Object.keys(_renderers).map(idx => _renderers[idx]);\r\n\r\n    protectedProperties.zoomLayer = _zoomLayer;\r\n    protectedProperties.movableLayer = _movableLayer;\r\n\r\n    /* PIXI.SCALE_MODES.DEFAULT is officially a const, but since it's not ES6 we don't care :P.\r\n     * Setting this separately in each\r\n     * baseTexture, would seem stupid, so we do it like this for now. */\r\n    this.defaultScaleMode = PIXI.SCALE_MODES.DEFAULT = defaultScaleMode;\r\n    /**\r\n     * canvas element that was generated and is being used by this new generated Map instance.\r\n     *\r\n     * @attribute canvas\r\n     * @type {HTMLElement}\r\n     * @required\r\n     **/\r\n    this.canvas = _renderers.main.view;\r\n    /**\r\n     * canvas element that was generated and is being used by this new generated Map instance.\r\n     *\r\n     * @attribute canvas\r\n     * @type {HTMLElement}\r\n     * @required\r\n     **/\r\n    this.minimapCanvas = _renderers.minimap ? _renderers.minimap.view : undefined;\r\n    /**\r\n     * @attribute mapSize\r\n     * @type {x: Number, y: Number}\r\n     * @optional\r\n     **/\r\n    this.mapSize = mapSize;\r\n    /**\r\n     * list of plugins that the map uses and are initialized\r\n     * @see Map.activatePlugins\r\n     *\r\n     * @attribute plugins\r\n     * @type {Set}\r\n     **/\r\n    this.plugins = new Set();\r\n    /**\r\n     * Subcontainers size that we want to generate, when layers use subcontainers.\r\n     *\r\n     * @attribute subcontainersConfig\r\n     * @type {{width: Integer, height: Int, maxDetectionOffset: Int}}\r\n     **/\r\n    // Set default\r\n    subcontainers.maxDetectionOffset = subcontainers.maxDetectionOffset || 100;\r\n    this.subcontainersConfig = subcontainers;\r\n    /**\r\n     * Callback function that gets the current FPS on the map and shows it in DOM\r\n     *\r\n     * @attribute trackFPSCB\r\n     * @type {Function}\r\n     **/\r\n    this.trackFPSCB = trackFPSCB;\r\n    /**\r\n     * ObjectManager instance. Responsible for retrieving the objects from the map, on desired\r\n     * occasions. Like when the player clicks\r\n     * the map to select some object. This uses subcontainers when present.\r\n     *\r\n     * @attribute objectManager\r\n     * @type {ObjectManager}\r\n     **/\r\n    this.objectManager = new ObjectManager();\r\n    /**\r\n     * Set variable showing if the device supports touch or not.\r\n     *\r\n     * @attribute isTouch\r\n     * @type {Boolean}\r\n     **/\r\n    this.isSupportedTouch = utils.environment.isTouchDevice();\r\n    /**\r\n     * The object or objects that are currently selected for details and actions / orders. This gets set by other modules, like plugins.\r\n     *\r\n     * @attribute currentlySelectedObjects\r\n     * @type {Array}\r\n     **/\r\n    this.currentlySelectedObjects = [];\r\n    /**\r\n     * Layer types. Can be extended, but the already defined types are supposed to be constants and not to be changed.\r\n     *\r\n     * @attribute layerTypes\r\n     * @type {Object}\r\n     */\r\n    this.layerTypes = {\r\n      staticType: {\r\n        id: LAYER_TYPE_STATIC\r\n      },\r\n      movableType: {\r\n        id: LAYER_TYPE_MOVABLE\r\n      },\r\n      minimapType: {\r\n        id: LAYER_TYPE_MINIMAP\r\n      }\r\n    };\r\n    /**\r\n     * Self explanatory\r\n     *\r\n     * @attribute VERSION\r\n     * @type {SEMVER}       http://semver.org/\r\n     */\r\n    this.VERSION = constants.VERSION;\r\n\r\n    /**\r\n     * This holds callback functions executed before the actual map render is done\r\n     * @type {Objects}\r\n     */\r\n    this.preRenderers = {};\r\n\r\n    /**\r\n     * Holds all the objects on the map. This is an alternative data structure to make some\r\n     * operations easier. Basically it will be populated with the primaryLayers, this is done in\r\n     * init method. More details there.\r\n     */\r\n    this.allMapObjects = {};\r\n  }\r\n  /**\r\n   * This initializes the map and makes everything appear on the map and actually work. Also initializes the given plugins since\r\n   * normally the plugins have to be activated before the map is shown.\r\n   *\r\n   * @method init\r\n   * @param {String[]|Object[]} plugins                  Plugins to be activated for the map. Normally you should give the plugins here\r\n   * instead of separately passing them to activatePlugins method. You can provide the module strings or module objects.\r\n   * @param  {Object} coord                     Starting coordinates for the map.\r\n   * @param  {Integer} coord.x                  X coordinate.\r\n   * @param  {Integer} coord.y                  Y coordinate.\r\n   * @param {Function} tickCB                   callback function for tick. Tick callback is initiated in every frame. So map draws\r\n   * happen during ticks.\r\n   * @param {Object} options                    Extra options.\r\n   * @param {Boolean} options.fullsize          Do we set fullsize canvas or not at the beginning. Default: true\r\n   * @return {Array}                            Returns an array of Promises. If this is empty / zero. Then there is nothing to wait\r\n   * for, if it contains promises, you have to wait for them to finish for the plugins to work and map be ready.\r\n   **/\r\n  init(plugins = [], coord = { x: 0, y: 0 }, tickCB = null, options = { fullsize: true }) {\r\n    if (!this.getPrimaryLayers().length) {\r\n      throw new Error('You should have layers created for the map, before initializing the map');\r\n    }\r\n\r\n    options.fullsize && this.toggleFullsize();\r\n\r\n    this.getAllObjects().forEach(o => {\r\n      if (o && o.initializeCoordinates) {\r\n        o.initializeCoordinates(this);\r\n      }\r\n    })\r\n\r\n    /* Create data structures. Need to be done before activating plugins */\r\n    this.allMapObjects = this._createArrayStructure();\r\n\r\n    /* Sets the correct Map starting coordinates */\r\n    coord && Object.assign(_movableLayer, coord);\r\n\r\n    isMapReadyPromises = plugins.length && this.initPlugins(plugins);\r\n\r\n    /* We activate the default tick for the map, but if custom tick callback has been given, we activate it too */\r\n    this._defaultTick();\r\n    tickCB && this.customTickOn(tickCB);\r\n\r\n    return isMapReadyPromises || Promise.resolve();\r\n  }\r\n  /**\r\n   * This method will initialize the UI module. It requires constructed UI theme module as param\r\n   * @param {Object} UITheme This is the UI theme module created to work with UI module\r\n   */\r\n  initUI(UITheme) {\r\n    UI(UITheme, this, protectedProperties);\r\n  }\r\n  /**\r\n   * Returns a promise that resolves after the map is fully initialized\r\n   *\r\n   * @method whenReady\r\n   * @return {Promise}        Promise that holds all the individual plugin loading promises\r\n   **/\r\n  whenReady() {\r\n    return Q.all(isMapReadyPromises);\r\n  }\r\n  /**\r\n   * The correct way to update / redraw the map. Check happens at every tick and thus in every frame.\r\n   *\r\n   * @method drawOnNextTick\r\n   **/\r\n  drawOnNextTick() {\r\n    _drawMapOnNextTick = true;\r\n  }\r\n  /**\r\n   * The correct way to update / redraw the map. Check happens at every tick and thus in every frame.\r\n   *\r\n   * @method drawOnNextTick\r\n   **/\r\n  collectGarbage() {\r\n    _privateRenderers.forEach(renderer => renderer.textureGC.run());\r\n  }\r\n  /**\r\n   * Add an UI object to the wanted layer.\r\n   *\r\n   * @method addUIObject\r\n   * @param {Integer} layer           Type of the layer. this.layerTypes.STATIC.id or layerTypes.MOVABLE.id.\r\n   * @param {Object | Array} object   The object to be attached as UI object.\r\n   */\r\n  addUIObject(layerType, objects, UIName) {\r\n    if (Array.isArray(objects)) {\r\n      objects.forEach((object) => {\r\n        this._addObjectToUIlayer(layerType, object, UIName);\r\n      });\r\n    } else {\r\n      this._addObjectToUIlayer(layerType, objects, UIName);\r\n    }\r\n  }\r\n  /**\r\n   * Remove an UI object to the wanted layer.\r\n   *\r\n   * @method removeUIObject\r\n   * @param {Integer} layer       Type of the layer. layerTypes.STATIC of layerTypes.MOVABLE.\r\n   * @param {String} objectName   The object to be attached as UI object.\r\n   */\r\n  removeUIObject(layerType, UIName) {\r\n    switch (layerType) {\r\n      case LAYER_TYPE_STATIC:\r\n        _zoomLayer.deleteUIObjects(UIName);\r\n        break;\r\n      case LAYER_TYPE_MOVABLE:\r\n        _movableLayer.deleteUIObjects(UIName);\r\n        break;\r\n    }\r\n  }\r\n  /**\r\n   * Create a special layer, that can holds e.g. UI effects in it.\r\n   *\r\n   * @method createSpecialLayer\r\n   * @param {String} name               name of the layer\r\n   * @param {Object} options            Optional options.\r\n   * @param {Object} options.coord      Coordinates of the layer\r\n   * @param {Integer} options.coord.x   X coordinate\r\n   * @param {Integer} options.coord.y   Y coordinate\r\n   * @param {Object} options.toLayer    To which layer will this layer be added to as UILayer.\r\n   *  Default false\r\n   * @return {MapLayer}            The created UI layer\r\n   **/\r\n  createSpecialLayer(name = 'default special layer',\r\n    options = {\r\n      coord: {\r\n        x: 0,\r\n        y: 0 },\r\n      toLayer: false }) {\r\n    const coord = options.coord || { x: 0, y: 0 };\r\n    const layer = new mapLayers.MapLayer({ name, coord });\r\n\r\n    layer.specialLayer = true;\r\n\r\n    switch (options.toLayer) {\r\n      case LAYER_TYPE_STATIC:\r\n        _zoomLayer.addChild(layer);\r\n        break;\r\n      case LAYER_TYPE_MOVABLE:\r\n        _movableLayer.addChild(layer);\r\n        break;\r\n    }\r\n\r\n    return layer;\r\n  }\r\n  /**\r\n   * All parameters are passed to ParentLayerConstructor (normally constructor of MapLayer).\r\n   *\r\n   * @method addLayer\r\n   * @uses MapLayer\r\n   * @return {MapLayer}          created MapLayer instance\r\n   **/\r\n  addLayer(layerOptions) {\r\n    if (this.getSubcontainerConfigs() && layerOptions.subcontainers !== false) {\r\n      layerOptions.subcontainers = this.getSubcontainerConfigs();\r\n    }\r\n\r\n    const newLayer = new ParentLayerConstructor(layerOptions);\r\n    _movableLayer.addChild(newLayer);\r\n\r\n    return newLayer;\r\n  }\r\n  /**\r\n   * Just a convenience function (for usability and readability), for checking if the map uses\r\n   * subcontainers.\r\n   *\r\n   * @method usesSubcontainers\r\n   * @return {Boolean}\r\n   **/\r\n  usesSubcontainers() {\r\n    return !!(this.getSubcontainerConfigs().width && this.getSubcontainerConfigs().height);\r\n  }\r\n  /**\r\n   * Returns current subcontainers configurations (like subcontainers size).\r\n   *\r\n   * @method getSubcontainerConfigs\r\n   * @return {Object}\r\n   **/\r\n  getSubcontainerConfigs() {\r\n    return this.subcontainersConfig;\r\n  }\r\n  /**\r\n   * Get the size of the area that is shown to the player. More or less the area of the browser\r\n   * window.\r\n   *\r\n   * @method getViewportArea\r\n   * @param  {Boolean} isLocal                                                  Do we want to\r\n   * use Map coordinates or global / canvas\r\n   * coordinates. Default = false\r\n   * @return {{x: Integer, y: Integer, width: Integer, height: Integer}}        x- and\r\n   * y-coordinates and the width and height of the\r\n   * viewport\r\n   **/\r\n  getViewportArea(isLocal = false, multiplier = 0) {\r\n    const layer = isLocal ? _movableLayer : _zoomLayer;\r\n    let leftSideCoords = new PIXI.Point(0, 0);\r\n    let rightSideCoords = new PIXI.Point(window.innerWidth, window.innerHeight);\r\n\r\n    if (isLocal) {\r\n      rightSideCoords = layer.toLocal(rightSideCoords);\r\n      leftSideCoords = layer.toLocal(leftSideCoords);\r\n    }\r\n\r\n    const leftSide = {\r\n      x: leftSideCoords.x,\r\n      y: leftSideCoords.y\r\n    };\r\n    const rightSide = {\r\n      x2: rightSideCoords.x,\r\n      y2: rightSideCoords.y\r\n    };\r\n\r\n    const offset = {\r\n      x: (Math.abs(rightSide.x2) - leftSide.x) * multiplier,\r\n      y: (Math.abs(rightSide.y2) - leftSide.y) * multiplier\r\n    };\r\n    return {\r\n      x: Math.round(leftSide.x - offset.x),\r\n      y: Math.round(leftSide.y - offset.y),\r\n      width: Math.round(Math.abs(Math.abs(rightSide.x2) - leftSide.x) + offset.x * 2),\r\n      height: Math.round(Math.abs(Math.abs(rightSide.y2) - leftSide.y) + offset.y * 2)\r\n    };\r\n  }\r\n  /**\r\n   * Remove a primary layer from the map\r\n   *\r\n   * @method removeLayer\r\n   * @param {MapLayer|PIXI.Container|PIXI.ParticleContainer} layer       The layer object to be\r\n   * removed\r\n   **/\r\n  removeLayer(layer) {\r\n    _movableLayer.removeChild(layer);\r\n\r\n    return layer;\r\n  }\r\n  /**\r\n   * return the mapsize as width and height\r\n   *\r\n   * @return {Object}       { x: Number, y: Number }\r\n   */\r\n  getMapsize() {\r\n    return this.mapSize;\r\n  }\r\n  /**\r\n   * Moves the map the amount of given x and y pixels. Note that this is not the destination coordinate, but the amount of movement that\r\n   * the map should move. Internally it moves the movableLayer, taking into account necessary properties (like scale). Draws map after\r\n   * movement.\r\n   *\r\n   * @method moveMap\r\n   * @param {Object} coord                 The amount of x and y coordinates we want the map to move. I.e. { x: 5, y: 0 }. With this we\r\n   * want the map to move horizontally 5 pixels and vertically stay at the same position.\r\n   * @param {Integer} coord.x              X coordinate\r\n   * @param {Integer} coord.y              Y coordinate\r\n   * @param {Integer} absolute             If the given coordinates are not relative, like move map 1 pixel, but instead absolute, like\r\n   * move map to coordinates { x: 1, y: 2 }. Defaults to false (relative).\r\n   * @todo  the informcoordinates away and fix the issue they tried to fix!\r\n   **/\r\n  moveMap({ x = 0, y = 0 }, { absolute = false } = {}) {\r\n    const realCoordinates = {\r\n      x: Math.round(x / _zoomLayer.getZoom()),\r\n      y: Math.round(y / _zoomLayer.getZoom())\r\n    };\r\n\r\n    if (absolute) {\r\n      _movableLayer.position = new PIXI.Point(x, y);\r\n    } else {\r\n      _movableLayer.move(realCoordinates);\r\n    }\r\n\r\n    mapEvents.publish('mapMoved', realCoordinates);\r\n    this.drawOnNextTick();\r\n  }\r\n  /**\r\n   * Initializes all plugins for the map. Iterates through the given plugins we wish to\r\n   * initialize and does the actual work in initPlugin-method.\r\n    *\r\n   * @method initPlugins\r\n   * @param {Object[]} pluginsArray   Array that consists the plugin modules to be activated\r\n   * @return {Promise}                Promise. If string are provided resolved those with System.import, otherwise resolves immediately.\r\n   * */\r\n  initPlugins(pluginsArray = []) {\r\n    const allPromises = [];\r\n\r\n    /* Iterates over given plugins Array and calls their init-method, depeding if it is String or Object */\r\n    pluginsArray.forEach(data => {\r\n      if (typeof data.plugin === 'object') {\r\n        const params = {};\r\n        data.parameters = data.parameters || {};\r\n\r\n        Object.keys(data.parameters).forEach(i => {\r\n          if (!data.parameters[i].bind) {\r\n            throw new Error('All parameters to plugins must be functions with bind-method!');\r\n          }\r\n\r\n          params[i] = data.parameters[i].bind(data.plugin);\r\n        });\r\n\r\n        allPromises.push(this.initPlugin(data.plugin, params));\r\n      } else {\r\n        log.error(new Error(`Plugin '${data.plugin.pluginName}' was not an object`));\r\n      }\r\n    });\r\n\r\n    return allPromises;\r\n  }\r\n  /**\r\n   * Activate plugin for the map. Plugins need .pluginName property and .init-method. Plugins init-method activates the plugins and we\r\n   * call them in Map. Plugins init-metho receivse this (Map instance) as their only parameter.\r\n   *\r\n   * @method initPlugin\r\n   * @throws {Error} Throws a general error if there is an issue activating the plugin\r\n   * @param {Object} plugin        Plugin module\r\n   * */\r\n  initPlugin(plugin, params = []) {\r\n    let promise;\r\n\r\n    try {\r\n      if (!plugin || !plugin.pluginName || !plugin.init) {\r\n        throw new Error('plugin, plugin.pluginName or plugin.init import is missing!');\r\n      }\r\n\r\n      this.plugins.add(plugin[plugin.pluginName]);\r\n      if (this.plugins.has(plugin[plugin.pluginName])) {\r\n        plugin.mapInstance = this;\r\n        plugin._properties = protectedProperties;\r\n        promise = plugin.init(params);\r\n      }\r\n    } catch (e) {\r\n      e.message += ' INFO: An error initializing plugin. JSON.stringify: \"' + plugin.pluginName + '\" ';\r\n      log.error(e);\r\n      promise = Q.reject();\r\n    }\r\n\r\n    return promise;\r\n  }\r\n  registerPreRenderer(name, callback) {\r\n    if (!name && ! callback) {\r\n      throw new Error('name and callback required for registerPreRenderer');\r\n    }\r\n\r\n    this.preRenderers[name] = {\r\n      cb: callback\r\n    };\r\n  }\r\n  removePreRenderer(name) {\r\n    delete this.preRenderers[name];\r\n  }\r\n  /**\r\n   * Setting new prototype methods for the Map instance\r\n   *\r\n   * @method setPrototype\r\n   * @param {String} property         The property you want to set\r\n   * @param {*} value                 Value for the property\r\n   */\r\n  setPrototype(property, value) {\r\n    const thisPrototype = Object.getPrototypeOf(this);\r\n\r\n    thisPrototype[property] = value;\r\n  }\r\n  /**\r\n   * Gets object under specific map coordinates. Using subcontainers if they exist, other\r\n   * methods if not. If you provide type parameter, the method returns only object types that\r\n   * match it.\r\n   *\r\n   * NOTE! At the moment filters only support layers! You can not give filters object: object and\r\n   * expect them to be filtered. It will filter only layers (object: layer)!\r\n   *\r\n   * @todo This should work with object filtering too, but the issues regarding it are\r\n   * efficiency (if there are many filter rules, we don't want to go through them twice?). Since\r\n   * the way filters work now, we would have to filter layers first and then again objects.\r\n   *\r\n   * @method getObjectsUnderArea\r\n   * @param  {Object} globalCoords            Event coordinates on the zoomLayer / canvas.\r\n   * @param  {Integer} globalCoords.x         X coordinate\r\n   * @param  {Integer} globalCoords.y         Y coordinate\r\n   * @param  {Object} options                 Optional options\r\n   * @param  {Object} options.filter          The filter to apply to subcontainers\r\n   * @return {Array}                          Array of object found on the map.\r\n   */\r\n  getObjectsUnderArea({ x = 0, y = 0, width = 0, height = 0 }, { filters = null } = {}) {\r\n    const globalCoords = {\r\n      x,\r\n      y,\r\n      width,\r\n      height\r\n    };\r\n    /* We need both coordinates later on and it's logical to do the work here */\r\n    const allCoords = {\r\n      globalCoords,\r\n      localCoords: _movableLayer.toLocal(new PIXI.Point(globalCoords.x, globalCoords.y))\r\n    };\r\n    let objects = [];\r\n\r\n    allCoords.localCoords.width = globalCoords.width / this.getZoom();\r\n    allCoords.localCoords.height = globalCoords.height / this.getZoom();\r\n\r\n/*      if (this.usesSubcontainers()) {*/\r\n    const allMatchingSubcontainers = this._getSubcontainersUnderArea(allCoords, { filters });\r\n\r\n    objects = this._retrieveObjects(allCoords, allMatchingSubcontainers);\r\n/*      } else {\r\n      const filteredContainers = _movableLayer.children.filter(thisChild => {\r\n        if ((filters && !filters.filter(thisChild).length) || thisChild.specialLayer) {\r\n          return false;\r\n        }\r\n\r\n        return true;\r\n      });\r\n\r\n      objects = this._retrieveObjects(allCoords, filteredContainers);\r\n    }*/\r\n\r\n    if (filters && filters.doesItFilter(\"object\")) {\r\n      objects = filters.filter(objects);\r\n    }\r\n\r\n    return objects;\r\n  }\r\n  /**\r\n   * This returns the normal parent layers that we mostly use for manipulation everything. MovableLayer and zoomLayer are built-in\r\n   * layers designed to provide the basic functionalities like zooming and moving the map. These layers provide everything that extends\r\n   * the map more.\r\n   *\r\n   * @method getPrimaryLayers\r\n   * @param {MapDataManipulator} [{}.filters]         The mapDataManipulator instance, that you use for filtering.\r\n   * @return {Object} Basically anything in the map that is used as a layer (not really counting subcontainers).\r\n   */\r\n  getPrimaryLayers({ filters } = {}) {\r\n    return _movableLayer.getPrimaryLayers({ filters });\r\n  }\r\n  /**\r\n   * Get all objects on the map, from layers and subcontainers.\r\n   *\r\n   * @todo Not very intelligent atm. You need to make a recursive and smart retrieving of objects, so no matter how many layers or\r\n   * layers there are, you always retrieve the end objects and the end of the path.\r\n   *\r\n   * @method getAllObjects\r\n   * @param {MapDataManipulator} [{}.filters]         The mapDataManipulator instance, that you use for filtering.\r\n   * @return {Array}                                  Array of found objects\r\n   * */\r\n  getAllObjects({ filters } = {}) {\r\n    let allObjects;\r\n    let theseObjs;\r\n\r\n    allObjects = this.getPrimaryLayers({ filters }).map((layer) => {\r\n      let allObjs;\r\n\r\n      if (layer.hasSubcontainers()) {\r\n        const subcontainers = layer.getSubcontainers();\r\n\r\n        allObjs = subcontainers.map((subContainer) => {\r\n          theseObjs = subContainer.children.map((obj) => {\r\n            if (filters) {\r\n              return filters.filter(obj);\r\n            }\r\n\r\n            return obj;\r\n          });\r\n\r\n          return utils.general.flatten2Levels(theseObjs);\r\n        });\r\n      } else {\r\n        return undefined;\r\n      }\r\n\r\n      return utils.general.flatten2Levels(allObjs);\r\n    });\r\n\r\n    allObjects = utils.general.flatten2Levels(allObjects);\r\n\r\n    return allObjects;\r\n  }\r\n  /**\r\n   * Set map zoom. 1 = no zoom. <1 zoom out, >1 zoom in.\r\n   *\r\n   * @method setZoom\r\n   * @param {Number} scale    The amount of zoom you want to set\r\n   * @return {Number}         The amount of zoom applied\r\n   */\r\n  setZoom(newScale) {\r\n    _zoomLayer.setZoom(newScale);\r\n\r\n    mapEvents.publish({ name: 'mapZoomed', cooldown: true }, { previousScale: this.getZoom(), newScale });\r\n\r\n    return newScale;\r\n  }\r\n  /**\r\n   * Get map zoom. 1 = no zoom. <1 zoom out, >1 zoom in.\r\n   *\r\n   * @method getZoom\r\n   * @return {MapLayer|PIXI.Container|PIXI.ParticleContainer}\r\n   */\r\n  getZoom() {\r\n    return _zoomLayer.getZoom();\r\n  }\r\n  /**\r\n   * Returns the PIXI renderer. Don't use this unless you must. For more advanced or PIXI specific cases.\r\n   *\r\n   * @method getRenderer\r\n   * @return {PIXI.Renderer}\r\n   */\r\n  getRenderer(type) {\r\n    return type === 'minimap' ? _renderers.minimap : _renderers.main;\r\n  }\r\n  /**\r\n   * BEING DEPRECATED. ONLY USED IN UNIT TESTS\r\n   */\r\n  _getMovableLayer() {\r\n    return _movableLayer;\r\n  }\r\n  // toGlobal is there to check if the \"coordinates\" are a PIXI object and we can use that\r\n  getMapCoordinates(coordinates = constants.ZERO_COORDINATES, revert = false) {\r\n    if (coordinates.toGlobal) {\r\n      return _movableLayer.toLocal(constants.ZERO_COORDINATES, coordinates);\r\n    } else  if (revert) {\r\n      return _movableLayer.position;\r\n    } else {\r\n      return _movableLayer.toLocal(coordinates);\r\n    }\r\n  }\r\n  /**\r\n   * Return minimap layer. Holds minimap, if used in the game.\r\n   *\r\n   * @method getMinimapLayer\r\n   */\r\n  getMinimapLayer() {\r\n    return _minimapLayer;\r\n  }\r\n  /**\r\n   * Removes the minimapLayer from the game.\r\n   */\r\n  removeMinimapLayer() {\r\n    _minimapLayer = undefined;\r\n  }\r\n  /*---------------------------------------------\r\n   ------- ABSTRACT APIS THROUGH PLUGINS --------\r\n   --------------------------------------------*/\r\n   /**\r\n    * This is abstract method and needs to be implemented with a plugin. Core module has an implementation for this and if you don't\r\n    * implement your own, I suggest you use it.\r\n    *\r\n    * @method zoomIn\r\n    */\r\n  zoomIn() { return 'notImplementedYet. Activate with plugin'; }\r\n   /**\r\n    * This is abstract method and needs to be implemented with a plugin. Core module has an implementation for this and if you don't\r\n    * implement your own, I suggest you use it.\r\n    *\r\n    * @method zoomOut\r\n    */\r\n  zoomOut() { return 'notImplementedYet. Activate with plugin'; }\r\n  /**\r\n   * Resize the canvas to fill the whole browser content area. Defined by the baseEventlisteners-module (core modules plugin)\r\n   *\r\n   * @method toggleFullsize\r\n   **/\r\n  toggleFullsize() { return 'notImplementedYet. Activate with plugin'; }\r\n  /**\r\n   * Toggles fullscreen mode. Defined by the baseEventlisteners-module (core modules plugin)\r\n   *\r\n   * @method toggleFullScreen\r\n   **/\r\n  toggleFullScreen() { return 'notImplementedYet. Activate with plugin'; }\r\n  /**\r\n   * Plugin will overwrite create this method. Method for actually activating minimap.\r\n   *\r\n   * @method initMinimap\r\n   **/\r\n  initMinimap() { return 'notImplementedYet. Activate with plugin'; }\r\n  /**\r\n   * Plugin will overwrite create this method. Method for actually activating fog of war.\r\n   *\r\n   * @method activateFogOfWar\r\n   **/\r\n  activateFogOfWar() { return 'notImplementedYet. Activate with plugin'; }\r\n\r\n  /*---------------------------------\r\n  --------- PRIVATE METHODS ---------\r\n  ---------------------------------*/\r\n  /**\r\n   * Retrieves the objects from ObjectManager, with the given parameters. Mostly helper functionality for getObjectsUnderArea\r\n   *\r\n   * @private\r\n   * @method _retrieveObjects\r\n   * @param {Object} allCoords                        REQUIRED\r\n   * @param {Object} allCoords.globalCoords           REQUIRED\r\n   * @param {Integer} allCoords.globalCoords.x        REQUIRED\r\n   * @param {Integer} allCoords.globalCoords.y        REQUIRED\r\n   * @param {Integer} allCoords.globalCoords.width    REQUIRED\r\n   * @param {Integer} allCoords.globalCoords.height   REQUIRED\r\n   * @param {Object} allCoords.localCoords            REQUIRED\r\n   * @param {Integer} allCoords.localCoords.x         REQUIRED\r\n   * @param {Integer} allCoords.localCoords.y         REQUIRED\r\n   * @param {String} [{}.type]                        The type of objects we want\r\n   * @param {Array} [{}.subcontainers]                Array of the subcontainers we will search\r\n   * @return {Array}                                  Found objects\r\n   */\r\n  _retrieveObjects(allCoords, containers = [], { type = '' } = {}) {\r\n    return this.objectManager.retrieve(allCoords, containers, {\r\n      type,\r\n      size: {\r\n        width: allCoords.globalCoords.width,\r\n        height: allCoords.globalCoords.height\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * This returns layers by filtering them based on certain attribute. Can be used with more higher order filtering\r\n   *\r\n   * @private\r\n   * @method _getLayersWithAttributes\r\n   * @param {String} attribute\r\n   * @param {*} value\r\n   * @return the current map instance\r\n   **/\r\n  _getLayersWithAttributes(attribute, value) {\r\n    return _movableLayer.children[0].children.filter(layer => {\r\n      return layer[attribute] === value;\r\n    });\r\n  }\r\n  /**\r\n   * Get subcontainers under certain point or rectangle\r\n   *\r\n   * @private\r\n   * @method _getSubcontainersUnderPoint\r\n   * @param  {[type]} globalCoords\r\n   * @param {Object} options              Optional options.\r\n   * @return {Array}                        All subcontainers that matched the critea\r\n   */\r\n\r\n  _getSubcontainersUnderArea(allCoords, { filters } = {}) {\r\n    const primaryLayers = this.getPrimaryLayers({ filters });\r\n    let allMatchingSubcontainers = [];\r\n    let thisLayersSubcontainers;\r\n\r\n    primaryLayers.forEach(layer => {\r\n      thisLayersSubcontainers = layer.getSubcontainersByCoordinates(allCoords.localCoords);\r\n      allMatchingSubcontainers = allMatchingSubcontainers.concat(thisLayersSubcontainers);\r\n    });\r\n\r\n    return allMatchingSubcontainers;\r\n  }\r\n  /**\r\n   * This handles the default drawing of the map, so that map always updates when drawOnNextTick === true. This tick\r\n   * callback is always set and should not be removed or overruled\r\n   *\r\n   * @private\r\n   * @method _defaultTick\r\n   */\r\n  _defaultTick() {\r\n    const ONE_SECOND = 1000;\r\n    let FPSCount = 0;\r\n    let fpsTimer = new Date().getTime();\r\n    let renderStart;\r\n    let totalRenderTime;\r\n\r\n    PIXI.ticker.shared.add(() => {\r\n      if (_drawMapOnNextTick) {\r\n        if (this.trackFPSCB) {\r\n          renderStart = new Date().getTime();\r\n        }\r\n\r\n        Object.keys(this.preRenderers).forEach(i => this.preRenderers[i].cb());\r\n        _privateRenderers.forEach(renderer => renderer.render(renderer.getResponsibleLayer()));\r\n\r\n        if (this.trackFPSCB) {\r\n          totalRenderTime += Math.round(Math.abs(renderStart - new Date().getTime()));\r\n        }\r\n\r\n        _drawMapOnNextTick = false;\r\n      }\r\n\r\n      if (this.trackFPSCB) {\r\n        FPSCount++;\r\n\r\n        if (fpsTimer + ONE_SECOND < new Date().getTime()) {\r\n          this.trackFPSCB({\r\n            FPS: FPSCount,\r\n            FPStime: fpsTimer,\r\n            renderTime: totalRenderTime,\r\n            drawCount: _renderers.main.drawCount\r\n          });\r\n\r\n          FPSCount = 0;\r\n          totalRenderTime = 0;\r\n          fpsTimer = new Date().getTime();\r\n        }\r\n      }\r\n    });\r\n  }\r\n  _addObjectToUIlayer(layerType, object, name) {\r\n    switch (layerType) {\r\n      case LAYER_TYPE_STATIC:\r\n        _zoomLayer.addUIObject(object, name);\r\n        break;\r\n      case LAYER_TYPE_MOVABLE:\r\n        _movableLayer.addUIObject(object, name);\r\n        break;\r\n    }\r\n  }\r\n  _createArrayStructure() {\r\n    const allObjects = {};\r\n\r\n    this.getPrimaryLayers().forEach(layer => {\r\n      allObjects[layer.name] = layer.getObjects();\r\n    });\r\n\r\n    return allObjects;\r\n  }\r\n}\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default Flatworld;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/Flatworld.js\n **/","// vim:ts=4:sts=4:sw=4:\n/*!\n *\n * Copyright 2009-2012 Kris Kowal under the terms of the MIT\n * license found at http://github.com/kriskowal/q/raw/master/LICENSE\n *\n * With parts by Tyler Close\n * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found\n * at http://www.opensource.org/licenses/mit-license.html\n * Forked at ref_send.js version: 2009-05-11\n *\n * With parts by Mark Miller\n * Copyright (C) 2011 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n(function (definition) {\n    \"use strict\";\n\n    // This file will function properly as a <script> tag, or a module\n    // using CommonJS and NodeJS or RequireJS module formats.  In\n    // Common/Node/RequireJS, the module exports the Q API and when\n    // executed as a simple <script>, it creates a Q global instead.\n\n    // Montage Require\n    if (typeof bootstrap === \"function\") {\n        bootstrap(\"promise\", definition);\n\n    // CommonJS\n    } else if (typeof exports === \"object\" && typeof module === \"object\") {\n        module.exports = definition();\n\n    // RequireJS\n    } else if (typeof define === \"function\" && define.amd) {\n        define(definition);\n\n    // SES (Secure EcmaScript)\n    } else if (typeof ses !== \"undefined\") {\n        if (!ses.ok()) {\n            return;\n        } else {\n            ses.makeQ = definition;\n        }\n\n    // <script>\n    } else if (typeof window !== \"undefined\" || typeof self !== \"undefined\") {\n        // Prefer window over self for add-on scripts. Use self for\n        // non-windowed contexts.\n        var global = typeof window !== \"undefined\" ? window : self;\n\n        // Get the `window` object, save the previous Q global\n        // and initialize Q as a global.\n        var previousQ = global.Q;\n        global.Q = definition();\n\n        // Add a noConflict function so Q can be removed from the\n        // global namespace.\n        global.Q.noConflict = function () {\n            global.Q = previousQ;\n            return this;\n        };\n\n    } else {\n        throw new Error(\"This environment was not anticipated by Q. Please file a bug.\");\n    }\n\n})(function () {\n\"use strict\";\n\nvar hasStacks = false;\ntry {\n    throw new Error();\n} catch (e) {\n    hasStacks = !!e.stack;\n}\n\n// All code after this point will be filtered from stack traces reported\n// by Q.\nvar qStartingLine = captureLine();\nvar qFileName;\n\n// shims\n\n// used for fallback in \"allResolved\"\nvar noop = function () {};\n\n// Use the fastest possible means to execute a task in a future turn\n// of the event loop.\nvar nextTick =(function () {\n    // linked list of tasks (single, with head node)\n    var head = {task: void 0, next: null};\n    var tail = head;\n    var flushing = false;\n    var requestTick = void 0;\n    var isNodeJS = false;\n    // queue for late tasks, used by unhandled rejection tracking\n    var laterQueue = [];\n\n    function flush() {\n        /* jshint loopfunc: true */\n        var task, domain;\n\n        while (head.next) {\n            head = head.next;\n            task = head.task;\n            head.task = void 0;\n            domain = head.domain;\n\n            if (domain) {\n                head.domain = void 0;\n                domain.enter();\n            }\n            runSingle(task, domain);\n\n        }\n        while (laterQueue.length) {\n            task = laterQueue.pop();\n            runSingle(task);\n        }\n        flushing = false;\n    }\n    // runs a single function in the async queue\n    function runSingle(task, domain) {\n        try {\n            task();\n\n        } catch (e) {\n            if (isNodeJS) {\n                // In node, uncaught exceptions are considered fatal errors.\n                // Re-throw them synchronously to interrupt flushing!\n\n                // Ensure continuation if the uncaught exception is suppressed\n                // listening \"uncaughtException\" events (as domains does).\n                // Continue in next event to avoid tick recursion.\n                if (domain) {\n                    domain.exit();\n                }\n                setTimeout(flush, 0);\n                if (domain) {\n                    domain.enter();\n                }\n\n                throw e;\n\n            } else {\n                // In browsers, uncaught exceptions are not fatal.\n                // Re-throw them asynchronously to avoid slow-downs.\n                setTimeout(function () {\n                    throw e;\n                }, 0);\n            }\n        }\n\n        if (domain) {\n            domain.exit();\n        }\n    }\n\n    nextTick = function (task) {\n        tail = tail.next = {\n            task: task,\n            domain: isNodeJS && process.domain,\n            next: null\n        };\n\n        if (!flushing) {\n            flushing = true;\n            requestTick();\n        }\n    };\n\n    if (typeof process === \"object\" &&\n        process.toString() === \"[object process]\" && process.nextTick) {\n        // Ensure Q is in a real Node environment, with a `process.nextTick`.\n        // To see through fake Node environments:\n        // * Mocha test runner - exposes a `process` global without a `nextTick`\n        // * Browserify - exposes a `process.nexTick` function that uses\n        //   `setTimeout`. In this case `setImmediate` is preferred because\n        //    it is faster. Browserify's `process.toString()` yields\n        //   \"[object Object]\", while in a real Node environment\n        //   `process.nextTick()` yields \"[object process]\".\n        isNodeJS = true;\n\n        requestTick = function () {\n            process.nextTick(flush);\n        };\n\n    } else if (typeof setImmediate === \"function\") {\n        // In IE10, Node.js 0.9+, or https://github.com/NobleJS/setImmediate\n        if (typeof window !== \"undefined\") {\n            requestTick = setImmediate.bind(window, flush);\n        } else {\n            requestTick = function () {\n                setImmediate(flush);\n            };\n        }\n\n    } else if (typeof MessageChannel !== \"undefined\") {\n        // modern browsers\n        // http://www.nonblocking.io/2011/06/windownexttick.html\n        var channel = new MessageChannel();\n        // At least Safari Version 6.0.5 (8536.30.1) intermittently cannot create\n        // working message ports the first time a page loads.\n        channel.port1.onmessage = function () {\n            requestTick = requestPortTick;\n            channel.port1.onmessage = flush;\n            flush();\n        };\n        var requestPortTick = function () {\n            // Opera requires us to provide a message payload, regardless of\n            // whether we use it.\n            channel.port2.postMessage(0);\n        };\n        requestTick = function () {\n            setTimeout(flush, 0);\n            requestPortTick();\n        };\n\n    } else {\n        // old browsers\n        requestTick = function () {\n            setTimeout(flush, 0);\n        };\n    }\n    // runs a task after all other tasks have been run\n    // this is useful for unhandled rejection tracking that needs to happen\n    // after all `then`d tasks have been run.\n    nextTick.runAfter = function (task) {\n        laterQueue.push(task);\n        if (!flushing) {\n            flushing = true;\n            requestTick();\n        }\n    };\n    return nextTick;\n})();\n\n// Attempt to make generics safe in the face of downstream\n// modifications.\n// There is no situation where this is necessary.\n// If you need a security guarantee, these primordials need to be\n// deeply frozen anyway, and if you don’t need a security guarantee,\n// this is just plain paranoid.\n// However, this **might** have the nice side-effect of reducing the size of\n// the minified code by reducing x.call() to merely x()\n// See Mark Miller’s explanation of what this does.\n// http://wiki.ecmascript.org/doku.php?id=conventions:safe_meta_programming\nvar call = Function.call;\nfunction uncurryThis(f) {\n    return function () {\n        return call.apply(f, arguments);\n    };\n}\n// This is equivalent, but slower:\n// uncurryThis = Function_bind.bind(Function_bind.call);\n// http://jsperf.com/uncurrythis\n\nvar array_slice = uncurryThis(Array.prototype.slice);\n\nvar array_reduce = uncurryThis(\n    Array.prototype.reduce || function (callback, basis) {\n        var index = 0,\n            length = this.length;\n        // concerning the initial value, if one is not provided\n        if (arguments.length === 1) {\n            // seek to the first value in the array, accounting\n            // for the possibility that is is a sparse array\n            do {\n                if (index in this) {\n                    basis = this[index++];\n                    break;\n                }\n                if (++index >= length) {\n                    throw new TypeError();\n                }\n            } while (1);\n        }\n        // reduce\n        for (; index < length; index++) {\n            // account for the possibility that the array is sparse\n            if (index in this) {\n                basis = callback(basis, this[index], index);\n            }\n        }\n        return basis;\n    }\n);\n\nvar array_indexOf = uncurryThis(\n    Array.prototype.indexOf || function (value) {\n        // not a very good shim, but good enough for our one use of it\n        for (var i = 0; i < this.length; i++) {\n            if (this[i] === value) {\n                return i;\n            }\n        }\n        return -1;\n    }\n);\n\nvar array_map = uncurryThis(\n    Array.prototype.map || function (callback, thisp) {\n        var self = this;\n        var collect = [];\n        array_reduce(self, function (undefined, value, index) {\n            collect.push(callback.call(thisp, value, index, self));\n        }, void 0);\n        return collect;\n    }\n);\n\nvar object_create = Object.create || function (prototype) {\n    function Type() { }\n    Type.prototype = prototype;\n    return new Type();\n};\n\nvar object_hasOwnProperty = uncurryThis(Object.prototype.hasOwnProperty);\n\nvar object_keys = Object.keys || function (object) {\n    var keys = [];\n    for (var key in object) {\n        if (object_hasOwnProperty(object, key)) {\n            keys.push(key);\n        }\n    }\n    return keys;\n};\n\nvar object_toString = uncurryThis(Object.prototype.toString);\n\nfunction isObject(value) {\n    return value === Object(value);\n}\n\n// generator related shims\n\n// FIXME: Remove this function once ES6 generators are in SpiderMonkey.\nfunction isStopIteration(exception) {\n    return (\n        object_toString(exception) === \"[object StopIteration]\" ||\n        exception instanceof QReturnValue\n    );\n}\n\n// FIXME: Remove this helper and Q.return once ES6 generators are in\n// SpiderMonkey.\nvar QReturnValue;\nif (typeof ReturnValue !== \"undefined\") {\n    QReturnValue = ReturnValue;\n} else {\n    QReturnValue = function (value) {\n        this.value = value;\n    };\n}\n\n// long stack traces\n\nvar STACK_JUMP_SEPARATOR = \"From previous event:\";\n\nfunction makeStackTraceLong(error, promise) {\n    // If possible, transform the error stack trace by removing Node and Q\n    // cruft, then concatenating with the stack trace of `promise`. See #57.\n    if (hasStacks &&\n        promise.stack &&\n        typeof error === \"object\" &&\n        error !== null &&\n        error.stack &&\n        error.stack.indexOf(STACK_JUMP_SEPARATOR) === -1\n    ) {\n        var stacks = [];\n        for (var p = promise; !!p; p = p.source) {\n            if (p.stack) {\n                stacks.unshift(p.stack);\n            }\n        }\n        stacks.unshift(error.stack);\n\n        var concatedStacks = stacks.join(\"\\n\" + STACK_JUMP_SEPARATOR + \"\\n\");\n        error.stack = filterStackString(concatedStacks);\n    }\n}\n\nfunction filterStackString(stackString) {\n    var lines = stackString.split(\"\\n\");\n    var desiredLines = [];\n    for (var i = 0; i < lines.length; ++i) {\n        var line = lines[i];\n\n        if (!isInternalFrame(line) && !isNodeFrame(line) && line) {\n            desiredLines.push(line);\n        }\n    }\n    return desiredLines.join(\"\\n\");\n}\n\nfunction isNodeFrame(stackLine) {\n    return stackLine.indexOf(\"(module.js:\") !== -1 ||\n           stackLine.indexOf(\"(node.js:\") !== -1;\n}\n\nfunction getFileNameAndLineNumber(stackLine) {\n    // Named functions: \"at functionName (filename:lineNumber:columnNumber)\"\n    // In IE10 function name can have spaces (\"Anonymous function\") O_o\n    var attempt1 = /at .+ \\((.+):(\\d+):(?:\\d+)\\)$/.exec(stackLine);\n    if (attempt1) {\n        return [attempt1[1], Number(attempt1[2])];\n    }\n\n    // Anonymous functions: \"at filename:lineNumber:columnNumber\"\n    var attempt2 = /at ([^ ]+):(\\d+):(?:\\d+)$/.exec(stackLine);\n    if (attempt2) {\n        return [attempt2[1], Number(attempt2[2])];\n    }\n\n    // Firefox style: \"function@filename:lineNumber or @filename:lineNumber\"\n    var attempt3 = /.*@(.+):(\\d+)$/.exec(stackLine);\n    if (attempt3) {\n        return [attempt3[1], Number(attempt3[2])];\n    }\n}\n\nfunction isInternalFrame(stackLine) {\n    var fileNameAndLineNumber = getFileNameAndLineNumber(stackLine);\n\n    if (!fileNameAndLineNumber) {\n        return false;\n    }\n\n    var fileName = fileNameAndLineNumber[0];\n    var lineNumber = fileNameAndLineNumber[1];\n\n    return fileName === qFileName &&\n        lineNumber >= qStartingLine &&\n        lineNumber <= qEndingLine;\n}\n\n// discover own file name and line number range for filtering stack\n// traces\nfunction captureLine() {\n    if (!hasStacks) {\n        return;\n    }\n\n    try {\n        throw new Error();\n    } catch (e) {\n        var lines = e.stack.split(\"\\n\");\n        var firstLine = lines[0].indexOf(\"@\") > 0 ? lines[1] : lines[2];\n        var fileNameAndLineNumber = getFileNameAndLineNumber(firstLine);\n        if (!fileNameAndLineNumber) {\n            return;\n        }\n\n        qFileName = fileNameAndLineNumber[0];\n        return fileNameAndLineNumber[1];\n    }\n}\n\nfunction deprecate(callback, name, alternative) {\n    return function () {\n        if (typeof console !== \"undefined\" &&\n            typeof console.warn === \"function\") {\n            console.warn(name + \" is deprecated, use \" + alternative +\n                         \" instead.\", new Error(\"\").stack);\n        }\n        return callback.apply(callback, arguments);\n    };\n}\n\n// end of shims\n// beginning of real work\n\n/**\n * Constructs a promise for an immediate reference, passes promises through, or\n * coerces promises from different systems.\n * @param value immediate reference or promise\n */\nfunction Q(value) {\n    // If the object is already a Promise, return it directly.  This enables\n    // the resolve function to both be used to created references from objects,\n    // but to tolerably coerce non-promises to promises.\n    if (value instanceof Promise) {\n        return value;\n    }\n\n    // assimilate thenables\n    if (isPromiseAlike(value)) {\n        return coerce(value);\n    } else {\n        return fulfill(value);\n    }\n}\nQ.resolve = Q;\n\n/**\n * Performs a task in a future turn of the event loop.\n * @param {Function} task\n */\nQ.nextTick = nextTick;\n\n/**\n * Controls whether or not long stack traces will be on\n */\nQ.longStackSupport = false;\n\n// enable long stacks if Q_DEBUG is set\nif (typeof process === \"object\" && process && process.env && process.env.Q_DEBUG) {\n    Q.longStackSupport = true;\n}\n\n/**\n * Constructs a {promise, resolve, reject} object.\n *\n * `resolve` is a callback to invoke with a more resolved value for the\n * promise. To fulfill the promise, invoke `resolve` with any value that is\n * not a thenable. To reject the promise, invoke `resolve` with a rejected\n * thenable, or invoke `reject` with the reason directly. To resolve the\n * promise to another thenable, thus putting it in the same state, invoke\n * `resolve` with that other thenable.\n */\nQ.defer = defer;\nfunction defer() {\n    // if \"messages\" is an \"Array\", that indicates that the promise has not yet\n    // been resolved.  If it is \"undefined\", it has been resolved.  Each\n    // element of the messages array is itself an array of complete arguments to\n    // forward to the resolved promise.  We coerce the resolution value to a\n    // promise using the `resolve` function because it handles both fully\n    // non-thenable values and other thenables gracefully.\n    var messages = [], progressListeners = [], resolvedPromise;\n\n    var deferred = object_create(defer.prototype);\n    var promise = object_create(Promise.prototype);\n\n    promise.promiseDispatch = function (resolve, op, operands) {\n        var args = array_slice(arguments);\n        if (messages) {\n            messages.push(args);\n            if (op === \"when\" && operands[1]) { // progress operand\n                progressListeners.push(operands[1]);\n            }\n        } else {\n            Q.nextTick(function () {\n                resolvedPromise.promiseDispatch.apply(resolvedPromise, args);\n            });\n        }\n    };\n\n    // XXX deprecated\n    promise.valueOf = function () {\n        if (messages) {\n            return promise;\n        }\n        var nearerValue = nearer(resolvedPromise);\n        if (isPromise(nearerValue)) {\n            resolvedPromise = nearerValue; // shorten chain\n        }\n        return nearerValue;\n    };\n\n    promise.inspect = function () {\n        if (!resolvedPromise) {\n            return { state: \"pending\" };\n        }\n        return resolvedPromise.inspect();\n    };\n\n    if (Q.longStackSupport && hasStacks) {\n        try {\n            throw new Error();\n        } catch (e) {\n            // NOTE: don't try to use `Error.captureStackTrace` or transfer the\n            // accessor around; that causes memory leaks as per GH-111. Just\n            // reify the stack trace as a string ASAP.\n            //\n            // At the same time, cut off the first line; it's always just\n            // \"[object Promise]\\n\", as per the `toString`.\n            promise.stack = e.stack.substring(e.stack.indexOf(\"\\n\") + 1);\n        }\n    }\n\n    // NOTE: we do the checks for `resolvedPromise` in each method, instead of\n    // consolidating them into `become`, since otherwise we'd create new\n    // promises with the lines `become(whatever(value))`. See e.g. GH-252.\n\n    function become(newPromise) {\n        resolvedPromise = newPromise;\n        promise.source = newPromise;\n\n        array_reduce(messages, function (undefined, message) {\n            Q.nextTick(function () {\n                newPromise.promiseDispatch.apply(newPromise, message);\n            });\n        }, void 0);\n\n        messages = void 0;\n        progressListeners = void 0;\n    }\n\n    deferred.promise = promise;\n    deferred.resolve = function (value) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(Q(value));\n    };\n\n    deferred.fulfill = function (value) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(fulfill(value));\n    };\n    deferred.reject = function (reason) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(reject(reason));\n    };\n    deferred.notify = function (progress) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        array_reduce(progressListeners, function (undefined, progressListener) {\n            Q.nextTick(function () {\n                progressListener(progress);\n            });\n        }, void 0);\n    };\n\n    return deferred;\n}\n\n/**\n * Creates a Node-style callback that will resolve or reject the deferred\n * promise.\n * @returns a nodeback\n */\ndefer.prototype.makeNodeResolver = function () {\n    var self = this;\n    return function (error, value) {\n        if (error) {\n            self.reject(error);\n        } else if (arguments.length > 2) {\n            self.resolve(array_slice(arguments, 1));\n        } else {\n            self.resolve(value);\n        }\n    };\n};\n\n/**\n * @param resolver {Function} a function that returns nothing and accepts\n * the resolve, reject, and notify functions for a deferred.\n * @returns a promise that may be resolved with the given resolve and reject\n * functions, or rejected by a thrown exception in resolver\n */\nQ.Promise = promise; // ES6\nQ.promise = promise;\nfunction promise(resolver) {\n    if (typeof resolver !== \"function\") {\n        throw new TypeError(\"resolver must be a function.\");\n    }\n    var deferred = defer();\n    try {\n        resolver(deferred.resolve, deferred.reject, deferred.notify);\n    } catch (reason) {\n        deferred.reject(reason);\n    }\n    return deferred.promise;\n}\n\npromise.race = race; // ES6\npromise.all = all; // ES6\npromise.reject = reject; // ES6\npromise.resolve = Q; // ES6\n\n// XXX experimental.  This method is a way to denote that a local value is\n// serializable and should be immediately dispatched to a remote upon request,\n// instead of passing a reference.\nQ.passByCopy = function (object) {\n    //freeze(object);\n    //passByCopies.set(object, true);\n    return object;\n};\n\nPromise.prototype.passByCopy = function () {\n    //freeze(object);\n    //passByCopies.set(object, true);\n    return this;\n};\n\n/**\n * If two promises eventually fulfill to the same value, promises that value,\n * but otherwise rejects.\n * @param x {Any*}\n * @param y {Any*}\n * @returns {Any*} a promise for x and y if they are the same, but a rejection\n * otherwise.\n *\n */\nQ.join = function (x, y) {\n    return Q(x).join(y);\n};\n\nPromise.prototype.join = function (that) {\n    return Q([this, that]).spread(function (x, y) {\n        if (x === y) {\n            // TODO: \"===\" should be Object.is or equiv\n            return x;\n        } else {\n            throw new Error(\"Can't join: not the same: \" + x + \" \" + y);\n        }\n    });\n};\n\n/**\n * Returns a promise for the first of an array of promises to become settled.\n * @param answers {Array[Any*]} promises to race\n * @returns {Any*} the first promise to be settled\n */\nQ.race = race;\nfunction race(answerPs) {\n    return promise(function (resolve, reject) {\n        // Switch to this once we can assume at least ES5\n        // answerPs.forEach(function (answerP) {\n        //     Q(answerP).then(resolve, reject);\n        // });\n        // Use this in the meantime\n        for (var i = 0, len = answerPs.length; i < len; i++) {\n            Q(answerPs[i]).then(resolve, reject);\n        }\n    });\n}\n\nPromise.prototype.race = function () {\n    return this.then(Q.race);\n};\n\n/**\n * Constructs a Promise with a promise descriptor object and optional fallback\n * function.  The descriptor contains methods like when(rejected), get(name),\n * set(name, value), post(name, args), and delete(name), which all\n * return either a value, a promise for a value, or a rejection.  The fallback\n * accepts the operation name, a resolver, and any further arguments that would\n * have been forwarded to the appropriate method above had a method been\n * provided with the proper name.  The API makes no guarantees about the nature\n * of the returned object, apart from that it is usable whereever promises are\n * bought and sold.\n */\nQ.makePromise = Promise;\nfunction Promise(descriptor, fallback, inspect) {\n    if (fallback === void 0) {\n        fallback = function (op) {\n            return reject(new Error(\n                \"Promise does not support operation: \" + op\n            ));\n        };\n    }\n    if (inspect === void 0) {\n        inspect = function () {\n            return {state: \"unknown\"};\n        };\n    }\n\n    var promise = object_create(Promise.prototype);\n\n    promise.promiseDispatch = function (resolve, op, args) {\n        var result;\n        try {\n            if (descriptor[op]) {\n                result = descriptor[op].apply(promise, args);\n            } else {\n                result = fallback.call(promise, op, args);\n            }\n        } catch (exception) {\n            result = reject(exception);\n        }\n        if (resolve) {\n            resolve(result);\n        }\n    };\n\n    promise.inspect = inspect;\n\n    // XXX deprecated `valueOf` and `exception` support\n    if (inspect) {\n        var inspected = inspect();\n        if (inspected.state === \"rejected\") {\n            promise.exception = inspected.reason;\n        }\n\n        promise.valueOf = function () {\n            var inspected = inspect();\n            if (inspected.state === \"pending\" ||\n                inspected.state === \"rejected\") {\n                return promise;\n            }\n            return inspected.value;\n        };\n    }\n\n    return promise;\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.then = function (fulfilled, rejected, progressed) {\n    var self = this;\n    var deferred = defer();\n    var done = false;   // ensure the untrusted promise makes at most a\n                        // single call to one of the callbacks\n\n    function _fulfilled(value) {\n        try {\n            return typeof fulfilled === \"function\" ? fulfilled(value) : value;\n        } catch (exception) {\n            return reject(exception);\n        }\n    }\n\n    function _rejected(exception) {\n        if (typeof rejected === \"function\") {\n            makeStackTraceLong(exception, self);\n            try {\n                return rejected(exception);\n            } catch (newException) {\n                return reject(newException);\n            }\n        }\n        return reject(exception);\n    }\n\n    function _progressed(value) {\n        return typeof progressed === \"function\" ? progressed(value) : value;\n    }\n\n    Q.nextTick(function () {\n        self.promiseDispatch(function (value) {\n            if (done) {\n                return;\n            }\n            done = true;\n\n            deferred.resolve(_fulfilled(value));\n        }, \"when\", [function (exception) {\n            if (done) {\n                return;\n            }\n            done = true;\n\n            deferred.resolve(_rejected(exception));\n        }]);\n    });\n\n    // Progress propagator need to be attached in the current tick.\n    self.promiseDispatch(void 0, \"when\", [void 0, function (value) {\n        var newValue;\n        var threw = false;\n        try {\n            newValue = _progressed(value);\n        } catch (e) {\n            threw = true;\n            if (Q.onerror) {\n                Q.onerror(e);\n            } else {\n                throw e;\n            }\n        }\n\n        if (!threw) {\n            deferred.notify(newValue);\n        }\n    }]);\n\n    return deferred.promise;\n};\n\nQ.tap = function (promise, callback) {\n    return Q(promise).tap(callback);\n};\n\n/**\n * Works almost like \"finally\", but not called for rejections.\n * Original resolution value is passed through callback unaffected.\n * Callback may return a promise that will be awaited for.\n * @param {Function} callback\n * @returns {Q.Promise}\n * @example\n * doSomething()\n *   .then(...)\n *   .tap(console.log)\n *   .then(...);\n */\nPromise.prototype.tap = function (callback) {\n    callback = Q(callback);\n\n    return this.then(function (value) {\n        return callback.fcall(value).thenResolve(value);\n    });\n};\n\n/**\n * Registers an observer on a promise.\n *\n * Guarantees:\n *\n * 1. that fulfilled and rejected will be called only once.\n * 2. that either the fulfilled callback or the rejected callback will be\n *    called, but not both.\n * 3. that fulfilled and rejected will not be called in this turn.\n *\n * @param value      promise or immediate reference to observe\n * @param fulfilled  function to be called with the fulfilled value\n * @param rejected   function to be called with the rejection exception\n * @param progressed function to be called on any progress notifications\n * @return promise for the return value from the invoked callback\n */\nQ.when = when;\nfunction when(value, fulfilled, rejected, progressed) {\n    return Q(value).then(fulfilled, rejected, progressed);\n}\n\nPromise.prototype.thenResolve = function (value) {\n    return this.then(function () { return value; });\n};\n\nQ.thenResolve = function (promise, value) {\n    return Q(promise).thenResolve(value);\n};\n\nPromise.prototype.thenReject = function (reason) {\n    return this.then(function () { throw reason; });\n};\n\nQ.thenReject = function (promise, reason) {\n    return Q(promise).thenReject(reason);\n};\n\n/**\n * If an object is not a promise, it is as \"near\" as possible.\n * If a promise is rejected, it is as \"near\" as possible too.\n * If it’s a fulfilled promise, the fulfillment value is nearer.\n * If it’s a deferred promise and the deferred has been resolved, the\n * resolution is \"nearer\".\n * @param object\n * @returns most resolved (nearest) form of the object\n */\n\n// XXX should we re-do this?\nQ.nearer = nearer;\nfunction nearer(value) {\n    if (isPromise(value)) {\n        var inspected = value.inspect();\n        if (inspected.state === \"fulfilled\") {\n            return inspected.value;\n        }\n    }\n    return value;\n}\n\n/**\n * @returns whether the given object is a promise.\n * Otherwise it is a fulfilled value.\n */\nQ.isPromise = isPromise;\nfunction isPromise(object) {\n    return object instanceof Promise;\n}\n\nQ.isPromiseAlike = isPromiseAlike;\nfunction isPromiseAlike(object) {\n    return isObject(object) && typeof object.then === \"function\";\n}\n\n/**\n * @returns whether the given object is a pending promise, meaning not\n * fulfilled or rejected.\n */\nQ.isPending = isPending;\nfunction isPending(object) {\n    return isPromise(object) && object.inspect().state === \"pending\";\n}\n\nPromise.prototype.isPending = function () {\n    return this.inspect().state === \"pending\";\n};\n\n/**\n * @returns whether the given object is a value or fulfilled\n * promise.\n */\nQ.isFulfilled = isFulfilled;\nfunction isFulfilled(object) {\n    return !isPromise(object) || object.inspect().state === \"fulfilled\";\n}\n\nPromise.prototype.isFulfilled = function () {\n    return this.inspect().state === \"fulfilled\";\n};\n\n/**\n * @returns whether the given object is a rejected promise.\n */\nQ.isRejected = isRejected;\nfunction isRejected(object) {\n    return isPromise(object) && object.inspect().state === \"rejected\";\n}\n\nPromise.prototype.isRejected = function () {\n    return this.inspect().state === \"rejected\";\n};\n\n//// BEGIN UNHANDLED REJECTION TRACKING\n\n// This promise library consumes exceptions thrown in handlers so they can be\n// handled by a subsequent promise.  The exceptions get added to this array when\n// they are created, and removed when they are handled.  Note that in ES6 or\n// shimmed environments, this would naturally be a `Set`.\nvar unhandledReasons = [];\nvar unhandledRejections = [];\nvar reportedUnhandledRejections = [];\nvar trackUnhandledRejections = true;\n\nfunction resetUnhandledRejections() {\n    unhandledReasons.length = 0;\n    unhandledRejections.length = 0;\n\n    if (!trackUnhandledRejections) {\n        trackUnhandledRejections = true;\n    }\n}\n\nfunction trackRejection(promise, reason) {\n    if (!trackUnhandledRejections) {\n        return;\n    }\n    if (typeof process === \"object\" && typeof process.emit === \"function\") {\n        Q.nextTick.runAfter(function () {\n            if (array_indexOf(unhandledRejections, promise) !== -1) {\n                process.emit(\"unhandledRejection\", reason, promise);\n                reportedUnhandledRejections.push(promise);\n            }\n        });\n    }\n\n    unhandledRejections.push(promise);\n    if (reason && typeof reason.stack !== \"undefined\") {\n        unhandledReasons.push(reason.stack);\n    } else {\n        unhandledReasons.push(\"(no stack) \" + reason);\n    }\n}\n\nfunction untrackRejection(promise) {\n    if (!trackUnhandledRejections) {\n        return;\n    }\n\n    var at = array_indexOf(unhandledRejections, promise);\n    if (at !== -1) {\n        if (typeof process === \"object\" && typeof process.emit === \"function\") {\n            Q.nextTick.runAfter(function () {\n                var atReport = array_indexOf(reportedUnhandledRejections, promise);\n                if (atReport !== -1) {\n                    process.emit(\"rejectionHandled\", unhandledReasons[at], promise);\n                    reportedUnhandledRejections.splice(atReport, 1);\n                }\n            });\n        }\n        unhandledRejections.splice(at, 1);\n        unhandledReasons.splice(at, 1);\n    }\n}\n\nQ.resetUnhandledRejections = resetUnhandledRejections;\n\nQ.getUnhandledReasons = function () {\n    // Make a copy so that consumers can't interfere with our internal state.\n    return unhandledReasons.slice();\n};\n\nQ.stopUnhandledRejectionTracking = function () {\n    resetUnhandledRejections();\n    trackUnhandledRejections = false;\n};\n\nresetUnhandledRejections();\n\n//// END UNHANDLED REJECTION TRACKING\n\n/**\n * Constructs a rejected promise.\n * @param reason value describing the failure\n */\nQ.reject = reject;\nfunction reject(reason) {\n    var rejection = Promise({\n        \"when\": function (rejected) {\n            // note that the error has been handled\n            if (rejected) {\n                untrackRejection(this);\n            }\n            return rejected ? rejected(reason) : this;\n        }\n    }, function fallback() {\n        return this;\n    }, function inspect() {\n        return { state: \"rejected\", reason: reason };\n    });\n\n    // Note that the reason has not been handled.\n    trackRejection(rejection, reason);\n\n    return rejection;\n}\n\n/**\n * Constructs a fulfilled promise for an immediate reference.\n * @param value immediate reference\n */\nQ.fulfill = fulfill;\nfunction fulfill(value) {\n    return Promise({\n        \"when\": function () {\n            return value;\n        },\n        \"get\": function (name) {\n            return value[name];\n        },\n        \"set\": function (name, rhs) {\n            value[name] = rhs;\n        },\n        \"delete\": function (name) {\n            delete value[name];\n        },\n        \"post\": function (name, args) {\n            // Mark Miller proposes that post with no name should apply a\n            // promised function.\n            if (name === null || name === void 0) {\n                return value.apply(void 0, args);\n            } else {\n                return value[name].apply(value, args);\n            }\n        },\n        \"apply\": function (thisp, args) {\n            return value.apply(thisp, args);\n        },\n        \"keys\": function () {\n            return object_keys(value);\n        }\n    }, void 0, function inspect() {\n        return { state: \"fulfilled\", value: value };\n    });\n}\n\n/**\n * Converts thenables to Q promises.\n * @param promise thenable promise\n * @returns a Q promise\n */\nfunction coerce(promise) {\n    var deferred = defer();\n    Q.nextTick(function () {\n        try {\n            promise.then(deferred.resolve, deferred.reject, deferred.notify);\n        } catch (exception) {\n            deferred.reject(exception);\n        }\n    });\n    return deferred.promise;\n}\n\n/**\n * Annotates an object such that it will never be\n * transferred away from this process over any promise\n * communication channel.\n * @param object\n * @returns promise a wrapping of that object that\n * additionally responds to the \"isDef\" message\n * without a rejection.\n */\nQ.master = master;\nfunction master(object) {\n    return Promise({\n        \"isDef\": function () {}\n    }, function fallback(op, args) {\n        return dispatch(object, op, args);\n    }, function () {\n        return Q(object).inspect();\n    });\n}\n\n/**\n * Spreads the values of a promised array of arguments into the\n * fulfillment callback.\n * @param fulfilled callback that receives variadic arguments from the\n * promised array\n * @param rejected callback that receives the exception if the promise\n * is rejected.\n * @returns a promise for the return value or thrown exception of\n * either callback.\n */\nQ.spread = spread;\nfunction spread(value, fulfilled, rejected) {\n    return Q(value).spread(fulfilled, rejected);\n}\n\nPromise.prototype.spread = function (fulfilled, rejected) {\n    return this.all().then(function (array) {\n        return fulfilled.apply(void 0, array);\n    }, rejected);\n};\n\n/**\n * The async function is a decorator for generator functions, turning\n * them into asynchronous generators.  Although generators are only part\n * of the newest ECMAScript 6 drafts, this code does not cause syntax\n * errors in older engines.  This code should continue to work and will\n * in fact improve over time as the language improves.\n *\n * ES6 generators are currently part of V8 version 3.19 with the\n * --harmony-generators runtime flag enabled.  SpiderMonkey has had them\n * for longer, but under an older Python-inspired form.  This function\n * works on both kinds of generators.\n *\n * Decorates a generator function such that:\n *  - it may yield promises\n *  - execution will continue when that promise is fulfilled\n *  - the value of the yield expression will be the fulfilled value\n *  - it returns a promise for the return value (when the generator\n *    stops iterating)\n *  - the decorated function returns a promise for the return value\n *    of the generator or the first rejected promise among those\n *    yielded.\n *  - if an error is thrown in the generator, it propagates through\n *    every following yield until it is caught, or until it escapes\n *    the generator function altogether, and is translated into a\n *    rejection for the promise returned by the decorated generator.\n */\nQ.async = async;\nfunction async(makeGenerator) {\n    return function () {\n        // when verb is \"send\", arg is a value\n        // when verb is \"throw\", arg is an exception\n        function continuer(verb, arg) {\n            var result;\n\n            // Until V8 3.19 / Chromium 29 is released, SpiderMonkey is the only\n            // engine that has a deployed base of browsers that support generators.\n            // However, SM's generators use the Python-inspired semantics of\n            // outdated ES6 drafts.  We would like to support ES6, but we'd also\n            // like to make it possible to use generators in deployed browsers, so\n            // we also support Python-style generators.  At some point we can remove\n            // this block.\n\n            if (typeof StopIteration === \"undefined\") {\n                // ES6 Generators\n                try {\n                    result = generator[verb](arg);\n                } catch (exception) {\n                    return reject(exception);\n                }\n                if (result.done) {\n                    return Q(result.value);\n                } else {\n                    return when(result.value, callback, errback);\n                }\n            } else {\n                // SpiderMonkey Generators\n                // FIXME: Remove this case when SM does ES6 generators.\n                try {\n                    result = generator[verb](arg);\n                } catch (exception) {\n                    if (isStopIteration(exception)) {\n                        return Q(exception.value);\n                    } else {\n                        return reject(exception);\n                    }\n                }\n                return when(result, callback, errback);\n            }\n        }\n        var generator = makeGenerator.apply(this, arguments);\n        var callback = continuer.bind(continuer, \"next\");\n        var errback = continuer.bind(continuer, \"throw\");\n        return callback();\n    };\n}\n\n/**\n * The spawn function is a small wrapper around async that immediately\n * calls the generator and also ends the promise chain, so that any\n * unhandled errors are thrown instead of forwarded to the error\n * handler. This is useful because it's extremely common to run\n * generators at the top-level to work with libraries.\n */\nQ.spawn = spawn;\nfunction spawn(makeGenerator) {\n    Q.done(Q.async(makeGenerator)());\n}\n\n// FIXME: Remove this interface once ES6 generators are in SpiderMonkey.\n/**\n * Throws a ReturnValue exception to stop an asynchronous generator.\n *\n * This interface is a stop-gap measure to support generator return\n * values in older Firefox/SpiderMonkey.  In browsers that support ES6\n * generators like Chromium 29, just use \"return\" in your generator\n * functions.\n *\n * @param value the return value for the surrounding generator\n * @throws ReturnValue exception with the value.\n * @example\n * // ES6 style\n * Q.async(function* () {\n *      var foo = yield getFooPromise();\n *      var bar = yield getBarPromise();\n *      return foo + bar;\n * })\n * // Older SpiderMonkey style\n * Q.async(function () {\n *      var foo = yield getFooPromise();\n *      var bar = yield getBarPromise();\n *      Q.return(foo + bar);\n * })\n */\nQ[\"return\"] = _return;\nfunction _return(value) {\n    throw new QReturnValue(value);\n}\n\n/**\n * The promised function decorator ensures that any promise arguments\n * are settled and passed as values (`this` is also settled and passed\n * as a value).  It will also ensure that the result of a function is\n * always a promise.\n *\n * @example\n * var add = Q.promised(function (a, b) {\n *     return a + b;\n * });\n * add(Q(a), Q(B));\n *\n * @param {function} callback The function to decorate\n * @returns {function} a function that has been decorated.\n */\nQ.promised = promised;\nfunction promised(callback) {\n    return function () {\n        return spread([this, all(arguments)], function (self, args) {\n            return callback.apply(self, args);\n        });\n    };\n}\n\n/**\n * sends a message to a value in a future turn\n * @param object* the recipient\n * @param op the name of the message operation, e.g., \"when\",\n * @param args further arguments to be forwarded to the operation\n * @returns result {Promise} a promise for the result of the operation\n */\nQ.dispatch = dispatch;\nfunction dispatch(object, op, args) {\n    return Q(object).dispatch(op, args);\n}\n\nPromise.prototype.dispatch = function (op, args) {\n    var self = this;\n    var deferred = defer();\n    Q.nextTick(function () {\n        self.promiseDispatch(deferred.resolve, op, args);\n    });\n    return deferred.promise;\n};\n\n/**\n * Gets the value of a property in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of property to get\n * @return promise for the property value\n */\nQ.get = function (object, key) {\n    return Q(object).dispatch(\"get\", [key]);\n};\n\nPromise.prototype.get = function (key) {\n    return this.dispatch(\"get\", [key]);\n};\n\n/**\n * Sets the value of a property in a future turn.\n * @param object    promise or immediate reference for object object\n * @param name      name of property to set\n * @param value     new value of property\n * @return promise for the return value\n */\nQ.set = function (object, key, value) {\n    return Q(object).dispatch(\"set\", [key, value]);\n};\n\nPromise.prototype.set = function (key, value) {\n    return this.dispatch(\"set\", [key, value]);\n};\n\n/**\n * Deletes a property in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of property to delete\n * @return promise for the return value\n */\nQ.del = // XXX legacy\nQ[\"delete\"] = function (object, key) {\n    return Q(object).dispatch(\"delete\", [key]);\n};\n\nPromise.prototype.del = // XXX legacy\nPromise.prototype[\"delete\"] = function (key) {\n    return this.dispatch(\"delete\", [key]);\n};\n\n/**\n * Invokes a method in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of method to invoke\n * @param value     a value to post, typically an array of\n *                  invocation arguments for promises that\n *                  are ultimately backed with `resolve` values,\n *                  as opposed to those backed with URLs\n *                  wherein the posted value can be any\n *                  JSON serializable object.\n * @return promise for the return value\n */\n// bound locally because it is used by other methods\nQ.mapply = // XXX As proposed by \"Redsandro\"\nQ.post = function (object, name, args) {\n    return Q(object).dispatch(\"post\", [name, args]);\n};\n\nPromise.prototype.mapply = // XXX As proposed by \"Redsandro\"\nPromise.prototype.post = function (name, args) {\n    return this.dispatch(\"post\", [name, args]);\n};\n\n/**\n * Invokes a method in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of method to invoke\n * @param ...args   array of invocation arguments\n * @return promise for the return value\n */\nQ.send = // XXX Mark Miller's proposed parlance\nQ.mcall = // XXX As proposed by \"Redsandro\"\nQ.invoke = function (object, name /*...args*/) {\n    return Q(object).dispatch(\"post\", [name, array_slice(arguments, 2)]);\n};\n\nPromise.prototype.send = // XXX Mark Miller's proposed parlance\nPromise.prototype.mcall = // XXX As proposed by \"Redsandro\"\nPromise.prototype.invoke = function (name /*...args*/) {\n    return this.dispatch(\"post\", [name, array_slice(arguments, 1)]);\n};\n\n/**\n * Applies the promised function in a future turn.\n * @param object    promise or immediate reference for target function\n * @param args      array of application arguments\n */\nQ.fapply = function (object, args) {\n    return Q(object).dispatch(\"apply\", [void 0, args]);\n};\n\nPromise.prototype.fapply = function (args) {\n    return this.dispatch(\"apply\", [void 0, args]);\n};\n\n/**\n * Calls the promised function in a future turn.\n * @param object    promise or immediate reference for target function\n * @param ...args   array of application arguments\n */\nQ[\"try\"] =\nQ.fcall = function (object /* ...args*/) {\n    return Q(object).dispatch(\"apply\", [void 0, array_slice(arguments, 1)]);\n};\n\nPromise.prototype.fcall = function (/*...args*/) {\n    return this.dispatch(\"apply\", [void 0, array_slice(arguments)]);\n};\n\n/**\n * Binds the promised function, transforming return values into a fulfilled\n * promise and thrown errors into a rejected one.\n * @param object    promise or immediate reference for target function\n * @param ...args   array of application arguments\n */\nQ.fbind = function (object /*...args*/) {\n    var promise = Q(object);\n    var args = array_slice(arguments, 1);\n    return function fbound() {\n        return promise.dispatch(\"apply\", [\n            this,\n            args.concat(array_slice(arguments))\n        ]);\n    };\n};\nPromise.prototype.fbind = function (/*...args*/) {\n    var promise = this;\n    var args = array_slice(arguments);\n    return function fbound() {\n        return promise.dispatch(\"apply\", [\n            this,\n            args.concat(array_slice(arguments))\n        ]);\n    };\n};\n\n/**\n * Requests the names of the owned properties of a promised\n * object in a future turn.\n * @param object    promise or immediate reference for target object\n * @return promise for the keys of the eventually settled object\n */\nQ.keys = function (object) {\n    return Q(object).dispatch(\"keys\", []);\n};\n\nPromise.prototype.keys = function () {\n    return this.dispatch(\"keys\", []);\n};\n\n/**\n * Turns an array of promises into a promise for an array.  If any of\n * the promises gets rejected, the whole array is rejected immediately.\n * @param {Array*} an array (or promise for an array) of values (or\n * promises for values)\n * @returns a promise for an array of the corresponding values\n */\n// By Mark Miller\n// http://wiki.ecmascript.org/doku.php?id=strawman:concurrency&rev=1308776521#allfulfilled\nQ.all = all;\nfunction all(promises) {\n    return when(promises, function (promises) {\n        var pendingCount = 0;\n        var deferred = defer();\n        array_reduce(promises, function (undefined, promise, index) {\n            var snapshot;\n            if (\n                isPromise(promise) &&\n                (snapshot = promise.inspect()).state === \"fulfilled\"\n            ) {\n                promises[index] = snapshot.value;\n            } else {\n                ++pendingCount;\n                when(\n                    promise,\n                    function (value) {\n                        promises[index] = value;\n                        if (--pendingCount === 0) {\n                            deferred.resolve(promises);\n                        }\n                    },\n                    deferred.reject,\n                    function (progress) {\n                        deferred.notify({ index: index, value: progress });\n                    }\n                );\n            }\n        }, void 0);\n        if (pendingCount === 0) {\n            deferred.resolve(promises);\n        }\n        return deferred.promise;\n    });\n}\n\nPromise.prototype.all = function () {\n    return all(this);\n};\n\n/**\n * Returns the first resolved promise of an array. Prior rejected promises are\n * ignored.  Rejects only if all promises are rejected.\n * @param {Array*} an array containing values or promises for values\n * @returns a promise fulfilled with the value of the first resolved promise,\n * or a rejected promise if all promises are rejected.\n */\nQ.any = any;\n\nfunction any(promises) {\n    if (promises.length === 0) {\n        return Q.resolve();\n    }\n\n    var deferred = Q.defer();\n    var pendingCount = 0;\n    array_reduce(promises, function (prev, current, index) {\n        var promise = promises[index];\n\n        pendingCount++;\n\n        when(promise, onFulfilled, onRejected, onProgress);\n        function onFulfilled(result) {\n            deferred.resolve(result);\n        }\n        function onRejected() {\n            pendingCount--;\n            if (pendingCount === 0) {\n                deferred.reject(new Error(\n                    \"Can't get fulfillment value from any promise, all \" +\n                    \"promises were rejected.\"\n                ));\n            }\n        }\n        function onProgress(progress) {\n            deferred.notify({\n                index: index,\n                value: progress\n            });\n        }\n    }, undefined);\n\n    return deferred.promise;\n}\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n/**\n * Waits for all promises to be settled, either fulfilled or\n * rejected.  This is distinct from `all` since that would stop\n * waiting at the first rejection.  The promise returned by\n * `allResolved` will never be rejected.\n * @param promises a promise for an array (or an array) of promises\n * (or values)\n * @return a promise for an array of promises\n */\nQ.allResolved = deprecate(allResolved, \"allResolved\", \"allSettled\");\nfunction allResolved(promises) {\n    return when(promises, function (promises) {\n        promises = array_map(promises, Q);\n        return when(all(array_map(promises, function (promise) {\n            return when(promise, noop, noop);\n        })), function () {\n            return promises;\n        });\n    });\n}\n\nPromise.prototype.allResolved = function () {\n    return allResolved(this);\n};\n\n/**\n * @see Promise#allSettled\n */\nQ.allSettled = allSettled;\nfunction allSettled(promises) {\n    return Q(promises).allSettled();\n}\n\n/**\n * Turns an array of promises into a promise for an array of their states (as\n * returned by `inspect`) when they have all settled.\n * @param {Array[Any*]} values an array (or promise for an array) of values (or\n * promises for values)\n * @returns {Array[State]} an array of states for the respective values.\n */\nPromise.prototype.allSettled = function () {\n    return this.then(function (promises) {\n        return all(array_map(promises, function (promise) {\n            promise = Q(promise);\n            function regardless() {\n                return promise.inspect();\n            }\n            return promise.then(regardless, regardless);\n        }));\n    });\n};\n\n/**\n * Captures the failure of a promise, giving an oportunity to recover\n * with a callback.  If the given promise is fulfilled, the returned\n * promise is fulfilled.\n * @param {Any*} promise for something\n * @param {Function} callback to fulfill the returned promise if the\n * given promise is rejected\n * @returns a promise for the return value of the callback\n */\nQ.fail = // XXX legacy\nQ[\"catch\"] = function (object, rejected) {\n    return Q(object).then(void 0, rejected);\n};\n\nPromise.prototype.fail = // XXX legacy\nPromise.prototype[\"catch\"] = function (rejected) {\n    return this.then(void 0, rejected);\n};\n\n/**\n * Attaches a listener that can respond to progress notifications from a\n * promise's originating deferred. This listener receives the exact arguments\n * passed to ``deferred.notify``.\n * @param {Any*} promise for something\n * @param {Function} callback to receive any progress notifications\n * @returns the given promise, unchanged\n */\nQ.progress = progress;\nfunction progress(object, progressed) {\n    return Q(object).then(void 0, void 0, progressed);\n}\n\nPromise.prototype.progress = function (progressed) {\n    return this.then(void 0, void 0, progressed);\n};\n\n/**\n * Provides an opportunity to observe the settling of a promise,\n * regardless of whether the promise is fulfilled or rejected.  Forwards\n * the resolution to the returned promise when the callback is done.\n * The callback can return a promise to defer completion.\n * @param {Any*} promise\n * @param {Function} callback to observe the resolution of the given\n * promise, takes no arguments.\n * @returns a promise for the resolution of the given promise when\n * ``fin`` is done.\n */\nQ.fin = // XXX legacy\nQ[\"finally\"] = function (object, callback) {\n    return Q(object)[\"finally\"](callback);\n};\n\nPromise.prototype.fin = // XXX legacy\nPromise.prototype[\"finally\"] = function (callback) {\n    callback = Q(callback);\n    return this.then(function (value) {\n        return callback.fcall().then(function () {\n            return value;\n        });\n    }, function (reason) {\n        // TODO attempt to recycle the rejection with \"this\".\n        return callback.fcall().then(function () {\n            throw reason;\n        });\n    });\n};\n\n/**\n * Terminates a chain of promises, forcing rejections to be\n * thrown as exceptions.\n * @param {Any*} promise at the end of a chain of promises\n * @returns nothing\n */\nQ.done = function (object, fulfilled, rejected, progress) {\n    return Q(object).done(fulfilled, rejected, progress);\n};\n\nPromise.prototype.done = function (fulfilled, rejected, progress) {\n    var onUnhandledError = function (error) {\n        // forward to a future turn so that ``when``\n        // does not catch it and turn it into a rejection.\n        Q.nextTick(function () {\n            makeStackTraceLong(error, promise);\n            if (Q.onerror) {\n                Q.onerror(error);\n            } else {\n                throw error;\n            }\n        });\n    };\n\n    // Avoid unnecessary `nextTick`ing via an unnecessary `when`.\n    var promise = fulfilled || rejected || progress ?\n        this.then(fulfilled, rejected, progress) :\n        this;\n\n    if (typeof process === \"object\" && process && process.domain) {\n        onUnhandledError = process.domain.bind(onUnhandledError);\n    }\n\n    promise.then(void 0, onUnhandledError);\n};\n\n/**\n * Causes a promise to be rejected if it does not get fulfilled before\n * some milliseconds time out.\n * @param {Any*} promise\n * @param {Number} milliseconds timeout\n * @param {Any*} custom error message or Error object (optional)\n * @returns a promise for the resolution of the given promise if it is\n * fulfilled before the timeout, otherwise rejected.\n */\nQ.timeout = function (object, ms, error) {\n    return Q(object).timeout(ms, error);\n};\n\nPromise.prototype.timeout = function (ms, error) {\n    var deferred = defer();\n    var timeoutId = setTimeout(function () {\n        if (!error || \"string\" === typeof error) {\n            error = new Error(error || \"Timed out after \" + ms + \" ms\");\n            error.code = \"ETIMEDOUT\";\n        }\n        deferred.reject(error);\n    }, ms);\n\n    this.then(function (value) {\n        clearTimeout(timeoutId);\n        deferred.resolve(value);\n    }, function (exception) {\n        clearTimeout(timeoutId);\n        deferred.reject(exception);\n    }, deferred.notify);\n\n    return deferred.promise;\n};\n\n/**\n * Returns a promise for the given value (or promised value), some\n * milliseconds after it resolved. Passes rejections immediately.\n * @param {Any*} promise\n * @param {Number} milliseconds\n * @returns a promise for the resolution of the given promise after milliseconds\n * time has elapsed since the resolution of the given promise.\n * If the given promise rejects, that is passed immediately.\n */\nQ.delay = function (object, timeout) {\n    if (timeout === void 0) {\n        timeout = object;\n        object = void 0;\n    }\n    return Q(object).delay(timeout);\n};\n\nPromise.prototype.delay = function (timeout) {\n    return this.then(function (value) {\n        var deferred = defer();\n        setTimeout(function () {\n            deferred.resolve(value);\n        }, timeout);\n        return deferred.promise;\n    });\n};\n\n/**\n * Passes a continuation to a Node function, which is called with the given\n * arguments provided as an array, and returns a promise.\n *\n *      Q.nfapply(FS.readFile, [__filename])\n *      .then(function (content) {\n *      })\n *\n */\nQ.nfapply = function (callback, args) {\n    return Q(callback).nfapply(args);\n};\n\nPromise.prototype.nfapply = function (args) {\n    var deferred = defer();\n    var nodeArgs = array_slice(args);\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.fapply(nodeArgs).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Passes a continuation to a Node function, which is called with the given\n * arguments provided individually, and returns a promise.\n * @example\n * Q.nfcall(FS.readFile, __filename)\n * .then(function (content) {\n * })\n *\n */\nQ.nfcall = function (callback /*...args*/) {\n    var args = array_slice(arguments, 1);\n    return Q(callback).nfapply(args);\n};\n\nPromise.prototype.nfcall = function (/*...args*/) {\n    var nodeArgs = array_slice(arguments);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.fapply(nodeArgs).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Wraps a NodeJS continuation passing function and returns an equivalent\n * version that returns a promise.\n * @example\n * Q.nfbind(FS.readFile, __filename)(\"utf-8\")\n * .then(console.log)\n * .done()\n */\nQ.nfbind =\nQ.denodeify = function (callback /*...args*/) {\n    var baseArgs = array_slice(arguments, 1);\n    return function () {\n        var nodeArgs = baseArgs.concat(array_slice(arguments));\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        Q(callback).fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\n    };\n};\n\nPromise.prototype.nfbind =\nPromise.prototype.denodeify = function (/*...args*/) {\n    var args = array_slice(arguments);\n    args.unshift(this);\n    return Q.denodeify.apply(void 0, args);\n};\n\nQ.nbind = function (callback, thisp /*...args*/) {\n    var baseArgs = array_slice(arguments, 2);\n    return function () {\n        var nodeArgs = baseArgs.concat(array_slice(arguments));\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        function bound() {\n            return callback.apply(thisp, arguments);\n        }\n        Q(bound).fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\n    };\n};\n\nPromise.prototype.nbind = function (/*thisp, ...args*/) {\n    var args = array_slice(arguments, 0);\n    args.unshift(this);\n    return Q.nbind.apply(void 0, args);\n};\n\n/**\n * Calls a method of a Node-style object that accepts a Node-style\n * callback with a given array of arguments, plus a provided callback.\n * @param object an object that has the named method\n * @param {String} name name of the method of object\n * @param {Array} args arguments to pass to the method; the callback\n * will be provided by Q and appended to these arguments.\n * @returns a promise for the value or error\n */\nQ.nmapply = // XXX As proposed by \"Redsandro\"\nQ.npost = function (object, name, args) {\n    return Q(object).npost(name, args);\n};\n\nPromise.prototype.nmapply = // XXX As proposed by \"Redsandro\"\nPromise.prototype.npost = function (name, args) {\n    var nodeArgs = array_slice(args || []);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Calls a method of a Node-style object that accepts a Node-style\n * callback, forwarding the given variadic arguments, plus a provided\n * callback argument.\n * @param object an object that has the named method\n * @param {String} name name of the method of object\n * @param ...args arguments to pass to the method; the callback will\n * be provided by Q and appended to these arguments.\n * @returns a promise for the value or error\n */\nQ.nsend = // XXX Based on Mark Miller's proposed \"send\"\nQ.nmcall = // XXX Based on \"Redsandro's\" proposal\nQ.ninvoke = function (object, name /*...args*/) {\n    var nodeArgs = array_slice(arguments, 2);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    Q(object).dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\nPromise.prototype.nsend = // XXX Based on Mark Miller's proposed \"send\"\nPromise.prototype.nmcall = // XXX Based on \"Redsandro's\" proposal\nPromise.prototype.ninvoke = function (name /*...args*/) {\n    var nodeArgs = array_slice(arguments, 1);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * If a function would like to support both Node continuation-passing-style and\n * promise-returning-style, it can end its internal promise chain with\n * `nodeify(nodeback)`, forwarding the optional nodeback argument.  If the user\n * elects to use a nodeback, the result will be sent there.  If they do not\n * pass a nodeback, they will receive the result promise.\n * @param object a result (or a promise for a result)\n * @param {Function} nodeback a Node.js-style callback\n * @returns either the promise or nothing\n */\nQ.nodeify = nodeify;\nfunction nodeify(object, nodeback) {\n    return Q(object).nodeify(nodeback);\n}\n\nPromise.prototype.nodeify = function (nodeback) {\n    if (nodeback) {\n        this.then(function (value) {\n            Q.nextTick(function () {\n                nodeback(null, value);\n            });\n        }, function (error) {\n            Q.nextTick(function () {\n                nodeback(error);\n            });\n        });\n    } else {\n        return this;\n    }\n};\n\nQ.noConflict = function() {\n    throw new Error(\"Q.noConflict only works when Q is used as a global\");\n};\n\n// All code before this point will be filtered from stack traces.\nvar qEndingLine = captureLine();\n\nreturn Q;\n\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/q/q.js\n ** module id = 16\n ** module chunks = 0\n **/","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/process/browser.js\n ** module id = 17\n ** module chunks = 0\n **/","var nextTick = require('process/browser.js').nextTick;\nvar apply = Function.prototype.apply;\nvar slice = Array.prototype.slice;\nvar immediateIds = {};\nvar nextImmediateId = 0;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) { timeout.close(); };\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// That's not how node.js implements it but the exposed api is the same.\nexports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\n  var id = nextImmediateId++;\n  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n\n  immediateIds[id] = true;\n\n  nextTick(function onNextTick() {\n    if (immediateIds[id]) {\n      // fn.call() is faster so we optimize for the common use-case\n      // @see http://jsperf.com/call-apply-segu\n      if (args) {\n        fn.apply(null, args);\n      } else {\n        fn.call(null);\n      }\n      // Prevent ids from leaking\n      exports.clearImmediate(id);\n    }\n  });\n\n  return id;\n};\n\nexports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\n  delete immediateIds[id];\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/timers-browserify/main.js\n ** module id = 18\n ** module chunks = 0\n **/","import loglevel from 'loglevel';\r\n\r\nloglevel.enableAll();\r\n/**\r\n * @namespace flatworld\r\n * @class log\r\n * @requires loglevel.js for frontend logging, or something similar\r\n **/\r\nconst log = {\r\n  debug(e) {\r\n    loglevel.debug(e);\r\n  },\r\n  error(e) {\r\n    loglevel.error(e);\r\n  }\r\n};\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default log;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/log.js\n **/","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n\n    function realMethod(methodName) {\n        if (typeof console === undefinedType) {\n            return false; // We can't build a real method without a console to log to\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // these private functions always need `this` to be set properly\n\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n    }\n\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n      var storageKey = \"loglevel\";\n      if (name) {\n        storageKey += \":\" + name;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      /*\n       *\n       * Public API\n       *\n       */\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Package-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if (typeof name !== \"string\" || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    return defaultLogger;\n}));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/loglevel/lib/loglevel.js\n ** module id = 20\n ** module chunks = 0\n **/","/*---------------------\r\n------- IMPORT --------\r\n----------------------*/\r\nimport 'whatwg-fetch';\r\nimport { log as mapLog } from './index';\r\n\r\n/*---------------------\r\n-------- PUBLIC -------\r\n----------------------*/\r\n/**\r\n * Singleton. Uses JSON only data flow\r\n *\r\n * @namespace flatworld\r\n * @class mapApi\r\n * @static\r\n */\r\nconst mapAPI = (function() {\r\n  const APIs = {};\r\n\r\n  /*---------------------\r\n  --------- API ---------\r\n  ----------------------*/\r\n  return {\r\n    get,\r\n    post,\r\n    add,\r\n    remove,\r\n    update,\r\n    getAllAPIs\r\n  };\r\n\r\n  /*---------------------\r\n  -------- PUBLIC -------\r\n  ----------------------*/\r\n  /**\r\n   * Get data from server\r\n   *\r\n   * @method get\r\n   * @param  {String} name    The indentifier for this API call / endpoint\r\n   * @param  {Array} params   Params that are sent to the callbacks that have been attached to\r\n   * handle this API data\r\n   * @return {Promise}        ES6 native Promise as the API advances\r\n   */\r\n  function get(type, params) {\r\n    return _doFetch('get', type, params);\r\n  }\r\n  /**\r\n   * Send data to server\r\n   *\r\n   * @method post\r\n   * @param  {String} name    The indentifier for this API call / endpoint\r\n   * @param  {Array} params   Params that are sent to the callbacks that have been attached to\r\n   * handle this API data. E.g. at least the\r\n   * POST data that will be sent to server needs to be set in the callback to the object.body\r\n   * property.\r\n   * @return {Promise}        ES6 native Promise as the API advances\r\n   */\r\n  function post(type, params) {\r\n    return _doFetch('post', type, params);\r\n  }\r\n  /**\r\n   * Add a new mapApi endpoint\r\n   *\r\n   * @method add\r\n   * @param {String}    type            Basically the name of the mapAPI. Like 'moveUnit'.\r\n   * @param {Function}  cb              Callback that returns the data that is sent to this API\r\n   * endpoint. Callback gets these parameters\r\n   * 1. request type: post, get etc.\r\n   * 2. completeData: { baseUrl, cbs }\r\n   * 3. params: params that were sent to the mapAPI function as extra, like in post(type, params)\r\n   * HAS to return:\r\n   * {}.body = the data to be sent\r\n   * {}.url = url where the data is sent to\r\n   * @param {String}    baseUrl         The url where the mapApi queries are sent to\r\n   */\r\n  function add(type, cb, baseUrl) {\r\n    if (APIs[type]) {\r\n      mapLog.debug('API endpoint already exists and has been defined ' + type + ', ' + baseUrl + ', ' + JSON.stringify(cb));\r\n    }\r\n\r\n    APIs[type] = {\r\n      baseUrl,\r\n      cbs: cb ? [cb] : []\r\n    };\r\n  }\r\n  /**\r\n   * Removes mapApi endpoint\r\n   *\r\n   * @method remove\r\n   * @param {String}    type            Basically the name of the mapAPI. Like 'moveUnit'.\r\n   */\r\n  function remove(type) {\r\n    if (!APIs[type]) {\r\n      mapLog.debug('API endpoint not found for removing!');\r\n    }\r\n\r\n    delete APIs[type];\r\n  }\r\n  /**\r\n   * Add a new mapAPI endpoint\r\n   *\r\n   * @method update\r\n   * @param {String}    type            Basically the name of the mapAPI. Like 'moveUnit'.\r\n   * @param {Function}  cb              Callback that returns the data that is sent to this API\r\n   * endpoint\r\n   */\r\n  function update(type, cb) {\r\n    if (!APIs[type] || !APIs[type].cbs) {\r\n      mapLog.debug('API endpoint not found for updating!');\r\n    }\r\n\r\n    APIs[type].cbs.push(cb);\r\n  }\r\n  /**\r\n   * Does the actual fetch from the API endpoint\r\n   *\r\n   * @method _doFetch\r\n   * @private\r\n   * @param  {String} fetchType   post or get\r\n   * @param  {String} type        name of the endpoint\r\n   * @param  {Array} params       Params that are sent to the callbacks that have been attached\r\n   * to handle this API data. E.g. at least\r\n   * the POST data that will be sent to server needs to be set in the callback to the\r\n   * object.body property.\r\n   * @return {Promise}            The result of the fetch\r\n   */\r\n  function _doFetch(fetchType, type, params) {\r\n    if (!APIs[type]) {\r\n      mapLog.error('API endpoint for fetch not found: ' + fetchType + '/' + type + ', ' + (params ? params[0] : 'no params'));\r\n      return;\r\n    }\r\n\r\n    let completeData = APIs[type];\r\n\r\n    APIs[type].cbs.forEach((cb) => {\r\n      completeData = cb(fetchType, completeData, params);\r\n    });\r\n\r\n    return fetch(completeData.url, {\r\n      method: fetchType,\r\n      body: completeData.body\r\n    })\r\n      .then(function (response) {\r\n        return response.json();\r\n      }).then(function (json) {\r\n        mapLog.debug('parsed json', json);\r\n      }).catch(function (ev) {\r\n        mapLog.debug('mapAPI http request failed', ev);\r\n      });\r\n  }\r\n  /**\r\n   * Just returns all API endpoint definitions to be checked or modified as pleased. Only for\r\n   * advanced use.\r\n   *\r\n   * @method getAllAPIs\r\n   * @return {Object} returns object that hosts all the API endpoint definitions\r\n   */\r\n  function getAllAPIs() {\r\n    return APIs;\r\n  }\r\n})();\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default mapAPI;\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/mapAPI.js\n **/","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        var view = new Uint8Array(this._bodyArrayBuffer)\n        var str = String.fromCharCode.apply(null, view)\n        return Promise.resolve(str)\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.arrayBuffer) {\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (typeof input === 'string') {\n      this.url = input\n    } else {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    rawHeaders.split('\\r\\n').forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = 'status' in options ? options.status : 200\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/whatwg-fetch/fetch.js\n ** module id = 22\n ** module chunks = 0\n **/","import { mapLayers, objects, utils } from './index';\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nclass MapDataManipulator {\r\n  /**\r\n   * Class to get a consistent standard for the engine to be able to filter objects, when\r\n   * etrieving or sorting them. This is used\r\n   * when some method uses filters.\r\n   *\r\n   * You must provide an object that defines how the given objects should be filtered, when\r\n   * constructing. The module will filter with every rule and object given and everything that\r\n   * doesn't pass one of the given filters, will be dropped out.\r\n   *\r\n   * Given filters look something like this:\r\n   * {\r\n   *   type: 'filter',\r\n   *   object: 'layer',\r\n   *   property: 'selectable', // THIS can also be an array, like: ['data', 'a'] => data.a\r\n   *   value: true,\r\n   * }\r\n   * For more information, please check the mapDataManipulatorSpec.js (test) for now.\r\n   *\r\n   * @namespace flatworld\r\n   * @class MapDataManipulator\r\n   * @constructor\r\n   * @param {Array|Object} rules        REQUIRED. The rules that apply for this instance.\r\n   * Multiple rules in Array or one as Object.\r\n   **/\r\n  constructor(rules = utils.general.requireParameter('MapDataManipulator', 'rules')) {\r\n    this.rules = Array.isArray(rules) ? rules : [rules];\r\n    this.classes = {\r\n      layer: Object.keys(mapLayers).map((k) => mapLayers[k]),\r\n      object: Object.keys(objects).map((k) => objects[k])\r\n    };\r\n  }\r\n  /**\r\n   * This has exceptional query, since it actually queries it's parent. Subcontainers have\r\n   * really no useful values and they are dumb\r\n   * containers of objects, every data is on their parent container\r\n   *\r\n   * @method filter\r\n   * @param  {Array | Object} objects     The objects that are being filtered\r\n   * @return {Array}                      The found objects in an Array\r\n   */\r\n  filter(objects) {\r\n    let found;\r\n\r\n    if (!Array.isArray(objects)) {\r\n      found = this._runRule(objects) ? [objects] : [];\r\n    } else {\r\n      found = objects.filter((object) => {\r\n        return this._runRule(object);\r\n      });\r\n    }\r\n\r\n    return found;\r\n  }\r\n  /**\r\n   * adds a filter rule\r\n   *\r\n   * @method addRule\r\n   * @param {} rules        Rules to add\r\n   */\r\n  addRule(rules) {\r\n    this.rules.concat(rules);\r\n  }\r\n\r\n  /** @todo I think this should be implemented. But it's a small optimization so don't bother yet. Basically the idea is to ONLY use the filters that each situation requires. Not iterate through the unneeded filters */\r\n  getOnlyFiltersOf(/*type*/) { }\r\n\r\n  /**\r\n   * Checks if this filter instance is set to filter the given type.\r\n   *\r\n   * @param  {string} type   Type of the filter we want to check\r\n   * @return {Boolean}\r\n   */\r\n  doesItFilter(type) {\r\n    return this.rules.some(o => o.object === type);\r\n  }\r\n  /**\r\n   * This is the actual method that runs through the rules and arranges the data\r\n   *\r\n   * @method _runRule\r\n   * @private\r\n   * @param {Array} [varname] [description]\r\n   **/\r\n  _runRule(object) {\r\n    let ruleMatches = true;\r\n    let matchedType;\r\n\r\n    Object.keys(this.classes).forEach((type) => {\r\n      const filtered = this.classes[type].filter((thisClass) => {\r\n        return object instanceof thisClass;\r\n      });\r\n\r\n      matchedType = filtered.length ? type : matchedType;\r\n    });\r\n\r\n    this.rules.forEach((rule) => {\r\n      if (rule.type === 'filter') {\r\n        if (rule.object !== matchedType) {\r\n          return;\r\n        }\r\n\r\n        if (matchedType === 'layer') {\r\n          ruleMatches = this._getObject(object, rule);\r\n        } else if (matchedType === 'object') {\r\n          ruleMatches = this._getObject(object, rule);\r\n        }\r\n      }\r\n    });\r\n\r\n    return ruleMatches;\r\n  }\r\n  /**\r\n   * This is the actual method that runs through the rules and arranges the data\r\n   *\r\n   * @method _getObject\r\n   * @private\r\n   * @return {[type]} [description]\r\n   **/\r\n  _getObject(object, rule) {\r\n    let result = false;\r\n\r\n    if (Array.isArray(rule.property)) {\r\n      try {\r\n        result = ''+MapDataManipulator.getPropertyWithArray(object, rule.property, 0) === ''+rule.value;\r\n      } catch(e) {\r\n        return false;\r\n      }\r\n    } else {\r\n      result = object[rule.property] === rule.value;\r\n    }\r\n    \r\n    return result;\r\n  }\r\n\r\n  static getPropertyWithArray(obj, array, index) {\r\n    const currentProperty = array[index];\r\n    const thisLevel = obj[currentProperty];\r\n\r\n    if (array[index + 1]) {\r\n      return MapDataManipulator.getPropertyWithArray(thisLevel, array, ++index);\r\n    } else {\r\n      return thisLevel;\r\n    }\r\n  }\r\n}\r\n\r\nMapDataManipulator.OBJECT_LAYER = 'layer';\r\nMapDataManipulator.OBJECT_OBJECT = 'object';\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default MapDataManipulator;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/MapDataManipulator.js\n **/","import { EventEmitter } from 'eventemitter3';\r\n\r\n/*---------------------\r\n-------- PUBLIC -------\r\n----------------------*/\r\n/**\r\n * This module handles map events. Like informing map movement, object selection and other\r\n * changes. Not that ALL the eventlisteners and their callbacks will throw one event!\r\n * But that event will have no extra parameters, so when you do special things, like selecting\r\n * objects on the map, you should throw another event when that happens and you can pass on\r\n * the objects that were selected from the map.\r\n * This uses https://github.com/primus/eventemitter3 and follows the nodeJS event\r\n * conventions: https://nodejs.org/api/events.html\r\n * Events atm:\r\n * - mapdrag\r\n * - mapzoomed\r\n * - objectsSelected (in hexagon extension units.js)\r\n * - mapMoved\r\n * - mapResize\r\n * @namespace flatworld\r\n * @class mapEvents\r\n * @return {Object}     subsribe and publish\r\n * @todo add mapfullscreen, mapfullSize and check if something is missing from the list\r\n */\r\nconst mapEvents = (function() {\r\n  const TIMER_FOR_SAME_TYPE = 50;\r\n  const lastTimePublished = {};\r\n  const EE = new EventEmitter();\r\n\r\n  /*---------------------\r\n  --------- API ---------\r\n  ----------------------*/\r\n  return {\r\n    subscribe,\r\n    publish,\r\n    debounce,\r\n    removeAllListeners: EE.removeAllListeners.bind(EE)\r\n  };\r\n\r\n  /*---------------------\r\n  -------- PUBLIC -------\r\n  ----------------------*/\r\n  function subscribe(type, cb) {\r\n    EE.on(type, cb);\r\n    lastTimePublished[type] = 0;\r\n  }\r\n  /**\r\n   * publish\r\n   * @param  {String}    type   Type can be string or an object with:\r\n   * { name: String (required), cooldown: Int, debounce: Int }.\r\n   * @param  {...[]} data       Can hold any data with rest of the parameters\r\n   */\r\n  function publish(type = '', datas) {\r\n    const timestamp = new Date().getTime();\r\n    const realType = type.name || type;\r\n\r\n    if ((lastTimePublished[realType] + (type.cooldown || TIMER_FOR_SAME_TYPE) < timestamp)) {\r\n      lastTimePublished[realType] = timestamp;\r\n      EE.emit(realType, datas);\r\n    }\r\n  }\r\n\r\n  // Function from underscore.js\r\n  // Returns a function, that, as long as it continues to be invoked, will not\r\n  // be triggered. The function will be called after it stops being called for\r\n  // N milliseconds. If `immediate` is passed, trigger the function on the\r\n  // leading edge, instead of the trailing.\r\n  function debounce(func, wait, immediate) {\r\n    let timeout;\r\n\r\n    return function() {\r\n      const context = this, args = arguments;\r\n      const later = function() {\r\n        timeout = null;\r\n        if (!immediate) func.apply(context, args);\r\n      };\r\n      const callNow = immediate && !timeout;\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(later, wait);\r\n      if (callNow) func.apply(context, args);\r\n    }\r\n  }\r\n})();\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default mapEvents;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/mapEvents.js\n **/","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @api private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {Mixed} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @api public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Boolean} exists Only check if there are listeners.\n * @returns {Array|Boolean}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event, exists) {\n  var evt = prefix ? prefix + event : event\n    , available = this._events[evt];\n\n  if (exists) return !!available;\n  if (!available) return [];\n  if (available.fn) return [available.fn];\n\n  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n    ee[i] = available[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {Mixed} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n         listeners.fn === fn\n      && (!once || listeners.once)\n      && (!context || listeners.context === context)\n    ) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n           listeners[i].fn !== fn\n        || (once && !listeners[i].once)\n        || (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {String|Symbol} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/eventemitter3/index.js\n ** module id = 25\n ** module chunks = 0\n **/","import * as PIXI from 'pixi.js';\r\nimport { utils } from './index.js';\r\n\r\n/*---------------------\r\n------ VARIABLES ------\r\n---------------------*/\r\nlet _UIObjects = [];\r\n\r\n/*---------------------\r\n-------- EXPORT -------\r\n---------------------*/\r\nclass MapLayer extends PIXI.Container {\r\n  /**\r\n   * Creates a basic layer for the Map. This type of layer can not hold subcontainers. Note that different devices and graphic cards can\r\n   * only have specific size of bitmap drawn, and PIXI cache always draws a bitmap thus the default is: 4096, based on this site:\r\n   * http://webglstats.com/ and MAX_TEXTURE_SIZE. This is important also when caching.\r\n   *\r\n   * @namespace flatworld.maplayers\r\n   * @class MapLayer\r\n   * @constructor\r\n   * @param {Object} options                            optional options\r\n   * @param {String} options.name                       Layers name, used for identifying the layer. Useful in debugging, but can be\r\n   * used for finding correct layers too\r\n   * @param  {Object} options.coord                   coord starting coords of layer. Relative to parent map layer.\r\n   * @param  {Integer} options.coord.x         X coordinate\r\n   * @param  {Integer} options.coord.y         Y coordinate\r\n   * @param  {Object} options.specialLayer            Is this layer special (e.g. UILayer not included in normal operations)\r\n   * @param  {Integer} options.specialLayer.x         X coordinate\r\n   * @param  {Integer} options.specialLayer.y         Y coordinate\r\n   **/\r\n  constructor({\r\n      name = '',\r\n      coord = { x: 0, y: 0 },\r\n      specialLayer = false,\r\n      zoomLayer = true,\r\n      selectable = false } = {}) {\r\n    super();\r\n    Object.assign(this, coord);\r\n\r\n    /**\r\n     * Layers name, used for identifying the layer. Useful in debugging, but can be used for finding correct layers too\r\n     *\r\n     * @attribute name\r\n     * @type {String}\r\n     */\r\n    this.name = '' + name;\r\n    /**\r\n     * Is this layer special (e.g. UILayer not included in normal operations)\r\n     *\r\n     * @attribute specialLayer\r\n     * @type {Boolean}\r\n     */\r\n    this.specialLayer = !!specialLayer;\r\n    /**\r\n     * Will this layer change dynamically or can we assume that this holds the same objects always, until game reload\r\n     *\r\n     * @attribute static\r\n     * @type {Boolean}\r\n     */\r\n    this.zoomLayer = !!zoomLayer;\r\n    /**\r\n     * Can you select objects from this layer. For example with Map.getObjectsUnderArea\r\n     *\r\n     * @attribute selectable\r\n     * @type {Boolean}\r\n     */\r\n    this.selectable = selectable;\r\n    /**\r\n     * Every added UIObject will be listed here for removal and updating. The indexes in the list provide the easy option to remove only\r\n     * certain object from the UIObjects.\r\n     *\r\n     * @attribute UIObjectList\r\n     * @type {Array}\r\n     */\r\n    this.UIObjectList = {};\r\n  }\r\n  /**\r\n   * Does this layer use subcontainers.\r\n   *\r\n   * @method hasSubcontainers\r\n   * @return {Boolean} true = uses subcontainers.\r\n   */\r\n  hasSubcontainers() {\r\n    return (this.subcontainersConfig && this.subcontainersConfig.width && this.subcontainersConfig.height) ? true : false;\r\n  }\r\n  /**\r\n   * Move layer based on given amounts\r\n   *\r\n   * @method move\r\n   * @param  {Object} coord            The amount of x and y coordinates we want the layer to move. I.e. { x: 5, y: 0 }. This would move\r\n   * the map 5 pixels horizontally and 0 pixels vertically\r\n   * @param  {Integer} coord.x         X coordinate\r\n   * @param  {Integer} coord.y         Y coordinate\r\n   **/\r\n  move(coord) {\r\n    this.x += coord.x;\r\n    this.y += coord.y;\r\n  }\r\n  /**\r\n   * set layer zoom\r\n   *\r\n   * @method setZoom\r\n   * @param {Number} amount The amount that you want the layer to zoom.\r\n   * @return {Number} The same amount that was given, except after transform to 2 decimals and type cast to Number\r\n   * */\r\n  setZoom(amount) {\r\n    this.scale.x = this.scale.y = +amount.toFixed(2);\r\n\r\n    return this.scale.x;\r\n  }\r\n  /**\r\n   * get layer zoom\r\n   *\r\n   * @method getZoom\r\n   * @return {Boolean} current amount of zoom\r\n   * */\r\n  getZoom() {\r\n    return this.scale.x;\r\n  }\r\n    /**\r\n   * get UIObjects on this layer, if there are any, or defaulty empty array if no UIObjects are active\r\n   *\r\n   * @method getUIObjects\r\n   * @return {Array} current UIObjects\r\n   * */\r\n  getUIObjects() {\r\n    return _UIObjects;\r\n  }\r\n  /**\r\n   * Get primary layers, that this layer holds as children. So basically all children that are\r\n   * not special layers (such as UI layers etc.)\r\n   *\r\n   * @method getPrimaryLayers\r\n   * @return {Array}                            Primary children layers under this layer\r\n   * */\r\n  getPrimaryLayers({ filters } = {}) {\r\n    return this.children.filter(thisChild => {\r\n      if ((filters &&\r\n          filters.doesItFilter(\"layer\") &&\r\n          !filters.filter(thisChild).length) ||\r\n          thisChild.specialLayer) {\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    });\r\n  }\r\n  /**\r\n   * Get all objects that are this layers children or subcontainers children. Does not return\r\n   * layers, but the objects. Works on primary layer only currently. So can not seek for\r\n   * complicated children structure, seeks only inside subcontainers.\r\n   *\r\n   * @method getObjects\r\n   * @param {MapDataManipulator}  filter  filter for filtering correct objects\r\n   * @return {Array}                      All the objects (not layers) found under this layer\r\n   * */\r\n  getObjects(filter) { // eslint-disable-line no-unused-vars\r\n    throw new Error('Has to be implemented in child class');\r\n  }\r\n  /**\r\n   * Create and add special layer, that holds UI effects in it. UILayer is normally positioned\r\n   * as movableLayers 3rd child. And the\r\n   * actual UI stuff is added there.\r\n   *\r\n   * @method createUILayer\r\n   * @param  {String} name          name of the layer\r\n   * @param  {Object} coord         Coordinates of the layer\r\n   * @param  {Integer} coord.x      X coordinate\r\n   * @param  {Integer} coord.y      Y coordinate\r\n   * @return {MapLayer}            The created UI layer\r\n   **/\r\n  createUILayer(name = 'default UI layer', coord = { x: 0, y: 0 }) {\r\n    const layer = new MapLayer(name, coord);\r\n\r\n    layer.specialLayer = true;\r\n    this.addChild(layer);\r\n\r\n    this.UILayer = layer;\r\n\r\n    return layer;\r\n  }\r\n  /**\r\n   * Return the UILayer. If no UILayer is yet created, will return undefined\r\n   *\r\n   * @method getUILayer\r\n   * @return {MapLayer | undefined}\r\n   */\r\n  getUILayer() {\r\n    return this.UILayer;\r\n  }\r\n  /**\r\n   * Adds and object to this layers UILayer child. If an object with the same name already exists, we remove it automatically and replace\r\n   * it with the new object given as parameter.\r\n   *\r\n   * @method addUIObject\r\n   * @param {Object} object   The UI object to be added under this layer\r\n   * @param {Object} UIName   Name of the UI object. This is important as you can use it to remove the UI object later or replace it.\r\n   * @return {Array}          All the UIObjects currently on this layer\r\n   */\r\n  addUIObject(object, UIName) {\r\n    _UIObjects = _UIObjects || [];\r\n\r\n    if (this.UIObjectList[UIName] && Array.isArray(this.UIObjectList[UIName])) {\r\n      this.UIObjectList[UIName].push(object);\r\n    } else if (this.UIObjectList[UIName]) {\r\n      this.UIObjectList[UIName] = [this.UIObjectList[UIName]];\r\n      this.UIObjectList[UIName].push(object);\r\n    } else {\r\n      this.UIObjectList[UIName] = object;\r\n    }\r\n\r\n    if (!this.getUILayer()) {\r\n      this.UILayer = this.createUILayer();\r\n    }\r\n\r\n    this.UILayer.addChild(object);\r\n    _UIObjects.push(object);\r\n\r\n    return _UIObjects;\r\n  }\r\n  /**\r\n   * If object is given, removes that object, otherwiseRemove all the UIObjects from this layer\r\n   *\r\n   * @method deleteUIObjects\r\n   * @param {Object} object   If you wish to delete particular object\r\n   * @return {Array} empty    UIObjects array\r\n   * */\r\n  deleteUIObjects(UIName) {\r\n    const UILayer = this.getUILayer();\r\n\r\n    if (UIName) {\r\n      const object = this.UIObjectList[UIName];\r\n\r\n      _removeObjectsFromLayer(object, UILayer);\r\n      \r\n      this.UIObjectList[UIName] = undefined;\r\n      return;\r\n    } else {\r\n      Object.keys(this.UIObjectList).map((index) => {\r\n        const object = this.UIObjectList[index];\r\n\r\n        _removeObjectsFromLayer(object, UILayer);\r\n\r\n        this.UIObjectList[index] = undefined;\r\n      });\r\n    }\r\n\r\n    return _UIObjects;\r\n  }\r\n}\r\n\r\nclass MapLayerParent extends MapLayer {\r\n  /**\r\n   * Layer designed to hold subcontainers. But can handle objects too. Different devices graphic cards can only have specific size of\r\n   * bitmap drawn, and PIXI cache always draws a bitmap. Thus the default is: 4096, based on this site: http://webglstats.com/ and\r\n   * MAX_TEXTURE_SIZE\r\n   *\r\n   * @class MapLayerParent\r\n   * @constructor\r\n   * @param {Object} options\r\n   * @param {String} options.name                    name layer property name, used for identifiying the layer, usefull in debugging,\r\n   * but used also otherwise too\r\n   * @param  {Object} options.coord                  starting coords of layer. Relative to parent map layer.\r\n   * @param  {Integer} options.coord.x               X coordinate\r\n   * @param  {Integer} options.coord.y               Y coordinate\r\n   * @param  {Object} options.subcontainers          Subontainer size. If given activated subcontainers, otherwise not.\r\n   * @param  {Integer} options.subcontainers.width   width (in pixels)\r\n   * @param  {Integer} options.subcontainers.height  height (in pixels)\r\n   * @param {Boolean} options.specialLayer           Is this special layer or not.\r\n   */\r\n  constructor({\r\n      name = '', // eslint-disable-line no-unused-vars\r\n      coord = { x: 0, y: 0 }, // eslint-disable-line no-unused-vars\r\n      subcontainers = { width: 0, height: 0, maxDetectionOffset: 100 },\r\n      specialLayer = false,\r\n      zoomLayer = true, // eslint-disable-line no-unused-vars\r\n      selectable = false } = {}) {\r\n    super(arguments[0]);\r\n\r\n    this.oldAddChild = super.addChild.bind(this);\r\n    this.subcontainersConfig = subcontainers;\r\n    this.subcontainerList = [];\r\n    this.selectable = selectable;\r\n    this.specialLayer = specialLayer;\r\n  }\r\n  /**\r\n   * We override the PIXIs own addchild functionality. Since we need to support subcontainers in\r\n   * addChild. We check subcontainers and\r\n   * then we call the original (PIXIs) addChild\r\n   *\r\n   * @method addChild\r\n   * @param {PIXI.DisplayObject} displayObject      PIXI.DisplayObject\r\n   */\r\n  addChild(displayObject) {\r\n    if (this.hasSubcontainers()) {\r\n      const correctContainer = setCorrectSubcontainer(displayObject, this);\r\n      this.oldAddChild(correctContainer);\r\n    } else {\r\n      this.oldAddChild(displayObject);\r\n    }\r\n\r\n    return displayObject;\r\n  }\r\n  /**\r\n   * Get all objects that are this layers children or subcontainers children. Does not return layers, but the objects. Works on primary layer only currently. So can not seek for complicated children structure, seeks only inside subcontainers.\r\n   *\r\n   * @method getObjects\r\n   * @return {Array}            All the objects (not layers) found under this layer\r\n   * */\r\n  getObjects(filter) {\r\n    const allObjects = [];\r\n    const willFilter = filter && filter.doesItFilter(\"object\");      \r\n    let objects;\r\n\r\n    this.getSubcontainers().forEach(subcontainer => {\r\n      if (willFilter) {\r\n        objects = subcontainer.children.filter(o => !!filter.filter(o).length);\r\n      } else {\r\n        objects = subcontainer.children;\r\n      }\r\n\r\n      allObjects.push(objects);\r\n    });\r\n\r\n    return utils.general.flatten2Levels(allObjects);\r\n  }\r\n  /**\r\n   * Returns the configurations set for subcontainers.\r\n   *\r\n   * @method getSubcontainerConfigs\r\n   */\r\n  getSubcontainerConfigs() {\r\n    return this.subcontainersConfig;\r\n  }\r\n  /**\r\n   * Returns subcontainers based on the given coordinates. Can be applied through a MapDataManipulator filter also.\r\n   *\r\n   * @method getSubcontainersByCoordinates\r\n   * @param  {Object} coordinates\r\n   * @param  {Integer} coordinates.x                  X coordinate\r\n   * @param  {Integer} coordinates.y                  Y coordinate\r\n   * @param  {MapDataManipulator} options.filter      Filter for selecting only certain subcontainers\r\n   */\r\n  getSubcontainersByCoordinates(coordinates) {\r\n    if (!this.hasSubcontainers()) {\r\n      throw new Error('tried to retrieve subcontainers, when they are not present');\r\n    }\r\n\r\n    const foundSubcontainers = _getClosestSubcontainers(this, coordinates);\r\n\r\n    return foundSubcontainers;\r\n  }\r\n  /**\r\n   * @method getSubcontainers\r\n   */\r\n  getSubcontainers() {\r\n    return utils.general.flatten2Levels(this.subcontainerList);\r\n  }\r\n}\r\n\r\nclass MapSubcontainer extends PIXI.Container {\r\n  /**\r\n   * Subcontainers are containers that hold objects like units and terrain etc. under them. They have some restrictions atm. since they\r\n   * are PIXI.ParticleContainers. But when needed we can extend MapLayers with another class which is subcontainer, but not\r\n   * ParticleContainer at the present there is no need, so we won't extend yet. Subcontainers help the layers to make better movement of\r\n   * the map, by making subcontainers visible or invisible and even helping with selecting objects on the map. Thus we don't need to use\r\n   * our inefficient Quadtree. The intention was to use PIXI.ParticleContainer for this, but it seems it doesn't clean up the memory\r\n   * afterwards the same way as normal Container.\r\n   *\r\n   * @private\r\n   * @class MapSubcontainer\r\n   * @constructor\r\n   * @param  {Object} size              Subontainer size. If given activated subcontainers, otherwise not.\r\n   * @param  {Integer} size.width       width (in pixels)\r\n   * @param  {Integer} size.height      height (in pixels)\r\n   */\r\n  constructor(size) {\r\n    super();\r\n\r\n    this.specialLayer = true;\r\n    this.size = size;\r\n    this.selectable = false;\r\n  }\r\n  /**\r\n   * Gets this subcontainers coordinates and size\r\n   *\r\n   * @method getSubcontainerArea\r\n   * @param {Number} scale                              The size of scale the map currently has\r\n   * @param {Boolean} options.toGlobal                  Do we get the global coordinates or local\r\n   * @return {Object}                                   x, y, width and height returned inside object.\r\n   */\r\n  getSubcontainerArea(options = { toGlobal: true }) {\r\n    const coordinates = options.toGlobal ? this.toGlobal(new PIXI.Point(0, 0)) : this;\r\n\r\n    return {\r\n      x: Math.round(coordinates.x),\r\n      y: Math.round(coordinates.y),\r\n      width: Math.round(this.size.width),\r\n      height: Math.round(this.size.height)\r\n    };\r\n  }\r\n}\r\n\r\nclass MinimapLayer extends PIXI.Container {\r\n  /**\r\n   * Subcontainers are containers that hold objects like units and terrain etc. under them. They have some restrictions atm. since they\r\n   * are PIXI.ParticleContainers. But when needed we can extend MapLayers with another class which is subcontainer, but not\r\n   * ParticleContainer at the present there is no need, so we won't extend yet. Subcontainers help the layers to make better movement of\r\n   * the map, by making subcontainers visible or invisible and even helping with selecting objects on the map. Thus we don't need to use\r\n   * our inefficient Quadtree. The intention was to use PIXI.ParticleContainer for this, but it seems it doesn't clean up the memory\r\n   * afterwards the same way as normal Container.\r\n   *\r\n   * @private\r\n   * @class MapSubcontainer\r\n   * @constructor\r\n   * @param  {Object} size              Subontainer size. If given activated subcontainers, otherwise not.\r\n   * @param  {Integer} size.width       width (in pixels)\r\n   * @param  {Integer} size.height      height (in pixels)\r\n   */\r\n  constructor(size) {\r\n    super();\r\n\r\n    this.specialLayer = true;\r\n    this.targetSize = size;\r\n    this.selectable = false;\r\n  }\r\n}\r\n/*---------------------\r\n------- PRIVATE -------\r\n----------------------*/\r\n/**\r\n * Helper function for setting subcontainers to parent containers. Adds subcontainers when\r\n * needed. Subcontainers are not and can not be initialized at the start as we won't know the\r\n * size of the parent container. Container is always dynamic in size.\r\n *\r\n *\r\n * @method setCorrectSubcontainer\r\n * @private\r\n * @static\r\n * @method setCorrectSubcontainer\r\n * @param {PIXI.DisplayObject} displayObject\r\n * @param {Object} parentLayer\r\n */\r\nfunction setCorrectSubcontainer(displayObject, parentLayer) {\r\n  const { subcontainersConfig, subcontainerList } = parentLayer;\r\n  const xIndex = Math.floor(displayObject.x / subcontainersConfig.width);\r\n  const yIndex = Math.floor(displayObject.y / subcontainersConfig.height);\r\n  let thisSubcontainer;\r\n\r\n  subcontainerList[xIndex] = subcontainerList[xIndex] || [];\r\n  thisSubcontainer = subcontainerList[xIndex][yIndex] = subcontainerList[xIndex][yIndex] || [];\r\n\r\n  if (subcontainerList[xIndex][yIndex].length <= 0) {\r\n    thisSubcontainer = new MapSubcontainer({\r\n      x: xIndex * subcontainersConfig.width,\r\n      y: yIndex * subcontainersConfig.height,\r\n      width: subcontainersConfig.width,\r\n      height: subcontainersConfig.height\r\n    });\r\n\r\n    subcontainerList[xIndex][yIndex] = thisSubcontainer;\r\n    thisSubcontainer.x = xIndex * subcontainersConfig.width;\r\n    thisSubcontainer.y = yIndex * subcontainersConfig.height;\r\n    thisSubcontainer.visible = !subcontainersConfig.isHiddenByDefault;\r\n  }\r\n\r\n  displayObject.x -= thisSubcontainer.x;\r\n  displayObject.y -= thisSubcontainer.y;\r\n  subcontainerList[xIndex][yIndex].addChild(displayObject);\r\n\r\n  return subcontainerList[xIndex][yIndex];\r\n}\r\n/**\r\n * Get the closest subcontainers of the given area.\r\n *\r\n * @method setCorrectSubcontainer\r\n * @private\r\n * @static\r\n * @method _getClosestSubcontainers\r\n * @param  {Object} layer                         Instance of PIXI.Container - The layer being used\r\n * @param  {Object} givenCoordinates              Coordinates or rectangle\r\n * @param  {Integer} givenCoordinates.x           x coordinate\r\n * @param  {Integer} givenCoordinates.y           y coordinate\r\n * @param  {Integer} givenCoordinates.width       width of the rectangle\r\n * @param  {Integer} givenCoordinates.height      height of the rectangle\r\n * @param  {Object} options                       Optional options.\r\n * @return {Array}                                Array of found subcontainers.\r\n */\r\nfunction _getClosestSubcontainers(layer, givenCoordinates) {\r\n  const { width, height, maxDetectionOffset } = layer.getSubcontainerConfigs();\r\n  const coordinates = {\r\n    x: givenCoordinates.x >= 0 ? givenCoordinates.x - maxDetectionOffset : -maxDetectionOffset,\r\n    y: givenCoordinates.y >= 0 ? givenCoordinates.y - maxDetectionOffset : -maxDetectionOffset,\r\n    width: (givenCoordinates.width || 0) + maxDetectionOffset * 2,\r\n    height: (givenCoordinates.height || 0) + maxDetectionOffset * 2\r\n  };\r\n  const allFoundSubcontainers = [];\r\n  const xIndex = Math.floor(coordinates.x / width);\r\n  const yIndex = Math.floor(coordinates.y / height);\r\n  const x2 = coordinates.width ? coordinates.x + coordinates.width : +coordinates.x;\r\n  const y2 = coordinates.height ? coordinates.y + coordinates.height : +coordinates.y;\r\n  const widthIndex = Math.floor(x2 / width);\r\n  const heightIndex = Math.floor(y2 / height);\r\n  const subcontainerList = layer.subcontainerList;\r\n\r\n  for (let thisXIndex = xIndex; thisXIndex <= widthIndex; thisXIndex++) {\r\n    if (thisXIndex >= 0 && subcontainerList && subcontainerList[thisXIndex]) {\r\n      for (let thisYIndex = yIndex; thisYIndex <= heightIndex; thisYIndex++) {\r\n        if (thisYIndex >= 0 && subcontainerList[thisXIndex][thisYIndex]) {\r\n          allFoundSubcontainers.push(subcontainerList[thisXIndex][thisYIndex]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return allFoundSubcontainers;\r\n}\r\n\r\nfunction _removeObjectsFromLayer(object, layer) {\r\n  if (Array.isArray(object)) {\r\n    object.forEach(function (o) {\r\n      layer.removeChild(o);\r\n    });\r\n  } else {\r\n    layer.removeChild(object);\r\n  }\r\n}\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default {\r\n  MapLayer,\r\n  MapLayerParent,\r\n  MinimapLayer\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/MapLayers.js\n **/","import * as StateMachine from 'javascript-state-machine';\r\n\r\n/*---------------------\r\n-------- PUBLIC -------\r\n----------------------*/\r\n/**\r\n * Finite state machine for the map. Uses this library and pretty much it's API https://github.com/jakesgordon/javascript-state-machine.\r\n *\r\n * @namespace flatworld\r\n * @class mapStates\r\n * @requires  state-machine library\r\n */\r\nconst mapStates = StateMachine.create({\r\n  initial: 'statusQuo',\r\n  events: [\r\n    /**\r\n     * When multiple objects are represented as an option\r\n     *\r\n     * @method objectSelectDialog\r\n     */\r\n    { name: 'objectSelectDialog', from: ['statusQuo', 'objectSelected'], to: 'objectSelectDialogOpened' },\r\n    /**\r\n     * When the object is selected\r\n     *\r\n     * @method objectSelect\r\n     */\r\n    { name: 'objectSelect', from: ['statusQuo', 'objectSelected', 'objectSelectDialogOpened'], to: 'objectSelected' },\r\n    /**\r\n     * When situation is normal, nothing selected.\r\n     *\r\n     * @method normalize\r\n     */\r\n    { name: 'normalize', from: ['objectSelected', 'objectSelectDialogOpened'], to: 'statusQuo' },\r\n    /**\r\n     * When object is issued a move order\r\n     *\r\n     * @method objectOrder\r\n     */\r\n    { name: 'objectOrder', from: 'objectSelected', to: 'animatingObject' },\r\n    /**\r\n     * When object ends it's movement animation\r\n     *\r\n     * @method objectOrderEnd\r\n     */\r\n    { name: 'objectOrderEnd', from: 'animatingObject', to: 'objectSelected' },\r\n    /**\r\n     * The games main UI is opened and the map stays at the background, normally non-responsive\r\n     *\r\n     * @method UIOpen\r\n     */\r\n    { name: 'UIOpen', from: ['statusQuo', 'objectSelected', 'objectSelectDialogOpened'], to: 'mainUIOpened' },\r\n    /**\r\n     * Games main UI is closed and map is activated again\r\n     *\r\n     * @method UIClose\r\n     */\r\n    { name: 'UIClose', from: 'mainUIOpened', to: 'statusQuo' }\r\n  ]});\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default mapStates;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/mapStates.js\n **/","/*\n\n  Javascript State Machine Library - https://github.com/jakesgordon/javascript-state-machine\n\n  Copyright (c) 2012, 2013, 2014, 2015, Jake Gordon and contributors\n  Released under the MIT license - https://github.com/jakesgordon/javascript-state-machine/blob/master/LICENSE\n\n*/\n\n(function () {\n\n  var StateMachine = {\n\n    //---------------------------------------------------------------------------\n\n    VERSION: \"2.3.5\",\n\n    //---------------------------------------------------------------------------\n\n    Result: {\n      SUCCEEDED:    1, // the event transitioned successfully from one state to another\n      NOTRANSITION: 2, // the event was successfull but no state transition was necessary\n      CANCELLED:    3, // the event was cancelled by the caller in a beforeEvent callback\n      PENDING:      4  // the event is asynchronous and the caller is in control of when the transition occurs\n    },\n\n    Error: {\n      INVALID_TRANSITION: 100, // caller tried to fire an event that was innapropriate in the current state\n      PENDING_TRANSITION: 200, // caller tried to fire an event while an async transition was still pending\n      INVALID_CALLBACK:   300 // caller provided callback function threw an exception\n    },\n\n    WILDCARD: '*',\n    ASYNC: 'async',\n\n    //---------------------------------------------------------------------------\n\n    create: function(cfg, target) {\n\n      var initial      = (typeof cfg.initial == 'string') ? { state: cfg.initial } : cfg.initial; // allow for a simple string, or an object with { state: 'foo', event: 'setup', defer: true|false }\n      var terminal     = cfg.terminal || cfg['final'];\n      var fsm          = target || cfg.target  || {};\n      var events       = cfg.events || [];\n      var callbacks    = cfg.callbacks || {};\n      var map          = {}; // track state transitions allowed for an event { event: { from: [ to ] } }\n      var transitions  = {}; // track events allowed from a state            { state: [ event ] }\n\n      var add = function(e) {\n        var from = (e.from instanceof Array) ? e.from : (e.from ? [e.from] : [StateMachine.WILDCARD]); // allow 'wildcard' transition if 'from' is not specified\n        map[e.name] = map[e.name] || {};\n        for (var n = 0 ; n < from.length ; n++) {\n          transitions[from[n]] = transitions[from[n]] || [];\n          transitions[from[n]].push(e.name);\n\n          map[e.name][from[n]] = e.to || from[n]; // allow no-op transition if 'to' is not specified\n        }\n      };\n\n      if (initial) {\n        initial.event = initial.event || 'startup';\n        add({ name: initial.event, from: 'none', to: initial.state });\n      }\n\n      for(var n = 0 ; n < events.length ; n++)\n        add(events[n]);\n\n      for(var name in map) {\n        if (map.hasOwnProperty(name))\n          fsm[name] = StateMachine.buildEvent(name, map[name]);\n      }\n\n      for(var name in callbacks) {\n        if (callbacks.hasOwnProperty(name))\n          fsm[name] = callbacks[name]\n      }\n\n      fsm.current     = 'none';\n      fsm.is          = function(state) { return (state instanceof Array) ? (state.indexOf(this.current) >= 0) : (this.current === state); };\n      fsm.can         = function(event) { return !this.transition && (map[event].hasOwnProperty(this.current) || map[event].hasOwnProperty(StateMachine.WILDCARD)); }\n      fsm.cannot      = function(event) { return !this.can(event); };\n      fsm.transitions = function()      { return transitions[this.current]; };\n      fsm.isFinished  = function()      { return this.is(terminal); };\n      fsm.error       = cfg.error || function(name, from, to, args, error, msg, e) { throw e || msg; }; // default behavior when something unexpected happens is to throw an exception, but caller can override this behavior if desired (see github issue #3 and #17)\n\n      if (initial && !initial.defer)\n        fsm[initial.event]();\n\n      return fsm;\n\n    },\n\n    //===========================================================================\n\n    doCallback: function(fsm, func, name, from, to, args) {\n      if (func) {\n        try {\n          return func.apply(fsm, [name, from, to].concat(args));\n        }\n        catch(e) {\n          return fsm.error(name, from, to, args, StateMachine.Error.INVALID_CALLBACK, \"an exception occurred in a caller-provided callback function\", e);\n        }\n      }\n    },\n\n    beforeAnyEvent:  function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onbeforeevent'],                       name, from, to, args); },\n    afterAnyEvent:   function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onafterevent'] || fsm['onevent'],      name, from, to, args); },\n    leaveAnyState:   function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onleavestate'],                        name, from, to, args); },\n    enterAnyState:   function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onenterstate'] || fsm['onstate'],      name, from, to, args); },\n    changeState:     function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onchangestate'],                       name, from, to, args); },\n\n    beforeThisEvent: function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onbefore' + name],                     name, from, to, args); },\n    afterThisEvent:  function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onafter'  + name] || fsm['on' + name], name, from, to, args); },\n    leaveThisState:  function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onleave'  + from],                     name, from, to, args); },\n    enterThisState:  function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onenter'  + to]   || fsm['on' + to],   name, from, to, args); },\n\n    beforeEvent: function(fsm, name, from, to, args) {\n      if ((false === StateMachine.beforeThisEvent(fsm, name, from, to, args)) ||\n          (false === StateMachine.beforeAnyEvent( fsm, name, from, to, args)))\n        return false;\n    },\n\n    afterEvent: function(fsm, name, from, to, args) {\n      StateMachine.afterThisEvent(fsm, name, from, to, args);\n      StateMachine.afterAnyEvent( fsm, name, from, to, args);\n    },\n\n    leaveState: function(fsm, name, from, to, args) {\n      var specific = StateMachine.leaveThisState(fsm, name, from, to, args),\n          general  = StateMachine.leaveAnyState( fsm, name, from, to, args);\n      if ((false === specific) || (false === general))\n        return false;\n      else if ((StateMachine.ASYNC === specific) || (StateMachine.ASYNC === general))\n        return StateMachine.ASYNC;\n    },\n\n    enterState: function(fsm, name, from, to, args) {\n      StateMachine.enterThisState(fsm, name, from, to, args);\n      StateMachine.enterAnyState( fsm, name, from, to, args);\n    },\n\n    //===========================================================================\n\n    buildEvent: function(name, map) {\n      return function() {\n\n        var from  = this.current;\n        var to    = map[from] || map[StateMachine.WILDCARD] || from;\n        var args  = Array.prototype.slice.call(arguments); // turn arguments into pure array\n\n        if (this.transition)\n          return this.error(name, from, to, args, StateMachine.Error.PENDING_TRANSITION, \"event \" + name + \" inappropriate because previous transition did not complete\");\n\n        if (this.cannot(name))\n          return this.error(name, from, to, args, StateMachine.Error.INVALID_TRANSITION, \"event \" + name + \" inappropriate in current state \" + this.current);\n\n        if (false === StateMachine.beforeEvent(this, name, from, to, args))\n          return StateMachine.Result.CANCELLED;\n\n        if (from === to) {\n          StateMachine.afterEvent(this, name, from, to, args);\n          return StateMachine.Result.NOTRANSITION;\n        }\n\n        // prepare a transition method for use EITHER lower down, or by caller if they want an async transition (indicated by an ASYNC return value from leaveState)\n        var fsm = this;\n        this.transition = function() {\n          fsm.transition = null; // this method should only ever be called once\n          fsm.current = to;\n          StateMachine.enterState( fsm, name, from, to, args);\n          StateMachine.changeState(fsm, name, from, to, args);\n          StateMachine.afterEvent( fsm, name, from, to, args);\n          return StateMachine.Result.SUCCEEDED;\n        };\n        this.transition.cancel = function() { // provide a way for caller to cancel async transition if desired (issue #22)\n          fsm.transition = null;\n          StateMachine.afterEvent(fsm, name, from, to, args);\n        }\n\n        var leave = StateMachine.leaveState(this, name, from, to, args);\n        if (false === leave) {\n          this.transition = null;\n          return StateMachine.Result.CANCELLED;\n        }\n        else if (StateMachine.ASYNC === leave) {\n          return StateMachine.Result.PENDING;\n        }\n        else {\n          if (this.transition) // need to check in case user manually called transition() but forgot to return StateMachine.ASYNC\n            return this.transition();\n        }\n\n      };\n    }\n\n  }; // StateMachine\n\n  //===========================================================================\n\n  //======\n  // NODE\n  //======\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = StateMachine;\n    }\n    exports.StateMachine = StateMachine;\n  }\n  //============\n  // AMD/REQUIRE\n  //============\n  else if (typeof define === 'function' && define.amd) {\n    define(function(require) { return StateMachine; });\n  }\n  //========\n  // BROWSER\n  //========\n  else if (typeof window !== 'undefined') {\n    window.StateMachine = StateMachine;\n  }\n  //===========\n  // WEB WORKER\n  //===========\n  else if (typeof self !== 'undefined') {\n    self.StateMachine = StateMachine;\n  }\n\n}());\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/javascript-state-machine/state-machine.js\n ** module id = 28\n ** module chunks = 0\n **/","/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nclass ObjectManager {\r\n  /**\r\n   * this module is responsible for doing hitTesting, like returning the units on certain clicked coordinates or when objects or areas\r\n   * collide with each other.\r\n   *\r\n   * @namespace flatworld\r\n   * @class ObjectManager\r\n   * @constructor\r\n   * @todo It might be a good idea to make the hitDetection more extensive. Now it just uses point or rectangle / bounds to detect hits.\r\n   * It could use sprites or forms.\r\n   */\r\n  constructor() {}\r\n  /**\r\n   * Retrieve objects under certain coordinates or area, if size is given. Uses subcontainers when used, no other options yet.\r\n   *\r\n   * @method retrieve\r\n   * @param {Object} allCoords                                The coordinates which we want to hitTest\r\n   * @param {x:Integer, y:Integer} allCoords.globalCoords     Global coordinates on static layer / canvas\r\n   * @param {x:Integer, y:Integer} allCoords.globalCoords.x\r\n   * @param {x:Integer, y:Integer} allCoords.globalCoords.y\r\n   * @param {Object} allCoords.localCoords                    Local coordiantes on movable layer\r\n   * @param {x:Integer, y:Integer} allCoords.localCoords.x\r\n   * @param {x:Integer, y:Integer} allCoords.localCoords.y\r\n   * @param {string} type                                     type of the object / layer that we want to retrieve\r\n   * @param {Object} options                                  optional options\r\n   * @param {Array} options.subcontainers                     The subcontainers we match against\r\n   * @param {Object} options.size                             Size of the rectangle area to match against, if we want to match rectangle\r\n   * instead of one point\r\n   * @param {Integer} options.size.width\r\n   * @param {Integer} options.size.height\r\n   * @return {Array}                                          matched objects\r\n   *\r\n   * @todo add checks for rectangles. Now we can only check with width = 0 && height = 0\r\n   */\r\n  retrieve(allCoords, containers = [], options = { type: undefined, size: { width: 0, height: 0 } }) {\r\n    const { size, type } = options;\r\n    const { globalCoords } = allCoords;\r\n    let foundObjs = [];\r\n\r\n    if (containers.length > 0) {\r\n      containers.forEach(container => {\r\n        foundObjs = foundObjs.concat(container.children);\r\n      });\r\n\r\n      if (!size.width || !size.height) {\r\n        foundObjs = filterChildren(globalCoords, foundObjs, type);\r\n      }\r\n    } else {\r\n      return [];\r\n    }\r\n\r\n    return foundObjs;\r\n  }\r\n}\r\n\r\nfunction filterChildren(globalCoords, children = [], type = undefined) {\r\n  return children.filter(obj => {\r\n    if (type && type !== obj.type) {\r\n      return false;\r\n    }\r\n\r\n    const isHit = obj.hitTest ? obj.hitTest(globalCoords) : true;\r\n\r\n    return isHit;\r\n  });\r\n}\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default ObjectManager;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/ObjectManager.js\n **/","import * as PIXI from 'pixi.js';\r\nimport { constants, utils, mapAPI, mapEvents } from './index';\r\n\r\n/*-----------------------\r\n---------- API ----------\r\n-----------------------*/\r\nclass ObjectSprite extends PIXI.Sprite {\r\n  /**\r\n   * The base class of all sprite objects\r\n   *\r\n   * @namespace flatworld.objects\r\n   * @class ObjectSprite\r\n   * @constructor\r\n   * @extends PIXI.Sprite\r\n   * @param {PIXI.Point} coords       the coordinate where the object is located at, relative to it's parent\r\n   * @param {Object} {}\r\n   * @param {Object} {}.data          objects data, that will be used in the game. It will not actually be mainly used\r\n   * in graphical but rather things  like unit-data and city-data presentations etc.\r\n   */\r\n  constructor(texture, coord = { x: 0, y: 0 }, { data = null } = {}) {\r\n    super(texture);\r\n\r\n    /* We need to round the numbers. If there are decimal values, the graphics will get blurry */\r\n    const exactCoords = {\r\n      x: Math.round(coord.x),\r\n      y: Math.round(coord.y)\r\n    };\r\n    this.position.set(exactCoords.x, exactCoords.y);\r\n    /**\r\n     * Name of the object. Used mostly for debugging\r\n     *\r\n     * @attribute name\r\n     * @type {String}\r\n     */\r\n    this.name = 'Objects_sprite_' + this.id;\r\n    /**\r\n     * Type of the object. Can be used for filtering, ordering or finding correct objects.\r\n     *\r\n     * @attribute type\r\n     * @type {String}\r\n     */\r\n    this.type = 'None';\r\n    /**\r\n     * Is the object highligtable.\r\n     *\r\n     * @attribute highlightable\r\n     * @type {Boolean}\r\n     */\r\n    this.highlightable = true;\r\n    /**\r\n     * Objects custom data. Holds unit statistics and most data. Like unit movement speed etc.\r\n     *\r\n     * @attribute data\r\n     * @type {Object}\r\n     */\r\n    this.data = data;\r\n    /**\r\n     * Object area width in pixels.\r\n     *\r\n     * @attribute areaWidth\r\n     * @type {Number}\r\n     */\r\n    this.areaWidth = this.width;\r\n    /**\r\n     * Object area height in pixels.\r\n     *\r\n     * @attribute areaHeight\r\n     * @type {Number}\r\n     */\r\n    this.areaHeight = this.height;\r\n    /**\r\n     * If this object is static. Meaning it's position won't be changed etc. This can be used e.g. in rendering the minimap. The static\r\n     * objects and then the dynamic separately.\r\n     *\r\n     * @attribute static\r\n     * @type {Boolean}\r\n     */\r\n    this.static = true;\r\n    /**\r\n     * This is a color used to generate minimap functionality. Holds a color in hexadecimal\r\n     *\r\n     * @type {Number}\r\n     */\r\n    this.minimapColor = 0xFF0000;\r\n    /**\r\n     * We pre-calculate global and map coordinates for all objects, to make calculations faster\r\n     * and the whole engine more easy to use.\r\n     *\r\n     * @type {Object}\r\n     */\r\n    this.coordinates = {};\r\n    _initializeCoordinates(this.coordinates);\r\n  }\r\n  /**\r\n   * Drawing the object\r\n   *\r\n   * @method innerDraw\r\n   * @param {Number} x coordinate x\r\n   * @param {Number} y coordinate y\r\n   * @return this object instance\r\n   */\r\n  innerDraw(x, y) {\r\n    this.fromFrame(this.currentFrame);\r\n    this.x = x;\r\n    this.y = y;\r\n\r\n    return this;\r\n  }\r\n  /**\r\n   * Draws new frame to animate or such\r\n   *\r\n   * @method drawNewFrame\r\n   * @param {Number} x                coordinate x\r\n   * @param {Number} y                coordinate y\r\n   * @param {Number} newFrame         New frame number to animate to\r\n   * @return this object instance\r\n   */\r\n  drawNewFrame(x, y, newFrame) {\r\n    this.currentFrame = newFrame;\r\n\r\n    return this.innerDraw(x, y);\r\n  }\r\n  /**\r\n   * Get the area that is reserved for the graphical presenation of this object as a rectangle.\r\n   *\r\n   * @method getGraphicalArea\r\n   * @param  {Object} options       toGlobal: Boolean. Should the method return global coordinates or local (movableLayer)\r\n   * @return {AreaSize}               { x: Number, y: Number, width: Number, height: Number}\r\n   */\r\n  getGraphicalArea(options = { toGlobal: true }) {\r\n    const coordinates = options.toGlobal ? this.toGlobal(new PIXI.Point(0, 0)) : this;\r\n\r\n    return {\r\n      x: Math.round(coordinates.x),\r\n      y: Math.round(coordinates.y),\r\n      width: Math.round(this.width),\r\n      height: Math.round(this.height)\r\n    };\r\n  }\r\n  /**\r\n   * Clone object\r\n   *\r\n   * @method clone\r\n   * @param  {Object} renderer              PIXI renderer\r\n   * @param  {Object} options               position: Boolean, anchor: Boolean\r\n   * @return {Object}                       cloned object\r\n   */\r\n  clone(renderer, options = { position: false, anchor: false, scale: false }) {\r\n    const newSprite = new PIXI.Sprite();\r\n\r\n    newSprite.texture = renderer.generateTexture(this);\r\n\r\n    options.anchor && newSprite.anchor.set(this.anchor.x, this.anchor.y);\r\n    options.position && newSprite.position.set(this.x, this.y);\r\n    options.scale && newSprite.scale.set(this.scale.x, this.scale.y);\r\n\r\n    Object.setPrototypeOf(newSprite, this.constructor.prototype);\r\n\r\n    return newSprite;\r\n  }\r\n  /**\r\n   * We pre-calculate global and map coordinates for all objects, to make calculations faster\r\n   * and the whole engine more easy to use.\r\n   */\r\n  initializeCoordinates(mapInstance) {\r\n    _initializeCoordinates(this.coordinates);\r\n    this.getMapCoordinates(mapInstance);\r\n    this.getCenterCoordinates();\r\n  }\r\n  getGlobalCoordinates(coordinates) {\r\n    return this.toGlobal(coordinates || constants.ZERO_COORDINATES);\r\n  }\r\n  getMapCoordinates(mapInstance) {\r\n    this.coordinates.map = this.coordinates.map || mapInstance.getMapCoordinates(this);\r\n    return Object.assign({}, this.coordinates.map);\r\n  }\r\n  getCenterCoordinates() {\r\n    if (!this.coordinates.center) {\r\n      this.coordinates.center = {\r\n        x: this.width / 2,\r\n        y: this.height / 2\r\n      };\r\n    }\r\n\r\n    return this.coordinates.center;\r\n  }\r\n}\r\n\r\nclass ObjectSpriteTerrain extends ObjectSprite {\r\n  /**\r\n   * Terrain tile like desert or mountain, non-movable and cacheable. Normally, but not necessarily, these are\r\n   * inherited, depending on the map type. For example you might want to add some click area for these\r\n   *\r\n   * @class ObjectSpriteTerrain\r\n   * @constructor\r\n   * @extends ObjectSprite\r\n   * @param {Coordinates} coords        format: {x: Number, y: Number}. Coordinates for the object relative to it's parent\r\n   * @param {object} data               This units custom data\r\n   */\r\n  constructor(texture, coords, { data = null } = {}) {\r\n    super(texture, coords, { data });\r\n\r\n    this.name = 'DefaultTerrainObject';\r\n    this.type = 'terrain';\r\n    this.highlightable = false;\r\n  }\r\n}\r\n\r\nclass ObjectSpriteUnit extends ObjectSprite {\r\n  /**\r\n   * Map unit like infantry or worker, usually something with actions or movable. Usually these are extended, depending on the map type.\r\n   * For example you might want to add some click area for these (e.g. hexagon)\r\n   *\r\n   * @class ObjectSpriteUnit\r\n   * @constructor\r\n   * @extends ObjectSprite\r\n   * @requires graphics\r\n   * @param {Object} coords               Coordinates for the object relative to it's parent\r\n   * @param {Integer} coords.x            X coordinate\r\n   * @param {Integer} coords.y            Y coordinate\r\n   * @param {object} data                 This units data\r\n   */\r\n  constructor(texture, coords, { data = null } = {}) {\r\n    super(texture, coords, { data });\r\n\r\n    this.name = 'DefaultUnitObjects';\r\n    this.type = 'unit';\r\n    /**\r\n     * actions bound to this object. @todo THIS HAS NOT BEEN IMPLEMENTED YET!\r\n     *\r\n     * @attribute actions\r\n     * @type {Object}\r\n     */\r\n    this.actions = {};\r\n  }\r\n  /**\r\n   * Execute action on units (move, attack etc.). @todo THIS HAS NOT BEEN IMPLEMENTED YET!\r\n   *\r\n   * @method  doAction\r\n   * @param {String} type\r\n   */\r\n  doAction(type) {\r\n    this.actions[type].forEach(action => {\r\n      action();\r\n    });\r\n  }\r\n  /**\r\n   * Add certain action type. @todo THIS HAS NOT BEEN IMPLEMENTED YET!\r\n   *\r\n   * @method addActionType\r\n   * @param {String} type\r\n   */\r\n  addActionType(type) {\r\n    this.actions[type] = this.actions[type] || [];\r\n  }\r\n  /**\r\n   * Attach callback for the certain action type. @todo THIS HAS NOT BEEN IMPLEMENTED YET!\r\n   *\r\n   * @method addCallbackToAction\r\n   * @param {String} type\r\n   * @param {Function} cb\r\n   */\r\n  addCallbackToAction(type, cb) {\r\n    this.actions[type].push(cb);\r\n  }\r\n  /**\r\n   * @method dropShadow\r\n   */\r\n  dropShadow(...args) {\r\n    return utils.effects.dropShadow(...args);\r\n  }\r\n  /**\r\n    * This is abstract method and needs to be implemented with a plugin. Core module has an implementation for this and if you\r\n    * don't implement your own, I suggest you use it. You can attach any method to object if you wish. Like attack, siege, greet, talk.\r\n    *\r\n    * @method move\r\n    * @requires  mapAPIa..('objectMove\") to be declared\r\n    * @attribute [name]\r\n    */\r\n  move(to) {\r\n    mapEvents.publish('objectMove', this);\r\n    mapAPI.post('objectMove', {\r\n      id: this.id,\r\n      from: {\r\n        x: this.x,\r\n        y: this.y\r\n      },\r\n      to\r\n    });\r\n  }\r\n}\r\n\r\nfunction _initializeCoordinates(object) {\r\n  object.center = null;\r\n  object.map = null;\r\n}\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default {\r\n  ObjectSprite,\r\n  ObjectSpriteTerrain,\r\n  ObjectSpriteUnit\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/Objects.js\n **/","import * as Q from 'q';\r\nimport { Howl } from 'howler';\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nclass Sound {\r\n  constructor() {\r\n    this._allSounds = {};\r\n  }\r\n  /**\r\n   * Add a sound to be used.\r\n   *\r\n   * @namespace flatworld\r\n   * @method add\r\n   * @param {String} name               Name / identifier\r\n   * @param {String} urls               An array of urls or one url\r\n   * @param {Object} options            *OPTIONAL*\r\n   * @param {Booleam} options.loop      Wether the sound will be looped or not\r\n   * @param {Object} options.volume     The volume of the sound (0 - 1)\r\n   * @return {Object}                   Created instance of sound\r\n   */\r\n  add(name, urls, options = { loop: false, volume: 1 }) {\r\n    //const ERROR_STRING = 'The sound \"' + name + '\" was unable to load!';\r\n    const { loop, volume } = options;\r\n\r\n    this._allSounds[name] = {};\r\n    this._allSounds[name] = new Howl({\r\n      src: [].concat(urls),\r\n      autoplay: false,\r\n      loop,\r\n      volume\r\n    });\r\n\r\n    return this._allSounds[name];\r\n  }\r\n  /**\r\n   * Remove the sound from usage and memory\r\n   *\r\n   * @method remove\r\n   * @param {String} name     Name / identifier of the sound to be removed\r\n   */\r\n  remove(name) {\r\n    delete this._allSounds[name];\r\n  }\r\n  /**\r\n   * Start the sounds playback\r\n   *\r\n   * @method play\r\n   * @param  {String} name      Name of the sound to play\r\n   */\r\n  play(name) {\r\n    const promise = Q.defer();\r\n\r\n    this._allSounds[name]._onend = () => {\r\n      promise.resolve(true);\r\n    };\r\n    this._allSounds[name].play();\r\n  }\r\n  /**\r\n   * stop sound playback\r\n   *\r\n   * @method stop\r\n   * @param  {String} name      Name of the sound to stop playing\r\n   */\r\n  stop(name) {\r\n    this._allSounds[name].stop();\r\n  }\r\n  /**\r\n   * Fade the sound in or out\r\n   *\r\n   * @method  fade\r\n   * @param  {String} name            Name / identifier of the sound\r\n   * @param  {Object} from            Volume to fade from\r\n   * @param  {Object} to              Volume to fade to\r\n   * @param  {Object} duration        Time in milliseconds to fade\r\n   * @return {Promise}                Promise that resolves after fade is complete\r\n   */\r\n  fade(name, from, to, duration) {\r\n    const promise = Q.defer();\r\n    const cb = () => {\r\n      promise.resolve(true);\r\n    };\r\n\r\n    this._allSounds[name].fade(from, to, duration, cb);\r\n\r\n    return promise.promise;\r\n  }\r\n}\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default Sound;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/Sound.js\n **/","/*!\n *  howler.js v2.0.1\n *  howlerjs.com\n *\n *  (c) 2013-2016, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create the global controller. All contained methods and properties apply\n   * to all sounds that are currently playing or will be in the future.\n   */\n  var HowlerGlobal = function() {\n    this.init();\n  };\n  HowlerGlobal.prototype = {\n    /**\n     * Initialize the global Howler object.\n     * @return {Howler}\n     */\n    init: function() {\n      var self = this || Howler;\n\n      // Internal properties.\n      self._codecs = {};\n      self._howls = [];\n      self._muted = false;\n      self._volume = 1;\n      self._canPlayEvent = 'canplaythrough';\n      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n      // Public properties.\n      self.masterGain = null;\n      self.noAudio = false;\n      self.usingWebAudio = true;\n      self.autoSuspend = true;\n      self.ctx = null;\n\n      // Set to false to disable the auto iOS enabler.\n      self.mobileAutoEnable = true;\n\n      // Setup the various state values for global tracking.\n      self._setup();\n\n      return self;\n    },\n\n    /**\n     * Get/set the global volume for all sounds.\n     * @param  {Float} vol Volume from 0.0 to 1.0.\n     * @return {Howler/Float}     Returns self or current volume.\n     */\n    volume: function(vol) {\n      var self = this || Howler;\n      vol = parseFloat(vol);\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        self._volume = vol;\n\n        // Don't update any of the nodes if we are muted.\n        if (self._muted) {\n          return self;\n        }\n\n        // When using Web Audio, we just need to adjust the master gain.\n        if (self.usingWebAudio) {\n          self.masterGain.gain.value = vol;\n        }\n\n        // Loop through and change volume for all HTML5 audio nodes.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and change the volumes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node) {\n                sound._node.volume = sound._volume * vol;\n              }\n            }\n          }\n        }\n\n        return self;\n      }\n\n      return self._volume;\n    },\n\n    /**\n     * Handle muting and unmuting globally.\n     * @param  {Boolean} muted Is muted or not.\n     */\n    mute: function(muted) {\n      var self = this || Howler;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      self._muted = muted;\n\n      // With Web Audio, we just need to mute the master gain.\n      if (self.usingWebAudio) {\n        self.masterGain.gain.value = muted ? 0 : self._volume;\n      }\n\n      // Loop through and mute all HTML5 Audio nodes.\n      for (var i=0; i<self._howls.length; i++) {\n        if (!self._howls[i]._webAudio) {\n          // Get all of the sounds in this Howl group.\n          var ids = self._howls[i]._getSoundIds();\n\n          // Loop through all sounds and mark the audio node as muted.\n          for (var j=0; j<ids.length; j++) {\n            var sound = self._howls[i]._soundById(ids[j]);\n\n            if (sound && sound._node) {\n              sound._node.muted = (muted) ? true : sound._muted;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Unload and destroy all currently loaded Howl objects.\n     * @return {Howler}\n     */\n    unload: function() {\n      var self = this || Howler;\n\n      for (var i=self._howls.length-1; i>=0; i--) {\n        self._howls[i].unload();\n      }\n\n      // Create a new AudioContext to make sure it is fully reset.\n      if (self.usingWebAudio && typeof self.ctx.close !== 'undefined') {\n        self.ctx.close();\n        self.ctx = null;\n        setupAudioContext();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for codec support of specific extension.\n     * @param  {String} ext Audio file extention.\n     * @return {Boolean}\n     */\n    codecs: function(ext) {\n      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n    },\n\n    /**\n     * Setup various state values for global tracking.\n     * @return {Howler}\n     */\n    _setup: function() {\n      var self = this || Howler;\n\n      // Keeps track of the suspend/resume state of the AudioContext.\n      self.state = self.ctx ? self.ctx.state || 'running' : 'running';\n\n      // Automatically begin the 30-second suspend process\n      self._autoSuspend();\n\n      // Check for supported codecs.\n      if (!self.noAudio) {\n        self._setupCodecs();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for browser support for various codecs and cache the results.\n     * @return {Howler}\n     */\n    _setupCodecs: function() {\n      var self = this || Howler;\n      var audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n\n      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n        return self;\n      }\n\n      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n      var checkOpera = self._navigator && self._navigator.userAgent.match(/OPR\\/([0-6].)/g);\n      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n\n      self._codecs = {\n        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n        mpeg: !!mpegTest,\n        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        wav: !!audioTest.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, ''),\n        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        weba: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        webm: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n      };\n\n      return self;\n    },\n\n    /**\n     * Mobile browsers will only allow audio to be played after a user interaction.\n     * Attempt to automatically unlock audio on the first user interaction.\n     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     * @return {Howler}\n     */\n    _enableMobileAudio: function() {\n      var self = this || Howler;\n\n      // Only run this on mobile devices if audio isn't already eanbled.\n      var isMobile = /iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(self._navigator && self._navigator.userAgent);\n      var isTouch = !!(('ontouchend' in window) || (self._navigator && self._navigator.maxTouchPoints > 0) || (self._navigator && self._navigator.msMaxTouchPoints > 0));\n      if (self._mobileEnabled || !self.ctx || (!isMobile && !isTouch)) {\n        return;\n      }\n\n      self._mobileEnabled = false;\n\n      // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n      // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n      // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n      if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n        self._mobileUnloaded = true;\n        self.unload();\n      }\n\n      // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n      // http://stackoverflow.com/questions/24119684\n      self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n\n      // Call this method on touch start to create and play a buffer,\n      // then check if the audio actually played to determine if\n      // audio has now been unlocked on iOS, Android, etc.\n      var unlock = function() {\n        // Create an empty buffer.\n        var source = self.ctx.createBufferSource();\n        source.buffer = self._scratchBuffer;\n        source.connect(self.ctx.destination);\n\n        // Play the empty buffer.\n        if (typeof source.start === 'undefined') {\n          source.noteOn(0);\n        } else {\n          source.start(0);\n        }\n\n        // Setup a timeout to check that we are unlocked on the next event loop.\n        source.onended = function() {\n          source.disconnect(0);\n\n          // Update the unlocked state and prevent this check from happening again.\n          self._mobileEnabled = true;\n          self.mobileAutoEnable = false;\n\n          // Remove the touch start listener.\n          document.removeEventListener('touchend', unlock, true);\n        };\n      };\n\n      // Setup a touch start listener to attempt an unlock in.\n      document.addEventListener('touchend', unlock, true);\n\n      return self;\n    },\n\n    /**\n     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n     * @return {Howler}\n     */\n    _autoSuspend: function() {\n      var self = this;\n\n      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      // Check if any sounds are playing.\n      for (var i=0; i<self._howls.length; i++) {\n        if (self._howls[i]._webAudio) {\n          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n            if (!self._howls[i]._sounds[j]._paused) {\n              return self;\n            }\n          }\n        }\n      }\n\n      if (self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n      }\n\n      // If no sound has played after 30 seconds, suspend the context.\n      self._suspendTimer = setTimeout(function() {\n        if (!self.autoSuspend) {\n          return;\n        }\n\n        self._suspendTimer = null;\n        self.state = 'suspending';\n        self.ctx.suspend().then(function() {\n          self.state = 'suspended';\n\n          if (self._resumeAfterSuspend) {\n            delete self._resumeAfterSuspend;\n            self._autoResume();\n          }\n        });\n      }, 30000);\n\n      return self;\n    },\n\n    /**\n     * Automatically resume the Web Audio AudioContext when a new sound is played.\n     * @return {Howler}\n     */\n    _autoResume: function() {\n      var self = this;\n\n      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      if (self.state === 'running' && self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n        self._suspendTimer = null;\n      } else if (self.state === 'suspended') {\n        self.state = 'resuming';\n        self.ctx.resume().then(function() {\n          self.state = 'running';\n        });\n\n        if (self._suspendTimer) {\n          clearTimeout(self._suspendTimer);\n          self._suspendTimer = null;\n        }\n      } else if (self.state === 'suspending') {\n        self._resumeAfterSuspend = true;\n      }\n\n      return self;\n    }\n  };\n\n  // Setup the global audio controller.\n  var Howler = new HowlerGlobal();\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create an audio group controller.\n   * @param {Object} o Passed in properties for this group.\n   */\n  var Howl = function(o) {\n    var self = this;\n\n    // Throw an error if no source is provided.\n    if (!o.src || o.src.length === 0) {\n      console.error('An array of source files must be passed with any new Howl.');\n      return;\n    }\n\n    self.init(o);\n  };\n  Howl.prototype = {\n    /**\n     * Initialize a new Howl group object.\n     * @param  {Object} o Passed in properties for this group.\n     * @return {Howl}\n     */\n    init: function(o) {\n      var self = this;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!Howler.ctx) {\n        setupAudioContext();\n      }\n\n      // Setup user-defined default properties.\n      self._autoplay = o.autoplay || false;\n      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n      self._html5 = o.html5 || false;\n      self._muted = o.mute || false;\n      self._loop = o.loop || false;\n      self._pool = o.pool || 5;\n      self._preload = (typeof o.preload === 'boolean') ? o.preload : true;\n      self._rate = o.rate || 1;\n      self._sprite = o.sprite || {};\n      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n      self._volume = o.volume !== undefined ? o.volume : 1;\n\n      // Setup all other default properties.\n      self._duration = 0;\n      self._state = 'unloaded';\n      self._sounds = [];\n      self._endTimers = {};\n      self._queue = [];\n\n      // Setup event listeners.\n      self._onend = o.onend ? [{fn: o.onend}] : [];\n      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n      self._onload = o.onload ? [{fn: o.onload}] : [];\n      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n\n      // Web Audio or HTML5 Audio?\n      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n      // Automatically try to enable audio on iOS.\n      if (typeof Howler.ctx !== 'undefined' && Howler.ctx && Howler.mobileAutoEnable) {\n        Howler._enableMobileAudio();\n      }\n\n      // Keep track of this Howl group in the global controller.\n      Howler._howls.push(self);\n\n      // Load the source file unless otherwise specified.\n      if (self._preload) {\n        self.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Load the audio file.\n     * @return {Howler}\n     */\n    load: function() {\n      var self = this;\n      var url = null;\n\n      // If no audio is available, quit immediately.\n      if (Howler.noAudio) {\n        self._emit('loaderror', null, 'No audio support.');\n        return;\n      }\n\n      // Make sure our source is in an array.\n      if (typeof self._src === 'string') {\n        self._src = [self._src];\n      }\n\n      // Loop through the sources and pick the first one that is compatible.\n      for (var i=0; i<self._src.length; i++) {\n        var ext, str;\n\n        if (self._format && self._format[i]) {\n          // If an extension was specified, use that instead.\n          ext = self._format[i];\n        } else {\n          // Make sure the source is a string.\n          str = self._src[i];\n          if (typeof str !== 'string') {\n            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n            continue;\n          }\n\n          // Extract the file extension from the URL or base64 data URI.\n          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n          if (!ext) {\n            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n          }\n\n          if (ext) {\n            ext = ext[1].toLowerCase();\n          }\n        }\n\n        // Check if this extension is available.\n        if (Howler.codecs(ext)) {\n          url = self._src[i];\n          break;\n        }\n      }\n\n      if (!url) {\n        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n        return;\n      }\n\n      self._src = url;\n      self._state = 'loading';\n\n      // If the hosting page is HTTPS and the source isn't,\n      // drop down to HTML5 Audio to avoid Mixed Content errors.\n      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n        self._html5 = true;\n        self._webAudio = false;\n      }\n\n      // Create a new sound object and add it to the pool.\n      new Sound(self);\n\n      // Load and decode the audio data for playback.\n      if (self._webAudio) {\n        loadBuffer(self);\n      }\n\n      return self;\n    },\n\n    /**\n     * Play a sound or resume previous playback.\n     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Number}          Sound ID.\n     */\n    play: function(sprite, internal) {\n      var self = this;\n      var id = null;\n\n      // Determine if a sprite, sound id or nothing was passed\n      if (typeof sprite === 'number') {\n        id = sprite;\n        sprite = null;\n      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n        // If the passed sprite doesn't exist, do nothing.\n        return null;\n      } else if (typeof sprite === 'undefined') {\n        // Use the default sound sprite (plays the full audio length).\n        sprite = '__default';\n\n        // Check if there is a single paused sound that isn't ended.\n        // If there is, play that sound. If not, continue as usual.\n        var num = 0;\n        for (var i=0; i<self._sounds.length; i++) {\n          if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n            num++;\n            id = self._sounds[i]._id;\n          }\n        }\n\n        if (num === 1) {\n          sprite = null;\n        } else {\n          id = null;\n        }\n      }\n\n      // Get the selected node, or get one from the pool.\n      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n      // If the sound doesn't exist, do nothing.\n      if (!sound) {\n        return null;\n      }\n\n      // Select the sprite definition.\n      if (id && !sprite) {\n        sprite = sound._sprite || '__default';\n      }\n\n      // If we have no sprite and the sound hasn't loaded, we must wait\n      // for the sound to load to get our audio's duration.\n      if (self._state !== 'loaded' && !self._sprite[sprite]) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play(self._soundById(sound._id) ? sound._id : undefined);\n          }\n        });\n\n        return sound._id;\n      }\n\n      // Don't play the sound if an id was passed and it is already playing.\n      if (id && !sound._paused) {\n        // Trigger the play event, in order to keep iterating through queue.\n        if (!internal) {\n          setTimeout(function() {\n            self._emit('play', sound._id);\n          }, 0);\n        }\n\n        return sound._id;\n      }\n\n      // Make sure the AudioContext isn't suspended, and resume it if it is.\n      if (self._webAudio) {\n        Howler._autoResume();\n      }\n\n      // Determine how long to play for and where to start playing.\n      var seek = sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000;\n      var duration = ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek;\n      var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n      // Update the parameters of the sound\n      sound._paused = false;\n      sound._ended = false;\n      sound._sprite = sprite;\n      sound._seek = seek;\n      sound._start = self._sprite[sprite][0] / 1000;\n      sound._stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n      sound._loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Begin the actual playback.\n      var node = sound._node;\n      if (self._webAudio) {\n        // Fire this when the sound is ready to play to begin Web Audio playback.\n        var playWebAudio = function() {\n          self._refreshBuffer(sound);\n\n          // Setup the playback params.\n          var vol = (sound._muted || self._muted) ? 0 : sound._volume;\n          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n          sound._playStart = Howler.ctx.currentTime;\n\n          // Play the sound using the supported method.\n          if (typeof node.bufferSource.start === 'undefined') {\n            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n          } else {\n            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n          }\n\n          // Start a new timer if none is present.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            setTimeout(function() {\n              self._emit('play', sound._id);\n            }, 0);\n          }\n        };\n\n        if (self._state === 'loaded') {\n          playWebAudio();\n        } else {\n          // Wait for the audio to load and then begin playback.\n          self.once('load', playWebAudio, sound._id);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      } else {\n        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n        var playHtml5 = function() {\n          node.currentTime = seek;\n          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n          node.volume = sound._volume * Howler.volume();\n          node.playbackRate = sound._rate;\n\n          setTimeout(function() {\n            node.play();\n\n            // Setup the new end timer.\n            if (timeout !== Infinity) {\n              self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            if (!internal) {\n              self._emit('play', sound._id);\n            }\n          }, 0);\n        };\n\n        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n        var loadedNoReadyState = (self._state === 'loaded' && (window && window.ejecta || !node.readyState && Howler._navigator.isCocoonJS));\n        if (node.readyState === 4 || loadedNoReadyState) {\n          playHtml5();\n        } else {\n          var listener = function() {\n            // Begin playback.\n            playHtml5();\n\n            // Clear this listener.\n            node.removeEventListener(Howler._canPlayEvent, listener, false);\n          };\n          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      }\n\n      return sound._id;\n    },\n\n    /**\n     * Pause playback and save current position.\n     * @param  {Number} id The sound ID (empty to pause all in group).\n     * @return {Howl}\n     */\n    pause: function(id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to pause when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'pause',\n          action: function() {\n            self.pause(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be paused.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound && !sound._paused) {\n          // Reset the seek position.\n          sound._seek = self.seek(ids[i]);\n          sound._rateSeek = 0;\n          sound._paused = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // make sure the sound has been created\n              if (!sound._node.bufferSource) {\n                return self;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.pause();\n            }\n          }\n\n          // Fire the pause event, unless `true` is passed as the 2nd argument.\n          if (!arguments[1]) {\n            self._emit('pause', sound._id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Stop playback and reset to start.\n     * @param  {Number} id The sound ID (empty to stop all in group).\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Howl}\n     */\n    stop: function(id, internal) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'stop',\n          action: function() {\n            self.stop(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be stopped.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          // Reset the seek position.\n          sound._seek = sound._start || 0;\n          sound._rateSeek = 0;\n          sound._paused = true;\n          sound._ended = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // make sure the sound has been created\n              if (!sound._node.bufferSource) {\n                if (!internal) {\n                  self._emit('stop', sound._id);\n                }\n\n                return self;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.currentTime = sound._start || 0;\n              sound._node.pause();\n            }\n          }\n        }\n\n        if (sound && !internal) {\n          self._emit('stop', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Mute/unmute a single sound or all sounds in this Howl group.\n     * @param  {Boolean} muted Set to true to mute and false to unmute.\n     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n     * @return {Howl}\n     */\n    mute: function(muted, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'mute',\n          action: function() {\n            self.mute(muted, id);\n          }\n        });\n\n        return self;\n      }\n\n      // If applying mute/unmute to all sounds, update the group's value.\n      if (typeof id === 'undefined') {\n        if (typeof muted === 'boolean') {\n          self._muted = muted;\n        } else {\n          return self._muted;\n        }\n      }\n\n      // If no id is passed, get all ID's to be muted.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._muted = muted;\n\n          if (self._webAudio && sound._node) {\n            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n          } else if (sound._node) {\n            sound._node.muted = Howler._muted ? true : muted;\n          }\n\n          self._emit('mute', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n     *   volume() -> Returns the group's volume value.\n     *   volume(id) -> Returns the sound id's current volume.\n     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n     *   volume(vol, id) -> Sets the volume of passed sound id.\n     * @return {Howl/Number} Returns self or current volume.\n     */\n    volume: function() {\n      var self = this;\n      var args = arguments;\n      var vol, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // Return the value of the groups' volume.\n        return self._volume;\n      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n        // First check if this is an ID, and if not, assume it is a new volume.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          vol = parseFloat(args[0]);\n        }\n      } else if (args.length >= 2) {\n        vol = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the volume or return the current volume.\n      var sound;\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n        if (self._state !== 'loaded') {\n          self._queue.push({\n            event: 'volume',\n            action: function() {\n              self.volume.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group volume.\n        if (typeof id === 'undefined') {\n          self._volume = vol;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            sound._volume = vol;\n\n            // Stop currently running fades.\n            if (!args[2]) {\n              self._stopFade(id[i]);\n            }\n\n            if (self._webAudio && sound._node && !sound._muted) {\n              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n            } else if (sound._node && !sound._muted) {\n              sound._node.volume = vol * Howler.volume();\n            }\n\n            self._emit('volume', sound._id);\n          }\n        }\n      } else {\n        sound = id ? self._soundById(id) : self._sounds[0];\n        return sound ? sound._volume : 0;\n      }\n\n      return self;\n    },\n\n    /**\n     * Fade a currently playing sound between two volumes (if no id is passsed, all sounds will fade).\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id (omit to fade all sounds).\n     * @return {Howl}\n     */\n    fade: function(from, to, len, id) {\n      var self = this;\n      var diff = Math.abs(from - to);\n      var dir = from > to ? 'out' : 'in';\n      var steps = diff / 0.01;\n      var stepLen = (steps > 0) ? len / steps : len;\n\n      // Since browsers clamp timeouts to 4ms, we need to clamp our steps to that too.\n      if (stepLen < 4) {\n        steps = Math.ceil(steps / (4 / stepLen));\n        stepLen = 4;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'fade',\n          action: function() {\n            self.fade(from, to, len, id);\n          }\n        });\n\n        return self;\n      }\n\n      // Set the volume to the start position.\n      self.volume(from, id);\n\n      // Fade the volume of one or all sounds.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n        if (sound) {\n          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n          if (!id) {\n            self._stopFade(ids[i]);\n          }\n\n          // If we are using Web Audio, let the native methods do the actual fade.\n          if (self._webAudio && !sound._muted) {\n            var currentTime = Howler.ctx.currentTime;\n            var end = currentTime + (len / 1000);\n            sound._volume = from;\n            sound._node.gain.setValueAtTime(from, currentTime);\n            sound._node.gain.linearRampToValueAtTime(to, end);\n          }\n\n          var vol = from;\n          sound._interval = setInterval(function(soundId, sound) {\n            // Update the volume amount, but only if the volume should change.\n            if (steps > 0) {\n              vol += (dir === 'in' ? 0.01 : -0.01);\n            }\n\n            // Make sure the volume is in the right bounds.\n            vol = Math.max(0, vol);\n            vol = Math.min(1, vol);\n\n            // Round to within 2 decimal points.\n            vol = Math.round(vol * 100) / 100;\n\n            // Change the volume.\n            if (self._webAudio) {\n              if (typeof id === 'undefined') {\n                self._volume = vol;\n              }\n\n              sound._volume = vol;\n            } else {\n              self.volume(vol, soundId, true);\n            }\n\n            // When the fade is complete, stop it and fire event.\n            if (vol === to) {\n              clearInterval(sound._interval);\n              sound._interval = null;\n              self.volume(vol, soundId);\n              self._emit('fade', soundId);\n            }\n          }.bind(self, ids[i], sound), stepLen);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Internal method that stops the currently playing fade when\n     * a new fade starts, volume is changed or the sound is stopped.\n     * @param  {Number} id The sound id.\n     * @return {Howl}\n     */\n    _stopFade: function(id) {\n      var self = this;\n      var sound = self._soundById(id);\n\n      if (sound && sound._interval) {\n        if (self._webAudio) {\n          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n        }\n\n        clearInterval(sound._interval);\n        sound._interval = null;\n        self._emit('fade', id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   loop() -> Returns the group's loop value.\n     *   loop(id) -> Returns the sound id's loop value.\n     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n     *   loop(loop, id) -> Sets the loop value of passed sound id.\n     * @return {Howl/Boolean} Returns self or current loop value.\n     */\n    loop: function() {\n      var self = this;\n      var args = arguments;\n      var loop, id, sound;\n\n      // Determine the values for loop and id.\n      if (args.length === 0) {\n        // Return the grou's loop value.\n        return self._loop;\n      } else if (args.length === 1) {\n        if (typeof args[0] === 'boolean') {\n          loop = args[0];\n          self._loop = loop;\n        } else {\n          // Return this sound's loop value.\n          sound = self._soundById(parseInt(args[0], 10));\n          return sound ? sound._loop : false;\n        }\n      } else if (args.length === 2) {\n        loop = args[0];\n        id = parseInt(args[1], 10);\n      }\n\n      // If no id is passed, get all ID's to be looped.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._loop = loop;\n          if (self._webAudio && sound._node && sound._node.bufferSource) {\n            sound._node.bufferSource.loop = loop;\n            if (loop) {\n              sound._node.bufferSource.loopStart = sound._start || 0;\n              sound._node.bufferSource.loopEnd = sound._stop;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   rate() -> Returns the first sound node's current playback rate.\n     *   rate(id) -> Returns the sound id's current playback rate.\n     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n     * @return {Howl/Number} Returns self or the current playback rate.\n     */\n    rate: function() {\n      var self = this;\n      var args = arguments;\n      var rate, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current rate of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new rate value.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          rate = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        rate = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the playback rate or return the current value.\n      var sound;\n      if (typeof rate === 'number') {\n        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n        if (self._state !== 'loaded') {\n          self._queue.push({\n            event: 'rate',\n            action: function() {\n              self.rate.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group rate.\n        if (typeof id === 'undefined') {\n          self._rate = rate;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            // Keep track of our position when the rate changed and update the playback\n            // start position so we can properly adjust the seek position for time elapsed.\n            sound._rateSeek = self.seek(id[i]);\n            sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n            sound._rate = rate;\n\n            // Change the playback rate.\n            if (self._webAudio && sound._node && sound._node.bufferSource) {\n              sound._node.bufferSource.playbackRate.value = rate;\n            } else if (sound._node) {\n              sound._node.playbackRate = rate;\n            }\n\n            // Reset the timers.\n            var seek = self.seek(id[i]);\n            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n            // Start a new end timer if sound is already playing.\n            if (self._endTimers[id[i]] || !sound._paused) {\n              self._clearTimer(id[i]);\n              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            self._emit('rate', sound._id);\n          }\n        }\n      } else {\n        sound = self._soundById(id);\n        return sound ? sound._rate : self._rate;\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   seek() -> Returns the first sound node's current seek position.\n     *   seek(id) -> Returns the sound id's current seek position.\n     *   seek(seek) -> Sets the seek position of the first sound node.\n     *   seek(seek, id) -> Sets the seek position of passed sound id.\n     * @return {Howl/Number} Returns self or the current seek position.\n     */\n    seek: function() {\n      var self = this;\n      var args = arguments;\n      var seek, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current position of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new seek position.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          id = self._sounds[0]._id;\n          seek = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        seek = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // If there is no ID, bail out.\n      if (typeof id === 'undefined') {\n        return self;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n      if (self._state !== 'loaded') {\n        self._queue.push({\n          event: 'seek',\n          action: function() {\n            self.seek.apply(self, args);\n          }\n        });\n\n        return self;\n      }\n\n      // Get the sound.\n      var sound = self._soundById(id);\n\n      if (sound) {\n        if (typeof seek === 'number' && seek >= 0) {\n          // Pause the sound and update position for restarting playback.\n          var playing = self.playing(id);\n          if (playing) {\n            self.pause(id, true);\n          }\n\n          // Move the position of the track and cancel timer.\n          sound._seek = seek;\n          sound._ended = false;\n          self._clearTimer(id);\n\n          // Restart the playback if the sound was playing.\n          if (playing) {\n            self.play(id, true);\n          }\n\n          // Update the seek position for HTML5 Audio.\n          if (!self._webAudio && sound._node) {\n            sound._node.currentTime = seek;\n          }\n\n          self._emit('seek', id);\n        } else {\n          if (self._webAudio) {\n            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n          } else {\n            return sound._node.currentTime;\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n     * @return {Boolean} True if playing and false if not.\n     */\n    playing: function(id) {\n      var self = this;\n\n      // Check the passed sound ID (if any).\n      if (typeof id === 'number') {\n        var sound = self._soundById(id);\n        return sound ? !sound._paused : false;\n      }\n\n      // Otherwise, loop through all sounds and check if any are playing.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (!self._sounds[i]._paused) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n     * @return {Number} Audio duration in seconds.\n     */\n    duration: function(id) {\n      var self = this;\n      var duration = self._duration;\n\n      // If we pass an ID, get the sound and return the sprite length.\n      var sound = self._soundById(id);\n      if (sound) {\n        duration = self._sprite[sound._sprite][1] / 1000;\n      }\n\n      return duration;\n    },\n\n    /**\n     * Returns the current loaded state of this Howl.\n     * @return {String} 'unloaded', 'loading', 'loaded'\n     */\n    state: function() {\n      return this._state;\n    },\n\n    /**\n     * Unload and destroy the current Howl object.\n     * This will immediately stop all sound instances attached to this group.\n     */\n    unload: function() {\n      var self = this;\n\n      // Stop playing any active sounds.\n      var sounds = self._sounds;\n      for (var i=0; i<sounds.length; i++) {\n        // Stop the sound if it is currently playing.\n        if (!sounds[i]._paused) {\n          self.stop(sounds[i]._id);\n          self._emit('end', sounds[i]._id);\n        }\n\n        // Remove the source or disconnect.\n        if (!self._webAudio) {\n          // Set the source to 0-second silence to stop any downloading.\n          sounds[i]._node.src = 'data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=';\n\n          // Remove any event listeners.\n          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n        }\n\n        // Empty out all of the nodes.\n        delete sounds[i]._node;\n\n        // Make sure all timers are cleared out.\n        self._clearTimer(sounds[i]._id);\n\n        // Remove the references in the global Howler object.\n        var index = Howler._howls.indexOf(self);\n        if (index >= 0) {\n          Howler._howls.splice(index, 1);\n        }\n      }\n\n      // Delete this sound from the cache (if no other Howl is using it).\n      var remCache = true;\n      for (i=0; i<Howler._howls.length; i++) {\n        if (Howler._howls[i]._src === self._src) {\n          remCache = false;\n          break;\n        }\n      }\n\n      if (cache && remCache) {\n        delete cache[self._src];\n      }\n\n      // Clear global errors.\n      Howler.noAudio = false;\n\n      // Clear out `self`.\n      self._state = 'unloaded';\n      self._sounds = [];\n      self = null;\n\n      return null;\n    },\n\n    /**\n     * Listen to a custom event.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n     * @return {Howl}\n     */\n    on: function(event, fn, id, once) {\n      var self = this;\n      var events = self['_on' + event];\n\n      if (typeof fn === 'function') {\n        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n      }\n\n      return self;\n    },\n\n    /**\n     * Remove a custom event. Call without parameters to remove all events.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n     * @param  {Number}   id    (optional) Only remove events for this sound.\n     * @return {Howl}\n     */\n    off: function(event, fn, id) {\n      var self = this;\n      var events = self['_on' + event];\n      var i = 0;\n\n      if (fn) {\n        // Loop through event store and remove the passed function.\n        for (i=0; i<events.length; i++) {\n          if (fn === events[i].fn && id === events[i].id) {\n            events.splice(i, 1);\n            break;\n          }\n        }\n      } else if (event) {\n        // Clear out all events of this type.\n        self['_on' + event] = [];\n      } else {\n        // Clear out all events of every type.\n        var keys = Object.keys(self);\n        for (i=0; i<keys.length; i++) {\n          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n            self[keys[i]] = [];\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Listen to a custom event and remove it once fired.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @return {Howl}\n     */\n    once: function(event, fn, id) {\n      var self = this;\n\n      // Setup the event listener.\n      self.on(event, fn, id, 1);\n\n      return self;\n    },\n\n    /**\n     * Emit all events of a specific type and pass the sound id.\n     * @param  {String} event Event name.\n     * @param  {Number} id    Sound ID.\n     * @param  {Number} msg   Message to go with event.\n     * @return {Howl}\n     */\n    _emit: function(event, id, msg) {\n      var self = this;\n      var events = self['_on' + event];\n\n      // Loop through event store and fire all functions.\n      for (var i=events.length-1; i>=0; i--) {\n        if (!events[i].id || events[i].id === id || event === 'load') {\n          setTimeout(function(fn) {\n            fn.call(this, id, msg);\n          }.bind(self, events[i].fn), 0);\n\n          // If this event was setup with `once`, remove it.\n          if (events[i].once) {\n            self.off(event, events[i].fn, events[i].id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Queue of actions initiated before the sound has loaded.\n     * These will be called in sequence, with the next only firing\n     * after the previous has finished executing (even if async like play).\n     * @return {Howl}\n     */\n    _loadQueue: function() {\n      var self = this;\n\n      if (self._queue.length > 0) {\n        var task = self._queue[0];\n\n        // don't move onto the next task until this one is done\n        self.once(task.event, function() {\n          self._queue.shift();\n          self._loadQueue();\n        });\n\n        task.action();\n      }\n\n      return self;\n    },\n\n    /**\n     * Fired when playback ends at the end of the duration.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _ended: function(sound) {\n      var self = this;\n      var sprite = sound._sprite;\n\n      // Should this sound loop?\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Fire the ended event.\n      self._emit('end', sound._id);\n\n      // Restart the playback for HTML5 Audio loop.\n      if (!self._webAudio && loop) {\n        self.stop(sound._id, true).play(sound._id);\n      }\n\n      // Restart this timer if on a Web Audio loop.\n      if (self._webAudio && loop) {\n        self._emit('play', sound._id);\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        sound._playStart = Howler.ctx.currentTime;\n\n        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n      }\n\n      // Mark the node as paused.\n      if (self._webAudio && !loop) {\n        sound._paused = true;\n        sound._ended = true;\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        self._clearTimer(sound._id);\n\n        // Clean up the buffer source.\n        self._cleanBuffer(sound._node);\n\n        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n        Howler._autoSuspend();\n      }\n\n      // When using a sprite, end the track.\n      if (!self._webAudio && !loop) {\n        self.stop(sound._id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Clear the end timer for a sound playback.\n     * @param  {Number} id The sound ID.\n     * @return {Howl}\n     */\n    _clearTimer: function(id) {\n      var self = this;\n\n      if (self._endTimers[id]) {\n        clearTimeout(self._endTimers[id]);\n        delete self._endTimers[id];\n      }\n\n      return self;\n    },\n\n    /**\n     * Return the sound identified by this ID, or return null.\n     * @param  {Number} id Sound ID\n     * @return {Object}    Sound object or null.\n     */\n    _soundById: function(id) {\n      var self = this;\n\n      // Loop through all sounds and find the one with this ID.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (id === self._sounds[i]._id) {\n          return self._sounds[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Return an inactive sound from the pool or create a new one.\n     * @return {Sound} Sound playback object.\n     */\n    _inactiveSound: function() {\n      var self = this;\n\n      self._drain();\n\n      // Find the first inactive node to recycle.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          return self._sounds[i].reset();\n        }\n      }\n\n      // If no inactive node was found, create a new one.\n      return new Sound(self);\n    },\n\n    /**\n     * Drain excess inactive sounds from the pool.\n     */\n    _drain: function() {\n      var self = this;\n      var limit = self._pool;\n      var cnt = 0;\n      var i = 0;\n\n      // If there are less sounds than the max pool size, we are done.\n      if (self._sounds.length < limit) {\n        return;\n      }\n\n      // Count the number of inactive sounds.\n      for (i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          cnt++;\n        }\n      }\n\n      // Remove excess inactive sounds, going in reverse order.\n      for (i=self._sounds.length - 1; i>=0; i--) {\n        if (cnt <= limit) {\n          return;\n        }\n\n        if (self._sounds[i]._ended) {\n          // Disconnect the audio source when using Web Audio.\n          if (self._webAudio && self._sounds[i]._node) {\n            self._sounds[i]._node.disconnect(0);\n          }\n\n          // Remove sounds until we have the pool size.\n          self._sounds.splice(i, 1);\n          cnt--;\n        }\n      }\n    },\n\n    /**\n     * Get all ID's from the sounds pool.\n     * @param  {Number} id Only return one ID if one is passed.\n     * @return {Array}    Array of IDs.\n     */\n    _getSoundIds: function(id) {\n      var self = this;\n\n      if (typeof id === 'undefined') {\n        var ids = [];\n        for (var i=0; i<self._sounds.length; i++) {\n          ids.push(self._sounds[i]._id);\n        }\n\n        return ids;\n      } else {\n        return [id];\n      }\n    },\n\n    /**\n     * Load the sound back into the buffer source.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _refreshBuffer: function(sound) {\n      var self = this;\n\n      // Setup the buffer source for playback.\n      sound._node.bufferSource = Howler.ctx.createBufferSource();\n      sound._node.bufferSource.buffer = cache[self._src];\n\n      // Connect to the correct node.\n      if (sound._panner) {\n        sound._node.bufferSource.connect(sound._panner);\n      } else {\n        sound._node.bufferSource.connect(sound._node);\n      }\n\n      // Setup looping and playback rate.\n      sound._node.bufferSource.loop = sound._loop;\n      if (sound._loop) {\n        sound._node.bufferSource.loopStart = sound._start || 0;\n        sound._node.bufferSource.loopEnd = sound._stop;\n      }\n      sound._node.bufferSource.playbackRate.value = sound._rate;\n\n      return self;\n    },\n\n    /**\n     * Prevent memory leaks by cleaning up the buffer source after playback.\n     * @param  {Object} node Sound's audio node containing the buffer source.\n     * @return {Howl}\n     */\n    _cleanBuffer: function(node) {\n      var self = this;\n\n      if (self._scratchBuffer) {\n        node.bufferSource.onended = null;\n        node.bufferSource.disconnect(0);\n        try { node.bufferSource.buffer = self._scratchBuffer; } catch(e) {}\n      }\n      node.bufferSource = null;\n\n      return self;\n    }\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Setup the sound object, which each node attached to a Howl group is contained in.\n   * @param {Object} howl The Howl parent group.\n   */\n  var Sound = function(howl) {\n    this._parent = howl;\n    this.init();\n  };\n  Sound.prototype = {\n    /**\n     * Initialize a new Sound object.\n     * @return {Sound}\n     */\n    init: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup the default parameters.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._muted = parent._muted;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a unique ID for this sound.\n      self._id = Math.round(Date.now() * Math.random());\n\n      // Add itself to the parent's pool.\n      parent._sounds.push(self);\n\n      // Create the new node.\n      self.create();\n\n      return self;\n    },\n\n    /**\n     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n     * @return {Sound}\n     */\n    create: function() {\n      var self = this;\n      var parent = self._parent;\n      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n      if (parent._webAudio) {\n        // Create the gain node for controlling volume (the source will connect to this).\n        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n        self._node.paused = true;\n        self._node.connect(Howler.masterGain);\n      } else {\n        self._node = new Audio();\n\n        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n        self._errorFn = self._errorListener.bind(self);\n        self._node.addEventListener('error', self._errorFn, false);\n\n        // Listen for 'canplaythrough' event to let us know the sound is ready.\n        self._loadFn = self._loadListener.bind(self);\n        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n        // Setup the new audio node.\n        self._node.src = parent._src;\n        self._node.preload = 'auto';\n        self._node.volume = volume * Howler.volume();\n\n        // Begin loading the source.\n        self._node.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Reset the parameters of this sound to the original state (for recycle).\n     * @return {Sound}\n     */\n    reset: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all of the parameters of this sound.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._muted = parent._muted;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._rateSeek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a new ID so that it isn't confused with the previous sound.\n      self._id = Math.round(Date.now() * Math.random());\n\n      return self;\n    },\n\n    /**\n     * HTML5 Audio error listener callback.\n     */\n    _errorListener: function() {\n      var self = this;\n\n      // Fire an error event and pass back the code.\n      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n      // Clear the event listener.\n      self._node.removeEventListener('error', self._errorListener, false);\n    },\n\n    /**\n     * HTML5 Audio canplaythrough listener callback.\n     */\n    _loadListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Round up the duration to account for the lower precision in HTML5 Audio.\n      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n      // Setup a sprite if none is defined.\n      if (Object.keys(parent._sprite).length === 0) {\n        parent._sprite = {__default: [0, parent._duration * 1000]};\n      }\n\n      if (parent._state !== 'loaded') {\n        parent._state = 'loaded';\n        parent._emit('load');\n        parent._loadQueue();\n      }\n\n      if (parent._autoplay) {\n        parent.play();\n      }\n\n      // Clear the event listener.\n      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n    }\n  };\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  var cache = {};\n\n  /**\n   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n   * @param  {Howl} self\n   */\n  var loadBuffer = function(self) {\n    var url = self._src;\n\n    // Check if the buffer has already been cached and use it instead.\n    if (cache[url]) {\n      // Set the duration from the cache.\n      self._duration = cache[url].duration;\n\n      // Load the sound into this Howl.\n      loadSound(self);\n\n      return;\n    }\n\n    if (/^data:[^;]+;base64,/.test(url)) {\n      // Decode the base64 data URI without XHR, since some browsers don't support it.\n      var data = atob(url.split(',')[1]);\n      var dataView = new Uint8Array(data.length);\n      for (var i=0; i<data.length; ++i) {\n        dataView[i] = data.charCodeAt(i);\n      }\n\n      decodeAudioData(dataView.buffer, self);\n    } else {\n      // Load the buffer from the URL.\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', url, true);\n      xhr.responseType = 'arraybuffer';\n      xhr.onload = function() {\n        // Make sure we get a successful response back.\n        var code = (xhr.status + '')[0];\n        if (code !== '0' && code !== '2' && code !== '3') {\n          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n          return;\n        }\n\n        decodeAudioData(xhr.response, self);\n      };\n      xhr.onerror = function() {\n        // If there is an error, switch to HTML5 Audio.\n        if (self._webAudio) {\n          self._html5 = true;\n          self._webAudio = false;\n          self._sounds = [];\n          delete cache[url];\n          self.load();\n        }\n      };\n      safeXhrSend(xhr);\n    }\n  };\n\n  /**\n   * Send the XHR request wrapped in a try/catch.\n   * @param  {Object} xhr XHR to send.\n   */\n  var safeXhrSend = function(xhr) {\n    try {\n      xhr.send();\n    } catch (e) {\n      xhr.onerror();\n    }\n  };\n\n  /**\n   * Decode audio data from an array buffer.\n   * @param  {ArrayBuffer} arraybuffer The audio data.\n   * @param  {Howl}        self\n   */\n  var decodeAudioData = function(arraybuffer, self) {\n    // Decode the buffer into an audio source.\n    Howler.ctx.decodeAudioData(arraybuffer, function(buffer) {\n      if (buffer && self._sounds.length > 0) {\n        cache[self._src] = buffer;\n        loadSound(self, buffer);\n      }\n    }, function() {\n      self._emit('loaderror', null, 'Decoding audio data failed.');\n    });\n  };\n\n  /**\n   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n   * @param  {Howl} self\n   * @param  {Object} buffer The decoded buffer sound source.\n   */\n  var loadSound = function(self, buffer) {\n    // Set the duration.\n    if (buffer && !self._duration) {\n      self._duration = buffer.duration;\n    }\n\n    // Setup a sprite if none is defined.\n    if (Object.keys(self._sprite).length === 0) {\n      self._sprite = {__default: [0, self._duration * 1000]};\n    }\n\n    // Fire the loaded event.\n    if (self._state !== 'loaded') {\n      self._state = 'loaded';\n      self._emit('load');\n      self._loadQueue();\n    }\n\n    // Begin playback if specified.\n    if (self._autoplay) {\n      self.play();\n    }\n  };\n\n  /**\n   * Setup the audio context when available, or switch to HTML5 Audio mode.\n   */\n  var setupAudioContext = function() {\n    Howler.noAudio = false;\n\n    // Check if we are using Web Audio and setup the AudioContext if we are.\n    try {\n      if (typeof AudioContext !== 'undefined') {\n        Howler.ctx = new AudioContext();\n      } else if (typeof webkitAudioContext !== 'undefined') {\n        Howler.ctx = new webkitAudioContext();\n      } else {\n        Howler.usingWebAudio = false;\n      }\n    } catch(e) {\n      Howler.usingWebAudio = false;\n    }\n\n    if (!Howler.usingWebAudio) {\n      // No audio is available on this system if noAudio is set to true.\n      if (typeof Audio !== 'undefined') {\n        try {\n          var test = new Audio();\n\n          // Check if the canplaythrough event is available.\n          if (typeof test.oncanplaythrough === 'undefined') {\n            Howler._canPlayEvent = 'canplay';\n          }\n        } catch(e) {\n          Howler.noAudio = true;\n        }\n      } else {\n        Howler.noAudio = true;\n      }\n    }\n\n    // Test to make sure audio isn't disabled in Internet Explorer\n    try {\n      var test = new Audio();\n      if (test.muted) {\n        Howler.noAudio = true;\n      }\n    } catch (e) {}\n\n    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n    // If it is, disable Web Audio as it causes crashing.\n    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n    if (iOS && version && version < 9) {\n      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n      if (Howler._navigator && Howler._navigator.standalone && !safari || Howler._navigator && !Howler._navigator.standalone && !safari) {\n        Howler.usingWebAudio = false;\n      }\n    }\n\n    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n    if (Howler.usingWebAudio) {\n      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n      Howler.masterGain.gain.value = 1;\n      Howler.masterGain.connect(Howler.ctx.destination);\n    }\n\n    // Re-run the setup on Howler.\n    Howler._setup();\n  };\n\n  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return {\n        Howler: Howler,\n        Howl: Howl\n      };\n    });\n  }\n\n  // Add support for CommonJS libraries such as browserify.\n  if (typeof exports !== 'undefined') {\n    exports.Howler = Howler;\n    exports.Howl = Howl;\n  }\n\n  // Define globally in case AMD is not available or unused.\n  if (typeof window !== 'undefined') {\n    window.HowlerGlobal = HowlerGlobal;\n    window.Howler = Howler;\n    window.Howl = Howl;\n    window.Sound = Sound;\n  } else if (typeof global !== 'undefined') { // Add to global in Node.js (for testing, etc).\n    global.HowlerGlobal = HowlerGlobal;\n    global.Howler = Howler;\n    global.Howl = Howl;\n    global.Sound = Sound;\n  }\n})();\n\n\n/*!\n *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.\n *  \n *  howler.js v2.0.1\n *  howlerjs.com\n *\n *  (c) 2013-2016, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  // Setup default properties.\n  HowlerGlobal.prototype._pos = [0, 0, 0];\n  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];\n  \n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Helper method to update the stereo panning position of all current Howls.\n   * Future Howls will not use this value unless explicitly set.\n   * @param  {Number} pan A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @return {Howler/Number}     Self or current stereo panning value.\n   */\n  HowlerGlobal.prototype.stereo = function(pan) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Loop through all Howls and update their stereo panning.\n    for (var i=self._howls.length-1; i>=0; i--) {\n      self._howls[i].stereo(pan);\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the position of the listener in 3D cartesian space. Sounds using\n   * 3D position will be relative to the listener's position.\n   * @param  {Number} x The x-position of the listener.\n   * @param  {Number} y The y-position of the listener.\n   * @param  {Number} z The z-position of the listener.\n   * @return {Howler/Array}   Self or current listener position.\n   */\n  HowlerGlobal.prototype.pos = function(x, y, z) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._pos[1] : y;\n    z = (typeof z !== 'number') ? self._pos[2] : z;\n\n    if (typeof x === 'number') {\n      self._pos = [x, y, z];\n      self.ctx.listener.setPosition(self._pos[0], self._pos[1], self._pos[2]);\n    } else {\n      return self._pos;\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the listener is pointing in the 3D cartesian space.\n   * A front and up vector must be provided. The front is the direction the\n   * face of the listener is pointing, and up is the direction the top of the\n   * listener is pointing. Thus, these values are expected to be at right angles\n   * from each other.\n   * @param  {Number} x   The x-orientation of the listener.\n   * @param  {Number} y   The y-orientation of the listener.\n   * @param  {Number} z   The z-orientation of the listener.\n   * @param  {Number} xUp The x-orientation of the top of the listener.\n   * @param  {Number} yUp The y-orientation of the top of the listener.\n   * @param  {Number} zUp The z-orientation of the top of the listener.\n   * @return {Howler/Array}     Returns self or the current orientation vectors.\n   */\n  HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    var or = self._orientation;\n    y = (typeof y !== 'number') ? or[1] : y;\n    z = (typeof z !== 'number') ? or[2] : z;\n    xUp = (typeof xUp !== 'number') ? or[3] : xUp;\n    yUp = (typeof yUp !== 'number') ? or[4] : yUp;\n    zUp = (typeof zUp !== 'number') ? or[5] : zUp;\n\n    if (typeof x === 'number') {\n      self._orientation = [x, y, z, xUp, yUp, zUp];\n      self.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);\n    } else {\n      return or;\n    }\n\n    return self;\n  };\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core init.\n   * @param  {Function} _super Core init method.\n   * @return {Howl}\n   */\n  Howl.prototype.init = (function(_super) {\n    return function(o) {\n      var self = this;\n\n      // Setup user-defined default properties.\n      self._orientation = o.orientation || [1, 0, 0];\n      self._stereo = o.stereo || null;\n      self._pos = o.pos || null;\n      self._pannerAttr = {\n        coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : 360,\n        coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : 360,\n        coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : 0,\n        distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : 'inverse',\n        maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : 10000,\n        panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : 'HRTF',\n        refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : 1,\n        rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : 1\n      };\n\n      // Setup event listeners.\n      self._onstereo = o.onstereo ? [{fn: o.onstereo}] : [];\n      self._onpos = o.onpos ? [{fn: o.onpos}] : [];\n      self._onorientation = o.onorientation ? [{fn: o.onorientation}] : [];\n\n      // Complete initilization with howler.js core's init function.\n      return _super.call(this, o);\n    };\n  })(Howl.prototype.init);\n\n  /**\n   * Get/set the stereo panning of the audio source for this sound or all in the group.\n   * @param  {Number} pan  A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Number}    Returns self or the current stereo panning value.\n   */\n  Howl.prototype.stereo = function(pan, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change stereo pan when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'stereo',\n        action: function() {\n          self.stereo(pan, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Check for PannerStereoNode support and fallback to PannerNode if it doesn't exist.\n    var pannerType = (typeof Howler.ctx.createStereoPanner === 'undefined') ? 'spatial' : 'stereo';\n\n    // Setup the group's stereo panning if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's stereo panning if no parameters are passed.\n      if (typeof pan === 'number') {\n        self._stereo = pan;\n        self._pos = [pan, 0, 0];\n      } else {\n        return self._stereo;\n      }\n    }\n\n    // Change the streo panning of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof pan === 'number') {\n          sound._stereo = pan;\n          sound._pos = [pan, 0, 0];\n\n          if (sound._node) {\n            // If we are falling back, make sure the panningModel is equalpower.\n            sound._pannerAttr.panningModel = 'equalpower';\n\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || !sound._panner.pan) {\n              setupPanner(sound, pannerType);\n            }\n\n            if (pannerType === 'spatial') {\n              sound._panner.setPosition(pan, 0, 0);\n            } else {\n              sound._panner.pan.value = pan;\n            }\n          }\n\n          self._emit('stereo', sound._id);\n        } else {\n          return sound._stereo;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the 3D spatial position of the audio source for this sound or\n   * all in the group. The most common usage is to set the 'x' position for\n   * left/right panning. Setting any value higher than 1.0 will begin to\n   * decrease the volume of the sound as it moves further away.\n   * @param  {Number} x  The x-position of the audio from -1000.0 to 1000.0.\n   * @param  {Number} y  The y-position of the audio from -1000.0 to 1000.0.\n   * @param  {Number} z  The z-position of the audio from -1000.0 to 1000.0.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial position: [x, y, z].\n   */\n  Howl.prototype.pos = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change position when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'pos',\n        action: function() {\n          self.pos(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? 0 : y;\n    z = (typeof z !== 'number') ? -0.5 : z;\n\n    // Setup the group's spatial position if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial position if no parameters are passed.\n      if (typeof x === 'number') {\n        self._pos = [x, y, z];\n      } else {\n        return self._pos;\n      }\n    }\n\n    // Change the spatial position of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._pos = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || sound._panner.pan) {\n              setupPanner(sound, 'spatial');\n            }\n\n            sound._panner.setPosition(x, y, z);\n          }\n\n          self._emit('pos', sound._id);\n        } else {\n          return sound._pos;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the audio source is pointing in the 3D cartesian coordinate\n   * space. Depending on how direction the sound is, based on the `cone` attributes,\n   * a sound pointing away from the listener can be quiet or silent.\n   * @param  {Number} x  The x-orientation of the source.\n   * @param  {Number} y  The y-orientation of the source.\n   * @param  {Number} z  The z-orientation of the source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial orientation: [x, y, z].\n   */\n  Howl.prototype.orientation = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change orientation when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'orientation',\n        action: function() {\n          self.orientation(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._orientation[1] : y;\n    z = (typeof z !== 'number') ? self._orientation[2] : z;\n\n    // Setup the group's spatial orientation if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial orientation if no parameters are passed.\n      if (typeof x === 'number') {\n        self._orientation = [x, y, z];\n      } else {\n        return self._orientation;\n      }\n    }\n\n    // Change the spatial orientation of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._orientation = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner) {\n              // Make sure we have a position to setup the node with.\n              if (!sound._pos) {\n                sound._pos = self._pos || [0, 0, -0.5];\n              }\n\n              setupPanner(sound, 'spatial');\n            }\n\n            sound._panner.setOrientation(x, y, z);\n          }\n\n          self._emit('orientation', sound._id);\n        } else {\n          return sound._orientation;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the panner node's attributes for a sound or group of sounds.\n   * This method can optionall take 0, 1 or 2 arguments.\n   *   pannerAttr() -> Returns the group's values.\n   *   pannerAttr(id) -> Returns the sound id's values.\n   *   pannerAttr(o) -> Set's the values of all sounds in this Howl group.\n   *   pannerAttr(o, id) -> Set's the values of passed sound id.\n   *\n   *   Attributes:\n   *     coneInnerAngle - (360 by default) There will be no volume reduction inside this angle.\n   *     coneOuterAngle - (360 by default) The volume will be reduced to a constant value of\n   *                      `coneOuterGain` outside this angle.\n   *     coneOuterGain - (0 by default) The amount of volume reduction outside of `coneOuterAngle`.\n   *     distanceModel - ('inverse' by default) Determines algorithm to use to reduce volume as audio moves\n   *                      away from listener. Can be `linear`, `inverse` or `exponential`.\n   *     maxDistance - (10000 by default) Volume won't reduce between source/listener beyond this distance.\n   *     panningModel - ('HRTF' by default) Determines which spatialization algorithm is used to position audio.\n   *                     Can be `HRTF` or `equalpower`.\n   *     refDistance - (1 by default) A reference distance for reducing volume as the source\n   *                    moves away from the listener.\n   *     rolloffFactor - (1 by default) How quickly the volume reduces as source moves from listener.\n   * \n   * @return {Howl/Object} Returns self or current panner attributes.\n   */\n  Howl.prototype.pannerAttr = function() {\n    var self = this;\n    var args = arguments;\n    var o, id, sound;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // Determine the values based on arguments.\n    if (args.length === 0) {\n      // Return the group's panner attribute values.\n      return self._pannerAttr;\n    } else if (args.length === 1) {\n      if (typeof args[0] === 'object') {\n        o = args[0];\n\n        // Set the grou's panner attribute values.\n        if (typeof id === 'undefined') {\n          self._pannerAttr = {\n            coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : self._coneInnerAngle,\n            coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : self._coneOuterAngle,\n            coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : self._coneOuterGain,\n            distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : self._distanceModel,\n            maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : self._maxDistance,\n            panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : self._panningModel,\n            refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : self._refDistance,\n            rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : self._rolloffFactor\n          };\n        }\n      } else {\n        // Return this sound's panner attribute values.\n        sound = self._soundById(parseInt(args[0], 10));\n        return sound ? sound._pannerAttr : self._pannerAttr;\n      }\n    } else if (args.length === 2) {\n      o = args[0];\n      id = parseInt(args[1], 10);\n    }\n\n    // Update the values of the specified sounds.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      sound = self._soundById(ids[i]);\n\n      if (sound) {\n        // Merge the new values into the sound.\n        var pa = sound._pannerAttr;\n        pa = {\n          coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : pa.coneInnerAngle,\n          coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : pa.coneOuterAngle,\n          coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : pa.coneOuterGain,\n          distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : pa.distanceModel,\n          maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : pa.maxDistance,\n          panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : pa.panningModel,\n          refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : pa.refDistance,\n          rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : pa.rolloffFactor\n        };\n\n        // Update the panner values or create a new panner if none exists.\n        var panner = sound._panner;\n        if (panner) {\n          panner.coneInnerAngle = pa.coneInnerAngle;\n          panner.coneOuterAngle = pa.coneOuterAngle;\n          panner.coneOuterGain = pa.coneOuterGain;\n          panner.distanceModel = pa.distanceModel;\n          panner.maxDistance = pa.maxDistance;\n          panner.panningModel = pa.panningModel;\n          panner.refDistance = pa.refDistance;\n          panner.rolloffFactor = pa.rolloffFactor;\n        } else {\n          // Make sure we have a position to setup the node with.\n          if (!sound._pos) {\n            sound._pos = self._pos || [0, 0, -0.5];\n          }\n\n          // Create a new panner node.\n          setupPanner(sound, 'spatial');\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core Sound init.\n   * @param  {Function} _super Core Sound init method.\n   * @return {Sound}\n   */\n  Sound.prototype.init = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup user-defined default properties.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete initilization with howler.js core Sound's init function.\n      _super.call(this);\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      }\n    };\n  })(Sound.prototype.init);\n\n  /**\n   * Override the Sound.reset method to clean up properties from the spatial plugin.\n   * @param  {Function} _super Sound reset method.\n   * @return {Sound}\n   */\n  Sound.prototype.reset = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all spatial plugin properties on this sound.\n      self._orientation = parent._orientation;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete resetting of the sound.\n      return _super.call(this);\n    };\n  })(Sound.prototype.reset);\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create a new panner node and save it on the sound.\n   * @param  {Sound} sound Specific sound to setup panning on.\n   * @param {String} type Type of panner to create: 'stereo' or 'spatial'.\n   */\n  var setupPanner = function(sound, type) {\n    type = type || 'spatial';\n\n    // Create the new panner node.\n    if (type === 'spatial') {\n      sound._panner = Howler.ctx.createPanner();\n      sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;\n      sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;\n      sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;\n      sound._panner.distanceModel = sound._pannerAttr.distanceModel;\n      sound._panner.maxDistance = sound._pannerAttr.maxDistance;\n      sound._panner.panningModel = sound._pannerAttr.panningModel;\n      sound._panner.refDistance = sound._pannerAttr.refDistance;\n      sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;\n      sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);\n      sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);\n    } else {\n      sound._panner = Howler.ctx.createStereoPanner();\n      sound._panner.pan.value = sound._stereo;\n    }\n\n    sound._panner.connect(sound._node);\n\n    // Update the connections.\n    if (!sound._paused) {\n      sound._parent.pause(sound._id, true).play(sound._id);\n    }\n  };\n})();\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/howler/dist/howler.js\n ** module id = 32\n ** module chunks = 0\n **/","import { mapLog } from './index';\r\n\r\n/*---------------------\r\n------ VARIABLES ------\r\n----------------------*/\r\nconst scope = {};\r\n\r\n/*---------------------\r\n-------- PUBLIC -------\r\n----------------------*/\r\n/**\r\n * Main class for showing UI on the map, like unit selections, movements and such. Has nothing\r\n * to do with showing off-map data, like\r\n * datagrams of the resources player has or other players status etc.\r\n * Good examples for what this shows are: selected units-list, selection highlight (like a\r\n * circle on the selected unit), unit movement.\r\n * How it works is that this is basically the interface that shows what the UI theme class can\r\n * (or must) implement.\r\n *\r\n * @namespace flatworld\r\n * @class UI\r\n * @static\r\n * @param {Object} UITheme        Module that will be used for the UI theme\r\n * @param {Map} givenMap          Map instance that is used\r\n * @throws {Error}                If either param isn't given or UITheme doesn't implement all\r\n * the requires methods, this class throws an error.\r\n * @return {Object}               UI module\r\n*/\r\nfunction UI(UITheme, givenMap, protectedProperties) { // eslint-disable-line no-unused-vars\r\n\r\n  /* SINGLETON MODULE */\r\n  if (Object.keys(scope).length !== 0) {\r\n    return scope;\r\n  }\r\n\r\n  if (!UITheme || !givenMap) {\r\n    throw new Error(`UI-module requires UITheme and map object, This is a singleton class, so it's possible it should have been already called earlier`);\r\n  }\r\n\r\n  validateUITheme([\r\n    'highlightSelectedObject',\r\n    'showSelections',\r\n    'showUnitMovement',\r\n    'unSelect'\r\n  ], UITheme);\r\n\r\n  /**\r\n   * Responsible for showing what objects have been selected for inspection or if the player selects only one object, we hightlihgt it.\r\n   * For example if there are several objects in one tile on the map and the player needs to be able to select one\r\n   * specific unit on the stack. This is always defined in the UI theme-module Selecting one unit, highlight it, which means,\r\n   * e.g. bringing the unit on top on the map and showing selection circle around it.\r\n   *\r\n   * @method showSelections\r\n   * @static\r\n   * @param  {Array|Object} objects           Objects that have been selected.\r\n   * @param {Object} getDatas                 This is an object made of functions, that get wanted data from the object. For example if\r\n   * you have objects name in object.data.specialData.name, then you have an object getDatas.name(), which retrieves this. This should be\r\n   * standardized maybe in MapDataManipulator, so that we can change the template between different game setups easier. Lets say if one\r\n   * game modification has different attributes than another, then maybe it should still have standard interface.\r\n   * @param {Object} getDatas.name            Retrieves object name\r\n   * @param {Object} {}                       Extra options\r\n   * @param {MapDataManipulator} {}.filters   Filters objects\r\n   * @param {Object} {}.options               Extra options that are passed to the UITheme class\r\n   * @return {Boolean}\r\n   *\r\n   * @todo the getDatas function should be standardized, so that most UIs would work with most different setups.\r\n   * */\r\n  scope.showSelections = function (objects, getDatas, { filters, UIThemeOptions } = {}) {\r\n    if (filters) {\r\n      objects = filters.filterObjects(objects);\r\n    }\r\n\r\n    objects = Array.isArray(objects) ? objects : [objects];\r\n\r\n    const returnable = UITheme.showSelections(objects, getDatas, UIThemeOptions);\r\n\r\n    givenMap.drawOnNextTick();\r\n\r\n    return returnable;\r\n  };\r\n  /**\r\n   * Shows arrow or movement or what ever to indicate the selected unit is moving to the given location\r\n   *\r\n   * @method showUnitMovement\r\n   * @static\r\n   * @param {Object} object         Unit that the player wants to move\r\n   * @param {Object | Array} to     Coordinates as an object or array of waypoints / coordinates\r\n   * where the unit is being moved to.\r\n   * @param {Object} options        Extra options. Like dropping a shadow etc.\r\n   * */\r\n  scope.showUnitMovement = function (to, { UIThemeOptions } = {}) {\r\n    if (!Array.isArray(to)) {\r\n      mapLog.error('Array expected for showUnitMovement');\r\n    }\r\n\r\n    const returnable = UITheme.showUnitMovement(to, UIThemeOptions);\r\n\r\n    givenMap.drawOnNextTick();\r\n\r\n    return returnable;\r\n  };\r\n\r\n  return scope;\r\n}\r\n\r\nfunction validateUITheme(allRequiredMethods, UITheme) {\r\n  allRequiredMethods.forEach(method => {\r\n    if (!UITheme[method]) {\r\n      throw new Error(`UItheme module need to implement methods defined in flatword UI module`);\r\n    }\r\n  })\r\n}\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default UI;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/UI.js\n **/","import { default as baseEventlisteners } from './baseEventListeners/baseEventlisteners';\r\nimport { default as fogOfWars } from './fogOfWars/index';\r\nimport { default as hexagons } from './hexagons/index';\r\nimport { default as mapMovement } from './mapMovement/mapMovement';\r\nimport { default as minimaps } from './minimaps/index';\r\nimport { default as mapDrag } from './move/mapDrag';\r\nimport { default as mapZoom } from './zoom/mapZoom';\r\n\r\nexport default {\r\n  baseEventlisteners,\r\n  fogOfWars,\r\n  hexagons,\r\n  mapMovement,\r\n  minimaps,\r\n  mapDrag,\r\n  mapZoom,\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/extensions/index.js\n **/","import * as Hammer from 'hammerjs';\r\nimport { default as Hamster } from 'hamsterjs';\r\nimport { mapEvents, utils, mapStates, eventListeners } from '../../core/';\r\n\r\n/*-----------------------\r\n-------- PUBLIC ---------\r\n-----------------------*/\r\n/**\r\n * Core plugin. Houses the default eventlisteners used in the map. When plugins are added to the map this class can be used for the\r\n * eventlistener management. Creates window.flatworld.setFullScreen function to be used when switching to fullscreen.\r\n *\r\n * @namespace flatworld\r\n * @class extensions.baseEventlisteners\r\n * @requires Hammer.js                    (for touch events)\r\n * @requires Hamster.js                   (for good cross-browser mousewheel events)\r\n * @event                                 mapEvents.publish('mapResized')\r\n * @param {HTMLElement} canvasElement     The canvas element we listen events from. Will try to search the first canvas in the DOM,\r\n * if none is provided\r\n */\r\nconst baseEventlisteners = (function () {\r\n  const caches = {};\r\n  let hammer, hamster, mapInstance;\r\n\r\n  /*---------------------------\r\n  ----------- API -------------\r\n  ---------------------------*/\r\n  return {\r\n    init,\r\n    toggleFullSize,\r\n    toggleFullscreen,\r\n    toggleZoom,\r\n    toggleDrag,\r\n    toggleSelect,\r\n    toggleOrder,\r\n\r\n    /**\r\n     * Plugins name\r\n     *\r\n     * @attribute pluginName\r\n     * @type {String}\r\n     */\r\n    pluginName: 'baseEventlisteners'\r\n  };\r\n\r\n  /**\r\n   * Initialize plugin\r\n   *\r\n   * @method init\r\n   */\r\n  function init() {\r\n    mapInstance = this.mapInstance;\r\n    const orderToggle = toggleOrder();\r\n    const selectToggle = toggleSelect();\r\n\r\n    hammer = new Hammer.Manager(this.mapInstance.canvas);\r\n    hamster = new Hamster(this.mapInstance.canvas);\r\n\r\n    eventListeners.setDetector('fullSize', toggleFullSize().on, toggleFullSize().off);\r\n    eventListeners.on('fullSize', resizeCanvas);\r\n\r\n    eventListeners.setDetector('fullscreen', toggleFullscreen().on, toggleFullscreen().off);\r\n    this.mapInstance.setPrototype('setFullScreen', _setFullScreen);\r\n\r\n    eventListeners.setDetector('zoom', toggleZoom().on, toggleZoom().off);\r\n    eventListeners.setDetector('drag', toggleDrag().on, toggleDrag().off);\r\n    eventListeners.setDetector('select', selectToggle.on, selectToggle.off);\r\n    eventListeners.setDetector('order', orderToggle.on, orderToggle.off);\r\n  }\r\n\r\n  /**\r\n   * Sets the canvas to fullsize as in the same size of the window / content area. But not fullscreen. Note that\r\n   *\r\n   * @method toggleFullSize\r\n   */\r\n  function toggleFullSize() {\r\n    let activeCB;\r\n\r\n    if (!caches['fullsize']) {\r\n      caches['fullsize'] = {\r\n        on: (cb) => {\r\n          activeCB = cb;\r\n\r\n          window.addEventListener('resize', activeCB);\r\n        },\r\n        off: () => {\r\n          window.removeEventListener('resize', activeCB);\r\n        }\r\n      };\r\n    }\r\n\r\n    return caches['fullsize'];\r\n  }\r\n  /**\r\n   * Sets the browser in fullscreen mode.\r\n   *\r\n   * @method toggleFullscreen\r\n   * @param {Function} cb     Callback that fires when this event activates\r\n   * @return {Boolean}        Return the state of this event\r\n   */\r\n  function toggleFullscreen() {\r\n    let activeCB;\r\n\r\n    if (!caches['fullscreen']) {\r\n      caches['fullscreen'] = {\r\n        on: (cb) => {\r\n          activeCB = cb;\r\n\r\n          window.addEventListener('fullscreen', activeCB);\r\n        },\r\n        off: () => {\r\n          window.removeEventListener('fullscreen', activeCB);\r\n        }\r\n      };\r\n\r\n      return caches['fullscreen'];\r\n    }\r\n\r\n    return caches['fullscreen'];\r\n  }\r\n  /**\r\n   * Zoom the map. Mousewheel (desktop) and pinch (mobile)\r\n   *\r\n   * @method toggleZoom\r\n   * @param {Function} cb         Callback that fires when this event activates\r\n   * @return {Boolean}            Return the state of this event\r\n   */\r\n  function toggleZoom() {\r\n    let activeCB;\r\n\r\n    if (!caches['zoom']) {\r\n      caches['zoom'] = {\r\n        on: (cb) => {\r\n          const pinch = new Hammer.Pinch({\r\n            threshold: 0.08\r\n          });\r\n          activeCB = cb;\r\n\r\n          hammer.add(pinch);\r\n          hammer.on('pinch', activeCB);\r\n          /* Hamster handles wheel events really nicely */\r\n          hamster.wheel(activeCB);\r\n        },\r\n        off: () => {\r\n          hammer.on('pinch', activeCB);\r\n          hamster.unwheel(activeCB);\r\n        }\r\n      };\r\n    }\r\n\r\n    return caches['zoom'];\r\n  }\r\n  /**\r\n   * DragListener (normally used for moving the map)\r\n   *\r\n   * @method toggleDrag\r\n   * @param {Function} cb     Callback that fires when this event activates\r\n   * @return {Boolean}        Return the state of this event\r\n   */\r\n  function toggleDrag() {\r\n    let activeCB;\r\n\r\n    if (!caches['drag']) {\r\n      caches['drag'] = {\r\n        on: (cb) => {\r\n          const pan = new Hammer.Pan({\r\n            pointers: 1,\r\n            threshold: 5,\r\n            direction: Hammer.DIRECTION_ALL });\r\n          activeCB = cb;\r\n\r\n          hammer.add(pan);\r\n          hammer.on('pan', activeCB);\r\n        },\r\n        off: () => {\r\n          hammer.off('pan', activeCB);\r\n        }\r\n      };\r\n    }\r\n\r\n    return caches['drag'];\r\n  }\r\n  /**\r\n   * Selecting something from the map\r\n   *\r\n   * @method toggleSelect\r\n   * @param {Function} cb     Callback that fires when this event activates\r\n   * @return {Boolean}        Return the state of this event\r\n   */\r\n  function toggleSelect() {\r\n    let activeCB;\r\n\r\n    if (!caches['select']) {\r\n      caches['select'] = {\r\n        on: (cb) => {\r\n          const tap = new Hammer.Tap();\r\n          activeCB = cb;\r\n\r\n          hammer.add(tap);\r\n          hammer.on('tap', activeCB);\r\n        },\r\n        off: () => {\r\n          hammer.off('tap', activeCB);\r\n        }\r\n      };\r\n    }\r\n\r\n    return caches['select'];\r\n  }\r\n  /**\r\n   * Selecting something from the map. With mouse you can use the default right click and in touch devices you can use continuous press\r\n   * event (keeping the finger pressed on the screen for a preset time).\r\n   *\r\n   * @method toggleOrder\r\n   * @param {Function} cb     Callback that fires when this event activates\r\n   * @return {Boolean}        Return the state of this event\r\n   */\r\n  function toggleOrder() {\r\n    let activeCB;\r\n\r\n    if (!caches['order']) {\r\n      caches['order'] = {\r\n        on: (cb) => {\r\n          activeCB = cb;\r\n\r\n          const press = new Hammer.Press();\r\n\r\n          hammer.add(press);\r\n          hammer.on('press', clickListener);\r\n          /* We are detecting mouse right click here. This should be in utils */\r\n          mapInstance.canvas.addEventListener('mouseup', (e) => {\r\n            if (e.which === 3) {\r\n              clickListener(e);\r\n            }\r\n          }, true);\r\n        },\r\n        off: () => {\r\n          hammer.off('press', clickListener);\r\n          mapInstance.canvas.removeEventListener('mouseup', clickListener, true);\r\n        }\r\n      };\r\n    }\r\n\r\n    return caches['order'];\r\n\r\n    function clickListener(e) {\r\n      if (!utils.mouse.isRightClick(e) && e.type !== 'press') {\r\n        return;\r\n      }\r\n\r\n      /* Check that finite state is correct and that if desktop, the user clicked right button */\r\n      if (! mapStates.can('objectOrder') && (mapInstance.isSupportedTouch || utils.mouse.isRightClick(e))) {\r\n        return false;\r\n      }\r\n\r\n      activeCB(e);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Activate the browsers fullScreen mode and expand the canvas to fullsize\r\n   *\r\n   * @private\r\n   * @method _setFullScreen\r\n   */\r\n  function _setFullScreen() {\r\n    utils.resize.toggleFullScreen();\r\n    resizeCanvas();\r\n    mapEvents.publish('mapResized');\r\n  }\r\n  /**\r\n   * Resizes the canvas to the current most wide and high element status.\r\n   * Basically canvas size === window size.\r\n   *\r\n   * @private\r\n   * @method _resizeCanvas\r\n   */\r\n  function resizeCanvas() {\r\n    utils.resize.resizePIXIRenderer(\r\n      mapInstance.getRenderer(),\r\n      mapInstance.drawOnNextTick.bind(mapInstance)\r\n    );\r\n    mapEvents.publish('mapResized');\r\n  }\r\n})();\r\n\r\n/*-----------------------\r\n---------- API ----------\r\n-----------------------*/\r\nexport default baseEventlisteners;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/extensions/baseEventListeners/baseEventlisteners.js\n **/","/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/hammerjs/hammer.js\n ** module id = 37\n ** module chunks = 0\n **/","/*\n * Hamster.js v1.1.2\n * (c) 2013 Monospaced http://monospaced.com\n * License: MIT\n */\n\n(function(window, document){\n'use strict';\n\n/**\n * Hamster\n * use this to create instances\n * @returns {Hamster.Instance}\n * @constructor\n */\nvar Hamster = function(element) {\n  return new Hamster.Instance(element);\n};\n\n// default event name\nHamster.SUPPORT = 'wheel';\n\n// default DOM methods\nHamster.ADD_EVENT = 'addEventListener';\nHamster.REMOVE_EVENT = 'removeEventListener';\nHamster.PREFIX = '';\n\n// until browser inconsistencies have been fixed...\nHamster.READY = false;\n\nHamster.Instance = function(element){\n  if (!Hamster.READY) {\n    // fix browser inconsistencies\n    Hamster.normalise.browser();\n\n    // Hamster is ready...!\n    Hamster.READY = true;\n  }\n\n  this.element = element;\n\n  // store attached event handlers\n  this.handlers = [];\n\n  // return instance\n  return this;\n};\n\n/**\n * create new hamster instance\n * all methods should return the instance itself, so it is chainable.\n * @param   {HTMLElement}       element\n * @returns {Hamster.Instance}\n * @constructor\n */\nHamster.Instance.prototype = {\n  /**\n   * bind events to the instance\n   * @param   {Function}    handler\n   * @param   {Boolean}     useCapture\n   * @returns {Hamster.Instance}\n   */\n  wheel: function onEvent(handler, useCapture){\n    Hamster.event.add(this, Hamster.SUPPORT, handler, useCapture);\n\n    // handle MozMousePixelScroll in older Firefox\n    if (Hamster.SUPPORT === 'DOMMouseScroll') {\n      Hamster.event.add(this, 'MozMousePixelScroll', handler, useCapture);\n    }\n\n    return this;\n  },\n\n  /**\n   * unbind events to the instance\n   * @param   {Function}    handler\n   * @param   {Boolean}     useCapture\n   * @returns {Hamster.Instance}\n   */\n  unwheel: function offEvent(handler, useCapture){\n    // if no handler argument,\n    // unbind the last bound handler (if exists)\n    if (handler === undefined && (handler = this.handlers.slice(-1)[0])) {\n      handler = handler.original;\n    }\n\n    Hamster.event.remove(this, Hamster.SUPPORT, handler, useCapture);\n\n    // handle MozMousePixelScroll in older Firefox\n    if (Hamster.SUPPORT === 'DOMMouseScroll') {\n      Hamster.event.remove(this, 'MozMousePixelScroll', handler, useCapture);\n    }\n\n    return this;\n  }\n};\n\nHamster.event = {\n  /**\n   * cross-browser 'addWheelListener'\n   * @param   {Instance}    hamster\n   * @param   {String}      eventName\n   * @param   {Function}    handler\n   * @param   {Boolean}     useCapture\n   */\n  add: function add(hamster, eventName, handler, useCapture){\n    // store the original handler\n    var originalHandler = handler;\n\n    // redefine the handler\n    handler = function(originalEvent){\n\n      if (!originalEvent) {\n        originalEvent = window.event;\n      }\n\n      // create a normalised event object,\n      // and normalise \"deltas\" of the mouse wheel\n      var event = Hamster.normalise.event(originalEvent),\n          delta = Hamster.normalise.delta(originalEvent);\n\n      // fire the original handler with normalised arguments\n      return originalHandler(event, delta[0], delta[1], delta[2]);\n\n    };\n\n    // cross-browser addEventListener\n    hamster.element[Hamster.ADD_EVENT](Hamster.PREFIX + eventName, handler, useCapture || false);\n\n    // store original and normalised handlers on the instance\n    hamster.handlers.push({\n      original: originalHandler,\n      normalised: handler\n    });\n  },\n\n  /**\n   * removeWheelListener\n   * @param   {Instance}    hamster\n   * @param   {String}      eventName\n   * @param   {Function}    handler\n   * @param   {Boolean}     useCapture\n   */\n  remove: function remove(hamster, eventName, handler, useCapture){\n    // find the normalised handler on the instance\n    var originalHandler = handler,\n        lookup = {},\n        handlers;\n    for (var i = 0, len = hamster.handlers.length; i < len; ++i) {\n      lookup[hamster.handlers[i].original] = hamster.handlers[i];\n    }\n    handlers = lookup[originalHandler];\n    handler = handlers.normalised;\n\n    // cross-browser removeEventListener\n    hamster.element[Hamster.REMOVE_EVENT](Hamster.PREFIX + eventName, handler, useCapture || false);\n\n    // remove original and normalised handlers from the instance\n    for (var h in hamster.handlers) {\n      if (hamster.handlers[h] == handlers) {\n        hamster.handlers.splice(h, 1);\n        break;\n      }\n    }\n  }\n};\n\n/**\n * these hold the lowest deltas,\n * used to normalise the delta values\n * @type {Number}\n */\nvar lowestDelta,\n    lowestDeltaXY;\n\nHamster.normalise = {\n  /**\n   * fix browser inconsistencies\n   */\n  browser: function normaliseBrowser(){\n    // detect deprecated wheel events\n    if (!('onwheel' in document || document.documentMode >= 9)) {\n      Hamster.SUPPORT = document.onmousewheel !== undefined ?\n                        'mousewheel' : // webkit and IE < 9 support at least \"mousewheel\"\n                        'DOMMouseScroll'; // assume remaining browsers are older Firefox\n    }\n\n    // detect deprecated event model\n    if (!window.addEventListener) {\n      // assume IE < 9\n      Hamster.ADD_EVENT = 'attachEvent';\n      Hamster.REMOVE_EVENT = 'detachEvent';\n      Hamster.PREFIX = 'on';\n    }\n\n  },\n\n  /**\n   * create a normalised event object\n   * @param   {Function}    originalEvent\n   * @returns {Object}      event\n   */\n   event: function normaliseEvent(originalEvent){\n    var event = {\n          // keep a reference to the original event object\n          originalEvent: originalEvent,\n          target: originalEvent.target || originalEvent.srcElement,\n          type: 'wheel',\n          deltaMode: originalEvent.type === 'MozMousePixelScroll' ? 0 : 1,\n          deltaX: 0,\n          delatZ: 0,\n          preventDefault: function(){\n            if (originalEvent.preventDefault) {\n              originalEvent.preventDefault();\n            } else {\n              originalEvent.returnValue = false;\n            }\n          },\n          stopPropagation: function(){\n            if (originalEvent.stopPropagation) {\n              originalEvent.stopPropagation();\n            } else {\n              originalEvent.cancelBubble = false;\n            }\n          }\n        };\n\n    // calculate deltaY (and deltaX) according to the event\n\n    // 'mousewheel'\n    if (originalEvent.wheelDelta) {\n      event.deltaY = - 1/40 * originalEvent.wheelDelta;\n    }\n    // webkit\n    if (originalEvent.wheelDeltaX) {\n      event.deltaX = - 1/40 * originalEvent.wheelDeltaX;\n    }\n\n    // 'DomMouseScroll'\n    if (originalEvent.detail) {\n      event.deltaY = originalEvent.detail;\n    }\n\n    return event;\n  },\n\n  /**\n   * normalise 'deltas' of the mouse wheel\n   * @param   {Function}    originalEvent\n   * @returns {Array}       deltas\n   */\n  delta: function normaliseDelta(originalEvent){\n    var delta = 0,\n      deltaX = 0,\n      deltaY = 0,\n      absDelta = 0,\n      absDeltaXY = 0,\n      fn;\n\n    // normalise deltas according to the event\n\n    // 'wheel' event\n    if (originalEvent.deltaY) {\n      deltaY = originalEvent.deltaY * -1;\n      delta  = deltaY;\n    }\n    if (originalEvent.deltaX) {\n      deltaX = originalEvent.deltaX;\n      delta  = deltaX * -1;\n    }\n\n    // 'mousewheel' event\n    if (originalEvent.wheelDelta) {\n      delta = originalEvent.wheelDelta;\n    }\n    // webkit\n    if (originalEvent.wheelDeltaY) {\n      deltaY = originalEvent.wheelDeltaY;\n    }\n    if (originalEvent.wheelDeltaX) {\n      deltaX = originalEvent.wheelDeltaX * -1;\n    }\n\n    // 'DomMouseScroll' event\n    if (originalEvent.detail) {\n      delta = originalEvent.detail * -1;\n    }\n\n    // Don't return NaN\n    if (delta === 0) {\n      return [0, 0, 0];\n    }\n\n    // look for lowest delta to normalize the delta values\n    absDelta = Math.abs(delta);\n    if (!lowestDelta || absDelta < lowestDelta) {\n      lowestDelta = absDelta;\n    }\n    absDeltaXY = Math.max(Math.abs(deltaY), Math.abs(deltaX));\n    if (!lowestDeltaXY || absDeltaXY < lowestDeltaXY) {\n      lowestDeltaXY = absDeltaXY;\n    }\n\n    // convert deltas to whole numbers\n    fn = delta > 0 ? 'floor' : 'ceil';\n    delta  = Math[fn](delta / lowestDelta);\n    deltaX = Math[fn](deltaX / lowestDeltaXY);\n    deltaY = Math[fn](deltaY / lowestDeltaXY);\n\n    return [delta, deltaX, deltaY];\n  }\n};\n\nif (typeof window.define === 'function' && window.define.amd) {\n  // AMD\n  window.define('hamster', [], function(){\n    return Hamster;\n  });\n} else if (typeof exports === 'object') {\n  // CommonJS\n  module.exports = Hamster;\n} else {\n  // Browser global\n  window.Hamster = Hamster;\n}\n\n})(window, window.document);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/hamsterjs/hamster.js\n ** module id = 38\n ** module chunks = 0\n **/","import simpleFogOfWar from './simpleFogOfWar'\r\n\r\nexport default {\r\n  simpleFogOfWar\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/extensions/fogOfWars/index.js\n **/","import * as PIXI from 'pixi.js';\r\nimport {  mapEvents, utils } from '../../core/';\r\nconst { resize } = utils;\r\n\r\n/*-----------------------\r\n-------- PUBLIC ---------\r\n-----------------------*/\r\n/**\r\n * Simple fog of war works with hexagon sized holes around objects\r\n *\r\n * @namespace flatworld.extensions.fogOfWars\r\n * @class pixelizedMiniMap\r\n **/\r\nconst simpleFogOfWar = (function() {\r\n  const maskSprite = new PIXI.Sprite(PIXI.Texture.EMPTY);\r\n  const renderTexture = new PIXI.RenderTexture(new PIXI.BaseRenderTexture(resize.getWindowSize().x, resize.getWindowSize().y));\r\n  const FoWOverlay = new PIXI.Graphics();\r\n  let zoomLayer;\r\n  let mapRenderer;\r\n  let maskMovableContainer;\r\n  let maskStageContainer;\r\n  let FoWCB;\r\n  let objectsForFoW;\r\n  let color;\r\n  let mapInstance;\r\n\r\n  return {\r\n    // These two are required by all plugins\r\n    init,\r\n    pluginName: 'simpleFogOfWar',\r\n\r\n    activateFogOfWar,\r\n    refreshFoW,\r\n    getFoWObjectArray,\r\n    calculateCorrectCoordinates,\r\n    FOR_TESTS: {\r\n      setObjectsForFoW: (o) => objectsForFoW = o\r\n    }\r\n  };\r\n  /**\r\n   * Ínitialize as a plugin. Done by the Flatworld class.\r\n   *\r\n   * After plugin has been initialized by the flatworld, you must still call activateFogOfWar to\r\n   * start showing it.\r\n   *\r\n   * @todo the offsets are really bad! For some reason they are needed, I don't know where the\r\n   * issue lies :(. We probably need an offset for the renderer in the end anyway, but now it\r\n   * doesn't even work properly without them.\r\n   * can be used here and in getViewportArea-method etc.\r\n   *\r\n   * @method init\r\n   * @param  {Object} parameters    This plugin requires cb and filter properties!\r\n   */\r\n  function init(params) {\r\n    if (!(params.cb || params.filter)) {\r\n      throw new Error('SimpleFogOfWar plugin requires cb and filter properties')\r\n    }\r\n    mapInstance = this.mapInstance;\r\n    zoomLayer = this._properties.zoomLayer;\r\n    mapRenderer = this.mapInstance.getRenderer();\r\n\r\n    maskStageContainer = this.mapInstance.createSpecialLayer('FoWStageMaskLayer');\r\n    // We create a particle container, because it's faster for this purpose. We don't need any\r\n    // fancy special effects for the container currently, so particle container works.\r\n    maskMovableContainer = new PIXI.ParticleContainer();\r\n    maskMovableContainer.position = mapInstance.getMapCoordinates(undefined, true);\r\n\r\n    activateFogOfWar(this.mapInstance, params.cb, params.filter);\r\n\r\n    return Promise.resolve();\r\n  }\r\n\r\n  function activateFogOfWar(mapInstance, cb, filterCreator, options = {}) {\r\n    color = options.color || 0x222222;\r\n    FoWCB = cb;\r\n    const filter = filterCreator();\r\n    // Get layers with filters. So it filters layers and objects\r\n    objectsForFoW = mapInstance.getPrimaryLayers({ filters: filter }).map(o => o.getObjects(filter));\r\n    objectsForFoW = utils.general.flatten2Levels(objectsForFoW);\r\n\r\n    createOverlay();\r\n\r\n    setupFoW();\r\n    setEvents();\r\n  }\r\n\r\n  function setupFoW() {\r\n    const spriteArray = getFoWObjectArray(FoWCB);\r\n\r\n    resetFoW(FoWOverlay);\r\n\r\n    if (spriteArray.length > 0) {\r\n      maskMovableContainer.addChild(...spriteArray);\r\n    }\r\n\r\n    resizeFoW();\r\n\r\n    zoomLayer.mask = maskSprite;\r\n\r\n    mapInstance.registerPreRenderer('renderFoW', moveFoW);\r\n\r\n    resizeFoW();\r\n  }\r\n\r\n  function refreshFoW() {\r\n/*    var t0 = performance.now();*/\r\n    mapRenderer.render(maskStageContainer, renderTexture, true, null, false);\r\n\r\n    maskSprite.texture = renderTexture;\r\n/*    var t1 = performance.now();\r\n    console.log(\"Call to doSomething took \" + (t1 - t0) + \" milliseconds.\")*/\r\n  }\r\n\r\n  function moveFoW() {\r\n    maskMovableContainer.position = mapInstance.getMapCoordinates(undefined, true);\r\n\r\n    refreshFoW();\r\n  }\r\n\r\n  function zoomFoW() {\r\n    maskStageContainer.scale.x = mapInstance.getZoom();\r\n    maskStageContainer.scale.y = mapInstance.getZoom();\r\n\r\n    createOverlay();\r\n    refreshFoW();\r\n  }\r\n\r\n  function resizeFoW() {\r\n    changeMaskSize();\r\n    createOverlay();\r\n    refreshFoW();\r\n  }\r\n\r\n  function changeMaskSize() {\r\n    resize.resizePIXIRenderer(\r\n      renderTexture,\r\n      () => {}\r\n    );\r\n\r\n    //renderTexture.resize(resize.getWindowSize().x, resize.getWindowSize().y);\r\n    maskSprite.width = resize.getWindowSize().x;\r\n    maskSprite.height = resize.getWindowSize().y;\r\n    // MaskSprites bounds create a filterArea to the zoomLayer as the maskSprite is a mask for it. This causes resizing not to work correctly, if the bounds are not changed and bounds are not updated without this call (for some reason just width and height change is not enough).\r\n    maskSprite.getBounds();\r\n  }\r\n\r\n  function getFoWObjectArray(cb) {\r\n    return objectsForFoW.map(object => cb(calculateCorrectCoordinates(object)));\r\n  }\r\n\r\n  function calculateCorrectCoordinates(object) {\r\n    const coordinates = object.toGlobal(new PIXI.Point(0, 0));\r\n\r\n    coordinates.x = Math.round(coordinates.x);\r\n    coordinates.y = Math.round(coordinates.y);\r\n    coordinates.anchor = object.anchor;\r\n    coordinates.pivot = object.pivot;\r\n    coordinates.scale = mapInstance.getZoom();\r\n\r\n    return coordinates;\r\n  }\r\n\r\n  /** *************************************\r\n  **************** PRIVATE ****************\r\n  ****************************************/\r\n  function resetFoW() {\r\n    maskMovableContainer.children && maskMovableContainer.removeChildren();\r\n    maskStageContainer.children && maskStageContainer.removeChildren();\r\n    maskStageContainer.addChild(FoWOverlay);\r\n    maskStageContainer.addChild(maskMovableContainer);\r\n  }\r\n\r\n  function createOverlay() {\r\n    const coordinates = {\r\n      x: -100,\r\n      y: -100,\r\n      width: mapRenderer.width + 200 + (mapRenderer.width / mapInstance.getZoom()),\r\n      height: mapRenderer.height + 200 + (mapRenderer.height / mapInstance.getZoom())\r\n    };\r\n\r\n    FoWOverlay.clear();\r\n    FoWOverlay.beginFill(color);\r\n    FoWOverlay.drawRect(coordinates.x, coordinates.y, coordinates.width, coordinates.height);\r\n    FoWOverlay.endFill();\r\n  }\r\n  function setEvents() {\r\n    mapEvents.subscribe('mapResized', resizeFoW);\r\n    mapEvents.subscribe('mapZoomed', zoomFoW);\r\n    /* mapEvents.subscribe('mapMoved', moveFoW); */\r\n  }\r\n})();\r\n\r\n/*-----------------------\r\n---------- API ----------\r\n-----------------------*/\r\nexport default simpleFogOfWar;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/extensions/fogOfWars/simpleFogOfWar.js\n **/","import * as eventListeners from './eventListeners/units.js';\r\nimport * as hexagonPlugin from './selectHexagonPlugin';\r\nimport * as pathfinding from './pathFinding/findPath';\r\nimport * as utils from './utils/'\r\nimport * as objects from './Objects.js';\r\n\r\nconst toBeExported = {};\r\ntoBeExported.setupHexagonClick = eventListeners.setupHexagonClick;\r\ntoBeExported.selectHexagonObject = hexagonPlugin.selectHexagonObject;\r\ntoBeExported.pathfinding = pathfinding;\r\ntoBeExported.utils = utils;\r\ntoBeExported.objects = objects;\r\n\r\nexport default toBeExported;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/extensions/hexagons/index.js\n **/","import {  utils, mapEvents, UI, MapDataManipulator, eventListeners, mapStates, log } from '../../../core/';\r\nimport { findPath } from '../pathFinding/findPath';\r\nimport * as hexaUtils from '../utils/';\r\nconst hexagons = {\r\n  findPath,\r\n  utils: hexaUtils\r\n};\r\n\r\n/*---------------------\r\n------ VARIABLES ------\r\n----------------------*/\r\nconst unitLayerFilter = new MapDataManipulator({\r\n  type: 'filter',\r\n  object: 'layer',\r\n  property: 'name',\r\n  value: 'unitLayer'\r\n});\r\nconst terrainLayerFilter = new MapDataManipulator({\r\n  type: 'filter',\r\n  object: 'layer',\r\n  property: 'name',\r\n  value: 'terrainLayer'\r\n});\r\n/* @todo This must be changed to outside the module */\r\nlet weight = () => 0;\r\n/* @todo This must be changed to game logic too! */\r\nconst getObjectData = (object) => {\r\n  return object.data.typeData;\r\n}\r\nlet FTW, ui;\r\n\r\n/*---------------------\r\n------- PUBLIC --------\r\n----------------------*/\r\n/**\r\n * Handles the eventlistner for selecting objects on the map. THe actual logic for detecting the objects under mouse\r\n * etc. are in selectHexagonPlugin\r\n *\r\n * @class extensions.hexagons.setupHexagonClick\r\n * @requires Hammer.js. Some events are done with Hammer.js, so we need it to handle those events correctly\r\n * @event                 Mapselect and objectsSelected (objectsSelected will have parameter for the objects that were selected)\r\n * @param  {Map} map      The currently use Map instance\r\n * @return {Boolean}      True\r\n */\r\nfunction setupHexagonClick(mapInstance, weightFn) {\r\n  if (!mapInstance) {\r\n    throw new Error('eventlisteners initialization requires flatworld instance as a parameter');\r\n  }\r\n\r\n  FTW = mapInstance;\r\n\r\n  ui = UI();\r\n\r\n  eventListeners.on('select', _tapListener);\r\n  eventListeners.on('order', _orderListener);\r\n\r\n  weight = weightFn || weight;\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * the listener that received the event object\r\n *\r\n * @private\r\n * @method _tapListener\r\n * @param  {Event} e      Event object\r\n */\r\nfunction _tapListener(e) {\r\n  const globalCoords = utils.mouse.eventData.getHAMMERPointerCoords(e);\r\n  const getData = {\r\n    allData(object) {\r\n      return getObjectData(object);\r\n    }\r\n  };\r\n  mapStates.objectSelect();\r\n\r\n  let objects = FTW.getObjectsUnderArea(globalCoords, { filters: unitLayerFilter });\r\n  objects = utils.dataManipulation.mapObjectsToArray(objects);\r\n  objects = utils.dataManipulation.flattenArrayBy1Level(objects);\r\n\r\n  if (!objects.length) {\r\n    FTW.currentlySelectedObjects = undefined;\r\n    log.debug('No objects found for selection!');\r\n    // Delete the UI objects, as player clicked somewhere that doesn't have any selectable objects\r\n    ui.showSelections([]);\r\n    return;\r\n  }\r\n\r\n  FTW.currentlySelectedObjects = objects;\r\n  mapEvents.publish('objectsSelected', objects);\r\n  ui.showSelections(objects, getData);\r\n  FTW.drawOnNextTick();\r\n}\r\n/**\r\n * This listener is for the situation, where we have an object and we issue an order / action to\r\n * that unit. For example to move from one hexagon to another.\r\n *\r\n * @private\r\n * @method _orderListener\r\n * @param  {Event} e      Event object\r\n */\r\nfunction _orderListener(e) {\r\n  // We want to wrap the whole functionality in try catch, to cancel the order state, if any\r\n  // errors occur. Otherwise the states can get stuck more easily in a situation, where you can\r\n  // not move anything (if objectOrder stays on, then the map won't allow you to move units)\r\n  try {\r\n    mapStates.objectOrder();\r\n\r\n    if (!FTW.currentlySelectedObjects) {\r\n      throw 'No objects selected for orders!';\r\n    } else if (FTW.currentlySelectedObjects.length > 1) {\r\n      throw 'the selected object is only supported to be one atm.' + JSON.stringify(FTW.currentlySelectedObjects[0]);\r\n    }\r\n\r\n    const selectedObject = FTW.currentlySelectedObjects[0];\r\n    const selectedObjectsCoordinates = selectedObject.getMapCoordinates();\r\n    const globalCoords = utils.mouse.eventData.getGlobalCoordinates(e, FTW.isSupportedTouch);\r\n\r\n    const objects = FTW.getObjectsUnderArea(globalCoords, { filters: terrainLayerFilter });\r\n\r\n    if (!objects.length) {\r\n      throw 'No terrain objects found for destination!';\r\n    }\r\n\r\n    const objectIndexes = hexagons.utils.hexagonMath.coordinatesToIndexes(selectedObjectsCoordinates);\r\n    const centerCoords = {\r\n      x: objects[0].getMapCoordinates().x,\r\n      y: objects[0].getMapCoordinates().y\r\n    } ;\r\n    const destinationIndexes = hexagons.utils.hexagonMath.coordinatesToIndexes(centerCoords);\r\n\r\n    let pathsToCoordinates;\r\n    try {\r\n      const timeUnits = selectedObject.data.typeData.move;\r\n      pathsToCoordinates = hexagons.findPath(objectIndexes, destinationIndexes, +FTW.getMapsize().x, +FTW.getMapsize().y, +timeUnits, _isBlocked);\r\n      pathsToCoordinates = pathsToCoordinates.map(coords => {\r\n        return hexagons.utils.hexagonMath.indexesToCoordinates(coords);\r\n      });\r\n    } catch (e) {\r\n      if (!pathsToCoordinates || pathsToCoordinates.length < 1) {\r\n        e.message = 'the destination was farther than the given maximum distance';\r\n      } else {\r\n        e.message += ', EXTRA INFO: ' + 'start and end point are same, destination is blocked, unit could not reach the destination or something else happened';\r\n      }\r\n      throw e;\r\n    }\r\n    \r\n    selectedObject.move(pathsToCoordinates[pathsToCoordinates.length - 1]);\r\n\r\n    ui.showUnitMovement(pathsToCoordinates);\r\n\r\n    mapStates.objectOrderEnd();\r\n    FTW.drawOnNextTick();\r\n  } catch(e) {\r\n    mapStates.objectOrderEnd();\r\n    log.debug(e);\r\n    return;\r\n  }\r\n}\r\n\r\nfunction _isBlocked(coordinates) {\r\n  /* We use the EARLIER path to test, how much moving to the next area will require. We can\r\n   * not use the next area to test it, as that could lead to nasty surpises (like units\r\n   * couldn't move to an area at all, because they have 1 move and it requires 2 moves)\r\n   */\r\n  const correctHexagon = FTW.hexagonIndexes[coordinates.x] && FTW.hexagonIndexes[coordinates.x][coordinates.y];\r\n  const returnedWeight = weight(correctHexagon, FTW.currentlySelectedObjects[0], coordinates);\r\n  \r\n  if (!correctHexagon) {\r\n    return -1;\r\n  } else if (returnedWeight && isInteger(returnedWeight)) {\r\n    return returnedWeight;\r\n  } else if (returnedWeight && !isInteger(returnedWeight)) {\r\n    throw new Error('weight callback has to return an integer');\r\n  }\r\n\r\n  return -1;\r\n}\r\n\r\nfunction isInteger(x) {\r\n  return x === Math.floor(x) && isFinite(x);\r\n}\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nconst _tests = {\r\n  _isBlocked,\r\n  _orderListener,\r\n  _tapListener\r\n};\r\nexport {\r\n  setupHexagonClick,\r\n  _tests\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/extensions/hexagons/eventListeners/units.js\n **/","/**\r\n * Author: https://github.com/dmitrysteblyuk\r\n * Thank you for the awesome path finding :)\r\n */\r\n\r\nconst allHexDirections = [{ x: 0, y: 1 }, { x: -1, y: 1 }, { x: 1, y: 0 }, { x: 1, y: -1 }, { x: -1, y: 0 }, { x: 0, y: -1 }];\r\nconst allNormalDirections = [{ x: 0, y: 1 }, { x: 1, y: 0 }, { x: -1, y: 0 }, { x: 0, y: -1 }];\r\n\r\nclass PriorityQueue {\r\n  constructor() {\r\n    this.items = [];\r\n  }\r\n  \r\n  get length() {\r\n    return this.items.length;\r\n  }\r\n  \r\n  pop() {\r\n    const stack = this.items[this.items.length - 1].stack;\r\n    const value = stack.pop();\r\n    if (!stack.length) {\r\n      this.items.pop();\r\n    }\r\n    return value;\r\n  }\r\n  \r\n  push(value, loss) {\r\n    const [index, match] = this.items.length ?\r\n          binarySearch(i => this.items[i].loss - loss, 0, this.items.length)\r\n          : [0, false];\r\n      \r\n    if (match) {\r\n      this.items[index].stack.push(value);\r\n    } else {\r\n      const newItem = { stack: [value], loss: loss };\r\n      this.items.splice(index, 0, newItem);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Finds shortest route on a hexagon/normal grid\r\n * @param  {int} options.x:  xStart - start x-coordinate\r\n * @param  {int} options.y:  yStart - start y-coordinate\r\n * @param  {{ x: int, y: int }} - destination coordinates; if destination is null, then look for all reachable cells\r\n * @param  {int} width - width of the grid\r\n * @param  {int} height - height of the grid\r\n * @param  {int} maxTime - maximal allowed time to get to destination (must be at least 1)\r\n * @param  {({ x: int, y: int }, { x: int, y: int }) => int} weightFn - function that returns time between two adjacent cells\r\n * @param  {boolean} allowDiagonal - if not null then apply algorithm for normal square grid\r\n * @return {{ x: int, y: int, time: int }[]} - path coordinates from start to destination (including starting point)\r\n */\r\nfunction findPath(\r\n          { x: xStart, y: yStart},\r\n          dest,\r\n          width,\r\n          height,\r\n          maxTime,\r\n          weightFn,\r\n          allowDiagonal = null,\r\n          debug = false\r\n      ) {\r\n  \r\n  validateArgs();\r\n\r\n  let counter = 0;\r\n  const d = Date.now();\r\n  \r\n  const hexagonGrid = allowDiagonal === null;\r\n  const pathArr = bestDirectionAlg();\r\n\r\n  if (debug) {\r\n    console.log(...(dest ? [] : ['reachable: ']), // eslint-disable-line no-console\r\n        `${Date.now() - d}ms`,\r\n        pathArr && pathArr.length,\r\n        `${counter} oper`,\r\n        `${maxTime} cells`,\r\n        `${counter / maxTime / Math.log(maxTime)} coeff`);\r\n  }\r\n\r\n  return pathArr;\r\n  \r\n  function bestDirectionAlg() {\r\n    const visited = [];\r\n    const startMinTime = dest && getMinSteps(dest.x - xStart, dest.y - yStart, hexagonGrid);\r\n    const queue = new PriorityQueue();\r\n    const start = {\r\n      x: xStart,\r\n      y: yStart,\r\n      time: 0,\r\n      prev: null\r\n    };\r\n    \r\n    isVisited(start);\r\n    queue.push(start, 0);\r\n    \r\n    let resPath = null;\r\n    let allowedTime = maxTime;\r\n    \r\n    while(queue.length) {\r\n      counter++;\r\n      const curr = queue.pop();\r\n      const maxRemainingTime = allowedTime - curr.time;\r\n      const minPossibleTime = !dest || maxRemainingTime < 1 ? 1\r\n            : getMinSteps(dest.x - curr.x, dest.y - curr.y, hexagonGrid);\r\n        \r\n      if (minPossibleTime > maxRemainingTime) {\r\n        continue;\r\n      }\r\n        \r\n      const directions = hexagonGrid ? allHexDirections : allNormalDirections;\r\n        \r\n      for (let i = directions.length; i-- > 0; ) {\r\n        const x = curr.x + directions[i].x;\r\n        const y = curr.y + directions[i].y;\r\n        const next = { x: x, y: y };\r\n        const weight = weightFn(next, curr);\r\n\r\n        if (debug && (!isInteger(weight) || weight < 0)) {\r\n          console.error(next, curr); // eslint-disable-line no-console\r\n          throw new Error(`weightFn didn't return non-negative integer: ${weight}`);\r\n        }\r\n\r\n        if (weight < 0 || curr.time + weight > maxTime) {\r\n          continue;\r\n        }\r\n\r\n        next.time = curr.time + weight;\r\n        next.prev = curr;\r\n            \r\n        if (dest && x === dest.x && y === dest.y) {\r\n          resPath = next;\r\n          allowedTime = next.time - 1;\r\n          break;\r\n        }\r\n            \r\n        if (!isVisited(next)) {\r\n          const loss = next.time +\r\n                    (dest ? getMinSteps(dest.x - x, dest.y - y, hexagonGrid) - startMinTime : 0);\r\n          queue.push(next, loss/* * (maxTime + 1) - next.time*/);\r\n        }\r\n      }\r\n    }\r\n    \r\n    if (dest) {\r\n      return resPath && pathListToArray(resPath);\r\n    }\r\n    \r\n    return visited.reduce((res, time, key) => {\r\n      const dy = key % height;\r\n      const dx = (key - dy) / height - width;\r\n      if (dx || dy) {\r\n            // do not include starting point\r\n        res.push({ x: dx + xStart, y: dy + yStart, time: time });\r\n      }\r\n      return res;\r\n    }, []);\r\n    \r\n    function isVisited(cell) {\r\n        // if width and height are chosen right then the key should not be negative\r\n      const key = (cell.x - xStart + width) * height + (cell.y - yStart);\r\n\r\n      if (key < 0) {\r\n        if (debug) {\r\n          console.error(cell); // eslint-disable-line no-console\r\n        }\r\n        throw new Error(`negative key: ${key}`);\r\n      }\r\n        \r\n      return visited[key] ?\r\n            visited[key] <= cell.time || (visited[key] = cell.time, false)\r\n            : (visited[key] = cell.time, false);\r\n    }\r\n  }\r\n  \r\n  function validateArgs() {\r\n    [xStart, yStart]\r\n          .concat(dest ? [dest.x, dest.y] : [])\r\n          .concat([width, height, maxTime])\r\n          .forEach((arg, i) => {\r\n            if (!isInteger(arg)) {\r\n              throw new Error(`argument #${i} must be an integer: ${arg}`);\r\n            }\r\n          });\r\n      \r\n    if (maxTime < 1) {\r\n      throw new Error(`maxTime must be at least 1: ${maxTime}`);\r\n    }\r\n    if (dest && xStart === dest.x && yStart === dest.y) {\r\n      throw new Error(`starting and destination points must be different: ${xStart}, ${yStart}`);\r\n    }\r\n  }\r\n}\r\n\r\nfunction pathListToArray(pathList) {\r\n  let link = pathList;\r\n  const arr = [];\r\n  \r\n  do {\r\n    arr.push(link);\r\n    link = link.prev\r\n  } while(link);\r\n  \r\n  return arr.reverse();\r\n}\r\n\r\nfunction binarySearch(sortFn, i0, i1) {\r\n  const mid = Math.floor((i0 + i1) / 2);\r\n  const res = sortFn(mid);\r\n  \r\n  if (res < 0) {\r\n    return mid > i0 ? binarySearch(sortFn, i0, mid) : [i0, false];\r\n  } else if (res > 0) {\r\n    return mid + 1 < i1 ? binarySearch(sortFn, mid + 1, i1) : [i1, false];\r\n  }\r\n  return [mid, true];\r\n}\r\n\r\nfunction isInteger(x) {\r\n  return x === Math.floor(x) && isFinite(x);\r\n}\r\n\r\nfunction getMinSteps(dx, dy, hexagonGrid) {\r\n  if (hexagonGrid) {\r\n    return dx > 0 && dy > 0 ? dx + dy\r\n          : dx < 0 && dy < 0 ? -dx - dy\r\n          : Math.max(Math.abs(dx), Math.abs(dy));\r\n  } else {\r\n    return Math.abs(dx) + Math.abs(dy);\r\n  }\r\n}\r\n\r\n/*---------------------\r\n------- EXPORT --------\r\n----------------------*/\r\nexport {\r\n  findPath\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/extensions/hexagons/pathFinding/findPath.js\n **/","import * as createHexagon from './createHexagon';\r\nimport * as hexagonMath from './hexagonMath';\r\n\r\nexport {\r\n  createHexagon,\r\n  hexagonMath\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/extensions/hexagons/utils/index.js\n **/","import * as PIXI from 'pixi.js';\r\nimport { getHexagonPoints } from './hexagonMath';\r\n\r\n/*-----------------------\r\n--------- PUBLIC --------\r\n-----------------------*/\r\n/**\r\n * This manages some utility functionalities for creating hexagons\r\n *\r\n * @class extensions.hexagons.utils\r\n */\r\n/**\r\n * Credits belong to: https://github.com/alforno-productions/HexPixiJs/blob/master/lib/hexPixi.js\r\n * Creates a hex shaped polygon that is used for the hex's hit area.\r\n *\r\n * @private\r\n * @static\r\n * @method createHexagon\r\n * @param {Number} radius           Radius of the hexagon\r\n * @param {Object} {}               *OPTIONAL*\r\n * @param {Object} {}.orientation   Is the heaxgon grid horizontal or vertical. Default: 'horizontal\"\r\n * @return {PIXI.Polygon}           Hexagon shaped PIXI.Polygon object. That houses the hexagons corner points.\r\n */\r\nfunction createHexagon(radius, { orientation = 'horizontal' } = {}) {\r\n  if (orientation !== 'horizontal') {\r\n    throw new Error('Nothing else than horizontal supported so far!');\r\n  }\r\n  const points = coordsToPixiPoints(radius);\r\n\r\n  return new PIXI.Polygon(points);\r\n}\r\n/**\r\n * @private\r\n * @static\r\n * @method createVisibleHexagon\r\n * @method createVisibleHexagon\r\n * @param {Number} radius       Radius of the hexagon\r\n * @param {Object} options      Options, such as:\r\n *                              color: The fill color of the hexagon\r\n *                              isFlatTop (Boolean), is the heaxgon flat-topped\r\n * @return {PIXI.Graphics}      Graphics object that is shaped as hexagon, based on given radius and options.\r\n */\r\nfunction createVisibleHexagon(radius, { color = 0xFF0000, isFlatTop = false } = {}) {\r\n  const graphics = new PIXI.Graphics();\r\n  const points = coordsToPixiPoints(radius, isFlatTop);\r\n\r\n  graphics.beginFill(color, 1);\r\n  graphics.drawPolygon(points, isFlatTop);\r\n  graphics.endFill();\r\n\r\n  return graphics;\r\n}\r\n\r\n/*-----------------------\r\n--------- PRIVATE -------\r\n-----------------------*/\r\n/**\r\n * Converts Array of x- and y-coordinates to new PIXI.Point coordinates\r\n *\r\n * @private\r\n * @static\r\n * @method coordsToPixiPoints\r\n * @method coordsToPixiPoints\r\n * @param  {Number} radius        Hexagons radius\r\n * @return {Array}                Array of PIXI.Point coordinates\r\n */\r\nfunction coordsToPixiPoints(radius) {\r\n  return getHexagonPoints({ radius }).map(function (point) {\r\n    return new PIXI.Point(point.x, point.y);\r\n  });\r\n}\r\n\r\n/*-----------------------\r\n---------- API ----------\r\n-----------------------*/\r\nexport {\r\n  createHexagon,\r\n  createVisibleHexagon,\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/extensions/hexagons/utils/createHexagon.js\n **/","import { mapLog } from '../../../core/';\r\n\r\n/*-----------------------\r\n------- VARIABLES -------\r\n-----------------------*/\r\nlet globalRadius, globalStartingPoint, globalOrientation;\r\n\r\n/**\r\n * Utility module, for making different calculations and tests when hexagon based grid map in use\r\n *\r\n * @namespace flatworld.extensions.hexagons\r\n * @class utils\r\n */\r\n/*-----------------------\r\n--------- PUBLIC --------\r\n-----------------------*/\r\n/**\r\n * Set hexagon radius\r\n *\r\n * @static\r\n * @method init\r\n * @param {Number} radius    The radius of the hexagon\r\n */\r\nfunction init(radius, startingPoint = { x: 0, y: 0 }, { orientation = 'horizontal' } = {}) {\r\n  if (!radius) {\r\n    mapLog.error('You need to pass radius as a parameter');\r\n  }\r\n\r\n  globalRadius = radius;\r\n  globalStartingPoint = startingPoint;\r\n  globalOrientation = orientation;\r\n}\r\n/**\r\n * @method\r\n * @static\r\n * @method getHexagonPoints\r\n * @param {Float} radius      radius of the hexagon\r\n * @param {object} options    extra options, like generating horizontal hexagon points and\r\n * how many decimals to round\r\n*/\r\nfunction getHexagonPoints({ radius = globalRadius, orientation = globalOrientation } = {}) {\r\n  const OFFSET = orientation === 'horizontal' ? 0.5 : 0;\r\n  const CENTER = {\r\n    x: radius,\r\n    y: radius\r\n  };\r\n  const points = [];\r\n  let angle = 2 * Math.PI / 6 * OFFSET;\r\n  let x = CENTER.x * Math.cos(angle);\r\n  let y = CENTER.y * Math.sin(angle);\r\n  points.push({ x, y });\r\n\r\n  for (let i = 1; i < 7; i++) {\r\n    angle = 2 * Math.PI / 6 * (i + OFFSET);\r\n    x = CENTER.x * Math.cos(angle);\r\n    y = CENTER.y * Math.sin(angle);\r\n\r\n    points.push({ x, y });\r\n  }\r\n\r\n  return points;\r\n}\r\n/**\r\n * Calculates the hexagons:\r\n * innerDiameter\r\n * - Vertical / Flat hexagons height\r\n * - Horizontal / pointy hexagons width\r\n *\r\n * @method calcShortDiagonal\r\n * @static\r\n * @param {Object} {}               *OPTIONAL*\r\n * @param {float} {}.radius         Usually the radius of the hexagon\r\n * @param {string} {}.type          If you provide something else than radius, where the calculation is based from\r\n */\r\nfunction calcShortDiagonal({ radius = globalRadius, floorNumbers = true } = {}) {\r\n  let answer = radius * Math.sqrt(3);\r\n  answer = floorNumbers ? Math.floor(answer) : answer;\r\n\r\n  return answer;\r\n}\r\n/** Calculates the hexagons:\r\n * outerDiameter\r\n * - Vertical / Flat hexagons width\r\n * - Horizontal / pointy hexagons height\r\n *\r\n * @method calcLongDiagonal\r\n * @static\r\n * @param {Object} {}                 *OPTIONAL*\r\n * @param {float} {}.radius           Usually the radius of the hexagon\r\n * @param {string} {}.type            If you provide something else than radius, where the calculation is based from\r\n */\r\nfunction calcLongDiagonal({ radius = globalRadius, floorNumbers = true } = {}) {\r\n  let answer = radius * 2;\r\n  answer = floorNumbers ? Math.floor(answer) : answer;\r\n\r\n  return answer;\r\n}\r\n/** Calculates the hexagons distance between each other in y-coordinate, when orientation is horizontal\r\n *\r\n * @method calcSpecialDistance\r\n * @static\r\n * @param {Object} {}                   *OPTIONAL*\r\n * @param {float} {}.radius             Usually the radius of the hexagon\r\n */\r\nfunction calcSpecialDistance({ radius = globalRadius } = {}) {\r\n  return calcLongDiagonal(radius) - radius / 2;\r\n}\r\n/**\r\n * Test do the given coordinates hit the hexagon, given by the points container / array\r\n *\r\n * @static\r\n * @method hexaHitTest\r\n * @param  {PIXI.Point[]} points             Array of PIXI.points\r\n * @param  {Object} hitCoords         The coordinates to test against\r\n * @param  {Integer} hitCoords.x      X coordinate\r\n * @param  {Integer} hitCoords.y      Y coordinate\r\n * @param  {Object} offsetCoords      *OPTIONAL* offsetCoordinates that are added to the hitCoordinates.\r\n * Separate because these are outside the\r\n * given array.\r\n * @param  {Integer} offsetCoords.x   X coordinate\r\n * @param  {Integer} offsetCoords.y   Y coordinate\r\n * @return {Boolean}                  Is the coordinate inside the hexagon or not\r\n */\r\n\r\nfunction hexaHitTest(points, hitCoords, offsetCoords = { x: 0, y: 0 }) {\r\n  const realPolygonPoints = points.map(point => {\r\n    return {\r\n      x: point.x + offsetCoords.x,\r\n      y: point.y + offsetCoords.y\r\n    };\r\n  });\r\n\r\n  return _pointInPolygon(hitCoords, realPolygonPoints);\r\n}\r\n/**\r\n * Create Array that holds the coordinates for the size of hexagon grid we want to create.\r\n *\r\n * @method createHexagonGridCoordinates\r\n * @static\r\n * @param {Object} gridSize\r\n * @param {Object} gridSize.rows      The count of rows in the hexagon grid\r\n * @param {Object} gridSize.columns   The count of columns in the hexagon grid\r\n * @param {Object} {}                 *OPTIONAL* configurations in an object\r\n * @param {Number} {}.radius          The radius of hexagon. Basically the radius of the outer edges / circle of the hexagon.\r\n * @param {String} {}.orientation     Is it horizontal or vertical hexagon grid. Default: horizontal\r\n * @return {[]}                       Array that holds the coordinates for the hexagon grid, like [{x: ?, y: ?}]\r\n */\r\nfunction createHexagonGridCoordinates(gridSize, { radius = globalRadius, orientation = globalOrientation } = {}) {\r\n  const { rows, columns } = gridSize;\r\n  const gridArray = [];\r\n  const shortDistance = calcShortDiagonal(radius);\r\n  const longDistance = calcLongDiagonal(radius) - radius / 2;\r\n  /* We set the distances of hexagons / hexagon rows and columns, depending are we building horizontal or vertical hexagon grid. */\r\n  const rowHeight = orientation === 'horizontal' ? longDistance : shortDistance;\r\n  const columnWidth = orientation === 'horizontal' ? shortDistance : longDistance;\r\n\r\n  for (let row = 0; rows > row; row++) {\r\n    for (let column = 0; columns > column; column++) {\r\n      /* Se the coordinates for each hexagons upper-left corner on the grid */\r\n      gridArray.push({\r\n        x: Math.round((column * columnWidth) +\r\n          (orientation === 'horizontal' && (row === 0 || row % 2 === 0) ? 0 : -shortDistance / 2)),\r\n        y: row * rowHeight\r\n      });\r\n    }\r\n  }\r\n\r\n  return gridArray;\r\n}\r\n/**\r\n * This converts pixel-based coordinates to hexagon indexes. Uses axial coordinate system\r\n * (http://www.redblobgames.com/grids/hexagons/)\r\n * @param  {Object} coordinates           Coordinates with x and y\r\n * @param  {Object} options.startingPoint Starting point coordinates with x and y\r\n * @return {Object}                       Index coordinates with x and y\r\n */\r\nfunction coordinatesToIndexes(coordinates, { startingPoint = globalStartingPoint } = {}) {\r\n  const indexes = {\r\n    x: Math.floor((coordinates.x - startingPoint.x) / calcShortDiagonal()),\r\n    y: Math.floor((coordinates.y - startingPoint.y) / calcSpecialDistance())\r\n  };\r\n\r\n  indexes.x -= Math.floor(coordinates.y / (calcSpecialDistance() * 2));\r\n\r\n  return indexes;\r\n}\r\n/**\r\n * This converts hexagon indexes to pixel-based coordinates. Uses axial coordinate system\r\n * (http://www.redblobgames.com/grids/hexagons/)\r\n * @param  {Object} indexes               Coordinates with x and y\r\n * @param  {Object} options.startingPoint Starting point coordinates with x and y\r\n * @return {Object}                       Pixel coordinates with x and y\r\n */\r\nfunction indexesToCoordinates(indexes, { startingPoint = globalStartingPoint } = {}) {\r\n  const coordinates = {\r\n    x: Math.floor((indexes.x * calcShortDiagonal()) + startingPoint.x),\r\n    y: Math.floor((indexes.y * calcSpecialDistance()) + startingPoint.y)\r\n  };\r\n\r\n  coordinates.x += Math.floor(indexes.y * (calcShortDiagonal() / 2));\r\n\r\n  return coordinates;\r\n}\r\n\r\n/*-----------------------\r\n--------- PRIVATE -------\r\n-----------------------*/\r\n/**\r\n * credits to: https://github.com/substack/point-in-polygon\r\n * Tests whether the given point / coordinate is inside the given points. Assuming the points form a polygon\r\n *\r\n * @static\r\n * @private\r\n * @method _pointInPolygon\r\n * @param  {Object} point             The coordinates to test against\r\n * @param  {Integer} hitCoords.x      X coordinate\r\n * @param  {Integer} hitCoords.y      Y coordinate\r\n * @param  {Integer[]} vs             The points of the polygon to test [0] === x-point, [1] === y-point\r\n * @return {Boolean}                  Is the coordinate inside the hexagon or not\r\n */\r\nfunction _pointInPolygon(point, vs) {\r\n  const x = point.x;\r\n  const y = point.y;\r\n  let inside = false;\r\n  let xi, xj, yi, yj, intersect;\r\n\r\n  for (let i = 0, j = vs.length - 1; i < vs.length; j = i++) {\r\n    xi = vs[i].x;\r\n    yi = vs[i].y;\r\n    xj = vs[j].x;\r\n    yj = vs[j].y;\r\n    intersect = ((yi > y) !== (yj > y)) &&\r\n        (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\r\n\r\n    if (intersect) {\r\n      inside = !inside;\r\n    }\r\n  }\r\n\r\n  return inside;\r\n}\r\n\r\n/*-----------------------\r\n---------- API ----------\r\n-----------------------*/\r\nexport {\r\n  init,\r\n  createHexagonGridCoordinates,\r\n  getHexagonPoints,\r\n  calcShortDiagonal,\r\n  calcLongDiagonal,\r\n  calcSpecialDistance,\r\n  hexaHitTest,\r\n  coordinatesToIndexes,\r\n  indexesToCoordinates,\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/extensions/hexagons/utils/hexagonMath.js\n **/","import { setupHexagonClick } from './eventListeners/units';\r\nimport { hexagonMath } from './utils/';\r\n\r\n/*-----------------------\r\n-------- PUBLIC ---------\r\n-----------------------*/\r\n/**\r\n * Handles the selection of hexagons on the map\r\n *\r\n * @namespace flatworld.extensions.hexagons\r\n * @class selectHexagonObject\r\n * @return {Object}       Return methods inside object\r\n */\r\nconst selectHexagonObject = (function() {\r\n  return {\r\n    init,\r\n    pluginName: 'selectHexagonObject'\r\n  };\r\n\r\n  /**\r\n   * @method  init\r\n   * @param {Map} givenMap                  Instantiated Map class object\r\n   * @param {Object} protectedProperties    Holds all the non-public properties to use\r\n   * @param {Array} params                  Rest of the parameters\r\n   */\r\n  function init(params) {\r\n    if (!params.isBlocked) {\r\n      throw new Error('hexagon pathFinding plugin requires cb and filter properties')\r\n    }\r\n\r\n    this.mapInstance.hexagonIndexes = createHexagonDataStructure(() => this.mapInstance.allMapObjects.terrainLayer);\r\n\r\n    startClickListener(this.mapInstance, params.isBlocked);\r\n\r\n    return Promise.resolve();\r\n  }\r\n\r\n  /*-----------------------\r\n  -------- PRIVATE --------\r\n  -----------------------*/\r\n  /**\r\n   * @private\r\n   * @method startClickListener\r\n   * @param {Map} map              Instantiated Map class object\r\n   */\r\n  function startClickListener(mapInstance, isBlocked) {\r\n    return setupHexagonClick(mapInstance, isBlocked);\r\n  }\r\n})();\r\n\r\nfunction createHexagonDataStructure(getLayers) {\r\n  const hexagonIndexes = {};\r\n  const objArray = getLayers();\r\n  let indexes;\r\n\r\n  objArray.forEach(obj => {\r\n    const correctCoords = obj.getMapCoordinates();\r\n\r\n    indexes = hexagonMath.coordinatesToIndexes(correctCoords);\r\n\r\n    hexagonIndexes[indexes.x] = hexagonIndexes[indexes.x] || {};\r\n    hexagonIndexes[indexes.x][indexes.y] = obj;\r\n  })\r\n\r\n  return hexagonIndexes;\r\n}\r\n\r\n/*-----------------------\r\n---------- API ----------\r\n-----------------------*/\r\nconst _tests = {\r\n  createHexagonDataStructure\r\n};\r\nexport {\r\n  selectHexagonObject,\r\n  _tests\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/extensions/hexagons/selectHexagonPlugin.js\n **/","import * as PIXI from 'pixi.js';\r\nimport { objects } from '../../core/index';\r\nimport {  hexagonMath, createHexagon } from './utils/';\r\nconst { ObjectSpriteTerrain, ObjectSpriteUnit } = objects;\r\n\r\n/*-----------------------\r\n-------- VARIABLES ------\r\n-----------------------*/\r\nlet shape;\r\n\r\nclass ObjectHexaTerrain extends ObjectSpriteTerrain {\r\n  /**\r\n   * Terrain tile like desert or mountain, non-movable and cacheable. Normally, but not necessarily, these are inherited, depending on\r\n   * the map type. For example you might want to add some click area for these\r\n   *\r\n   * @namespace flatworld.extensions.hexagons\r\n   * @class ObjectHexaTerrain\r\n   * @constructor\r\n   * @param  {Object} coords\r\n   * @param  {Integer} coords.x         X coordinate\r\n   * @param  {Integer} coords.y         Y coordinate\r\n   * @param {object} data               This units custom data\r\n   * @param {Object} options            options.radius REQUIRED.\r\n   * @param {Number} options.radius     REQUIRED. This is the radius of the game maps hexagon.\r\n   */\r\n  constructor(texture, coords = { x: 0, y: 0 }, { data, radius, minimapColor, minimapShape, anchor = 0.5 }) {\r\n    super(texture, coords, { data });\r\n\r\n    this.name = 'DefaultTerrainObject_hexa';\r\n    this.minimapColor = minimapColor;\r\n    this.minimapShape = minimapShape;\r\n    // Set graphics to center of the hexa\r\n    this.anchor.set(anchor, anchor);\r\n\r\n    calculateHexa.call(this, radius);    \r\n  }\r\n  /**\r\n   * Overwrite super method\r\n   * @method calculateHexa\r\n   * @return {[type]} [description]\r\n   */\r\n  getCenterCoordinates() {\r\n    if (!this.coordinates.center) {\r\n      this.coordinates.center = {\r\n        x: this.HEXA_WIDTH / 2,\r\n        y: this.HEXA_HEIGHT / 2\r\n      };\r\n    }\r\n\r\n    return this.coordinates.center;\r\n  }\r\n}\r\n\r\nclass ObjectHexaUnit extends ObjectSpriteUnit {\r\n  /**\r\n   * Map unit like infantry or worker, usually something with actions or movable. Usually these are extended, depending on the map type.\r\n   * For example you might want to add some click area for these (e.g. hexagon)\r\n   *\r\n   * @class ObjectHexaUnit\r\n   * @constructor\r\n   * @param {Object} coords            This units coordinates, relative to it's parent container\r\n   * @param {Integer} coords.x         X coordinate\r\n   * @param {Integer} coords.y         Y coordinate\r\n   * @param {object} data               This units custom data\r\n   * @param {Object} options            options.radius REQUIRED\r\n   * @param {Object} options.radius     REQUIRED. This is the radius of the game maps hexagon\r\n   */\r\n  constructor(texture, coords = { x: 0, y: 0 }, { data, radius, minimapColor, minimapShape, anchor = 0.5 }) {\r\n    super(texture, coords, { data });\r\n\r\n    this.name = 'DefaultUnitObjects_hexa';\r\n    this.minimapColor = minimapColor;\r\n    this.minimapShape = minimapShape;\r\n    this.static = false;\r\n    // Set graphics to center of the hexa\r\n    this.anchor.set(anchor, anchor);\r\n\r\n    calculateHexa.call(this, radius);\r\n  }\r\n  /**\r\n   * Overwrite super method\r\n   * @method calculateHexa\r\n   * @return {[type]} [description]\r\n   */\r\n  getCenterCoordinates() {\r\n    if (!this.coordinates.center) {\r\n      this.coordinates.center = {\r\n        x: this.HEXA_WIDTH / 2,\r\n        y: this.HEXA_HEIGHT / 2\r\n      };\r\n    }\r\n\r\n    return this.coordinates.center;\r\n  }\r\n}\r\n/**\r\n * @static\r\n * @method calculateHexa\r\n * @param {Number} radius       Hexagon radius\r\n */\r\nfunction calculateHexa(radius) {\r\n  if (!radius) {\r\n    throw new Error('Need radius!');\r\n  }\r\n\r\n  const HEXA_HEIGHT = Math.round(hexagonMath.calcLongDiagonal(radius));\r\n  const HEXA_WIDTH = Math.round(hexagonMath.calcShortDiagonal(radius));\r\n  const SIDE = Math.round(radius);\r\n\r\n  this.areaHeight = this.HEXA_HEIGHT = HEXA_HEIGHT;\r\n  this.areaWidth = this.HEXA_WIDTH = HEXA_WIDTH;\r\n  this.SIDE = SIDE;\r\n  this.ROW_HEIGHT = Math.round(HEXA_HEIGHT * 0.75);\r\n\r\n  /* Draw hexagon to test the hits with hitArea */\r\n  this.hitArea = setAndGetShape(radius);\r\n  this.hitTest = function (coords) {\r\n    const localCoords = this.toLocal(new PIXI.Point(coords.x, coords.y));\r\n\r\n    return bugFixedContains.call(this.hitArea, localCoords.x * this.scale.x, localCoords.y * this.scale.y);\r\n  };\r\n}\r\n/*-----------------------\r\n--------- PRIVATE -------\r\n-----------------------*/\r\n/**\r\n * @private\r\n * @static\r\n * @method setAndGetShape\r\n * @param {Number} radius       Hexagon radius\r\n */\r\nfunction setAndGetShape(radius) {\r\n  if (!shape) {\r\n    shape = createHexagon.createHexagon(radius);\r\n  }\r\n\r\n  return shape;\r\n}\r\n\r\n/* THIS IS ONLY TEMPORARY FIX. The PIXIs own contains method had a bug introduced in v4.1.0 and\r\n * and that is the one npm retrieves, so I decided to add the old v4.0.0 version here as a\r\n * temporary fix. Can be removed after PIXI fixes it's bug. Githib ticket here:\r\n * https://github.com/pixijs/pixi.js/pull/3165\r\n */\r\nfunction bugFixedContains (x, y)\r\n{\r\n  let inside = false;\r\n\r\n  // use some raycasting to test hits\r\n  // https://github.com/substack/point-in-polygon/blob/master/index.js\r\n  const length = this.points.length / 2;\r\n\r\n  for (let i = 0, j = length - 1; i < length; j = i++)\r\n  {\r\n    const xi = this.points[i * 2], yi = this.points[i * 2 + 1],\r\n      xj = this.points[j * 2], yj = this.points[j * 2 + 1],\r\n      intersect = ((yi > y) !== (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\r\n\r\n    if (intersect)\r\n    {\r\n      inside = !inside;\r\n    }\r\n  }\r\n\r\n  return inside;\r\n}\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport {\r\n  calculateHexa,\r\n  ObjectHexaTerrain,\r\n  ObjectHexaUnit\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/extensions/hexagons/Objects.js\n **/","import Q from 'q';\r\nimport { mapEvents, utils } from '../../core/';\r\n\r\n/*-----------------------\r\n-------- PUBLIC ---------\r\n-----------------------*/\r\n/** This module manages visibility of the objects, based on are they visible to the player\r\n * on the canvas / viewport or outside of it. It does this by getting object from larger area\r\n * than the current viewport size and then checking if the subcontainers are actually inside the\r\n * viewport or not. If inside mark them visible, if outside mark then hidden.\r\n * This makes the map a lot faster and reliable resource-wise.\r\n *\r\n * @namespace flatworld.extensions\r\n * @class mapMovement\r\n **/\r\nconst mapMovement = (function(debug = false) {\r\n  const VIEWPORT_OFFSET = 0.2;\r\n  const CHECK_INTERVAL = 20;\r\n  const SUBCONTAINERS_TO_HANDLE_IN_TIMEOUT = 40;\r\n  const queue = {};\r\n  let viewportArea, offsetSize, mapInstance;\r\n\r\n  return {\r\n    init,\r\n    pluginName: 'mapMovement',\r\n    addAll,\r\n    check,\r\n    startEventListeners,\r\n    _testObject: {\r\n      isObjectOutsideViewport,\r\n      checkAndSetSubcontainers,\r\n      getViewportWithOffset,\r\n      testRectangleIntersect,\r\n      _setMap,\r\n      setOffsetSize\r\n    }\r\n  };\r\n  /**\r\n   * Ínitialize as a plugin\r\n   *\r\n   * @method init\r\n   * @param  {Map} map     Instance of Map\r\n   */\r\n  function init() {\r\n    mapInstance = this.mapInstance;\r\n    addAll(this.mapInstance);\r\n    startEventListeners();\r\n    this.mapInstance.drawOnNextTick();\r\n\r\n    if (debug) {\r\n      /**\r\n       * For debugging. Shows the amount of currectly active and inactive subcontainers. Console.logs the data.\r\n       * Also extends window object.\r\n       *\r\n       * @method window.FlaTWorld_mapMovement_subCheck\r\n       * @static\r\n       */\r\n      window.FlaTWorld_mapMovement_subCheck = function () {\r\n        mapInstance.getPrimaryLayers().forEach(layer => {\r\n          const subcontainers = layer.getSubcontainers();\r\n          const visibleContainers = subcontainers.filter(subcontainer => {\r\n            return subcontainer.visible;\r\n          });\r\n          const invisibleContainers = subcontainers.filter(subcontainer => {\r\n            return !subcontainer.visible;\r\n          });\r\n\r\n          const containerCoords = visibleContainers.reduce((all, cont2) => { all + cont2.x + ''; });\r\n          window.flatworld.log.debug(\r\n            'visible subcontainers: ' + visibleContainers.length + ', ' + containerCoords + '\\n\\ninvisible: ' +\r\n            invisibleContainers.length);\r\n        });\r\n      };\r\n      /**\r\n       * For debugging. Sets all primaryLayers subcontainers on the map as visible = true.\r\n       *\r\n       * @method window.FlaTWorld_mapMovement_deactivate\r\n       * @static\r\n       */\r\n      window.FlaTWorld_mapMovement_deactivate = function () {\r\n        mapInstance.getPrimaryLayers().forEach(layer => {\r\n\r\n          layer.getSubcontainers().forEach(subcontainer => {\r\n            subcontainer.visible = false;\r\n          });\r\n        });\r\n      };\r\n    }\r\n\r\n    return Promise.resolve();\r\n  }\r\n  /**\r\n   * Ínitialize the plugin\r\n   *\r\n   * @method addAll\r\n   * @param  {Map} map     Instance of Map\r\n   */\r\n  function addAll(mapInstance) {\r\n    viewportArea = setupViewportArea(true, VIEWPORT_OFFSET);\r\n    setOffsetSize(viewportArea);\r\n\r\n    mapInstance.getPrimaryLayers().forEach(layer => {\r\n      layer.getSubcontainers().forEach(subcontainer => {\r\n        subcontainer.visible = isObjectOutsideViewport(subcontainer, viewportArea) ? false : true;\r\n      });\r\n    });\r\n  }\r\n  /**\r\n   * This one checks the that the objects that should currently be visible in the viewport area\r\n   * are visible and outside\r\n   * of the viewport objects are set .visible = false. This affect performance a lot. Basically\r\n   * when the map moves, we\r\n   * set a check in the future based on the given intervalCheck milliseconds. And immediately\r\n   * after it we check if there\r\n   * is another map movement. If there is we set another timeout. This works better with\r\n   * timeouts.\r\n   *\r\n   * @method check\r\n   * @param  {Map} map        The current Map instance\r\n   * @return {Boolean}        True\r\n   */\r\n  function check() {\r\n    if (queue.processing) {\r\n      return false;\r\n    }\r\n    queue.processing = true;\r\n\r\n    window.setTimeout(setupHandleViewportArea(), CHECK_INTERVAL);\r\n\r\n    function setupHandleViewportArea() {\r\n      viewportArea = setupViewportArea(true, VIEWPORT_OFFSET);\r\n\r\n      checkAndSetSubcontainers(viewportArea, mapInstance.getPrimaryLayers());\r\n    }\r\n\r\n    return;\r\n  }\r\n  /**\r\n   * @method startEventListeners\r\n   * @param  {Map} map     Instance of Map\r\n   */\r\n  function startEventListeners() {\r\n    mapEvents.subscribe('mapMoved', moveCb);\r\n    mapEvents.subscribe('mapResized', resizeCb);\r\n    /* We change the scale factor ONLY if the map is zoomed. We reserve resources */\r\n    mapEvents.subscribe('mapZoomed', zoomCb);\r\n\r\n    function moveCb() {\r\n      check();\r\n    }\r\n    function resizeCb() {\r\n      setOffsetSize(viewportArea);\r\n      check();\r\n    }\r\n    function zoomCb() {\r\n      setOffsetSize(viewportArea);\r\n      check();\r\n    }\r\n  }\r\n  /*-----------------------\r\n  -------- PRIVATE --------\r\n  -----------------------*/\r\n  /**\r\n   * See if the given object or subcontainer is outside the given viewportarea. We check intersecting rectangles\r\n   *\r\n   * @private\r\n   * @static\r\n   * @method isObjectOutsideViewport\r\n   * @param  {Object} object                  Object / layer we are testing\r\n   * @param  {Object} viewportArea            ViewportArea location and size\r\n   * @param  {Integer} viewportArea.x         X coordinate\r\n   * @param  {Integer} viewportArea.y         Y coordinate\r\n   * @param  {Integer} viewportArea.width     Viewports width (in pixels)\r\n   * @param  {Integer} viewportArea.height    Viewports height (in pixels)\r\n   * @param  {Boolean} hasParent              default = true\r\n   * @return {Boolean}\r\n   */\r\n  function isObjectOutsideViewport(object, viewportArea) {\r\n    const globalArea = object.getSubcontainerArea({ toGlobal: false });\r\n\r\n    const isOutside = !testRectangleIntersect(globalArea, viewportArea);\r\n\r\n    return isOutside;\r\n  }\r\n  /**\r\n   * Checks proper subcontainers and mark the correct ones visible or hidden\r\n   *\r\n   * @todo rename and generally refactor\r\n   * @method checkAndSetSubcontainers\r\n   * @param  {Object} scaledViewport    Viewportarea that has been scaled.\r\n   * @param  {Array} primaryLayers      The primarylayers that we handle\r\n   */\r\n  function checkAndSetSubcontainers(scaledViewport, primaryLayers) {\r\n    const largerViewportAreaWithOffset = getViewportWithOffset(scaledViewport);\r\n    let containersUnderChangedArea = [];\r\n    let promises;\r\n\r\n    primaryLayers = utils.general.chunkArray(primaryLayers, VIEWPORT_OFFSET);\r\n    promises = primaryLayers.map((theseLayers) => {\r\n      const promise = Q.defer();\r\n\r\n      window.setTimeout(function () {\r\n        const foundSubcontainers = theseLayers.map((layer) => {\r\n          return layer.getSubcontainersByCoordinates(largerViewportAreaWithOffset);\r\n        });\r\n        containersUnderChangedArea = containersUnderChangedArea.concat(foundSubcontainers);\r\n\r\n        promise.resolve(containersUnderChangedArea);\r\n      });\r\n\r\n      return promise.promise;\r\n    });\r\n\r\n    promises = Q.all(promises).then(() => {\r\n      containersUnderChangedArea = utils.general.flatten2Levels(containersUnderChangedArea);\r\n\r\n      const subcontainers = utils.general.chunkArray(containersUnderChangedArea, SUBCONTAINERS_TO_HANDLE_IN_TIMEOUT);\r\n\r\n      const promises = subcontainers.map((thesesContainers) => {\r\n        const promise = Q.defer();\r\n\r\n        window.setTimeout(function () {\r\n          promise.resolve(thesesContainers.filter((thisContainer) => {\r\n            return thisContainer.visible = isObjectOutsideViewport(thisContainer, scaledViewport) ? false : true;\r\n          }));\r\n        });\r\n\r\n        return promise.promise;\r\n      });\r\n\r\n      return promises;\r\n    });\r\n    Q.all(promises).then(() => {\r\n      queue.processing = false;\r\n\r\n      mapInstance.drawOnNextTick();\r\n    }).then(null, (err) => {\r\n      window.flatworld.log.debug(err);\r\n    });\r\n  }\r\n  /**\r\n   * Initializes the module variables viewportArea and offsetSize\r\n   *\r\n   * @private\r\n   * @static\r\n   * @method setupViewportArea\r\n   * @return {totalViewportArea}              The total viewportArea\r\n   */\r\n  function setupViewportArea(isLocal = true, multiplier = 2) {\r\n    return mapInstance.getViewportArea(isLocal, multiplier);\r\n  }\r\n  /**\r\n   * Initializes the module variable offsetSize\r\n   *\r\n   * @private\r\n   * @static\r\n   * @method setOffsetSize\r\n   * @return {totalViewportArea}              The total viewportArea\r\n   */\r\n  function setOffsetSize(viewportArea) {\r\n    offsetSize = calculateOffset(viewportArea, { zoom: mapInstance.getZoom() });\r\n  }\r\n  /**\r\n   * forms the total viewport parameters based on the given ones.\r\n   *\r\n   * @private\r\n   * @static\r\n   * @method getViewportWithOffset\r\n   * @param  {AreaSize} viewportArea          Given viewport area\r\n   * @return {totalViewportArea}              The total viewportArea\r\n   */\r\n  function getViewportWithOffset(viewportArea) {\r\n    if(!offsetSize) {\r\n      throw new Error('getViewportWithOffset requires module variable offsetSize to have been set');\r\n    }\r\n\r\n    return {\r\n      x: Math.round(viewportArea.x - offsetSize),\r\n      y: Math.round(viewportArea.y - offsetSize),\r\n      width: Math.round(viewportArea.width + offsetSize * 2),\r\n      height: Math.round(viewportArea.height + offsetSize * 2)\r\n    };\r\n  }\r\n  /**\r\n   * @private\r\n   * @static\r\n   * @method testRectangleIntersect\r\n   */\r\n  function testRectangleIntersect(a, b) {\r\n    return (a.x <= b.x + b.width &&\r\n            b.x <= a.x + a.width &&\r\n            a.y <= b.y + b.height &&\r\n            b.y <= a.y + a.height);\r\n  }\r\n  /**\r\n   * @private\r\n   * @static\r\n   * @method calculateOffset\r\n   */\r\n  function calculateOffset(viewportArea, options = { zoom: 1 }) {\r\n    return Math.abs(viewportArea.width / options.zoom * VIEWPORT_OFFSET);\r\n  }\r\n  /**\r\n   * @private\r\n   * @static\r\n   * @method _setMap\r\n   */\r\n  function _setMap(givenMap) {\r\n    this.mapInstance = mapInstance = givenMap;\r\n  }\r\n})();\r\n\r\n/*-----------------------\r\n---------- API ----------\r\n-----------------------*/\r\n/* For debugging? This will show up if the plugin fails to load in Map.js */\r\nexport default mapMovement;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/extensions/mapMovement/mapMovement.js\n **/","import pixelizedMinimap from './pixelizedMinimap'\r\n\r\nexport default {\r\n  pixelizedMinimap\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/extensions/minimaps/index.js\n **/","import Hammer from 'hammerjs';\r\nimport * as PIXI from 'pixi.js';\r\nimport {  mapEvents, eventListeners, MapDataManipulator, utils } from '../../core/index';\r\n\r\n/*-----------------------\r\n-------- PUBLIC ---------\r\n-----------------------*/\r\n/**\r\n * Pixelized minimap works in situations, where you map a symmetrical map. E.g. hexagon or square based map.\r\n * It can only be created in sizes that match pixel squares (not sure what it is called). So basically object area on the minimap can be\r\n * either 1, 4, 9, 16 etc. pixels in size.\r\n *\r\n * After plugin has been initialized by the flatworld, you must still call initMinimap to start showing the minimap.\r\n *\r\n * @namespace flatworld.extensions.minimaps\r\n * @class pixelizedMinimap\r\n **/\r\nconst pixelizedMinimap = (function() {\r\n  let paddingX = 0;\r\n  let paddingY = 0;\r\n  let minimap, minimapViewport, hammer, coordinateConverterCB, mapMoveTimestamp, dynamicContainer, mapInstance;\r\n\r\n  return {\r\n    init,\r\n    pluginName: 'pixelizedMinimap',\r\n    initMinimap,\r\n    _testObject: {\r\n\r\n    }\r\n  };\r\n  /**\r\n   * Ínitialize as a plugin. Done by the Flatworld class.\r\n   *\r\n   * @method init\r\n   * @param  {Map} givenMap     Instance of Map\r\n   */\r\n  function init() {\r\n    hammer = new Hammer.Manager(this.mapInstance.minimapCanvas);\r\n    this.mapInstance.initMinimap = initMinimap;\r\n    minimap = this.mapInstance.getMinimapLayer();\r\n\r\n    return Promise.resolve();\r\n  }\r\n  /**\r\n   * initMinimap requires some data, to initialize and show the actual minimap.\r\n   *\r\n   * @param  {PIXI.DisplayObject} UIImage         The canvas image that you want to show around the UI element\r\n   * @param  {Integer} {}.x                       x coordinate for the minimap layer\r\n   * @param  {Integer} {}.y                       y coordinate for the minimap layer\r\n   * @return {PIXI.Container}                     minimap layer\r\n   */\r\n  function initMinimap(UIImage, minimapSize, staticCB, dynamicCB, coordinateConvCB, givenMinimapViewport, {\r\n        xPadding = 10,\r\n        yPadding = 10 } = {}) {\r\n    paddingX = xPadding;\r\n    paddingY = yPadding;\r\n    minimap.minimapSize = minimapSize;\r\n    coordinateConverterCB = coordinateConvCB;\r\n    // utils.mouse.disableContextMenu(map.getRenderer('minimap').view);\r\n    setMinimapUI(UIImage);\r\n    setupBackgroundLayer(staticCB);\r\n    setupDynamicLayer(dynamicCB);\r\n    _setMinimapArea(minimap.minimapSize.x, minimap.minimapSize.y, minimap.minimapSize.width, minimap.minimapSize.height);\r\n    setupMinimapViewportEvents();\r\n    setupMinimapClickEvent();\r\n    minimapViewport = givenMinimapViewport;\r\n    minimap.addChild(minimapViewport);\r\n\r\n    mapEvents.publish('minimapInitialized', minimap);\r\n\r\n    return minimap;\r\n  }\r\n  function setMinimapUI(UIImage) {\r\n    minimap.addChild(UIImage);\r\n  }\r\n  /**\r\n   * Sets up the layer that doesn't change, normally terrain layer. This layer is supposed to be unchanged during this play session, so\r\n   * is is cached for efficiency.\r\n   *\r\n   * @param  {Function} staticCB   Callback that receives each object that is added to the map individually.\r\n   */\r\n  function setupBackgroundLayer(staticCB) {\r\n    const filters = new MapDataManipulator({\r\n      type: 'filter',\r\n      object: 'layer',\r\n      property: 'zoomLayer',\r\n      value: true\r\n    });\r\n    const backgroundContainer = createMinimapLayer();\r\n\r\n    mapInstance.getAllObjects({ filters }).forEach((obj) => {\r\n      backgroundContainer.addChild(staticCB(obj));\r\n    });\r\n\r\n    backgroundContainer.cacheAsBitmap = true;\r\n\r\n    minimap.addChild(backgroundContainer);\r\n  }\r\n  function setupDynamicLayer(updateCB) {\r\n    const filters = new MapDataManipulator({\r\n      type: 'filter',\r\n      object: 'object',\r\n      property: 'static',\r\n      value: false\r\n    });\r\n    dynamicContainer = createMinimapLayer();\r\n\r\n    mapInstance.getAllObjects({ filters }).forEach((obj) => {\r\n      dynamicContainer.addChild(updateCB(obj));\r\n    });\r\n\r\n    dynamicContainer.cacheAsBitmap = true;\r\n\r\n    minimap.addChild(dynamicContainer);\r\n  }\r\n  function setupMinimapViewportEvents() {\r\n    mapEvents.subscribe('mapMoved', reactToMapMovement);\r\n    mapEvents.subscribe('mapZoomed', reactToMapScale);\r\n    mapEvents.subscribe('minimapClicked', moveViewport);\r\n  }\r\n  function reactToMapMovement() {\r\n    if (mapMoveTimestamp - Date.now() > -5) {\r\n      return;\r\n    }\r\n\r\n    const minimapCoordinates = coordinateConverterCB(mapInstance.getCurrentMapCoordinates(), true);\r\n\r\n    minimapViewport.x = minimapCoordinates.x;\r\n    minimapViewport.y = minimapCoordinates.y;\r\n\r\n    mapInstance.drawOnNextTick();\r\n  }\r\n  function reactToMapScale() {\r\n    minimapViewport.scale.x += 0.1;\r\n    minimapViewport.scale.y = 0.1;\r\n  }\r\n  function moveViewport(datas) {\r\n    let globalCoordinates = utils.mouse.eventData.getHAMMERPointerCoords(datas);\r\n    let mapCoordinates = new PIXI.Point(datas.srcEvent.layerX, datas.srcEvent.layerY);\r\n\r\n    globalCoordinates = utils.mouse.coordinatesFromGlobalToRelative(globalCoordinates, mapInstance.minimapCanvas);\r\n\r\n    /* We need to keep track when the map was moved, so we don't react to this movement */\r\n    mapMoveTimestamp = Date.now();\r\n\r\n    /* Select the center of the viewport rectangle */\r\n    globalCoordinates.x -= Math.round(minimapViewport.width / 2);\r\n    globalCoordinates.y -= Math.round(minimapViewport.height / 2);\r\n\r\n    mapCoordinates = coordinateConverterCB(globalCoordinates, true);\r\n    minimapViewport.x = mapCoordinates.x;\r\n    minimapViewport.y = mapCoordinates.y;\r\n    mapCoordinates = coordinateConverterCB(globalCoordinates, false);\r\n    mapInstance.moveMap(mapCoordinates, { absolute: true, noEvent: true });\r\n\r\n    mapInstance.drawOnNextTick();\r\n  }\r\n  function setupMinimapClickEvent() {\r\n    let activeCB;\r\n    const minimapClickDetector = {\r\n      on: (cb) => {\r\n        const tap = new Hammer.Tap();\r\n        activeCB = cb;\r\n\r\n        hammer.add(tap);\r\n        hammer.on('tap', activeCB);\r\n      },\r\n      off: () => {\r\n        hammer.on('tap', activeCB);\r\n      }\r\n    };\r\n\r\n    eventListeners.setDetector('minimapClicked', minimapClickDetector.on, minimapClickDetector.off);\r\n\r\n    eventListeners.on('minimapClicked', moveViewport);\r\n  }\r\n  /*-----------------------\r\n  -------- PRIVATE --------\r\n  -----------------------*/\r\n  /**\r\n   * Sets up the minimap area. Like correct position and renderer auto resizing.\r\n   *\r\n   * @param {Integer} x\r\n   * @param {Integer} y\r\n   * @param {Integer} width\r\n   * @param {Integer} height\r\n   */\r\n  function _setMinimapArea(x, y, width, height) {\r\n    const _minimapRenderer = mapInstance.getRenderer('minimap');\r\n\r\n    minimap.position = new PIXI.Point(x, y);\r\n    _minimapRenderer.autoResize = true;\r\n    _minimapRenderer.resize(width + (paddingX * 2), height + (paddingY * 2));\r\n\r\n    mapInstance.drawOnNextTick();\r\n  }\r\n  /**\r\n   * Creates minimap layer with proper starting coordinates\r\n   *\r\n   * @return {PIXI.Container}\r\n   */\r\n  function createMinimapLayer() {\r\n    const container = new PIXI.Container();\r\n\r\n    container.x = paddingX;\r\n    container.y = paddingY;\r\n\r\n    return container;\r\n  }\r\n/*    function updateMinimapLayer() {\r\n    dynamicContainer.cacheAsBitmap = false;\r\n    dynamicContainer.cacheAsBitmap = true;\r\n  }*/\r\n})();\r\n\r\n/*-----------------------\r\n---------- API ----------\r\n-----------------------*/\r\nexport default pixelizedMinimap;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/extensions/minimaps/pixelizedMinimap.js\n **/","import { eventListeners, utils } from '../../core/index';\r\n\r\n/*---------------------\r\n-------- PUBLIC -------\r\n----------------------*/\r\n/**\r\n * Core plugin for the engine. Handles moving the map by dragging the map with mouse or touch event. Core plugins can always be\r\n * overwrote if needed.\r\n *\r\n * @class extensions.mapDrag\r\n * @requires Hammer.js - Mobile part requires\r\n * @return {Object}      init, _startDragListener\r\n */\r\nconst mapDrag = (function() {\r\n  /* Function for setting and getting the mouse offset. Private functions declared bottom */\r\n  const offsetCoords = _offsetCoords();\r\n  let eventListenerCB;\r\n\r\n  /*--------------------\r\n  ------- API ----------\r\n  --------------------*/\r\n  return {\r\n    init,\r\n    pluginName: 'mapDrag',\r\n    _startDragListener /* Function revealed for testing */\r\n  };\r\n\r\n  /*---------------------\r\n  -------- PUBLIC -------\r\n  ----------------------*/\r\n  /**\r\n   * Required init functions for the plugin\r\n   *\r\n   * @method init\r\n   * @param {Map} mapObj        The current instance of Map class\r\n   * */\r\n  function init() {\r\n    eventListenerCB = _startDragListener(this.mapInstance);\r\n\r\n    /* Singleton should have been instantiated before, we only retrieve it with 0 params */\r\n    eventListeners.on('drag', eventListenerCB);\r\n  }\r\n\r\n  /*---------------------\r\n  -------- PRIVATE ------\r\n  ----------------------*/\r\n  /**\r\n   * Mobile version. Starts the functionality, uses Hammer.js heavily for doing the drag. More simple and better than\r\n   * desktop version, since we don't need to calculate the drag with several event listener, one is enough with Hammer\r\n   *\r\n   * @private\r\n   * @static\r\n   * @method _startDragListener\r\n   * @param {Map} map           The current instance of Map class\r\n   */\r\n  function _startDragListener(map) {\r\n    let initialized = false;\r\n\r\n    return function startDrag(e) {\r\n      if (eventListeners.getActivityState('zoom')) {\r\n        return false;\r\n      }\r\n      const coords = utils.mouse.eventData.getHAMMERPointerCoords(e);\r\n\r\n      coords.x = Math.round(coords.x);\r\n      coords.y = Math.round(coords.y);\r\n\r\n      if (!initialized) {\r\n        offsetCoords.setOffset({\r\n          x: coords.x,\r\n          y: coords.y\r\n        });\r\n        initialized = true;\r\n\r\n        return;\r\n      } else if (e.isFinal === true) {\r\n        initialized = false;\r\n      }\r\n\r\n      _mapMovement(e, map, coords);\r\n    };\r\n  }\r\n\r\n  /**\r\n   * This handles offset Changes and setting data has map been moved based on it. Also\r\n   * sets basic settings like preventDefault etc.\r\n   *\r\n   * @private\r\n   * @static\r\n   * @method _mapMovement\r\n   * @param  {Event} e                        The event being dealt with\r\n   * @param  {Map} map                        The current instance of Map class\r\n   * @param  {Coordinates} coords             Current pointer coordinates\r\n   */\r\n  function _mapMovement(e, map, coords) {\r\n    const offset = offsetCoords.getOffset();\r\n    const moved = {\r\n      x: coords.x - offset.x,\r\n      y: coords.y - offset.y\r\n    };\r\n\r\n    if (moved.x > 0 || moved.y > 0 || moved.x < 0 || moved.y < 0) {\r\n      map.moveMap(moved);\r\n    }\r\n\r\n    offsetCoords.setOffset({\r\n      x: coords.x,\r\n      y: coords.y\r\n    });\r\n\r\n    e.preventDefault();\r\n  }\r\n  /**\r\n   * Function for setting and getting the mouse offset.\r\n   * Offset is the distance from the left upper coordinates (global 0, 0 coordinates) on the canvas, to the current /\r\n   * last known mouse coordinates\r\n   *\r\n   * @private\r\n   * @static\r\n   * @method _offsetCoords\r\n   */\r\n  function _offsetCoords() {\r\n    let offsetCoordsPrivate;\r\n\r\n    return {\r\n      setOffset,\r\n      getOffset\r\n    };\r\n\r\n    function setOffset(coords) {\r\n      return (offsetCoordsPrivate = coords);\r\n    }\r\n    function getOffset() {\r\n      return offsetCoordsPrivate;\r\n    }\r\n  }\r\n})();\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default mapDrag;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/extensions/move/mapDrag.js\n **/","import { utils, log, eventListeners } from '../../core/index';\r\n\r\n/*---------------------\r\n-------- PUBLIC -------\r\n----------------------*/\r\n/**\r\n * Core plugin for the engine. Handles zooming for the map. Core plugins can always be overwrote if needed. Zooming happens when the\r\n * user scrolls the mousewheel or in mobile, pinches the screen.\r\n *\r\n * @class extensions.mapZoom\r\n * @return {Object}      init\r\n */\r\nconst mapZoom = (function() {\r\n  /*---------------------\r\n  ------ VARIABLES ------\r\n  ----------------------*/\r\n  const TIMEOUT_AFTER_ZOOM = 40;\r\n  let initialized = false;\r\n  let mobileInitialized = false;\r\n  let difference = {};\r\n  let map;\r\n  /**\r\n   * Maximum and minimum amount, the player can zoom the map\r\n   *\r\n   * @attribute zoomLimit\r\n   * @type {{ farther: Number, closer: Number }}\r\n   */\r\n  const zoomLimit = {\r\n    farther: 0.4,\r\n    closer: 2.5\r\n  };\r\n  /**\r\n   * How much one step of zooming affects\r\n   *\r\n   * @attribute zoomModifier\r\n   * @type {Number}\r\n   */\r\n  let zoomModifier = 0.1;\r\n\r\n  /*---------------------\r\n  --------- API ---------\r\n  ---------------------*/\r\n  return {\r\n    init,\r\n    pluginName: 'mapZoom'\r\n  };\r\n\r\n  /*---------------------\r\n  ------- PUBLIC --------\r\n  ----------------------*/\r\n  /**\r\n   * Required init functions for the plugin\r\n   *\r\n   * @method init\r\n   * @param {Map} mapObj       instantiated Map class object\r\n   *\r\n   * @todo think through should setZoomLimits and setZoomModifier be in map.prototype?\r\n   * But zoomLimit and modifier need to be setable in creation, init or later with setters\r\n   **/\r\n  function init() {\r\n    map = this.mapInstance;\r\n    this.mapInstance.setPrototype('zoomIn', zoomIn);\r\n    this.mapInstance.setPrototype('zoomOut', zoomOut);\r\n    this.mapInstance.setPrototype('setZoomLimits', setZoomLimits);\r\n    this.mapInstance.setPrototype('setZoomModifier', setZoomModifier);\r\n\r\n    /* Singleton should have been instantiated before, we only retrieve it with 0 params */\r\n    eventListeners.on('zoom', unifiedEventCB);\r\n  }\r\n\r\n  /*----------------------------------------\r\n  ------ PROTOTYPE extensions for map ------\r\n  ----------------------------------------*/\r\n  /**\r\n   * How much one mouse wheel step zooms\r\n   *\r\n   * @method setZoomModifier\r\n   * @param {Number} amount           How much one mouse wheel step zooms. Needs to be in between 0 - 0.5\r\n   **/\r\n  function setZoomModifier(amount) {\r\n    if (! (amount > 0 || amount <= 0.5)) {\r\n      throw new Error('Wrong zoom modifier! (needs to be >0 and <=0.5, given:' + amount);\r\n    }\r\n    zoomModifier = amount;\r\n\r\n    return this;\r\n  }\r\n  /**\r\n   * How much can be zoomed in maximum and minimum\r\n   *\r\n   * @method setZoomLimits\r\n   * @param {Number} farther          (>1) How much one mouse wheel step zooms out\r\n   * @param {Number} closer           (0 - 1) How much one mouse wheel step zooms in\r\n   **/\r\n  function setZoomLimits(farther, closer) {\r\n    zoomLimit.farther = farther;\r\n    zoomLimit.closer = closer;\r\n\r\n    return this;\r\n  }\r\n  /**\r\n   * Zoom in to the map\r\n   *\r\n   * @method zoomIn\r\n   * @param {Number} amount how much map is zoomed in\r\n   * */\r\n  function zoomIn(amount) {\r\n    const presentScale = map.getZoom();\r\n    const IS_ZOOM_IN = true;\r\n\r\n    return _zoom(this, presentScale, Math.abs(amount) || zoomModifier, IS_ZOOM_IN);\r\n  }\r\n  /**\r\n   * Zoom out of the map\r\n   *\r\n   * @method zoomOut\r\n   * @param {Number} amount how much map is zoomed out\r\n   * */\r\n  function zoomOut(amount) {\r\n    const presentScale = map.getZoom();\r\n    const IS_ZOOM_IN = false;\r\n\r\n    amount = amount < 0 ? amount : -amount;\r\n\r\n    return _zoom(this, presentScale, amount || -zoomModifier, IS_ZOOM_IN);\r\n  }\r\n\r\n  /*---------------------------\r\n  ------ EVENT FUNCTIONS ------\r\n  ---------------------------*/\r\n  /**\r\n   * This starts the correct eventListener for the current environment. Mousewheel and pinch differ quite dramatically\r\n   * so we keep them as separate functions.\r\n   *\r\n   * @method unifiedEventCB\r\n   * @param  {Event} e             Event object\r\n   * @param  {Integer} delta       Hamster.js provided delta\r\n   * @param  {Integer} deltaX      Hamster.js provided delta\r\n   * @param  {Integer} deltaY      Hamster.js provided delta\r\n   */\r\n  function unifiedEventCB(e, delta, deltaX, deltaY) {\r\n    if (delta) {\r\n      handleZoomEventDesktop(e, delta, deltaX, deltaY);\r\n    } else if (e.pointers) {\r\n      if (!mobileInitialized) {\r\n        mobileInitialized = true;\r\n        setZoomModifier(zoomModifier * 0.5);\r\n      }\r\n      handleZoomEventMobile(e);\r\n    }\r\n  }\r\n  /**\r\n   * Setup desktop zoomEvent by currying. Internally: Sets up correct scale + moves map accordingly to zoom to the\r\n   * current center coordinates\r\n   *\r\n   * @method handleZoomEventDesktop\r\n   * @param  {Map} map             Map instance\r\n   */\r\n  function handleZoomEventDesktop(e, delta, deltaX, deltaY) {\r\n    const mouseWheelDelta = deltaY;\r\n    /* Scale changes when the map is drawn. We make calculations with the old scale before draw */\r\n    const oldScale = map.getZoom();\r\n\r\n    /* No nasty scrolling side-effects */\r\n    e.preventDefault();\r\n\r\n    if (mouseWheelDelta > 0) {\r\n      if (map.zoomIn()) {\r\n        map.moveMap(_calculateCenterMoveCoordinates(oldScale, true));\r\n      }\r\n    } else if (mouseWheelDelta < 0) {\r\n      if (map.zoomOut()) {\r\n        map.moveMap(_calculateCenterMoveCoordinates(oldScale));\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * handleZoomEventMobile\r\n   *\r\n   * @method handleZoomEventMobile\r\n   * @param  {Event} e\r\n   */\r\n  function handleZoomEventMobile(e) {\r\n    const pointers = e.pointers;\r\n    const oldScale = map.getZoom();\r\n    const coords = [{\r\n      x: pointers[0].pageX,\r\n      y: pointers[0].pageY\r\n    }, {\r\n      x: pointers[1].pageX,\r\n      y: pointers[1].pageY\r\n    }];\r\n    const changeX = Math.abs(coords[0].x - coords[1].x);\r\n    const changeY = Math.abs(coords[0].y - coords[1].y);\r\n\r\n    e.preventDefault();\r\n\r\n    try {\r\n      if (!initialized) {\r\n        difference = {\r\n          x: changeX,\r\n          y: changeY\r\n        };\r\n        eventListeners.setActivityState('zoom', true);\r\n        initialized = true;\r\n\r\n        return;\r\n      } else if (e.eventType === 4 || e.eventType === 8) { /* e.eventType 4 = event canceled, e.eventType 8 = event finished */\r\n        /* We don't want another event to be fired right after a pinch event. It makes the zoomign experience rather\r\n         * bad if after zoom there is immediately an unexplainable drag and the map moves a bit\r\n         * */\r\n        window.setTimeout(function () {\r\n          eventListeners.setActivityState('zoom', false);\r\n        }, TIMEOUT_AFTER_ZOOM);\r\n        initialized = false;\r\n      }\r\n\r\n      if (difference.x + difference.y < changeX + changeY) {\r\n        if (map.zoomIn()) {\r\n          map.moveMap(_calculateCenterMoveCoordinates(oldScale, true));\r\n        }\r\n      } else {\r\n        if (map.zoomOut()) {\r\n          map.moveMap(_calculateCenterMoveCoordinates(oldScale));\r\n        }\r\n      }\r\n\r\n      difference = {\r\n        x: changeX,\r\n        y: changeY\r\n      };\r\n    } catch (ev) {\r\n      log('Error! ', ev);\r\n    }\r\n  }\r\n\r\n  /*---------------------\r\n  ------- PRIVATE -------\r\n  ---------------------*/\r\n  /**\r\n   * _isOverZoomLimit\r\n   *\r\n   * @private\r\n   * @static\r\n   * @method _isOverZoomLimit\r\n   **/\r\n  function _isOverZoomLimit(amount, isZoomIn) {\r\n    if ((isZoomIn && amount > zoomLimit.closer) || (!isZoomIn && amount < zoomLimit.farther)) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * @private\r\n   * @static\r\n   * @method _calculateCenterMoveCoordinates\r\n   **/\r\n  function _calculateCenterMoveCoordinates(scale, isZoomIn) {\r\n    const windowSize = utils.resize.getWindowSize();\r\n    const halfWindowSize = {\r\n      x: (windowSize.x / 2) / scale,\r\n      y: (windowSize.y / 2) / scale\r\n    };\r\n    const realMovement = {\r\n      x: (halfWindowSize.x) * ((isZoomIn ? -zoomModifier : zoomModifier)),\r\n      y: (halfWindowSize.y) * ((isZoomIn ? -zoomModifier : zoomModifier))\r\n    };\r\n\r\n    return realMovement;\r\n  }\r\n  /**\r\n   * @private\r\n   * @static\r\n   * @method _zoom\r\n   * @todo zoom should always product integers, not floats (this seems to happen)\r\n   **/\r\n  function _zoom(map, presentScale, amount, isZoomIn) {\r\n    let newScale;\r\n\r\n    if (!_isOverZoomLimit(presentScale, isZoomIn)) {\r\n      newScale = map.setZoom(amount ? presentScale + amount : presentScale + zoomModifier);\r\n    }\r\n\r\n    return newScale;\r\n  }\r\n})();\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default mapZoom;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/extensions/zoom/mapZoom.js\n **/","import { default as UIDefault } from './default/';\r\n\r\nexport const UIs = UIDefault;\n\n\n/** WEBPACK FOOTER **\n ** ./src/UIs/index.js\n **/","import { default as UIDefault } from './default';\r\n\r\nexport default {\r\n  UIDefault\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/UIs/default/index.js\n **/","import * as PIXI from 'pixi.js';\r\nimport { log as mapLog } from '../../core/';\r\nimport * as templates from './layout/';\r\nimport { drawLine } from './utils/arrows';\r\nimport { createVisibleHexagon } from '../../extensions/hexagons/utils/createHexagon';\r\n\r\n/*---------------------\r\n------ VARIABLES ------\r\n----------------------*/\r\nconst UINAME = 'movementArrow';\r\nlet styleSheetElement;\r\nlet cssClasses;\r\nconst elementList = {};\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nclass UIDefault {\r\n  /**\r\n   * The simplest default UI implementation. Implemented UI functionalities for: showSelections, highlightSelectedObject\r\n   *\r\n   * @namespace flatworld.UIs\r\n   * @class default\r\n   * @constructor\r\n   * @requires Handlebars\r\n   * @requires hexagon extension\r\n   * @param  {HTMLElement} modal      The modal used in this UI Theme\r\n   * @param  {Flatworld} FTW          Instance of flatworld class\r\n   * @param  {Object} options         optional options\r\n   * @param  {Object} options.styles  styles for the UI\r\n   */\r\n  constructor(modal, FTW, { radius = 71, styles = '#F0F0F0', elements } = {}) {\r\n    this.RADIUS = radius;\r\n    cssClasses = elements;\r\n    styleSheetElement = this.addStyleElement();\r\n    /* For testing. This is deeefinitely supposed to not be here, but it has stayed there for testing. */\r\n    const createdCSS = `\r\n      ${cssClasses.select} {\r\n        z-index: 9999;\r\n        opacity: 0.9;\r\n        position: fixed;\r\n        left: 0px;\r\n        bottom: 0px;\r\n        background-color: brown;\r\n        border: 1px solid rgb(255, 186, 148);;\r\n        border-bottom: 0px;\r\n        padding:15px;\r\n        margin-left:10px;\r\n      }`;\r\n    this.addCSSRulesToScriptTag(styleSheetElement, createdCSS);\r\n\r\n    // Add a media (and/or media query) here if you'd like!\r\n    // style.setAttribute('media', 'screen')\r\n    // style.setAttribute('media', 'only screen and (max-width : 1024px)')\r\n\r\n    this.FTW = FTW;\r\n    this.modal = modal;\r\n    this.styles = styles;\r\n  }\r\n  /**\r\n   * Required by the map.UI API\r\n   *\r\n   * @method showSelections\r\n   * @param  {Object} objects     Objects that have been selected. See core.UI for more information\r\n   * @param {Object} getDatas       See explanation in core.UI\r\n   */\r\n  showSelections(objects, getDatas/*, UIThemeOptions*/) {\r\n    let cb;\r\n\r\n    /* We add the objects to be highlighted to the correct UI layer */\r\n    // objectsToUI(UILayer, objects);\r\n\r\n    if (objects && objects.length > 1) {\r\n      cb = () => {\r\n        this.showModal(objects, getDatas);\r\n      };\r\n    } else if (objects && objects.length === 1) {\r\n      cb = () => {\r\n        this.highlightSelectedObject(objects[0]);\r\n        this.showModal(objects[0], getDatas);\r\n      };\r\n    } else {\r\n      cb = () => {\r\n        this.unSelect();\r\n        mapLog.debug('Error occured selecting the objects on this coordinates! Nothing found');\r\n      };\r\n    }\r\n\r\n    _getElement('select').style.display = 'none';\r\n    cb();\r\n  }\r\n  /**\r\n   * Required by the map.UI API\r\n   *\r\n   * @method highlightSelectedObject\r\n   * @param  {Object} object        Object that has been selected. See core.UI for more information\r\n   * @param {Object} options        Extra options. Like dropping a shadow etc.\r\n   */\r\n  highlightSelectedObject(object, options = { shadow: { color: '0x0000', distance: 5, alpha: 0.55, angle: 45, blur: 5 } }) {\r\n    const { shadow } = options;\r\n    const highlightableObject = this._highlightSelectedObject(object, this.FTW.getRenderer());\r\n\r\n    highlightableObject.dropShadow({\r\n      color: shadow.color,\r\n      distance: shadow.distance,\r\n      alpha: shadow.alpha,\r\n      angle: shadow.angle,\r\n      blur: shadow.blur\r\n    });\r\n\r\n    return highlightableObject;\r\n  }\r\n  /**\r\n   * @method showUnitMovement\r\n   * @param { Object } object           The object that is being moved\r\n   * @param {PIXI.Point | Array} to     Coordinates as an object or array of waypoints / \r\n   * coordinates where the unit is being moved to.\r\n   */\r\n  showUnitMovement(path) {\r\n    if (!Array.isArray(path)) {\r\n      throw new Error('showUnitMovement demands path array!');\r\n    }\r\n\r\n    const arrows = [];\r\n    let prev;\r\n\r\n    this.FTW.removeUIObject(this.FTW.layerTypes.movableType.id, UINAME);\r\n\r\n    path.forEach((coord, index) => {\r\n      if (index === 0) {\r\n        prev = coord;\r\n        return;          \r\n      }\r\n\r\n      arrows.push(this._createArrow(prev, coord));\r\n\r\n      prev = coord;\r\n    });\r\n    this.FTW.addUIObject(this.FTW.layerTypes.movableType.id, arrows, UINAME);\r\n  }\r\n  /**\r\n   * Simply clear all selected objects and close object selection menus etc.\r\n   *\r\n   * @method unSelect\r\n   */\r\n  unSelect() {\r\n    this.FTW.removeUIObject(this.FTW.layerTypes.movableType.id);\r\n    this.FTW.drawOnNextTick();\r\n  }\r\n\r\n  /*----------------------\r\n  ------- PRIVATE --------\r\n  ----------------------*/\r\n  /**\r\n   * @private\r\n   * @static\r\n   * @method _highlightSelectedObject\r\n   * @param  {Object} object\r\n   * @param  {MapLayer} movableLayer\r\n   * @param  {PIXI.Renderer} renderer\r\n   */\r\n  _highlightSelectedObject(object, renderer) {\r\n    const clonedObject = object.clone(renderer, { anchor: true, scale: true });\r\n\r\n    let coord = object.toGlobal(new PIXI.Point(0, 0));\r\n    coord = this.FTW.getMapCoordinates(coord);\r\n\r\n    this.createHighlight(clonedObject, { coords: coord });\r\n\r\n    return clonedObject;\r\n  }\r\n  _createArrow(localFrom, localTo) {\r\n    return drawLine(new PIXI.Graphics(), localFrom, localTo);\r\n  }\r\n  /**\r\n   * @private\r\n   * @static\r\n   * @method createHighlight\r\n   */\r\n  createHighlight(object, options = { coords: new PIXI.Point(0, 0) }) {\r\n    const UI_CONTAINER_NAME = 'unit highlight';\r\n    const container = new this.FTW.createSpecialLayer('UILayer', { toLayer: this.FTW.layerTypes.movableType.id });\r\n    const objCoords = {\r\n      x: Number(object.x),\r\n      y: Number(object.y)\r\n    };\r\n    const highlighterObject = createVisibleHexagon(this.RADIUS, { color: '#F0F0F0' });\r\n    highlighterObject.position.set(objCoords.x, objCoords.y);\r\n\r\n    highlighterObject.alpha = 0.5;\r\n\r\n    /* We add the children first to subcontainer, since it's much easier to handle the x and y in it, rather than\r\n     * handle graphics x and y */\r\n    container.addChild(highlighterObject);\r\n    container.addChild(object);\r\n\r\n    container.position = options.coords;\r\n\r\n    this.FTW.removeUIObject(this.FTW.layerTypes.movableType.id);\r\n    this.FTW.addUIObject(this.FTW.layerTypes.movableType.id, container, UI_CONTAINER_NAME);\r\n  }\r\n  /**\r\n   * @method addCSSRulesToScriptTag\r\n   *\r\n   * @param {Object} sheet\r\n   * @param {Object} rules\r\n   */\r\n  addCSSRulesToScriptTag(sheet, rules) {\r\n    sheet.insertRule(rules, 0);\r\n  }\r\n  /**\r\n   * @method addStyleElement\r\n   */\r\n  addStyleElement() {\r\n    const _styleElement = document.createElement('style');\r\n    // WebKit hack :(\r\n    _styleElement.appendChild(document.createTextNode(''));\r\n    document.head.appendChild(_styleElement);\r\n\r\n    return _styleElement.sheet;\r\n  }\r\n  /**\r\n   * @method showModal\r\n   *\r\n   * @param {HTMLElement} modalElem\r\n   * @param {Object} cssClasses\r\n   * @todo make sure / check, that modalElem.classList.add gets added only once\r\n   */\r\n  showModal(data, getDatas, type = 'select') {\r\n    //const objectDatas = getDatas.allData(object);\r\n    if(Array.isArray(data)) {\r\n      data = data.map(o => getDatas.allData(o));\r\n      this.modal.innerHTML = templates.multiSelection({\r\n        title: 'Objects',\r\n        data\r\n      });\r\n    } else {\r\n      this.modal.innerHTML = templates.singleSelection({\r\n        title: 'Selected',\r\n        object: {\r\n          name: getDatas.allData(data).name\r\n        }\r\n      });            \r\n    }\r\n\r\n    _getElement('select').style.display = 'block';\r\n\r\n    this.modal.classList.add(cssClasses[type]);\r\n  }\r\n}\r\n\r\n/*----------------------\r\n------- PRIVATE --------\r\n----------------------*/\r\n/**\r\n * @private\r\n * @static\r\n * @method _getElement\r\n * @param  {[type]} which [description]\r\n * @return {[type]}       [description]\r\n */\r\nfunction _getElement(which) {\r\n  if (!elementList[which]) {\r\n    const element = document.querySelector(cssClasses[which]);\r\n    elementList[which] = element;\r\n  }\r\n\r\n  return elementList[which];\r\n}\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport default UIDefault;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UIs/default/default.js\n **/","import { default as multiSelection } from './multiSelection.handlebars';\r\nimport { default as singleSelection } from './singleSelection.handlebars';\r\n\r\nexport {\r\n  multiSelection,\r\n  singleSelection\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/UIs/default/layout/index.js\n **/","var Handlebars = require(\"C:\\\\projects\\\\FlaTWorld\\\\node_modules\\\\handlebars\\\\runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"  <li>\\r\\n    \"\n    + container.escapeExpression(container.lambda((depth0 != null ? depth0.name : depth0), depth0))\n    + \"\\r\\n  </li>\\r\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : {};\n\n  return \"<span style='font-size:200%;display:block;margin-bottom:20px;'>\\r\\n  \"\n    + container.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n</span>\\r\\n<ul>\\r\\n\"\n    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.objects : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"</ul>\";\n},\"useData\":true});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/UIs/default/layout/multiSelection.handlebars\n ** module id = 58\n ** module chunks = 0\n **/","// Create a simple path alias to allow browserify to resolve\n// the runtime on a supported path.\nmodule.exports = require('./dist/cjs/handlebars.runtime')['default'];\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/handlebars/runtime.js\n ** module id = 59\n ** module chunks = 0\n **/","'use strict';\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nvar _handlebarsBase = require('./handlebars/base');\n\nvar base = _interopRequireWildcard(_handlebarsBase);\n\n// Each of these augment the Handlebars object. No need to setup here.\n// (This is done to easily share code between commonjs and browse envs)\n\nvar _handlebarsSafeString = require('./handlebars/safe-string');\n\nvar _handlebarsSafeString2 = _interopRequireDefault(_handlebarsSafeString);\n\nvar _handlebarsException = require('./handlebars/exception');\n\nvar _handlebarsException2 = _interopRequireDefault(_handlebarsException);\n\nvar _handlebarsUtils = require('./handlebars/utils');\n\nvar Utils = _interopRequireWildcard(_handlebarsUtils);\n\nvar _handlebarsRuntime = require('./handlebars/runtime');\n\nvar runtime = _interopRequireWildcard(_handlebarsRuntime);\n\nvar _handlebarsNoConflict = require('./handlebars/no-conflict');\n\nvar _handlebarsNoConflict2 = _interopRequireDefault(_handlebarsNoConflict);\n\n// For compatibility and usage outside of module systems, make the Handlebars object a namespace\nfunction create() {\n  var hb = new base.HandlebarsEnvironment();\n\n  Utils.extend(hb, base);\n  hb.SafeString = _handlebarsSafeString2['default'];\n  hb.Exception = _handlebarsException2['default'];\n  hb.Utils = Utils;\n  hb.escapeExpression = Utils.escapeExpression;\n\n  hb.VM = runtime;\n  hb.template = function (spec) {\n    return runtime.template(spec, hb);\n  };\n\n  return hb;\n}\n\nvar inst = create();\ninst.create = create;\n\n_handlebarsNoConflict2['default'](inst);\n\ninst['default'] = inst;\n\nexports['default'] = inst;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9oYW5kbGViYXJzLnJ1bnRpbWUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OEJBQXNCLG1CQUFtQjs7SUFBN0IsSUFBSTs7Ozs7b0NBSU8sMEJBQTBCOzs7O21DQUMzQix3QkFBd0I7Ozs7K0JBQ3ZCLG9CQUFvQjs7SUFBL0IsS0FBSzs7aUNBQ1Esc0JBQXNCOztJQUFuQyxPQUFPOztvQ0FFSSwwQkFBMEI7Ozs7O0FBR2pELFNBQVMsTUFBTSxHQUFHO0FBQ2hCLE1BQUksRUFBRSxHQUFHLElBQUksSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7O0FBRTFDLE9BQUssQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3ZCLElBQUUsQ0FBQyxVQUFVLG9DQUFhLENBQUM7QUFDM0IsSUFBRSxDQUFDLFNBQVMsbUNBQVksQ0FBQztBQUN6QixJQUFFLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztBQUNqQixJQUFFLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDLGdCQUFnQixDQUFDOztBQUU3QyxJQUFFLENBQUMsRUFBRSxHQUFHLE9BQU8sQ0FBQztBQUNoQixJQUFFLENBQUMsUUFBUSxHQUFHLFVBQVMsSUFBSSxFQUFFO0FBQzNCLFdBQU8sT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7R0FDbkMsQ0FBQzs7QUFFRixTQUFPLEVBQUUsQ0FBQztDQUNYOztBQUVELElBQUksSUFBSSxHQUFHLE1BQU0sRUFBRSxDQUFDO0FBQ3BCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDOztBQUVyQixrQ0FBVyxJQUFJLENBQUMsQ0FBQzs7QUFFakIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQzs7cUJBRVIsSUFBSSIsImZpbGUiOiJoYW5kbGViYXJzLnJ1bnRpbWUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBiYXNlIGZyb20gJy4vaGFuZGxlYmFycy9iYXNlJztcblxuLy8gRWFjaCBvZiB0aGVzZSBhdWdtZW50IHRoZSBIYW5kbGViYXJzIG9iamVjdC4gTm8gbmVlZCB0byBzZXR1cCBoZXJlLlxuLy8gKFRoaXMgaXMgZG9uZSB0byBlYXNpbHkgc2hhcmUgY29kZSBiZXR3ZWVuIGNvbW1vbmpzIGFuZCBicm93c2UgZW52cylcbmltcG9ydCBTYWZlU3RyaW5nIGZyb20gJy4vaGFuZGxlYmFycy9zYWZlLXN0cmluZyc7XG5pbXBvcnQgRXhjZXB0aW9uIGZyb20gJy4vaGFuZGxlYmFycy9leGNlcHRpb24nO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAnLi9oYW5kbGViYXJzL3V0aWxzJztcbmltcG9ydCAqIGFzIHJ1bnRpbWUgZnJvbSAnLi9oYW5kbGViYXJzL3J1bnRpbWUnO1xuXG5pbXBvcnQgbm9Db25mbGljdCBmcm9tICcuL2hhbmRsZWJhcnMvbm8tY29uZmxpY3QnO1xuXG4vLyBGb3IgY29tcGF0aWJpbGl0eSBhbmQgdXNhZ2Ugb3V0c2lkZSBvZiBtb2R1bGUgc3lzdGVtcywgbWFrZSB0aGUgSGFuZGxlYmFycyBvYmplY3QgYSBuYW1lc3BhY2VcbmZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgbGV0IGhiID0gbmV3IGJhc2UuSGFuZGxlYmFyc0Vudmlyb25tZW50KCk7XG5cbiAgVXRpbHMuZXh0ZW5kKGhiLCBiYXNlKTtcbiAgaGIuU2FmZVN0cmluZyA9IFNhZmVTdHJpbmc7XG4gIGhiLkV4Y2VwdGlvbiA9IEV4Y2VwdGlvbjtcbiAgaGIuVXRpbHMgPSBVdGlscztcbiAgaGIuZXNjYXBlRXhwcmVzc2lvbiA9IFV0aWxzLmVzY2FwZUV4cHJlc3Npb247XG5cbiAgaGIuVk0gPSBydW50aW1lO1xuICBoYi50ZW1wbGF0ZSA9IGZ1bmN0aW9uKHNwZWMpIHtcbiAgICByZXR1cm4gcnVudGltZS50ZW1wbGF0ZShzcGVjLCBoYik7XG4gIH07XG5cbiAgcmV0dXJuIGhiO1xufVxuXG5sZXQgaW5zdCA9IGNyZWF0ZSgpO1xuaW5zdC5jcmVhdGUgPSBjcmVhdGU7XG5cbm5vQ29uZmxpY3QoaW5zdCk7XG5cbmluc3RbJ2RlZmF1bHQnXSA9IGluc3Q7XG5cbmV4cG9ydCBkZWZhdWx0IGluc3Q7XG4iXX0=\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/handlebars/dist/cjs/handlebars.runtime.js\n ** module id = 60\n ** module chunks = 0\n **/","'use strict';\n\nexports.__esModule = true;\nexports.HandlebarsEnvironment = HandlebarsEnvironment;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _utils = require('./utils');\n\nvar _exception = require('./exception');\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nvar _helpers = require('./helpers');\n\nvar _decorators = require('./decorators');\n\nvar _logger = require('./logger');\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar VERSION = '4.0.5';\nexports.VERSION = VERSION;\nvar COMPILER_REVISION = 7;\n\nexports.COMPILER_REVISION = COMPILER_REVISION;\nvar REVISION_CHANGES = {\n  1: '<= 1.0.rc.2', // 1.0.rc.2 is actually rev2 but doesn't report it\n  2: '== 1.0.0-rc.3',\n  3: '== 1.0.0-rc.4',\n  4: '== 1.x.x',\n  5: '== 2.0.0-alpha.x',\n  6: '>= 2.0.0-beta.1',\n  7: '>= 4.0.0'\n};\n\nexports.REVISION_CHANGES = REVISION_CHANGES;\nvar objectType = '[object Object]';\n\nfunction HandlebarsEnvironment(helpers, partials, decorators) {\n  this.helpers = helpers || {};\n  this.partials = partials || {};\n  this.decorators = decorators || {};\n\n  _helpers.registerDefaultHelpers(this);\n  _decorators.registerDefaultDecorators(this);\n}\n\nHandlebarsEnvironment.prototype = {\n  constructor: HandlebarsEnvironment,\n\n  logger: _logger2['default'],\n  log: _logger2['default'].log,\n\n  registerHelper: function registerHelper(name, fn) {\n    if (_utils.toString.call(name) === objectType) {\n      if (fn) {\n        throw new _exception2['default']('Arg not supported with multiple helpers');\n      }\n      _utils.extend(this.helpers, name);\n    } else {\n      this.helpers[name] = fn;\n    }\n  },\n  unregisterHelper: function unregisterHelper(name) {\n    delete this.helpers[name];\n  },\n\n  registerPartial: function registerPartial(name, partial) {\n    if (_utils.toString.call(name) === objectType) {\n      _utils.extend(this.partials, name);\n    } else {\n      if (typeof partial === 'undefined') {\n        throw new _exception2['default']('Attempting to register a partial called \"' + name + '\" as undefined');\n      }\n      this.partials[name] = partial;\n    }\n  },\n  unregisterPartial: function unregisterPartial(name) {\n    delete this.partials[name];\n  },\n\n  registerDecorator: function registerDecorator(name, fn) {\n    if (_utils.toString.call(name) === objectType) {\n      if (fn) {\n        throw new _exception2['default']('Arg not supported with multiple decorators');\n      }\n      _utils.extend(this.decorators, name);\n    } else {\n      this.decorators[name] = fn;\n    }\n  },\n  unregisterDecorator: function unregisterDecorator(name) {\n    delete this.decorators[name];\n  }\n};\n\nvar log = _logger2['default'].log;\n\nexports.log = log;\nexports.createFrame = _utils.createFrame;\nexports.logger = _logger2['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2Jhc2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7cUJBQTRDLFNBQVM7O3lCQUMvQixhQUFhOzs7O3VCQUNFLFdBQVc7OzBCQUNSLGNBQWM7O3NCQUNuQyxVQUFVOzs7O0FBRXRCLElBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQzs7QUFDeEIsSUFBTSxpQkFBaUIsR0FBRyxDQUFDLENBQUM7OztBQUU1QixJQUFNLGdCQUFnQixHQUFHO0FBQzlCLEdBQUMsRUFBRSxhQUFhO0FBQ2hCLEdBQUMsRUFBRSxlQUFlO0FBQ2xCLEdBQUMsRUFBRSxlQUFlO0FBQ2xCLEdBQUMsRUFBRSxVQUFVO0FBQ2IsR0FBQyxFQUFFLGtCQUFrQjtBQUNyQixHQUFDLEVBQUUsaUJBQWlCO0FBQ3BCLEdBQUMsRUFBRSxVQUFVO0NBQ2QsQ0FBQzs7O0FBRUYsSUFBTSxVQUFVLEdBQUcsaUJBQWlCLENBQUM7O0FBRTlCLFNBQVMscUJBQXFCLENBQUMsT0FBTyxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUU7QUFDbkUsTUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLElBQUksRUFBRSxDQUFDO0FBQzdCLE1BQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxJQUFJLEVBQUUsQ0FBQztBQUMvQixNQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsSUFBSSxFQUFFLENBQUM7O0FBRW5DLGtDQUF1QixJQUFJLENBQUMsQ0FBQztBQUM3Qix3Q0FBMEIsSUFBSSxDQUFDLENBQUM7Q0FDakM7O0FBRUQscUJBQXFCLENBQUMsU0FBUyxHQUFHO0FBQ2hDLGFBQVcsRUFBRSxxQkFBcUI7O0FBRWxDLFFBQU0scUJBQVE7QUFDZCxLQUFHLEVBQUUsb0JBQU8sR0FBRzs7QUFFZixnQkFBYyxFQUFFLHdCQUFTLElBQUksRUFBRSxFQUFFLEVBQUU7QUFDakMsUUFBSSxnQkFBUyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssVUFBVSxFQUFFO0FBQ3RDLFVBQUksRUFBRSxFQUFFO0FBQUUsY0FBTSwyQkFBYyx5Q0FBeUMsQ0FBQyxDQUFDO09BQUU7QUFDM0Usb0JBQU8sSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztLQUM1QixNQUFNO0FBQ0wsVUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7S0FDekI7R0FDRjtBQUNELGtCQUFnQixFQUFFLDBCQUFTLElBQUksRUFBRTtBQUMvQixXQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7R0FDM0I7O0FBRUQsaUJBQWUsRUFBRSx5QkFBUyxJQUFJLEVBQUUsT0FBTyxFQUFFO0FBQ3ZDLFFBQUksZ0JBQVMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLFVBQVUsRUFBRTtBQUN0QyxvQkFBTyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQzdCLE1BQU07QUFDTCxVQUFJLE9BQU8sT0FBTyxLQUFLLFdBQVcsRUFBRTtBQUNsQyxjQUFNLHlFQUEwRCxJQUFJLG9CQUFpQixDQUFDO09BQ3ZGO0FBQ0QsVUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUM7S0FDL0I7R0FDRjtBQUNELG1CQUFpQixFQUFFLDJCQUFTLElBQUksRUFBRTtBQUNoQyxXQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7R0FDNUI7O0FBRUQsbUJBQWlCLEVBQUUsMkJBQVMsSUFBSSxFQUFFLEVBQUUsRUFBRTtBQUNwQyxRQUFJLGdCQUFTLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxVQUFVLEVBQUU7QUFDdEMsVUFBSSxFQUFFLEVBQUU7QUFBRSxjQUFNLDJCQUFjLDRDQUE0QyxDQUFDLENBQUM7T0FBRTtBQUM5RSxvQkFBTyxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQy9CLE1BQU07QUFDTCxVQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztLQUM1QjtHQUNGO0FBQ0QscUJBQW1CLEVBQUUsNkJBQVMsSUFBSSxFQUFFO0FBQ2xDLFdBQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztHQUM5QjtDQUNGLENBQUM7O0FBRUssSUFBSSxHQUFHLEdBQUcsb0JBQU8sR0FBRyxDQUFDOzs7UUFFcEIsV0FBVztRQUFFLE1BQU0iLCJmaWxlIjoiYmFzZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Y3JlYXRlRnJhbWUsIGV4dGVuZCwgdG9TdHJpbmd9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IEV4Y2VwdGlvbiBmcm9tICcuL2V4Y2VwdGlvbic7XG5pbXBvcnQge3JlZ2lzdGVyRGVmYXVsdEhlbHBlcnN9IGZyb20gJy4vaGVscGVycyc7XG5pbXBvcnQge3JlZ2lzdGVyRGVmYXVsdERlY29yYXRvcnN9IGZyb20gJy4vZGVjb3JhdG9ycyc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJy4vbG9nZ2VyJztcblxuZXhwb3J0IGNvbnN0IFZFUlNJT04gPSAnNC4wLjUnO1xuZXhwb3J0IGNvbnN0IENPTVBJTEVSX1JFVklTSU9OID0gNztcblxuZXhwb3J0IGNvbnN0IFJFVklTSU9OX0NIQU5HRVMgPSB7XG4gIDE6ICc8PSAxLjAucmMuMicsIC8vIDEuMC5yYy4yIGlzIGFjdHVhbGx5IHJldjIgYnV0IGRvZXNuJ3QgcmVwb3J0IGl0XG4gIDI6ICc9PSAxLjAuMC1yYy4zJyxcbiAgMzogJz09IDEuMC4wLXJjLjQnLFxuICA0OiAnPT0gMS54LngnLFxuICA1OiAnPT0gMi4wLjAtYWxwaGEueCcsXG4gIDY6ICc+PSAyLjAuMC1iZXRhLjEnLFxuICA3OiAnPj0gNC4wLjAnXG59O1xuXG5jb25zdCBvYmplY3RUeXBlID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBIYW5kbGViYXJzRW52aXJvbm1lbnQoaGVscGVycywgcGFydGlhbHMsIGRlY29yYXRvcnMpIHtcbiAgdGhpcy5oZWxwZXJzID0gaGVscGVycyB8fCB7fTtcbiAgdGhpcy5wYXJ0aWFscyA9IHBhcnRpYWxzIHx8IHt9O1xuICB0aGlzLmRlY29yYXRvcnMgPSBkZWNvcmF0b3JzIHx8IHt9O1xuXG4gIHJlZ2lzdGVyRGVmYXVsdEhlbHBlcnModGhpcyk7XG4gIHJlZ2lzdGVyRGVmYXVsdERlY29yYXRvcnModGhpcyk7XG59XG5cbkhhbmRsZWJhcnNFbnZpcm9ubWVudC5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBIYW5kbGViYXJzRW52aXJvbm1lbnQsXG5cbiAgbG9nZ2VyOiBsb2dnZXIsXG4gIGxvZzogbG9nZ2VyLmxvZyxcblxuICByZWdpc3RlckhlbHBlcjogZnVuY3Rpb24obmFtZSwgZm4pIHtcbiAgICBpZiAodG9TdHJpbmcuY2FsbChuYW1lKSA9PT0gb2JqZWN0VHlwZSkge1xuICAgICAgaWYgKGZuKSB7IHRocm93IG5ldyBFeGNlcHRpb24oJ0FyZyBub3Qgc3VwcG9ydGVkIHdpdGggbXVsdGlwbGUgaGVscGVycycpOyB9XG4gICAgICBleHRlbmQodGhpcy5oZWxwZXJzLCBuYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oZWxwZXJzW25hbWVdID0gZm47XG4gICAgfVxuICB9LFxuICB1bnJlZ2lzdGVySGVscGVyOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGVsZXRlIHRoaXMuaGVscGVyc1tuYW1lXTtcbiAgfSxcblxuICByZWdpc3RlclBhcnRpYWw6IGZ1bmN0aW9uKG5hbWUsIHBhcnRpYWwpIHtcbiAgICBpZiAodG9TdHJpbmcuY2FsbChuYW1lKSA9PT0gb2JqZWN0VHlwZSkge1xuICAgICAgZXh0ZW5kKHRoaXMucGFydGlhbHMsIG5hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIHBhcnRpYWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oYEF0dGVtcHRpbmcgdG8gcmVnaXN0ZXIgYSBwYXJ0aWFsIGNhbGxlZCBcIiR7bmFtZX1cIiBhcyB1bmRlZmluZWRgKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucGFydGlhbHNbbmFtZV0gPSBwYXJ0aWFsO1xuICAgIH1cbiAgfSxcbiAgdW5yZWdpc3RlclBhcnRpYWw6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkZWxldGUgdGhpcy5wYXJ0aWFsc1tuYW1lXTtcbiAgfSxcblxuICByZWdpc3RlckRlY29yYXRvcjogZnVuY3Rpb24obmFtZSwgZm4pIHtcbiAgICBpZiAodG9TdHJpbmcuY2FsbChuYW1lKSA9PT0gb2JqZWN0VHlwZSkge1xuICAgICAgaWYgKGZuKSB7IHRocm93IG5ldyBFeGNlcHRpb24oJ0FyZyBub3Qgc3VwcG9ydGVkIHdpdGggbXVsdGlwbGUgZGVjb3JhdG9ycycpOyB9XG4gICAgICBleHRlbmQodGhpcy5kZWNvcmF0b3JzLCBuYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kZWNvcmF0b3JzW25hbWVdID0gZm47XG4gICAgfVxuICB9LFxuICB1bnJlZ2lzdGVyRGVjb3JhdG9yOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGVsZXRlIHRoaXMuZGVjb3JhdG9yc1tuYW1lXTtcbiAgfVxufTtcblxuZXhwb3J0IGxldCBsb2cgPSBsb2dnZXIubG9nO1xuXG5leHBvcnQge2NyZWF0ZUZyYW1lLCBsb2dnZXJ9O1xuIl19\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/handlebars/dist/cjs/handlebars/base.js\n ** module id = 61\n ** module chunks = 0\n **/","'use strict';\n\nexports.__esModule = true;\nexports.extend = extend;\nexports.indexOf = indexOf;\nexports.escapeExpression = escapeExpression;\nexports.isEmpty = isEmpty;\nexports.createFrame = createFrame;\nexports.blockParams = blockParams;\nexports.appendContextPath = appendContextPath;\nvar escape = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;',\n  '=': '&#x3D;'\n};\n\nvar badChars = /[&<>\"'`=]/g,\n    possible = /[&<>\"'`=]/;\n\nfunction escapeChar(chr) {\n  return escape[chr];\n}\n\nfunction extend(obj /* , ...source */) {\n  for (var i = 1; i < arguments.length; i++) {\n    for (var key in arguments[i]) {\n      if (Object.prototype.hasOwnProperty.call(arguments[i], key)) {\n        obj[key] = arguments[i][key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nvar toString = Object.prototype.toString;\n\nexports.toString = toString;\n// Sourced from lodash\n// https://github.com/bestiejs/lodash/blob/master/LICENSE.txt\n/* eslint-disable func-style */\nvar isFunction = function isFunction(value) {\n  return typeof value === 'function';\n};\n// fallback for older versions of Chrome and Safari\n/* istanbul ignore next */\nif (isFunction(/x/)) {\n  exports.isFunction = isFunction = function (value) {\n    return typeof value === 'function' && toString.call(value) === '[object Function]';\n  };\n}\nexports.isFunction = isFunction;\n\n/* eslint-enable func-style */\n\n/* istanbul ignore next */\nvar isArray = Array.isArray || function (value) {\n  return value && typeof value === 'object' ? toString.call(value) === '[object Array]' : false;\n};\n\nexports.isArray = isArray;\n// Older IE versions do not directly support indexOf so we must implement our own, sadly.\n\nfunction indexOf(array, value) {\n  for (var i = 0, len = array.length; i < len; i++) {\n    if (array[i] === value) {\n      return i;\n    }\n  }\n  return -1;\n}\n\nfunction escapeExpression(string) {\n  if (typeof string !== 'string') {\n    // don't escape SafeStrings, since they're already safe\n    if (string && string.toHTML) {\n      return string.toHTML();\n    } else if (string == null) {\n      return '';\n    } else if (!string) {\n      return string + '';\n    }\n\n    // Force a string conversion as this will be done by the append regardless and\n    // the regex test will do this transparently behind the scenes, causing issues if\n    // an object's to string has escaped characters in it.\n    string = '' + string;\n  }\n\n  if (!possible.test(string)) {\n    return string;\n  }\n  return string.replace(badChars, escapeChar);\n}\n\nfunction isEmpty(value) {\n  if (!value && value !== 0) {\n    return true;\n  } else if (isArray(value) && value.length === 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction createFrame(object) {\n  var frame = extend({}, object);\n  frame._parent = object;\n  return frame;\n}\n\nfunction blockParams(params, ids) {\n  params.path = ids;\n  return params;\n}\n\nfunction appendContextPath(contextPath, id) {\n  return (contextPath ? contextPath + '.' : '') + id;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL3V0aWxzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxJQUFNLE1BQU0sR0FBRztBQUNiLEtBQUcsRUFBRSxPQUFPO0FBQ1osS0FBRyxFQUFFLE1BQU07QUFDWCxLQUFHLEVBQUUsTUFBTTtBQUNYLEtBQUcsRUFBRSxRQUFRO0FBQ2IsS0FBRyxFQUFFLFFBQVE7QUFDYixLQUFHLEVBQUUsUUFBUTtBQUNiLEtBQUcsRUFBRSxRQUFRO0NBQ2QsQ0FBQzs7QUFFRixJQUFNLFFBQVEsR0FBRyxZQUFZO0lBQ3ZCLFFBQVEsR0FBRyxXQUFXLENBQUM7O0FBRTdCLFNBQVMsVUFBVSxDQUFDLEdBQUcsRUFBRTtBQUN2QixTQUFPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztDQUNwQjs7QUFFTSxTQUFTLE1BQU0sQ0FBQyxHQUFHLG9CQUFtQjtBQUMzQyxPQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUN6QyxTQUFLLElBQUksR0FBRyxJQUFJLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRTtBQUM1QixVQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUU7QUFDM0QsV0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztPQUM5QjtLQUNGO0dBQ0Y7O0FBRUQsU0FBTyxHQUFHLENBQUM7Q0FDWjs7QUFFTSxJQUFJLFFBQVEsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQzs7Ozs7O0FBS2hELElBQUksVUFBVSxHQUFHLG9CQUFTLEtBQUssRUFBRTtBQUMvQixTQUFPLE9BQU8sS0FBSyxLQUFLLFVBQVUsQ0FBQztDQUNwQyxDQUFDOzs7QUFHRixJQUFJLFVBQVUsQ0FBQyxHQUFHLENBQUMsRUFBRTtBQUNuQixVQUlNLFVBQVUsR0FKaEIsVUFBVSxHQUFHLFVBQVMsS0FBSyxFQUFFO0FBQzNCLFdBQU8sT0FBTyxLQUFLLEtBQUssVUFBVSxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssbUJBQW1CLENBQUM7R0FDcEYsQ0FBQztDQUNIO1FBQ08sVUFBVSxHQUFWLFVBQVU7Ozs7O0FBSVgsSUFBTSxPQUFPLEdBQUcsS0FBSyxDQUFDLE9BQU8sSUFBSSxVQUFTLEtBQUssRUFBRTtBQUN0RCxTQUFPLEFBQUMsS0FBSyxJQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsR0FBSSxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLGdCQUFnQixHQUFHLEtBQUssQ0FBQztDQUNqRyxDQUFDOzs7OztBQUdLLFNBQVMsT0FBTyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDcEMsT0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUNoRCxRQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLEVBQUU7QUFDdEIsYUFBTyxDQUFDLENBQUM7S0FDVjtHQUNGO0FBQ0QsU0FBTyxDQUFDLENBQUMsQ0FBQztDQUNYOztBQUdNLFNBQVMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFO0FBQ3ZDLE1BQUksT0FBTyxNQUFNLEtBQUssUUFBUSxFQUFFOztBQUU5QixRQUFJLE1BQU0sSUFBSSxNQUFNLENBQUMsTUFBTSxFQUFFO0FBQzNCLGFBQU8sTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO0tBQ3hCLE1BQU0sSUFBSSxNQUFNLElBQUksSUFBSSxFQUFFO0FBQ3pCLGFBQU8sRUFBRSxDQUFDO0tBQ1gsTUFBTSxJQUFJLENBQUMsTUFBTSxFQUFFO0FBQ2xCLGFBQU8sTUFBTSxHQUFHLEVBQUUsQ0FBQztLQUNwQjs7Ozs7QUFLRCxVQUFNLEdBQUcsRUFBRSxHQUFHLE1BQU0sQ0FBQztHQUN0Qjs7QUFFRCxNQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRTtBQUFFLFdBQU8sTUFBTSxDQUFDO0dBQUU7QUFDOUMsU0FBTyxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxVQUFVLENBQUMsQ0FBQztDQUM3Qzs7QUFFTSxTQUFTLE9BQU8sQ0FBQyxLQUFLLEVBQUU7QUFDN0IsTUFBSSxDQUFDLEtBQUssSUFBSSxLQUFLLEtBQUssQ0FBQyxFQUFFO0FBQ3pCLFdBQU8sSUFBSSxDQUFDO0dBQ2IsTUFBTSxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtBQUMvQyxXQUFPLElBQUksQ0FBQztHQUNiLE1BQU07QUFDTCxXQUFPLEtBQUssQ0FBQztHQUNkO0NBQ0Y7O0FBRU0sU0FBUyxXQUFXLENBQUMsTUFBTSxFQUFFO0FBQ2xDLE1BQUksS0FBSyxHQUFHLE1BQU0sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDL0IsT0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7QUFDdkIsU0FBTyxLQUFLLENBQUM7Q0FDZDs7QUFFTSxTQUFTLFdBQVcsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFO0FBQ3ZDLFFBQU0sQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDO0FBQ2xCLFNBQU8sTUFBTSxDQUFDO0NBQ2Y7O0FBRU0sU0FBUyxpQkFBaUIsQ0FBQyxXQUFXLEVBQUUsRUFBRSxFQUFFO0FBQ2pELFNBQU8sQ0FBQyxXQUFXLEdBQUcsV0FBVyxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUEsR0FBSSxFQUFFLENBQUM7Q0FDcEQiLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBlc2NhcGUgPSB7XG4gICcmJzogJyZhbXA7JyxcbiAgJzwnOiAnJmx0OycsXG4gICc+JzogJyZndDsnLFxuICAnXCInOiAnJnF1b3Q7JyxcbiAgXCInXCI6ICcmI3gyNzsnLFxuICAnYCc6ICcmI3g2MDsnLFxuICAnPSc6ICcmI3gzRDsnXG59O1xuXG5jb25zdCBiYWRDaGFycyA9IC9bJjw+XCInYD1dL2csXG4gICAgICBwb3NzaWJsZSA9IC9bJjw+XCInYD1dLztcblxuZnVuY3Rpb24gZXNjYXBlQ2hhcihjaHIpIHtcbiAgcmV0dXJuIGVzY2FwZVtjaHJdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKG9iai8qICwgLi4uc291cmNlICovKSB7XG4gIGZvciAobGV0IGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgZm9yIChsZXQga2V5IGluIGFyZ3VtZW50c1tpXSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhcmd1bWVudHNbaV0sIGtleSkpIHtcbiAgICAgICAgb2JqW2tleV0gPSBhcmd1bWVudHNbaV1ba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gb2JqO1xufVxuXG5leHBvcnQgbGV0IHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLy8gU291cmNlZCBmcm9tIGxvZGFzaFxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2Jlc3RpZWpzL2xvZGFzaC9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dFxuLyogZXNsaW50LWRpc2FibGUgZnVuYy1zdHlsZSAqL1xubGV0IGlzRnVuY3Rpb24gPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nO1xufTtcbi8vIGZhbGxiYWNrIGZvciBvbGRlciB2ZXJzaW9ucyBvZiBDaHJvbWUgYW5kIFNhZmFyaVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmlmIChpc0Z1bmN0aW9uKC94LykpIHtcbiAgaXNGdW5jdGlvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbiAgfTtcbn1cbmV4cG9ydCB7aXNGdW5jdGlvbn07XG4vKiBlc2xpbnQtZW5hYmxlIGZ1bmMtc3R5bGUgKi9cblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmV4cG9ydCBjb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpID8gdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEFycmF5XScgOiBmYWxzZTtcbn07XG5cbi8vIE9sZGVyIElFIHZlcnNpb25zIGRvIG5vdCBkaXJlY3RseSBzdXBwb3J0IGluZGV4T2Ygc28gd2UgbXVzdCBpbXBsZW1lbnQgb3VyIG93biwgc2FkbHkuXG5leHBvcnQgZnVuY3Rpb24gaW5kZXhPZihhcnJheSwgdmFsdWUpIHtcbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgaWYgKGFycmF5W2ldID09PSB2YWx1ZSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlRXhwcmVzc2lvbihzdHJpbmcpIHtcbiAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSB7XG4gICAgLy8gZG9uJ3QgZXNjYXBlIFNhZmVTdHJpbmdzLCBzaW5jZSB0aGV5J3JlIGFscmVhZHkgc2FmZVxuICAgIGlmIChzdHJpbmcgJiYgc3RyaW5nLnRvSFRNTCkge1xuICAgICAgcmV0dXJuIHN0cmluZy50b0hUTUwoKTtcbiAgICB9IGVsc2UgaWYgKHN0cmluZyA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfSBlbHNlIGlmICghc3RyaW5nKSB7XG4gICAgICByZXR1cm4gc3RyaW5nICsgJyc7XG4gICAgfVxuXG4gICAgLy8gRm9yY2UgYSBzdHJpbmcgY29udmVyc2lvbiBhcyB0aGlzIHdpbGwgYmUgZG9uZSBieSB0aGUgYXBwZW5kIHJlZ2FyZGxlc3MgYW5kXG4gICAgLy8gdGhlIHJlZ2V4IHRlc3Qgd2lsbCBkbyB0aGlzIHRyYW5zcGFyZW50bHkgYmVoaW5kIHRoZSBzY2VuZXMsIGNhdXNpbmcgaXNzdWVzIGlmXG4gICAgLy8gYW4gb2JqZWN0J3MgdG8gc3RyaW5nIGhhcyBlc2NhcGVkIGNoYXJhY3RlcnMgaW4gaXQuXG4gICAgc3RyaW5nID0gJycgKyBzdHJpbmc7XG4gIH1cblxuICBpZiAoIXBvc3NpYmxlLnRlc3Qoc3RyaW5nKSkgeyByZXR1cm4gc3RyaW5nOyB9XG4gIHJldHVybiBzdHJpbmcucmVwbGFjZShiYWRDaGFycywgZXNjYXBlQ2hhcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5KHZhbHVlKSB7XG4gIGlmICghdmFsdWUgJiYgdmFsdWUgIT09IDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIGlmIChpc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZyYW1lKG9iamVjdCkge1xuICBsZXQgZnJhbWUgPSBleHRlbmQoe30sIG9iamVjdCk7XG4gIGZyYW1lLl9wYXJlbnQgPSBvYmplY3Q7XG4gIHJldHVybiBmcmFtZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJsb2NrUGFyYW1zKHBhcmFtcywgaWRzKSB7XG4gIHBhcmFtcy5wYXRoID0gaWRzO1xuICByZXR1cm4gcGFyYW1zO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXBwZW5kQ29udGV4dFBhdGgoY29udGV4dFBhdGgsIGlkKSB7XG4gIHJldHVybiAoY29udGV4dFBhdGggPyBjb250ZXh0UGF0aCArICcuJyA6ICcnKSArIGlkO1xufVxuIl19\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/handlebars/dist/cjs/handlebars/utils.js\n ** module id = 62\n ** module chunks = 0\n **/","'use strict';\n\nexports.__esModule = true;\n\nvar errorProps = ['description', 'fileName', 'lineNumber', 'message', 'name', 'number', 'stack'];\n\nfunction Exception(message, node) {\n  var loc = node && node.loc,\n      line = undefined,\n      column = undefined;\n  if (loc) {\n    line = loc.start.line;\n    column = loc.start.column;\n\n    message += ' - ' + line + ':' + column;\n  }\n\n  var tmp = Error.prototype.constructor.call(this, message);\n\n  // Unfortunately errors are not enumerable in Chrome (at least), so `for prop in tmp` doesn't work.\n  for (var idx = 0; idx < errorProps.length; idx++) {\n    this[errorProps[idx]] = tmp[errorProps[idx]];\n  }\n\n  /* istanbul ignore else */\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, Exception);\n  }\n\n  if (loc) {\n    this.lineNumber = line;\n    this.column = column;\n  }\n}\n\nException.prototype = new Error();\n\nexports['default'] = Exception;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2V4Y2VwdGlvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQ0EsSUFBTSxVQUFVLEdBQUcsQ0FBQyxhQUFhLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQzs7QUFFbkcsU0FBUyxTQUFTLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRTtBQUNoQyxNQUFJLEdBQUcsR0FBRyxJQUFJLElBQUksSUFBSSxDQUFDLEdBQUc7TUFDdEIsSUFBSSxZQUFBO01BQ0osTUFBTSxZQUFBLENBQUM7QUFDWCxNQUFJLEdBQUcsRUFBRTtBQUNQLFFBQUksR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztBQUN0QixVQUFNLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7O0FBRTFCLFdBQU8sSUFBSSxLQUFLLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxNQUFNLENBQUM7R0FDeEM7O0FBRUQsTUFBSSxHQUFHLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQzs7O0FBRzFELE9BQUssSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxVQUFVLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxFQUFFO0FBQ2hELFFBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7R0FDOUM7OztBQUdELE1BQUksS0FBSyxDQUFDLGlCQUFpQixFQUFFO0FBQzNCLFNBQUssQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUM7R0FDMUM7O0FBRUQsTUFBSSxHQUFHLEVBQUU7QUFDUCxRQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztBQUN2QixRQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztHQUN0QjtDQUNGOztBQUVELFNBQVMsQ0FBQyxTQUFTLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQzs7cUJBRW5CLFNBQVMiLCJmaWxlIjoiZXhjZXB0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5jb25zdCBlcnJvclByb3BzID0gWydkZXNjcmlwdGlvbicsICdmaWxlTmFtZScsICdsaW5lTnVtYmVyJywgJ21lc3NhZ2UnLCAnbmFtZScsICdudW1iZXInLCAnc3RhY2snXTtcblxuZnVuY3Rpb24gRXhjZXB0aW9uKG1lc3NhZ2UsIG5vZGUpIHtcbiAgbGV0IGxvYyA9IG5vZGUgJiYgbm9kZS5sb2MsXG4gICAgICBsaW5lLFxuICAgICAgY29sdW1uO1xuICBpZiAobG9jKSB7XG4gICAgbGluZSA9IGxvYy5zdGFydC5saW5lO1xuICAgIGNvbHVtbiA9IGxvYy5zdGFydC5jb2x1bW47XG5cbiAgICBtZXNzYWdlICs9ICcgLSAnICsgbGluZSArICc6JyArIGNvbHVtbjtcbiAgfVxuXG4gIGxldCB0bXAgPSBFcnJvci5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBtZXNzYWdlKTtcblxuICAvLyBVbmZvcnR1bmF0ZWx5IGVycm9ycyBhcmUgbm90IGVudW1lcmFibGUgaW4gQ2hyb21lIChhdCBsZWFzdCksIHNvIGBmb3IgcHJvcCBpbiB0bXBgIGRvZXNuJ3Qgd29yay5cbiAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgZXJyb3JQcm9wcy5sZW5ndGg7IGlkeCsrKSB7XG4gICAgdGhpc1tlcnJvclByb3BzW2lkeF1dID0gdG1wW2Vycm9yUHJvcHNbaWR4XV07XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBFeGNlcHRpb24pO1xuICB9XG5cbiAgaWYgKGxvYykge1xuICAgIHRoaXMubGluZU51bWJlciA9IGxpbmU7XG4gICAgdGhpcy5jb2x1bW4gPSBjb2x1bW47XG4gIH1cbn1cblxuRXhjZXB0aW9uLnByb3RvdHlwZSA9IG5ldyBFcnJvcigpO1xuXG5leHBvcnQgZGVmYXVsdCBFeGNlcHRpb247XG4iXX0=\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/handlebars/dist/cjs/handlebars/exception.js\n ** module id = 63\n ** module chunks = 0\n **/","'use strict';\n\nexports.__esModule = true;\nexports.registerDefaultHelpers = registerDefaultHelpers;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _helpersBlockHelperMissing = require('./helpers/block-helper-missing');\n\nvar _helpersBlockHelperMissing2 = _interopRequireDefault(_helpersBlockHelperMissing);\n\nvar _helpersEach = require('./helpers/each');\n\nvar _helpersEach2 = _interopRequireDefault(_helpersEach);\n\nvar _helpersHelperMissing = require('./helpers/helper-missing');\n\nvar _helpersHelperMissing2 = _interopRequireDefault(_helpersHelperMissing);\n\nvar _helpersIf = require('./helpers/if');\n\nvar _helpersIf2 = _interopRequireDefault(_helpersIf);\n\nvar _helpersLog = require('./helpers/log');\n\nvar _helpersLog2 = _interopRequireDefault(_helpersLog);\n\nvar _helpersLookup = require('./helpers/lookup');\n\nvar _helpersLookup2 = _interopRequireDefault(_helpersLookup);\n\nvar _helpersWith = require('./helpers/with');\n\nvar _helpersWith2 = _interopRequireDefault(_helpersWith);\n\nfunction registerDefaultHelpers(instance) {\n  _helpersBlockHelperMissing2['default'](instance);\n  _helpersEach2['default'](instance);\n  _helpersHelperMissing2['default'](instance);\n  _helpersIf2['default'](instance);\n  _helpersLog2['default'](instance);\n  _helpersLookup2['default'](instance);\n  _helpersWith2['default'](instance);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7eUNBQXVDLGdDQUFnQzs7OzsyQkFDOUMsZ0JBQWdCOzs7O29DQUNQLDBCQUEwQjs7Ozt5QkFDckMsY0FBYzs7OzswQkFDYixlQUFlOzs7OzZCQUNaLGtCQUFrQjs7OzsyQkFDcEIsZ0JBQWdCOzs7O0FBRWxDLFNBQVMsc0JBQXNCLENBQUMsUUFBUSxFQUFFO0FBQy9DLHlDQUEyQixRQUFRLENBQUMsQ0FBQztBQUNyQywyQkFBYSxRQUFRLENBQUMsQ0FBQztBQUN2QixvQ0FBc0IsUUFBUSxDQUFDLENBQUM7QUFDaEMseUJBQVcsUUFBUSxDQUFDLENBQUM7QUFDckIsMEJBQVksUUFBUSxDQUFDLENBQUM7QUFDdEIsNkJBQWUsUUFBUSxDQUFDLENBQUM7QUFDekIsMkJBQWEsUUFBUSxDQUFDLENBQUM7Q0FDeEIiLCJmaWxlIjoiaGVscGVycy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCByZWdpc3RlckJsb2NrSGVscGVyTWlzc2luZyBmcm9tICcuL2hlbHBlcnMvYmxvY2staGVscGVyLW1pc3NpbmcnO1xuaW1wb3J0IHJlZ2lzdGVyRWFjaCBmcm9tICcuL2hlbHBlcnMvZWFjaCc7XG5pbXBvcnQgcmVnaXN0ZXJIZWxwZXJNaXNzaW5nIGZyb20gJy4vaGVscGVycy9oZWxwZXItbWlzc2luZyc7XG5pbXBvcnQgcmVnaXN0ZXJJZiBmcm9tICcuL2hlbHBlcnMvaWYnO1xuaW1wb3J0IHJlZ2lzdGVyTG9nIGZyb20gJy4vaGVscGVycy9sb2cnO1xuaW1wb3J0IHJlZ2lzdGVyTG9va3VwIGZyb20gJy4vaGVscGVycy9sb29rdXAnO1xuaW1wb3J0IHJlZ2lzdGVyV2l0aCBmcm9tICcuL2hlbHBlcnMvd2l0aCc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckRlZmF1bHRIZWxwZXJzKGluc3RhbmNlKSB7XG4gIHJlZ2lzdGVyQmxvY2tIZWxwZXJNaXNzaW5nKGluc3RhbmNlKTtcbiAgcmVnaXN0ZXJFYWNoKGluc3RhbmNlKTtcbiAgcmVnaXN0ZXJIZWxwZXJNaXNzaW5nKGluc3RhbmNlKTtcbiAgcmVnaXN0ZXJJZihpbnN0YW5jZSk7XG4gIHJlZ2lzdGVyTG9nKGluc3RhbmNlKTtcbiAgcmVnaXN0ZXJMb29rdXAoaW5zdGFuY2UpO1xuICByZWdpc3RlcldpdGgoaW5zdGFuY2UpO1xufVxuIl19\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/handlebars/dist/cjs/handlebars/helpers.js\n ** module id = 64\n ** module chunks = 0\n **/","'use strict';\n\nexports.__esModule = true;\n\nvar _utils = require('../utils');\n\nexports['default'] = function (instance) {\n  instance.registerHelper('blockHelperMissing', function (context, options) {\n    var inverse = options.inverse,\n        fn = options.fn;\n\n    if (context === true) {\n      return fn(this);\n    } else if (context === false || context == null) {\n      return inverse(this);\n    } else if (_utils.isArray(context)) {\n      if (context.length > 0) {\n        if (options.ids) {\n          options.ids = [options.name];\n        }\n\n        return instance.helpers.each(context, options);\n      } else {\n        return inverse(this);\n      }\n    } else {\n      if (options.data && options.ids) {\n        var data = _utils.createFrame(options.data);\n        data.contextPath = _utils.appendContextPath(options.data.contextPath, options.name);\n        options = { data: data };\n      }\n\n      return fn(context, options);\n    }\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvYmxvY2staGVscGVyLW1pc3NpbmcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztxQkFBc0QsVUFBVTs7cUJBRWpELFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxjQUFjLENBQUMsb0JBQW9CLEVBQUUsVUFBUyxPQUFPLEVBQUUsT0FBTyxFQUFFO0FBQ3ZFLFFBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxPQUFPO1FBQ3pCLEVBQUUsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDOztBQUVwQixRQUFJLE9BQU8sS0FBSyxJQUFJLEVBQUU7QUFDcEIsYUFBTyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDakIsTUFBTSxJQUFJLE9BQU8sS0FBSyxLQUFLLElBQUksT0FBTyxJQUFJLElBQUksRUFBRTtBQUMvQyxhQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUN0QixNQUFNLElBQUksZUFBUSxPQUFPLENBQUMsRUFBRTtBQUMzQixVQUFJLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQ3RCLFlBQUksT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUNmLGlCQUFPLENBQUMsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzlCOztBQUVELGVBQU8sUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO09BQ2hELE1BQU07QUFDTCxlQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztPQUN0QjtLQUNGLE1BQU07QUFDTCxVQUFJLE9BQU8sQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUMvQixZQUFJLElBQUksR0FBRyxtQkFBWSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDckMsWUFBSSxDQUFDLFdBQVcsR0FBRyx5QkFBa0IsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzdFLGVBQU8sR0FBRyxFQUFDLElBQUksRUFBRSxJQUFJLEVBQUMsQ0FBQztPQUN4Qjs7QUFFRCxhQUFPLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7S0FDN0I7R0FDRixDQUFDLENBQUM7Q0FDSiIsImZpbGUiOiJibG9jay1oZWxwZXItbWlzc2luZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7YXBwZW5kQ29udGV4dFBhdGgsIGNyZWF0ZUZyYW1lLCBpc0FycmF5fSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCdibG9ja0hlbHBlck1pc3NpbmcnLCBmdW5jdGlvbihjb250ZXh0LCBvcHRpb25zKSB7XG4gICAgbGV0IGludmVyc2UgPSBvcHRpb25zLmludmVyc2UsXG4gICAgICAgIGZuID0gb3B0aW9ucy5mbjtcblxuICAgIGlmIChjb250ZXh0ID09PSB0cnVlKSB7XG4gICAgICByZXR1cm4gZm4odGhpcyk7XG4gICAgfSBlbHNlIGlmIChjb250ZXh0ID09PSBmYWxzZSB8fCBjb250ZXh0ID09IG51bGwpIHtcbiAgICAgIHJldHVybiBpbnZlcnNlKHRoaXMpO1xuICAgIH0gZWxzZSBpZiAoaXNBcnJheShjb250ZXh0KSkge1xuICAgICAgaWYgKGNvbnRleHQubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAob3B0aW9ucy5pZHMpIHtcbiAgICAgICAgICBvcHRpb25zLmlkcyA9IFtvcHRpb25zLm5hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGluc3RhbmNlLmhlbHBlcnMuZWFjaChjb250ZXh0LCBvcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpbnZlcnNlKHRoaXMpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAob3B0aW9ucy5kYXRhICYmIG9wdGlvbnMuaWRzKSB7XG4gICAgICAgIGxldCBkYXRhID0gY3JlYXRlRnJhbWUob3B0aW9ucy5kYXRhKTtcbiAgICAgICAgZGF0YS5jb250ZXh0UGF0aCA9IGFwcGVuZENvbnRleHRQYXRoKG9wdGlvbnMuZGF0YS5jb250ZXh0UGF0aCwgb3B0aW9ucy5uYW1lKTtcbiAgICAgICAgb3B0aW9ucyA9IHtkYXRhOiBkYXRhfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZuKGNvbnRleHQsIG9wdGlvbnMpO1xuICAgIH1cbiAgfSk7XG59XG4iXX0=\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/handlebars/dist/cjs/handlebars/helpers/block-helper-missing.js\n ** module id = 65\n ** module chunks = 0\n **/","'use strict';\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _utils = require('../utils');\n\nvar _exception = require('../exception');\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nexports['default'] = function (instance) {\n  instance.registerHelper('each', function (context, options) {\n    if (!options) {\n      throw new _exception2['default']('Must pass iterator to #each');\n    }\n\n    var fn = options.fn,\n        inverse = options.inverse,\n        i = 0,\n        ret = '',\n        data = undefined,\n        contextPath = undefined;\n\n    if (options.data && options.ids) {\n      contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]) + '.';\n    }\n\n    if (_utils.isFunction(context)) {\n      context = context.call(this);\n    }\n\n    if (options.data) {\n      data = _utils.createFrame(options.data);\n    }\n\n    function execIteration(field, index, last) {\n      if (data) {\n        data.key = field;\n        data.index = index;\n        data.first = index === 0;\n        data.last = !!last;\n\n        if (contextPath) {\n          data.contextPath = contextPath + field;\n        }\n      }\n\n      ret = ret + fn(context[field], {\n        data: data,\n        blockParams: _utils.blockParams([context[field], field], [contextPath + field, null])\n      });\n    }\n\n    if (context && typeof context === 'object') {\n      if (_utils.isArray(context)) {\n        for (var j = context.length; i < j; i++) {\n          if (i in context) {\n            execIteration(i, i, i === context.length - 1);\n          }\n        }\n      } else {\n        var priorKey = undefined;\n\n        for (var key in context) {\n          if (context.hasOwnProperty(key)) {\n            // We're running the iterations one step out of sync so we can detect\n            // the last iteration without have to scan the object twice and create\n            // an itermediate keys array.\n            if (priorKey !== undefined) {\n              execIteration(priorKey, i - 1);\n            }\n            priorKey = key;\n            i++;\n          }\n        }\n        if (priorKey !== undefined) {\n          execIteration(priorKey, i - 1, true);\n        }\n      }\n    }\n\n    if (i === 0) {\n      ret = inverse(this);\n    }\n\n    return ret;\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvZWFjaC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O3FCQUErRSxVQUFVOzt5QkFDbkUsY0FBYzs7OztxQkFFckIsVUFBUyxRQUFRLEVBQUU7QUFDaEMsVUFBUSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsVUFBUyxPQUFPLEVBQUUsT0FBTyxFQUFFO0FBQ3pELFFBQUksQ0FBQyxPQUFPLEVBQUU7QUFDWixZQUFNLDJCQUFjLDZCQUE2QixDQUFDLENBQUM7S0FDcEQ7O0FBRUQsUUFBSSxFQUFFLEdBQUcsT0FBTyxDQUFDLEVBQUU7UUFDZixPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU87UUFDekIsQ0FBQyxHQUFHLENBQUM7UUFDTCxHQUFHLEdBQUcsRUFBRTtRQUNSLElBQUksWUFBQTtRQUNKLFdBQVcsWUFBQSxDQUFDOztBQUVoQixRQUFJLE9BQU8sQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUMvQixpQkFBVyxHQUFHLHlCQUFrQixPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0tBQ2pGOztBQUVELFFBQUksa0JBQVcsT0FBTyxDQUFDLEVBQUU7QUFBRSxhQUFPLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUFFOztBQUUxRCxRQUFJLE9BQU8sQ0FBQyxJQUFJLEVBQUU7QUFDaEIsVUFBSSxHQUFHLG1CQUFZLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUNsQzs7QUFFRCxhQUFTLGFBQWEsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRTtBQUN6QyxVQUFJLElBQUksRUFBRTtBQUNSLFlBQUksQ0FBQyxHQUFHLEdBQUcsS0FBSyxDQUFDO0FBQ2pCLFlBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0FBQ25CLFlBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxLQUFLLENBQUMsQ0FBQztBQUN6QixZQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7O0FBRW5CLFlBQUksV0FBVyxFQUFFO0FBQ2YsY0FBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLEdBQUcsS0FBSyxDQUFDO1NBQ3hDO09BQ0Y7O0FBRUQsU0FBRyxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO0FBQzdCLFlBQUksRUFBRSxJQUFJO0FBQ1YsbUJBQVcsRUFBRSxtQkFBWSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDLFdBQVcsR0FBRyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7T0FDL0UsQ0FBQyxDQUFDO0tBQ0o7O0FBRUQsUUFBSSxPQUFPLElBQUksT0FBTyxPQUFPLEtBQUssUUFBUSxFQUFFO0FBQzFDLFVBQUksZUFBUSxPQUFPLENBQUMsRUFBRTtBQUNwQixhQUFLLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUN2QyxjQUFJLENBQUMsSUFBSSxPQUFPLEVBQUU7QUFDaEIseUJBQWEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1dBQy9DO1NBQ0Y7T0FDRixNQUFNO0FBQ0wsWUFBSSxRQUFRLFlBQUEsQ0FBQzs7QUFFYixhQUFLLElBQUksR0FBRyxJQUFJLE9BQU8sRUFBRTtBQUN2QixjQUFJLE9BQU8sQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEVBQUU7Ozs7QUFJL0IsZ0JBQUksUUFBUSxLQUFLLFNBQVMsRUFBRTtBQUMxQiwyQkFBYSxDQUFDLFFBQVEsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7YUFDaEM7QUFDRCxvQkFBUSxHQUFHLEdBQUcsQ0FBQztBQUNmLGFBQUMsRUFBRSxDQUFDO1dBQ0w7U0FDRjtBQUNELFlBQUksUUFBUSxLQUFLLFNBQVMsRUFBRTtBQUMxQix1QkFBYSxDQUFDLFFBQVEsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ3RDO09BQ0Y7S0FDRjs7QUFFRCxRQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7QUFDWCxTQUFHLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3JCOztBQUVELFdBQU8sR0FBRyxDQUFDO0dBQ1osQ0FBQyxDQUFDO0NBQ0oiLCJmaWxlIjoiZWFjaC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7YXBwZW5kQ29udGV4dFBhdGgsIGJsb2NrUGFyYW1zLCBjcmVhdGVGcmFtZSwgaXNBcnJheSwgaXNGdW5jdGlvbn0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IEV4Y2VwdGlvbiBmcm9tICcuLi9leGNlcHRpb24nO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihpbnN0YW5jZSkge1xuICBpbnN0YW5jZS5yZWdpc3RlckhlbHBlcignZWFjaCcsIGZ1bmN0aW9uKGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ011c3QgcGFzcyBpdGVyYXRvciB0byAjZWFjaCcpO1xuICAgIH1cblxuICAgIGxldCBmbiA9IG9wdGlvbnMuZm4sXG4gICAgICAgIGludmVyc2UgPSBvcHRpb25zLmludmVyc2UsXG4gICAgICAgIGkgPSAwLFxuICAgICAgICByZXQgPSAnJyxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgY29udGV4dFBhdGg7XG5cbiAgICBpZiAob3B0aW9ucy5kYXRhICYmIG9wdGlvbnMuaWRzKSB7XG4gICAgICBjb250ZXh0UGF0aCA9IGFwcGVuZENvbnRleHRQYXRoKG9wdGlvbnMuZGF0YS5jb250ZXh0UGF0aCwgb3B0aW9ucy5pZHNbMF0pICsgJy4nO1xuICAgIH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRleHQpKSB7IGNvbnRleHQgPSBjb250ZXh0LmNhbGwodGhpcyk7IH1cblxuICAgIGlmIChvcHRpb25zLmRhdGEpIHtcbiAgICAgIGRhdGEgPSBjcmVhdGVGcmFtZShvcHRpb25zLmRhdGEpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV4ZWNJdGVyYXRpb24oZmllbGQsIGluZGV4LCBsYXN0KSB7XG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICBkYXRhLmtleSA9IGZpZWxkO1xuICAgICAgICBkYXRhLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIGRhdGEuZmlyc3QgPSBpbmRleCA9PT0gMDtcbiAgICAgICAgZGF0YS5sYXN0ID0gISFsYXN0O1xuXG4gICAgICAgIGlmIChjb250ZXh0UGF0aCkge1xuICAgICAgICAgIGRhdGEuY29udGV4dFBhdGggPSBjb250ZXh0UGF0aCArIGZpZWxkO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldCA9IHJldCArIGZuKGNvbnRleHRbZmllbGRdLCB7XG4gICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgIGJsb2NrUGFyYW1zOiBibG9ja1BhcmFtcyhbY29udGV4dFtmaWVsZF0sIGZpZWxkXSwgW2NvbnRleHRQYXRoICsgZmllbGQsIG51bGxdKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQgPT09ICdvYmplY3QnKSB7XG4gICAgICBpZiAoaXNBcnJheShjb250ZXh0KSkge1xuICAgICAgICBmb3IgKGxldCBqID0gY29udGV4dC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICBpZiAoaSBpbiBjb250ZXh0KSB7XG4gICAgICAgICAgICBleGVjSXRlcmF0aW9uKGksIGksIGkgPT09IGNvbnRleHQubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgcHJpb3JLZXk7XG5cbiAgICAgICAgZm9yIChsZXQga2V5IGluIGNvbnRleHQpIHtcbiAgICAgICAgICBpZiAoY29udGV4dC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAvLyBXZSdyZSBydW5uaW5nIHRoZSBpdGVyYXRpb25zIG9uZSBzdGVwIG91dCBvZiBzeW5jIHNvIHdlIGNhbiBkZXRlY3RcbiAgICAgICAgICAgIC8vIHRoZSBsYXN0IGl0ZXJhdGlvbiB3aXRob3V0IGhhdmUgdG8gc2NhbiB0aGUgb2JqZWN0IHR3aWNlIGFuZCBjcmVhdGVcbiAgICAgICAgICAgIC8vIGFuIGl0ZXJtZWRpYXRlIGtleXMgYXJyYXkuXG4gICAgICAgICAgICBpZiAocHJpb3JLZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBleGVjSXRlcmF0aW9uKHByaW9yS2V5LCBpIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmlvcktleSA9IGtleTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByaW9yS2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBleGVjSXRlcmF0aW9uKHByaW9yS2V5LCBpIC0gMSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgcmV0ID0gaW52ZXJzZSh0aGlzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmV0O1xuICB9KTtcbn1cbiJdfQ==\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/handlebars/dist/cjs/handlebars/helpers/each.js\n ** module id = 66\n ** module chunks = 0\n **/","'use strict';\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _exception = require('../exception');\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nexports['default'] = function (instance) {\n  instance.registerHelper('helperMissing', function () /* [args, ]options */{\n    if (arguments.length === 1) {\n      // A missing field in a {{foo}} construct.\n      return undefined;\n    } else {\n      // Someone is actually trying to call something, blow up.\n      throw new _exception2['default']('Missing helper: \"' + arguments[arguments.length - 1].name + '\"');\n    }\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvaGVscGVyLW1pc3NpbmcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozt5QkFBc0IsY0FBYzs7OztxQkFFckIsVUFBUyxRQUFRLEVBQUU7QUFDaEMsVUFBUSxDQUFDLGNBQWMsQ0FBQyxlQUFlLEVBQUUsaUNBQWdDO0FBQ3ZFLFFBQUksU0FBUyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7O0FBRTFCLGFBQU8sU0FBUyxDQUFDO0tBQ2xCLE1BQU07O0FBRUwsWUFBTSwyQkFBYyxtQkFBbUIsR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7S0FDdkY7R0FDRixDQUFDLENBQUM7Q0FDSiIsImZpbGUiOiJoZWxwZXItbWlzc2luZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBFeGNlcHRpb24gZnJvbSAnLi4vZXhjZXB0aW9uJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2hlbHBlck1pc3NpbmcnLCBmdW5jdGlvbigvKiBbYXJncywgXW9wdGlvbnMgKi8pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgLy8gQSBtaXNzaW5nIGZpZWxkIGluIGEge3tmb299fSBjb25zdHJ1Y3QuXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTb21lb25lIGlzIGFjdHVhbGx5IHRyeWluZyB0byBjYWxsIHNvbWV0aGluZywgYmxvdyB1cC5cbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ01pc3NpbmcgaGVscGVyOiBcIicgKyBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdLm5hbWUgKyAnXCInKTtcbiAgICB9XG4gIH0pO1xufVxuIl19\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/handlebars/dist/cjs/handlebars/helpers/helper-missing.js\n ** module id = 67\n ** module chunks = 0\n **/","'use strict';\n\nexports.__esModule = true;\n\nvar _utils = require('../utils');\n\nexports['default'] = function (instance) {\n  instance.registerHelper('if', function (conditional, options) {\n    if (_utils.isFunction(conditional)) {\n      conditional = conditional.call(this);\n    }\n\n    // Default behavior is to render the positive path if the value is truthy and not empty.\n    // The `includeZero` option may be set to treat the condtional as purely not empty based on the\n    // behavior of isEmpty. Effectively this determines if 0 is handled by the positive path or negative.\n    if (!options.hash.includeZero && !conditional || _utils.isEmpty(conditional)) {\n      return options.inverse(this);\n    } else {\n      return options.fn(this);\n    }\n  });\n\n  instance.registerHelper('unless', function (conditional, options) {\n    return instance.helpers['if'].call(this, conditional, { fn: options.inverse, inverse: options.fn, hash: options.hash });\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvaWYuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztxQkFBa0MsVUFBVTs7cUJBRTdCLFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVMsV0FBVyxFQUFFLE9BQU8sRUFBRTtBQUMzRCxRQUFJLGtCQUFXLFdBQVcsQ0FBQyxFQUFFO0FBQUUsaUJBQVcsR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQUU7Ozs7O0FBS3RFLFFBQUksQUFBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxJQUFJLENBQUMsV0FBVyxJQUFLLGVBQVEsV0FBVyxDQUFDLEVBQUU7QUFDdkUsYUFBTyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQzlCLE1BQU07QUFDTCxhQUFPLE9BQU8sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDekI7R0FDRixDQUFDLENBQUM7O0FBRUgsVUFBUSxDQUFDLGNBQWMsQ0FBQyxRQUFRLEVBQUUsVUFBUyxXQUFXLEVBQUUsT0FBTyxFQUFFO0FBQy9ELFdBQU8sUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLFdBQVcsRUFBRSxFQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsSUFBSSxFQUFDLENBQUMsQ0FBQztHQUN2SCxDQUFDLENBQUM7Q0FDSiIsImZpbGUiOiJpZi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7aXNFbXB0eSwgaXNGdW5jdGlvbn0gZnJvbSAnLi4vdXRpbHMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihpbnN0YW5jZSkge1xuICBpbnN0YW5jZS5yZWdpc3RlckhlbHBlcignaWYnLCBmdW5jdGlvbihjb25kaXRpb25hbCwgb3B0aW9ucykge1xuICAgIGlmIChpc0Z1bmN0aW9uKGNvbmRpdGlvbmFsKSkgeyBjb25kaXRpb25hbCA9IGNvbmRpdGlvbmFsLmNhbGwodGhpcyk7IH1cblxuICAgIC8vIERlZmF1bHQgYmVoYXZpb3IgaXMgdG8gcmVuZGVyIHRoZSBwb3NpdGl2ZSBwYXRoIGlmIHRoZSB2YWx1ZSBpcyB0cnV0aHkgYW5kIG5vdCBlbXB0eS5cbiAgICAvLyBUaGUgYGluY2x1ZGVaZXJvYCBvcHRpb24gbWF5IGJlIHNldCB0byB0cmVhdCB0aGUgY29uZHRpb25hbCBhcyBwdXJlbHkgbm90IGVtcHR5IGJhc2VkIG9uIHRoZVxuICAgIC8vIGJlaGF2aW9yIG9mIGlzRW1wdHkuIEVmZmVjdGl2ZWx5IHRoaXMgZGV0ZXJtaW5lcyBpZiAwIGlzIGhhbmRsZWQgYnkgdGhlIHBvc2l0aXZlIHBhdGggb3IgbmVnYXRpdmUuXG4gICAgaWYgKCghb3B0aW9ucy5oYXNoLmluY2x1ZGVaZXJvICYmICFjb25kaXRpb25hbCkgfHwgaXNFbXB0eShjb25kaXRpb25hbCkpIHtcbiAgICAgIHJldHVybiBvcHRpb25zLmludmVyc2UodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvcHRpb25zLmZuKHRoaXMpO1xuICAgIH1cbiAgfSk7XG5cbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ3VubGVzcycsIGZ1bmN0aW9uKGNvbmRpdGlvbmFsLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGluc3RhbmNlLmhlbHBlcnNbJ2lmJ10uY2FsbCh0aGlzLCBjb25kaXRpb25hbCwge2ZuOiBvcHRpb25zLmludmVyc2UsIGludmVyc2U6IG9wdGlvbnMuZm4sIGhhc2g6IG9wdGlvbnMuaGFzaH0pO1xuICB9KTtcbn1cbiJdfQ==\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/handlebars/dist/cjs/handlebars/helpers/if.js\n ** module id = 68\n ** module chunks = 0\n **/","'use strict';\n\nexports.__esModule = true;\n\nexports['default'] = function (instance) {\n  instance.registerHelper('log', function () /* message, options */{\n    var args = [undefined],\n        options = arguments[arguments.length - 1];\n    for (var i = 0; i < arguments.length - 1; i++) {\n      args.push(arguments[i]);\n    }\n\n    var level = 1;\n    if (options.hash.level != null) {\n      level = options.hash.level;\n    } else if (options.data && options.data.level != null) {\n      level = options.data.level;\n    }\n    args[0] = level;\n\n    instance.log.apply(instance, args);\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvbG9nLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7cUJBQWUsVUFBUyxRQUFRLEVBQUU7QUFDaEMsVUFBUSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsa0NBQWlDO0FBQzlELFFBQUksSUFBSSxHQUFHLENBQUMsU0FBUyxDQUFDO1FBQ2xCLE9BQU8sR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztBQUM5QyxTQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDN0MsVUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUN6Qjs7QUFFRCxRQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7QUFDZCxRQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksRUFBRTtBQUM5QixXQUFLLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7S0FDNUIsTUFBTSxJQUFJLE9BQU8sQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxFQUFFO0FBQ3JELFdBQUssR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztLQUM1QjtBQUNELFFBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7O0FBRWhCLFlBQVEsQ0FBQyxHQUFHLE1BQUEsQ0FBWixRQUFRLEVBQVMsSUFBSSxDQUFDLENBQUM7R0FDeEIsQ0FBQyxDQUFDO0NBQ0oiLCJmaWxlIjoibG9nLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2xvZycsIGZ1bmN0aW9uKC8qIG1lc3NhZ2UsIG9wdGlvbnMgKi8pIHtcbiAgICBsZXQgYXJncyA9IFt1bmRlZmluZWRdLFxuICAgICAgICBvcHRpb25zID0gYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIGFyZ3MucHVzaChhcmd1bWVudHNbaV0pO1xuICAgIH1cblxuICAgIGxldCBsZXZlbCA9IDE7XG4gICAgaWYgKG9wdGlvbnMuaGFzaC5sZXZlbCAhPSBudWxsKSB7XG4gICAgICBsZXZlbCA9IG9wdGlvbnMuaGFzaC5sZXZlbDtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuZGF0YSAmJiBvcHRpb25zLmRhdGEubGV2ZWwgIT0gbnVsbCkge1xuICAgICAgbGV2ZWwgPSBvcHRpb25zLmRhdGEubGV2ZWw7XG4gICAgfVxuICAgIGFyZ3NbMF0gPSBsZXZlbDtcblxuICAgIGluc3RhbmNlLmxvZyguLi4gYXJncyk7XG4gIH0pO1xufVxuIl19\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/handlebars/dist/cjs/handlebars/helpers/log.js\n ** module id = 69\n ** module chunks = 0\n **/","'use strict';\n\nexports.__esModule = true;\n\nexports['default'] = function (instance) {\n  instance.registerHelper('lookup', function (obj, field) {\n    return obj && obj[field];\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvbG9va3VwLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7cUJBQWUsVUFBUyxRQUFRLEVBQUU7QUFDaEMsVUFBUSxDQUFDLGNBQWMsQ0FBQyxRQUFRLEVBQUUsVUFBUyxHQUFHLEVBQUUsS0FBSyxFQUFFO0FBQ3JELFdBQU8sR0FBRyxJQUFJLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztHQUMxQixDQUFDLENBQUM7Q0FDSiIsImZpbGUiOiJsb29rdXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihpbnN0YW5jZSkge1xuICBpbnN0YW5jZS5yZWdpc3RlckhlbHBlcignbG9va3VwJywgZnVuY3Rpb24ob2JqLCBmaWVsZCkge1xuICAgIHJldHVybiBvYmogJiYgb2JqW2ZpZWxkXTtcbiAgfSk7XG59XG4iXX0=\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/handlebars/dist/cjs/handlebars/helpers/lookup.js\n ** module id = 70\n ** module chunks = 0\n **/","'use strict';\n\nexports.__esModule = true;\n\nvar _utils = require('../utils');\n\nexports['default'] = function (instance) {\n  instance.registerHelper('with', function (context, options) {\n    if (_utils.isFunction(context)) {\n      context = context.call(this);\n    }\n\n    var fn = options.fn;\n\n    if (!_utils.isEmpty(context)) {\n      var data = options.data;\n      if (options.data && options.ids) {\n        data = _utils.createFrame(options.data);\n        data.contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]);\n      }\n\n      return fn(context, {\n        data: data,\n        blockParams: _utils.blockParams([context], [data && data.contextPath])\n      });\n    } else {\n      return options.inverse(this);\n    }\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvd2l0aC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O3FCQUErRSxVQUFVOztxQkFFMUUsVUFBUyxRQUFRLEVBQUU7QUFDaEMsVUFBUSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsVUFBUyxPQUFPLEVBQUUsT0FBTyxFQUFFO0FBQ3pELFFBQUksa0JBQVcsT0FBTyxDQUFDLEVBQUU7QUFBRSxhQUFPLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUFFOztBQUUxRCxRQUFJLEVBQUUsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDOztBQUVwQixRQUFJLENBQUMsZUFBUSxPQUFPLENBQUMsRUFBRTtBQUNyQixVQUFJLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDO0FBQ3hCLFVBQUksT0FBTyxDQUFDLElBQUksSUFBSSxPQUFPLENBQUMsR0FBRyxFQUFFO0FBQy9CLFlBQUksR0FBRyxtQkFBWSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDakMsWUFBSSxDQUFDLFdBQVcsR0FBRyx5QkFBa0IsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO09BQ2hGOztBQUVELGFBQU8sRUFBRSxDQUFDLE9BQU8sRUFBRTtBQUNqQixZQUFJLEVBQUUsSUFBSTtBQUNWLG1CQUFXLEVBQUUsbUJBQVksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7T0FDaEUsQ0FBQyxDQUFDO0tBQ0osTUFBTTtBQUNMLGFBQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUM5QjtHQUNGLENBQUMsQ0FBQztDQUNKIiwiZmlsZSI6IndpdGguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2FwcGVuZENvbnRleHRQYXRoLCBibG9ja1BhcmFtcywgY3JlYXRlRnJhbWUsIGlzRW1wdHksIGlzRnVuY3Rpb259IGZyb20gJy4uL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ3dpdGgnLCBmdW5jdGlvbihjb250ZXh0LCBvcHRpb25zKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24oY29udGV4dCkpIHsgY29udGV4dCA9IGNvbnRleHQuY2FsbCh0aGlzKTsgfVxuXG4gICAgbGV0IGZuID0gb3B0aW9ucy5mbjtcblxuICAgIGlmICghaXNFbXB0eShjb250ZXh0KSkge1xuICAgICAgbGV0IGRhdGEgPSBvcHRpb25zLmRhdGE7XG4gICAgICBpZiAob3B0aW9ucy5kYXRhICYmIG9wdGlvbnMuaWRzKSB7XG4gICAgICAgIGRhdGEgPSBjcmVhdGVGcmFtZShvcHRpb25zLmRhdGEpO1xuICAgICAgICBkYXRhLmNvbnRleHRQYXRoID0gYXBwZW5kQ29udGV4dFBhdGgob3B0aW9ucy5kYXRhLmNvbnRleHRQYXRoLCBvcHRpb25zLmlkc1swXSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmbihjb250ZXh0LCB7XG4gICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgIGJsb2NrUGFyYW1zOiBibG9ja1BhcmFtcyhbY29udGV4dF0sIFtkYXRhICYmIGRhdGEuY29udGV4dFBhdGhdKVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvcHRpb25zLmludmVyc2UodGhpcyk7XG4gICAgfVxuICB9KTtcbn1cbiJdfQ==\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/handlebars/dist/cjs/handlebars/helpers/with.js\n ** module id = 71\n ** module chunks = 0\n **/","'use strict';\n\nexports.__esModule = true;\nexports.registerDefaultDecorators = registerDefaultDecorators;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _decoratorsInline = require('./decorators/inline');\n\nvar _decoratorsInline2 = _interopRequireDefault(_decoratorsInline);\n\nfunction registerDefaultDecorators(instance) {\n  _decoratorsInline2['default'](instance);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2RlY29yYXRvcnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Z0NBQTJCLHFCQUFxQjs7OztBQUV6QyxTQUFTLHlCQUF5QixDQUFDLFFBQVEsRUFBRTtBQUNsRCxnQ0FBZSxRQUFRLENBQUMsQ0FBQztDQUMxQiIsImZpbGUiOiJkZWNvcmF0b3JzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHJlZ2lzdGVySW5saW5lIGZyb20gJy4vZGVjb3JhdG9ycy9pbmxpbmUnO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJEZWZhdWx0RGVjb3JhdG9ycyhpbnN0YW5jZSkge1xuICByZWdpc3RlcklubGluZShpbnN0YW5jZSk7XG59XG5cbiJdfQ==\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/handlebars/dist/cjs/handlebars/decorators.js\n ** module id = 72\n ** module chunks = 0\n **/","'use strict';\n\nexports.__esModule = true;\n\nvar _utils = require('../utils');\n\nexports['default'] = function (instance) {\n  instance.registerDecorator('inline', function (fn, props, container, options) {\n    var ret = fn;\n    if (!props.partials) {\n      props.partials = {};\n      ret = function (context, options) {\n        // Create a new partials stack frame prior to exec.\n        var original = container.partials;\n        container.partials = _utils.extend({}, original, props.partials);\n        var ret = fn(context, options);\n        container.partials = original;\n        return ret;\n      };\n    }\n\n    props.partials[options.args[0]] = options.fn;\n\n    return ret;\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2RlY29yYXRvcnMvaW5saW5lLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7cUJBQXFCLFVBQVU7O3FCQUVoQixVQUFTLFFBQVEsRUFBRTtBQUNoQyxVQUFRLENBQUMsaUJBQWlCLENBQUMsUUFBUSxFQUFFLFVBQVMsRUFBRSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFO0FBQzNFLFFBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQztBQUNiLFFBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFO0FBQ25CLFdBQUssQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO0FBQ3BCLFNBQUcsR0FBRyxVQUFTLE9BQU8sRUFBRSxPQUFPLEVBQUU7O0FBRS9CLFlBQUksUUFBUSxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUM7QUFDbEMsaUJBQVMsQ0FBQyxRQUFRLEdBQUcsY0FBTyxFQUFFLEVBQUUsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxRCxZQUFJLEdBQUcsR0FBRyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQy9CLGlCQUFTLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztBQUM5QixlQUFPLEdBQUcsQ0FBQztPQUNaLENBQUM7S0FDSDs7QUFFRCxTQUFLLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDOztBQUU3QyxXQUFPLEdBQUcsQ0FBQztHQUNaLENBQUMsQ0FBQztDQUNKIiwiZmlsZSI6ImlubGluZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7ZXh0ZW5kfSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVyRGVjb3JhdG9yKCdpbmxpbmUnLCBmdW5jdGlvbihmbiwgcHJvcHMsIGNvbnRhaW5lciwgb3B0aW9ucykge1xuICAgIGxldCByZXQgPSBmbjtcbiAgICBpZiAoIXByb3BzLnBhcnRpYWxzKSB7XG4gICAgICBwcm9wcy5wYXJ0aWFscyA9IHt9O1xuICAgICAgcmV0ID0gZnVuY3Rpb24oY29udGV4dCwgb3B0aW9ucykge1xuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgcGFydGlhbHMgc3RhY2sgZnJhbWUgcHJpb3IgdG8gZXhlYy5cbiAgICAgICAgbGV0IG9yaWdpbmFsID0gY29udGFpbmVyLnBhcnRpYWxzO1xuICAgICAgICBjb250YWluZXIucGFydGlhbHMgPSBleHRlbmQoe30sIG9yaWdpbmFsLCBwcm9wcy5wYXJ0aWFscyk7XG4gICAgICAgIGxldCByZXQgPSBmbihjb250ZXh0LCBvcHRpb25zKTtcbiAgICAgICAgY29udGFpbmVyLnBhcnRpYWxzID0gb3JpZ2luYWw7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHByb3BzLnBhcnRpYWxzW29wdGlvbnMuYXJnc1swXV0gPSBvcHRpb25zLmZuO1xuXG4gICAgcmV0dXJuIHJldDtcbiAgfSk7XG59XG4iXX0=\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/handlebars/dist/cjs/handlebars/decorators/inline.js\n ** module id = 73\n ** module chunks = 0\n **/","'use strict';\n\nexports.__esModule = true;\n\nvar _utils = require('./utils');\n\nvar logger = {\n  methodMap: ['debug', 'info', 'warn', 'error'],\n  level: 'info',\n\n  // Maps a given level value to the `methodMap` indexes above.\n  lookupLevel: function lookupLevel(level) {\n    if (typeof level === 'string') {\n      var levelMap = _utils.indexOf(logger.methodMap, level.toLowerCase());\n      if (levelMap >= 0) {\n        level = levelMap;\n      } else {\n        level = parseInt(level, 10);\n      }\n    }\n\n    return level;\n  },\n\n  // Can be overridden in the host environment\n  log: function log(level) {\n    level = logger.lookupLevel(level);\n\n    if (typeof console !== 'undefined' && logger.lookupLevel(logger.level) <= level) {\n      var method = logger.methodMap[level];\n      if (!console[method]) {\n        // eslint-disable-line no-console\n        method = 'log';\n      }\n\n      for (var _len = arguments.length, message = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        message[_key - 1] = arguments[_key];\n      }\n\n      console[method].apply(console, message); // eslint-disable-line no-console\n    }\n  }\n};\n\nexports['default'] = logger;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2xvZ2dlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O3FCQUFzQixTQUFTOztBQUUvQixJQUFJLE1BQU0sR0FBRztBQUNYLFdBQVMsRUFBRSxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQztBQUM3QyxPQUFLLEVBQUUsTUFBTTs7O0FBR2IsYUFBVyxFQUFFLHFCQUFTLEtBQUssRUFBRTtBQUMzQixRQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsRUFBRTtBQUM3QixVQUFJLFFBQVEsR0FBRyxlQUFRLE1BQU0sQ0FBQyxTQUFTLEVBQUUsS0FBSyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUM7QUFDOUQsVUFBSSxRQUFRLElBQUksQ0FBQyxFQUFFO0FBQ2pCLGFBQUssR0FBRyxRQUFRLENBQUM7T0FDbEIsTUFBTTtBQUNMLGFBQUssR0FBRyxRQUFRLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO09BQzdCO0tBQ0Y7O0FBRUQsV0FBTyxLQUFLLENBQUM7R0FDZDs7O0FBR0QsS0FBRyxFQUFFLGFBQVMsS0FBSyxFQUFjO0FBQy9CLFNBQUssR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDOztBQUVsQyxRQUFJLE9BQU8sT0FBTyxLQUFLLFdBQVcsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLEVBQUU7QUFDL0UsVUFBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNyQyxVQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFOztBQUNwQixjQUFNLEdBQUcsS0FBSyxDQUFDO09BQ2hCOzt3Q0FQbUIsT0FBTztBQUFQLGVBQU87OztBQVEzQixhQUFPLENBQUMsTUFBTSxPQUFDLENBQWYsT0FBTyxFQUFZLE9BQU8sQ0FBQyxDQUFDO0tBQzdCO0dBQ0Y7Q0FDRixDQUFDOztxQkFFYSxNQUFNIiwiZmlsZSI6ImxvZ2dlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7aW5kZXhPZn0gZnJvbSAnLi91dGlscyc7XG5cbmxldCBsb2dnZXIgPSB7XG4gIG1ldGhvZE1hcDogWydkZWJ1ZycsICdpbmZvJywgJ3dhcm4nLCAnZXJyb3InXSxcbiAgbGV2ZWw6ICdpbmZvJyxcblxuICAvLyBNYXBzIGEgZ2l2ZW4gbGV2ZWwgdmFsdWUgdG8gdGhlIGBtZXRob2RNYXBgIGluZGV4ZXMgYWJvdmUuXG4gIGxvb2t1cExldmVsOiBmdW5jdGlvbihsZXZlbCkge1xuICAgIGlmICh0eXBlb2YgbGV2ZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICBsZXQgbGV2ZWxNYXAgPSBpbmRleE9mKGxvZ2dlci5tZXRob2RNYXAsIGxldmVsLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgaWYgKGxldmVsTWFwID49IDApIHtcbiAgICAgICAgbGV2ZWwgPSBsZXZlbE1hcDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldmVsID0gcGFyc2VJbnQobGV2ZWwsIDEwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbGV2ZWw7XG4gIH0sXG5cbiAgLy8gQ2FuIGJlIG92ZXJyaWRkZW4gaW4gdGhlIGhvc3QgZW52aXJvbm1lbnRcbiAgbG9nOiBmdW5jdGlvbihsZXZlbCwgLi4ubWVzc2FnZSkge1xuICAgIGxldmVsID0gbG9nZ2VyLmxvb2t1cExldmVsKGxldmVsKTtcblxuICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbG9nZ2VyLmxvb2t1cExldmVsKGxvZ2dlci5sZXZlbCkgPD0gbGV2ZWwpIHtcbiAgICAgIGxldCBtZXRob2QgPSBsb2dnZXIubWV0aG9kTWFwW2xldmVsXTtcbiAgICAgIGlmICghY29uc29sZVttZXRob2RdKSB7ICAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgICAgIG1ldGhvZCA9ICdsb2cnO1xuICAgICAgfVxuICAgICAgY29uc29sZVttZXRob2RdKC4uLm1lc3NhZ2UpOyAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGxvZ2dlcjtcbiJdfQ==\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/handlebars/dist/cjs/handlebars/logger.js\n ** module id = 74\n ** module chunks = 0\n **/","// Build out our basic SafeString type\n'use strict';\n\nexports.__esModule = true;\nfunction SafeString(string) {\n  this.string = string;\n}\n\nSafeString.prototype.toString = SafeString.prototype.toHTML = function () {\n  return '' + this.string;\n};\n\nexports['default'] = SafeString;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL3NhZmUtc3RyaW5nLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFDQSxTQUFTLFVBQVUsQ0FBQyxNQUFNLEVBQUU7QUFDMUIsTUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7Q0FDdEI7O0FBRUQsVUFBVSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsVUFBVSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsWUFBVztBQUN2RSxTQUFPLEVBQUUsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0NBQ3pCLENBQUM7O3FCQUVhLFVBQVUiLCJmaWxlIjoic2FmZS1zdHJpbmcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBCdWlsZCBvdXQgb3VyIGJhc2ljIFNhZmVTdHJpbmcgdHlwZVxuZnVuY3Rpb24gU2FmZVN0cmluZyhzdHJpbmcpIHtcbiAgdGhpcy5zdHJpbmcgPSBzdHJpbmc7XG59XG5cblNhZmVTdHJpbmcucHJvdG90eXBlLnRvU3RyaW5nID0gU2FmZVN0cmluZy5wcm90b3R5cGUudG9IVE1MID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiAnJyArIHRoaXMuc3RyaW5nO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU2FmZVN0cmluZztcbiJdfQ==\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/handlebars/dist/cjs/handlebars/safe-string.js\n ** module id = 75\n ** module chunks = 0\n **/","'use strict';\n\nexports.__esModule = true;\nexports.checkRevision = checkRevision;\nexports.template = template;\nexports.wrapProgram = wrapProgram;\nexports.resolvePartial = resolvePartial;\nexports.invokePartial = invokePartial;\nexports.noop = noop;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nvar _utils = require('./utils');\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _exception = require('./exception');\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nvar _base = require('./base');\n\nfunction checkRevision(compilerInfo) {\n  var compilerRevision = compilerInfo && compilerInfo[0] || 1,\n      currentRevision = _base.COMPILER_REVISION;\n\n  if (compilerRevision !== currentRevision) {\n    if (compilerRevision < currentRevision) {\n      var runtimeVersions = _base.REVISION_CHANGES[currentRevision],\n          compilerVersions = _base.REVISION_CHANGES[compilerRevision];\n      throw new _exception2['default']('Template was precompiled with an older version of Handlebars than the current runtime. ' + 'Please update your precompiler to a newer version (' + runtimeVersions + ') or downgrade your runtime to an older version (' + compilerVersions + ').');\n    } else {\n      // Use the embedded version info since the runtime doesn't know about this revision yet\n      throw new _exception2['default']('Template was precompiled with a newer version of Handlebars than the current runtime. ' + 'Please update your runtime to a newer version (' + compilerInfo[1] + ').');\n    }\n  }\n}\n\nfunction template(templateSpec, env) {\n  /* istanbul ignore next */\n  if (!env) {\n    throw new _exception2['default']('No environment passed to template');\n  }\n  if (!templateSpec || !templateSpec.main) {\n    throw new _exception2['default']('Unknown template object: ' + typeof templateSpec);\n  }\n\n  templateSpec.main.decorator = templateSpec.main_d;\n\n  // Note: Using env.VM references rather than local var references throughout this section to allow\n  // for external users to override these as psuedo-supported APIs.\n  env.VM.checkRevision(templateSpec.compiler);\n\n  function invokePartialWrapper(partial, context, options) {\n    if (options.hash) {\n      context = Utils.extend({}, context, options.hash);\n      if (options.ids) {\n        options.ids[0] = true;\n      }\n    }\n\n    partial = env.VM.resolvePartial.call(this, partial, context, options);\n    var result = env.VM.invokePartial.call(this, partial, context, options);\n\n    if (result == null && env.compile) {\n      options.partials[options.name] = env.compile(partial, templateSpec.compilerOptions, env);\n      result = options.partials[options.name](context, options);\n    }\n    if (result != null) {\n      if (options.indent) {\n        var lines = result.split('\\n');\n        for (var i = 0, l = lines.length; i < l; i++) {\n          if (!lines[i] && i + 1 === l) {\n            break;\n          }\n\n          lines[i] = options.indent + lines[i];\n        }\n        result = lines.join('\\n');\n      }\n      return result;\n    } else {\n      throw new _exception2['default']('The partial ' + options.name + ' could not be compiled when running in runtime-only mode');\n    }\n  }\n\n  // Just add water\n  var container = {\n    strict: function strict(obj, name) {\n      if (!(name in obj)) {\n        throw new _exception2['default']('\"' + name + '\" not defined in ' + obj);\n      }\n      return obj[name];\n    },\n    lookup: function lookup(depths, name) {\n      var len = depths.length;\n      for (var i = 0; i < len; i++) {\n        if (depths[i] && depths[i][name] != null) {\n          return depths[i][name];\n        }\n      }\n    },\n    lambda: function lambda(current, context) {\n      return typeof current === 'function' ? current.call(context) : current;\n    },\n\n    escapeExpression: Utils.escapeExpression,\n    invokePartial: invokePartialWrapper,\n\n    fn: function fn(i) {\n      var ret = templateSpec[i];\n      ret.decorator = templateSpec[i + '_d'];\n      return ret;\n    },\n\n    programs: [],\n    program: function program(i, data, declaredBlockParams, blockParams, depths) {\n      var programWrapper = this.programs[i],\n          fn = this.fn(i);\n      if (data || depths || blockParams || declaredBlockParams) {\n        programWrapper = wrapProgram(this, i, fn, data, declaredBlockParams, blockParams, depths);\n      } else if (!programWrapper) {\n        programWrapper = this.programs[i] = wrapProgram(this, i, fn);\n      }\n      return programWrapper;\n    },\n\n    data: function data(value, depth) {\n      while (value && depth--) {\n        value = value._parent;\n      }\n      return value;\n    },\n    merge: function merge(param, common) {\n      var obj = param || common;\n\n      if (param && common && param !== common) {\n        obj = Utils.extend({}, common, param);\n      }\n\n      return obj;\n    },\n\n    noop: env.VM.noop,\n    compilerInfo: templateSpec.compiler\n  };\n\n  function ret(context) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    var data = options.data;\n\n    ret._setup(options);\n    if (!options.partial && templateSpec.useData) {\n      data = initData(context, data);\n    }\n    var depths = undefined,\n        blockParams = templateSpec.useBlockParams ? [] : undefined;\n    if (templateSpec.useDepths) {\n      if (options.depths) {\n        depths = context !== options.depths[0] ? [context].concat(options.depths) : options.depths;\n      } else {\n        depths = [context];\n      }\n    }\n\n    function main(context /*, options*/) {\n      return '' + templateSpec.main(container, context, container.helpers, container.partials, data, blockParams, depths);\n    }\n    main = executeDecorators(templateSpec.main, main, container, options.depths || [], data, blockParams);\n    return main(context, options);\n  }\n  ret.isTop = true;\n\n  ret._setup = function (options) {\n    if (!options.partial) {\n      container.helpers = container.merge(options.helpers, env.helpers);\n\n      if (templateSpec.usePartial) {\n        container.partials = container.merge(options.partials, env.partials);\n      }\n      if (templateSpec.usePartial || templateSpec.useDecorators) {\n        container.decorators = container.merge(options.decorators, env.decorators);\n      }\n    } else {\n      container.helpers = options.helpers;\n      container.partials = options.partials;\n      container.decorators = options.decorators;\n    }\n  };\n\n  ret._child = function (i, data, blockParams, depths) {\n    if (templateSpec.useBlockParams && !blockParams) {\n      throw new _exception2['default']('must pass block params');\n    }\n    if (templateSpec.useDepths && !depths) {\n      throw new _exception2['default']('must pass parent depths');\n    }\n\n    return wrapProgram(container, i, templateSpec[i], data, 0, blockParams, depths);\n  };\n  return ret;\n}\n\nfunction wrapProgram(container, i, fn, data, declaredBlockParams, blockParams, depths) {\n  function prog(context) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    var currentDepths = depths;\n    if (depths && context !== depths[0]) {\n      currentDepths = [context].concat(depths);\n    }\n\n    return fn(container, context, container.helpers, container.partials, options.data || data, blockParams && [options.blockParams].concat(blockParams), currentDepths);\n  }\n\n  prog = executeDecorators(fn, prog, container, depths, data, blockParams);\n\n  prog.program = i;\n  prog.depth = depths ? depths.length : 0;\n  prog.blockParams = declaredBlockParams || 0;\n  return prog;\n}\n\nfunction resolvePartial(partial, context, options) {\n  if (!partial) {\n    if (options.name === '@partial-block') {\n      partial = options.data['partial-block'];\n    } else {\n      partial = options.partials[options.name];\n    }\n  } else if (!partial.call && !options.name) {\n    // This is a dynamic partial that returned a string\n    options.name = partial;\n    partial = options.partials[partial];\n  }\n  return partial;\n}\n\nfunction invokePartial(partial, context, options) {\n  options.partial = true;\n  if (options.ids) {\n    options.data.contextPath = options.ids[0] || options.data.contextPath;\n  }\n\n  var partialBlock = undefined;\n  if (options.fn && options.fn !== noop) {\n    options.data = _base.createFrame(options.data);\n    partialBlock = options.data['partial-block'] = options.fn;\n\n    if (partialBlock.partials) {\n      options.partials = Utils.extend({}, options.partials, partialBlock.partials);\n    }\n  }\n\n  if (partial === undefined && partialBlock) {\n    partial = partialBlock;\n  }\n\n  if (partial === undefined) {\n    throw new _exception2['default']('The partial ' + options.name + ' could not be found');\n  } else if (partial instanceof Function) {\n    return partial(context, options);\n  }\n}\n\nfunction noop() {\n  return '';\n}\n\nfunction initData(context, data) {\n  if (!data || !('root' in data)) {\n    data = data ? _base.createFrame(data) : {};\n    data.root = context;\n  }\n  return data;\n}\n\nfunction executeDecorators(fn, prog, container, depths, data, blockParams) {\n  if (fn.decorator) {\n    var props = {};\n    prog = fn.decorator(prog, props, container, depths && depths[0], data, blockParams, depths);\n    Utils.extend(prog, props);\n  }\n  return prog;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL3J1bnRpbWUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7cUJBQXVCLFNBQVM7O0lBQXBCLEtBQUs7O3lCQUNLLGFBQWE7Ozs7b0JBQzhCLFFBQVE7O0FBRWxFLFNBQVMsYUFBYSxDQUFDLFlBQVksRUFBRTtBQUMxQyxNQUFNLGdCQUFnQixHQUFHLFlBQVksSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztNQUN2RCxlQUFlLDBCQUFvQixDQUFDOztBQUUxQyxNQUFJLGdCQUFnQixLQUFLLGVBQWUsRUFBRTtBQUN4QyxRQUFJLGdCQUFnQixHQUFHLGVBQWUsRUFBRTtBQUN0QyxVQUFNLGVBQWUsR0FBRyx1QkFBaUIsZUFBZSxDQUFDO1VBQ25ELGdCQUFnQixHQUFHLHVCQUFpQixnQkFBZ0IsQ0FBQyxDQUFDO0FBQzVELFlBQU0sMkJBQWMseUZBQXlGLEdBQ3ZHLHFEQUFxRCxHQUFHLGVBQWUsR0FBRyxtREFBbUQsR0FBRyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsQ0FBQztLQUNoSyxNQUFNOztBQUVMLFlBQU0sMkJBQWMsd0ZBQXdGLEdBQ3RHLGlEQUFpRCxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztLQUNuRjtHQUNGO0NBQ0Y7O0FBRU0sU0FBUyxRQUFRLENBQUMsWUFBWSxFQUFFLEdBQUcsRUFBRTs7QUFFMUMsTUFBSSxDQUFDLEdBQUcsRUFBRTtBQUNSLFVBQU0sMkJBQWMsbUNBQW1DLENBQUMsQ0FBQztHQUMxRDtBQUNELE1BQUksQ0FBQyxZQUFZLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFO0FBQ3ZDLFVBQU0sMkJBQWMsMkJBQTJCLEdBQUcsT0FBTyxZQUFZLENBQUMsQ0FBQztHQUN4RTs7QUFFRCxjQUFZLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxZQUFZLENBQUMsTUFBTSxDQUFDOzs7O0FBSWxELEtBQUcs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U0FBUyxJQUFJLEdBQUc7QUFBRSxTQUFPLEVBQUUsQ0FBQztDQUFFOztBQUVyQyxTQUFTLFFBQVEsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFO0FBQy9CLE1BQUksQ0FBQyxJQUFJLElBQUksRUFBRSxNQUFNLElBQUksSUFBSSxDQUFBLEFBQUMsRUFBRTtBQUM5QixRQUFJLEdBQUcsSUFBSSxHQUFHLGtCQUFZLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNyQyxRQUFJLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQztHQUNyQjtBQUNELFNBQU8sSUFBSSxDQUFDO0NBQ2I7O0FBRUQsU0FBUyxpQkFBaUIsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRTtBQUN6RSxNQUFJLEVBQUUsQ0FBQyxTQUFTLEVBQUU7QUFDaEIsUUFBSSxLQUFLLEdBQUcsRUFBRSxDQUFDO0FBQ2YsUUFBSSxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsTUFBTSxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQzVGLFNBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO0dBQzNCO0FBQ0QsU0FBTyxJQUFJLENBQUM7Q0FDYiIsImZpbGUiOiJydW50aW1lLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgRXhjZXB0aW9uIGZyb20gJy4vZXhjZXB0aW9uJztcbmltcG9ydCB7IENPTVBJTEVSX1JFVklTSU9OLCBSRVZJU0lPTl9DSEFOR0VTLCBjcmVhdGVGcmFtZSB9IGZyb20gJy4vYmFzZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja1JldmlzaW9uKGNvbXBpbGVySW5mbykge1xuICBjb25zdCBjb21waWxlclJldmlzaW9uID0gY29tcGlsZXJJbmZvICYmIGNvbXBpbGVySW5mb1swXSB8fCAxLFxuICAgICAgICBjdXJyZW50UmV2aXNpb24gPSBDT01QSUxFUl9SRVZJU0lPTjtcblxuICBpZiAoY29tcGlsZXJSZXZpc2lvbiAhPT0gY3VycmVudFJldmlzaW9uKSB7XG4gICAgaWYgKGNvbXBpbGVyUmV2aXNpb24gPCBjdXJyZW50UmV2aXNpb24pIHtcbiAgICAgIGNvbnN0IHJ1bnRpbWVWZXJzaW9ucyA9IFJFVklTSU9OX0NIQU5HRVNbY3VycmVudFJldmlzaW9uXSxcbiAgICAgICAgICAgIGNvbXBpbGVyVmVyc2lvbnMgPSBSRVZJU0lPTl9DSEFOR0VTW2NvbXBpbGVyUmV2aXNpb25dO1xuICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignVGVtcGxhdGUgd2FzIHByZWNvbXBpbGVkIHdpdGggYW4gb2xkZXIgdmVyc2lvbiBvZiBIYW5kbGViYXJzIHRoYW4gdGhlIGN1cnJlbnQgcnVudGltZS4gJyArXG4gICAgICAgICAgICAnUGxlYXNlIHVwZGF0ZSB5b3VyIHByZWNvbXBpbGVyIHRvIGEgbmV3ZXIgdmVyc2lvbiAoJyArIHJ1bnRpbWVWZXJzaW9ucyArICcpIG9yIGRvd25ncmFkZSB5b3VyIHJ1bnRpbWUgdG8gYW4gb2xkZXIgdmVyc2lvbiAoJyArIGNvbXBpbGVyVmVyc2lvbnMgKyAnKS4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVXNlIHRoZSBlbWJlZGRlZCB2ZXJzaW9uIGluZm8gc2luY2UgdGhlIHJ1bnRpbWUgZG9lc24ndCBrbm93IGFib3V0IHRoaXMgcmV2aXNpb24geWV0XG4gICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdUZW1wbGF0ZSB3YXMgcHJlY29tcGlsZWQgd2l0aCBhIG5ld2VyIHZlcnNpb24gb2YgSGFuZGxlYmFycyB0aGFuIHRoZSBjdXJyZW50IHJ1bnRpbWUuICcgK1xuICAgICAgICAgICAgJ1BsZWFzZSB1cGRhdGUgeW91ciBydW50aW1lIHRvIGEgbmV3ZXIgdmVyc2lvbiAoJyArIGNvbXBpbGVySW5mb1sxXSArICcpLicpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGUodGVtcGxhdGVTcGVjLCBlbnYpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgaWYgKCFlbnYpIHtcbiAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdObyBlbnZpcm9ubWVudCBwYXNzZWQgdG8gdGVtcGxhdGUnKTtcbiAgfVxuICBpZiAoIXRlbXBsYXRlU3BlYyB8fCAhdGVtcGxhdGVTcGVjLm1haW4pIHtcbiAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdVbmtub3duIHRlbXBsYXRlIG9iamVjdDogJyArIHR5cGVvZiB0ZW1wbGF0ZVNwZWMpO1xuICB9XG5cbiAgdGVtcGxhdGVTcGVjLm1haW4uZGVjb3JhdG9yID0gdGVtcGxhdGVTcGVjLm1haW5fZDtcblxuICAvLyBOb3RlOiBVc2luZyBlbnYuVk0gcmVmZXJlbmNlcyByYXRoZXIgdGhhbiBsb2NhbCB2YXIgcmVmZXJlbmNlcyB0aHJvdWdob3V0IHRoaXMgc2VjdGlvbiB0byBhbGxvd1xuICAvLyBmb3IgZXh0ZXJuYWwgdXNlcnMgdG8gb3ZlcnJpZGUgdGhlc2UgYXMgcHN1ZWRvLXN1cHBvcnRlZCBBUElzLlxuICBlbnYuVk0uY2hlY2tSZXZpc2lvbih0ZW1wbGF0ZVNwZWMuY29tcGlsZXIpO1xuXG4gIGZ1bmN0aW9uIGludm9rZVBhcnRpYWxXcmFwcGVyKHBhcnRpYWwsIGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5oYXNoKSB7XG4gICAgICBjb250ZXh0ID0gVXRpbHMuZXh0ZW5kKHt9LCBjb250ZXh0LCBvcHRpb25zLmhhc2gpO1xuICAgICAgaWYgKG9wdGlvbnMuaWRzKSB7XG4gICAgICAgIG9wdGlvbnMuaWRzWzBdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwYXJ0aWFsID0gZW52LlZNLnJlc29sdmVQYXJ0aWFsLmNhbGwodGhpcywgcGFydGlhbCwgY29udGV4dCwgb3B0aW9ucyk7XG4gICAgbGV0IHJlc3VsdCA9IGVudi5WTS5pbnZva2VQYXJ0aWFsLmNhbGwodGhpcywgcGFydGlhbCwgY29udGV4dCwgb3B0aW9ucyk7XG5cbiAgICBpZiAocmVzdWx0ID09IG51bGwgJiYgZW52LmNvbXBpbGUpIHtcbiAgICAgIG9wdGlvbnMucGFydGlhbHNbb3B0aW9ucy5uYW1lXSA9IGVudi5jb21waWxlKHBhcnRpYWwsIHRlbXBsYXRlU3BlYy5jb21waWxlck9wdGlvbnMsIGVudik7XG4gICAgICByZXN1bHQgPSBvcHRpb25zLnBhcnRpYWxzW29wdGlvbnMubmFtZV0oY29udGV4dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGlmIChyZXN1bHQgIT0gbnVsbCkge1xuICAgICAgaWYgKG9wdGlvbnMuaW5kZW50KSB7XG4gICAgICAgIGxldCBsaW5lcyA9IHJlc3VsdC5zcGxpdCgnXFxuJyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gbGluZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCFsaW5lc1tpXSAmJiBpICsgMSA9PT0gbCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGluZXNbaV0gPSBvcHRpb25zLmluZGVudCArIGxpbmVzW2ldO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdCA9IGxpbmVzLmpvaW4oJ1xcbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignVGhlIHBhcnRpYWwgJyArIG9wdGlvbnMubmFtZSArICcgY291bGQgbm90IGJlIGNvbXBpbGVkIHdoZW4gcnVubmluZyBpbiBydW50aW1lLW9ubHkgbW9kZScpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEp1c3QgYWRkIHdhdGVyXG4gIGxldCBjb250YWluZXIgPSB7XG4gICAgc3RyaWN0OiBmdW5jdGlvbihvYmosIG5hbWUpIHtcbiAgICAgIGlmICghKG5hbWUgaW4gb2JqKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdcIicgKyBuYW1lICsgJ1wiIG5vdCBkZWZpbmVkIGluICcgKyBvYmopO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9ialtuYW1lXTtcbiAgICB9LFxuICAgIGxvb2t1cDogZnVuY3Rpb24oZGVwdGhzLCBuYW1lKSB7XG4gICAgICBjb25zdCBsZW4gPSBkZXB0aHMubGVuZ3RoO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBpZiAoZGVwdGhzW2ldICYmIGRlcHRoc1tpXVtuYW1lXSAhPSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGRlcHRoc1tpXVtuYW1lXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgbGFtYmRhOiBmdW5jdGlvbihjdXJyZW50LCBjb250ZXh0KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGN1cnJlbnQgPT09ICdmdW5jdGlvbicgPyBjdXJyZW50LmNhbGwoY29udGV4dCkgOiBjdXJyZW50O1xuICAgIH0sXG5cbiAgICBlc2NhcGVFeHByZXNzaW9uOiBVdGlscy5lc2NhcGVFeHByZXNzaW9uLFxuICAgIGludm9rZVBhcnRpYWw6IGludm9rZVBhcnRpYWxXcmFwcGVyLFxuXG4gICAgZm46IGZ1bmN0aW9uKGkpIHtcbiAgICAgIGxldCByZXQgPSB0ZW1wbGF0ZVNwZWNbaV07XG4gICAgICByZXQuZGVjb3JhdG9yID0gdGVtcGxhdGVTcGVjW2kgKyAnX2QnXTtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfSxcblxuICAgIHByb2dyYW1zOiBbXSxcbiAgICBwcm9ncmFtOiBmdW5jdGlvbihpLCBkYXRhLCBkZWNsYXJlZEJsb2NrUGFyYW1zLCBibG9ja1BhcmFtcywgZGVwdGhzKSB7XG4gICAgICBsZXQgcHJvZ3JhbVdyYXBwZXIgPSB0aGlzLnByb2dyYW1zW2ldLFxuICAgICAgICAgIGZuID0gdGhpcy5mbihpKTtcbiAgICAgIGlmIChkYXRhIHx8IGRlcHRocyB8fCBibG9ja1BhcmFtcyB8fCBkZWNsYXJlZEJsb2NrUGFyYW1zKSB7XG4gICAgICAgIHByb2dyYW1XcmFwcGVyID0gd3JhcFByb2dyYW0odGhpcywgaSwgZm4sIGRhdGEsIGRlY2xhcmVkQmxvY2tQYXJhbXMsIGJsb2NrUGFyYW1zLCBkZXB0aHMpO1xuICAgICAgfSBlbHNlIGlmICghcHJvZ3JhbVdyYXBwZXIpIHtcbiAgICAgICAgcHJvZ3JhbVdyYXBwZXIgPSB0aGlzLnByb2dyYW1zW2ldID0gd3JhcFByb2dyYW0odGhpcywgaSwgZm4pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHByb2dyYW1XcmFwcGVyO1xuICAgIH0sXG5cbiAgICBkYXRhOiBmdW5jdGlvbih2YWx1ZSwgZGVwdGgpIHtcbiAgICAgIHdoaWxlICh2YWx1ZSAmJiBkZXB0aC0tKSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWUuX3BhcmVudDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIG1lcmdlOiBmdW5jdGlvbihwYXJhbSwgY29tbW9uKSB7XG4gICAgICBsZXQgb2JqID0gcGFyYW0gfHwgY29tbW9uO1xuXG4gICAgICBpZiAocGFyYW0gJiYgY29tbW9uICYmIChwYXJhbSAhPT0gY29tbW9uKSkge1xuICAgICAgICBvYmogPSBVdGlscy5leHRlbmQoe30sIGNvbW1vbiwgcGFyYW0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG5cbiAgICBub29wOiBlbnYuVk0ubm9vcCxcbiAgICBjb21waWxlckluZm86IHRlbXBsYXRlU3BlYy5jb21waWxlclxuICB9O1xuXG4gIGZ1bmN0aW9uIHJldChjb250ZXh0LCBvcHRpb25zID0ge30pIHtcbiAgICBsZXQgZGF0YSA9IG9wdGlvbnMuZGF0YTtcblxuICAgIHJldC5fc2V0dXAob3B0aW9ucyk7XG4gICAgaWYgKCFvcHRpb25zLnBhcnRpYWwgJiYgdGVtcGxhdGVTcGVjLnVzZURhdGEpIHtcbiAgICAgIGRhdGEgPSBpbml0RGF0YShjb250ZXh0LCBkYXRhKTtcbiAgICB9XG4gICAgbGV0IGRlcHRocyxcbiAgICAgICAgYmxvY2tQYXJhbXMgPSB0ZW1wbGF0ZVNwZWMudXNlQmxvY2tQYXJhbXMgPyBbXSA6IHVuZGVmaW5lZDtcbiAgICBpZiAodGVtcGxhdGVTcGVjLnVzZURlcHRocykge1xuICAgICAgaWYgKG9wdGlvbnMuZGVwdGhzKSB7XG4gICAgICAgIGRlcHRocyA9IGNvbnRleHQgIT09IG9wdGlvbnMuZGVwdGhzWzBdID8gW2NvbnRleHRdLmNvbmNhdChvcHRpb25zLmRlcHRocykgOiBvcHRpb25zLmRlcHRocztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlcHRocyA9IFtjb250ZXh0XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWluKGNvbnRleHQvKiwgb3B0aW9ucyovKSB7XG4gICAgICByZXR1cm4gJycgKyB0ZW1wbGF0ZVNwZWMubWFpbihjb250YWluZXIsIGNvbnRleHQsIGNvbnRhaW5lci5oZWxwZXJzLCBjb250YWluZXIucGFydGlhbHMsIGRhdGEsIGJsb2NrUGFyYW1zLCBkZXB0aHMpO1xuICAgIH1cbiAgICBtYWluID0gZXhlY3V0ZURlY29yYXRvcnModGVtcGxhdGVTcGVjLm1haW4sIG1haW4sIGNvbnRhaW5lciwgb3B0aW9ucy5kZXB0aHMgfHwgW10sIGRhdGEsIGJsb2NrUGFyYW1zKTtcbiAgICByZXR1cm4gbWFpbihjb250ZXh0LCBvcHRpb25zKTtcbiAgfVxuICByZXQuaXNUb3AgPSB0cnVlO1xuXG4gIHJldC5fc2V0dXAgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zLnBhcnRpYWwpIHtcbiAgICAgIGNvbnRhaW5lci5oZWxwZXJzID0gY29udGFpbmVyLm1lcmdlKG9wdGlvbnMuaGVscGVycywgZW52LmhlbHBlcnMpO1xuXG4gICAgICBpZiAodGVtcGxhdGVTcGVjLnVzZVBhcnRpYWwpIHtcbiAgICAgICAgY29udGFpbmVyLnBhcnRpYWxzID0gY29udGFpbmVyLm1lcmdlKG9wdGlvbnMucGFydGlhbHMsIGVudi5wYXJ0aWFscyk7XG4gICAgICB9XG4gICAgICBpZiAodGVtcGxhdGVTcGVjLnVzZVBhcnRpYWwgfHwgdGVtcGxhdGVTcGVjLnVzZURlY29yYXRvcnMpIHtcbiAgICAgICAgY29udGFpbmVyLmRlY29yYXRvcnMgPSBjb250YWluZXIubWVyZ2Uob3B0aW9ucy5kZWNvcmF0b3JzLCBlbnYuZGVjb3JhdG9ycyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRhaW5lci5oZWxwZXJzID0gb3B0aW9ucy5oZWxwZXJzO1xuICAgICAgY29udGFpbmVyLnBhcnRpYWxzID0gb3B0aW9ucy5wYXJ0aWFscztcbiAgICAgIGNvbnRhaW5lci5kZWNvcmF0b3JzID0gb3B0aW9ucy5kZWNvcmF0b3JzO1xuICAgIH1cbiAgfTtcblxuICByZXQuX2NoaWxkID0gZnVuY3Rpb24oaSwgZGF0YSwgYmxvY2tQYXJhbXMsIGRlcHRocykge1xuICAgIGlmICh0ZW1wbGF0ZVNwZWMudXNlQmxvY2tQYXJhbXMgJiYgIWJsb2NrUGFyYW1zKSB7XG4gICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdtdXN0IHBhc3MgYmxvY2sgcGFyYW1zJyk7XG4gICAgfVxuICAgIGlmICh0ZW1wbGF0ZVNwZWMudXNlRGVwdGhzICYmICFkZXB0aHMpIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ211c3QgcGFzcyBwYXJlbnQgZGVwdGhzJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHdyYXBQcm9ncmFtKGNvbnRhaW5lciwgaSwgdGVtcGxhdGVTcGVjW2ldLCBkYXRhLCAwLCBibG9ja1BhcmFtcywgZGVwdGhzKTtcbiAgfTtcbiAgcmV0dXJuIHJldDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdyYXBQcm9ncmFtKGNvbnRhaW5lciwgaSwgZm4sIGRhdGEsIGRlY2xhcmVkQmxvY2tQYXJhbXMsIGJsb2NrUGFyYW1zLCBkZXB0aHMpIHtcbiAgZnVuY3Rpb24gcHJvZyhjb250ZXh0LCBvcHRpb25zID0ge30pIHtcbiAgICBsZXQgY3VycmVudERlcHRocyA9IGRlcHRocztcbiAgICBpZiAoZGVwdGhzICYmIGNvbnRleHQgIT09IGRlcHRoc1swXSkge1xuICAgICAgY3VycmVudERlcHRocyA9IFtjb250ZXh0XS5jb25jYXQoZGVwdGhzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZm4oY29udGFpbmVyLFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICBjb250YWluZXIuaGVscGVycywgY29udGFpbmVyLnBhcnRpYWxzLFxuICAgICAgICBvcHRpb25zLmRhdGEgfHwgZGF0YSxcbiAgICAgICAgYmxvY2tQYXJhbXMgJiYgW29wdGlvbnMuYmxvY2tQYXJhbXNdLmNvbmNhdChibG9ja1BhcmFtcyksXG4gICAgICAgIGN1cnJlbnREZXB0aHMpO1xuICB9XG5cbiAgcHJvZyA9IGV4ZWN1dGVEZWNvcmF0b3JzKGZuLCBwcm9nLCBjb250YWluZXIsIGRlcHRocywgZGF0YSwgYmxvY2tQYXJhbXMpO1xuXG4gIHByb2cucHJvZ3JhbSA9IGk7XG4gIHByb2cuZGVwdGggPSBkZXB0aHMgPyBkZXB0aHMubGVuZ3RoIDogMDtcbiAgcHJvZy5ibG9ja1BhcmFtcyA9IGRlY2xhcmVkQmxvY2tQYXJhbXMgfHwgMDtcbiAgcmV0dXJuIHByb2c7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlUGFydGlhbChwYXJ0aWFsLCBjb250ZXh0LCBvcHRpb25zKSB7XG4gIGlmICghcGFydGlhbCkge1xuICAgIGlmIChvcHRpb25zLm5hbWUgPT09ICdAcGFydGlhbC1ibG9jaycpIHtcbiAgICAgIHBhcnRpYWwgPSBvcHRpb25zLmRhdGFbJ3BhcnRpYWwtYmxvY2snXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFydGlhbCA9IG9wdGlvbnMucGFydGlhbHNbb3B0aW9ucy5uYW1lXTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoIXBhcnRpYWwuY2FsbCAmJiAhb3B0aW9ucy5uYW1lKSB7XG4gICAgLy8gVGhpcyBpcyBhIGR5bmFtaWMgcGFydGlhbCB0aGF0IHJldHVybmVkIGEgc3RyaW5nXG4gICAgb3B0aW9ucy5uYW1lID0gcGFydGlhbDtcbiAgICBwYXJ0aWFsID0gb3B0aW9ucy5wYXJ0aWFsc1twYXJ0aWFsXTtcbiAgfVxuICByZXR1cm4gcGFydGlhbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGludm9rZVBhcnRpYWwocGFydGlhbCwgY29udGV4dCwgb3B0aW9ucykge1xuICBvcHRpb25zLnBhcnRpYWwgPSB0cnVlO1xuICBpZiAob3B0aW9ucy5pZHMpIHtcbiAgICBvcHRpb25zLmRhdGEuY29udGV4dFBhdGggPSBvcHRpb25zLmlkc1swXSB8fCBvcHRpb25zLmRhdGEuY29udGV4dFBhdGg7XG4gIH1cblxuICBsZXQgcGFydGlhbEJsb2NrO1xuICBpZiAob3B0aW9ucy5mbiAmJiBvcHRpb25zLmZuICE9PSBub29wKSB7XG4gICAgb3B0aW9ucy5kYXRhID0gY3JlYXRlRnJhbWUob3B0aW9ucy5kYXRhKTtcbiAgICBwYXJ0aWFsQmxvY2sgPSBvcHRpb25zLmRhdGFbJ3BhcnRpYWwtYmxvY2snXSA9IG9wdGlvbnMuZm47XG5cbiAgICBpZiAocGFydGlhbEJsb2NrLnBhcnRpYWxzKSB7XG4gICAgICBvcHRpb25zLnBhcnRpYWxzID0gVXRpbHMuZXh0ZW5kKHt9LCBvcHRpb25zLnBhcnRpYWxzLCBwYXJ0aWFsQmxvY2sucGFydGlhbHMpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChwYXJ0aWFsID09PSB1bmRlZmluZWQgJiYgcGFydGlhbEJsb2NrKSB7XG4gICAgcGFydGlhbCA9IHBhcnRpYWxCbG9jaztcbiAgfVxuXG4gIGlmIChwYXJ0aWFsID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdUaGUgcGFydGlhbCAnICsgb3B0aW9ucy5uYW1lICsgJyBjb3VsZCBub3QgYmUgZm91bmQnKTtcbiAgfSBlbHNlIGlmIChwYXJ0aWFsIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICByZXR1cm4gcGFydGlhbChjb250ZXh0LCBvcHRpb25zKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9vcCgpIHsgcmV0dXJuICcnOyB9XG5cbmZ1bmN0aW9uIGluaXREYXRhKGNvbnRleHQsIGRhdGEpIHtcbiAgaWYgKCFkYXRhIHx8ICEoJ3Jvb3QnIGluIGRhdGEpKSB7XG4gICAgZGF0YSA9IGRhdGEgPyBjcmVhdGVGcmFtZShkYXRhKSA6IHt9O1xuICAgIGRhdGEucm9vdCA9IGNvbnRleHQ7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmZ1bmN0aW9uIGV4ZWN1dGVEZWNvcmF0b3JzKGZuLCBwcm9nLCBjb250YWluZXIsIGRlcHRocywgZGF0YSwgYmxvY2tQYXJhbXMpIHtcbiAgaWYgKGZuLmRlY29yYXRvcikge1xuICAgIGxldCBwcm9wcyA9IHt9O1xuICAgIHByb2cgPSBmbi5kZWNvcmF0b3IocHJvZywgcHJvcHMsIGNvbnRhaW5lciwgZGVwdGhzICYmIGRlcHRoc1swXSwgZGF0YSwgYmxvY2tQYXJhbXMsIGRlcHRocyk7XG4gICAgVXRpbHMuZXh0ZW5kKHByb2csIHByb3BzKTtcbiAgfVxuICByZXR1cm4gcHJvZztcbn1cbiJdfQ==\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/handlebars/dist/cjs/handlebars/runtime.js\n ** module id = 76\n ** module chunks = 0\n **/","/* global window */\n'use strict';\n\nexports.__esModule = true;\n\nexports['default'] = function (Handlebars) {\n  /* istanbul ignore next */\n  var root = typeof global !== 'undefined' ? global : window,\n      $Handlebars = root.Handlebars;\n  /* istanbul ignore next */\n  Handlebars.noConflict = function () {\n    if (root.Handlebars === Handlebars) {\n      root.Handlebars = $Handlebars;\n    }\n    return Handlebars;\n  };\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL25vLWNvbmZsaWN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O3FCQUNlLFVBQVMsVUFBVSxFQUFFOztBQUVsQyxNQUFJLElBQUksR0FBRyxPQUFPLE1BQU0sS0FBSyxXQUFXLEdBQUcsTUFBTSxHQUFHLE1BQU07TUFDdEQsV0FBVyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7O0FBRWxDLFlBQVUsQ0FBQyxVQUFVLEdBQUcsWUFBVztBQUNqQyxRQUFJLElBQUksQ0FBQyxVQUFVLEtBQUssVUFBVSxFQUFFO0FBQ2xDLFVBQUksQ0FBQyxVQUFVLEdBQUcsV0FBVyxDQUFDO0tBQy9CO0FBQ0QsV0FBTyxVQUFVLENBQUM7R0FDbkIsQ0FBQztDQUNIIiwiZmlsZSI6Im5vLWNvbmZsaWN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIHdpbmRvdyAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oSGFuZGxlYmFycykge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBsZXQgcm9vdCA9IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogd2luZG93LFxuICAgICAgJEhhbmRsZWJhcnMgPSByb290LkhhbmRsZWJhcnM7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIEhhbmRsZWJhcnMubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChyb290LkhhbmRsZWJhcnMgPT09IEhhbmRsZWJhcnMpIHtcbiAgICAgIHJvb3QuSGFuZGxlYmFycyA9ICRIYW5kbGViYXJzO1xuICAgIH1cbiAgICByZXR1cm4gSGFuZGxlYmFycztcbiAgfTtcbn1cbiJdfQ==\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/handlebars/dist/cjs/handlebars/no-conflict.js\n ** module id = 77\n ** module chunks = 0\n **/","var Handlebars = require(\"C:\\\\projects\\\\FlaTWorld\\\\node_modules\\\\handlebars\\\\runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=container.escapeExpression;\n\n  return \"<span style='font-size:200%;display:block;margin-bottom:20px;'>\\r\\n  \"\n    + alias1(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : {},{\"name\":\"title\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n</span>\\r\\n<ul>\\r\\n  <li>\\r\\n    \"\n    + alias1(container.lambda(((stack1 = (depth0 != null ? depth0.object : depth0)) != null ? stack1.name : stack1), depth0))\n    + \"\\r\\n  </li>\\r\\n</ul>\";\n},\"useData\":true});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/UIs/default/layout/singleSelection.handlebars\n ** module id = 78\n ** module chunks = 0\n **/","/* =============== Functions for drawing arrows ================ */\r\n\r\n// From the website: http://www.dbp-consulting.com/tutorials/canvas/CanvasArrow.html\r\n/*\r\n  @param {int} x1,y1 - the line of the shaft starts here\r\n  @param {int} x2,y2 - the line of the shaft ends here\r\n  @param {int or function} style - type of head to draw\r\n      0 - filled head with back a curve drawn with arcTo\r\n          n.b. some browsers have an arcTo bug that make this look bizarre\r\n      1 - filled head with back a straight line\r\n      2 - unfilled but stroked head\r\n      3 - filled head with back a curve drawn with quadraticCurveTo\r\n      4 - filled head with back a curve drawn with bezierCurveTo\r\n          function(ctx,x0,y0,x1,y1,x2,y2,style) - a function provided by the user to draw the head. Point (x1,y1) is the same as the end of the line, and (x0,y0) and (x2,y2) are the two back corners. The style argument is the this for the function. An example that just draws little circles at each corner of the arrow head is shown later in this document.\r\n      default 3 (filled head with quadratic back)\r\n  @param {int} which - which end(s) get the arrow\r\n      0 - neither\r\n      1 - x2,y2 end\r\n      2 - x1,y1 end\r\n      3 - (that's 1+2) both ends\r\n      default 1 (destination end gets the arrow)\r\n  @param {float} angle - the angle θ from shaft to one side of arrow head - default π/8 radians (22 1/2°, half of a 45°)\r\n  @param {int} length - the distance d in pixels from arrow point back along the shaft to the back of the arrow head - default 10px\r\n\r\n  Passing in a custom head drawing routine, ie:\r\n  var headDrawer=function(ctx,x0,y0,x1,y1,x2,y2,style)\r\n  {\r\n      var radius=3;\r\n      var twoPI=2*Math.PI;\r\n      ctx.save();\r\n      ctx.beginPath();\r\n      ctx.arc(x0,y0,radius,0,twoPI,false);\r\n      ctx.stroke();\r\n      ctx.beginPath();\r\n      ctx.arc(x1,y1,radius,0,twoPI,false);\r\n      ctx.stroke();\r\n      ctx.beginPath();\r\n      ctx.arc(x2,y2,radius,0,twoPI,false);\r\n      ctx.stroke();\r\n      ctx.restore();\r\n  }\r\n\r\n  Modified to support easelJS (no context editing, instead graphics-object)\r\n\r\n  */\r\n \r\n /* eslint-disable */\r\nfunction drawArrow(shape, x1, y1, x2, y2, style, which, angle, d) {\r\n  var graphics = shape.graphics,\r\n    color = '#000',\r\n    angle1, topx, topy, angle2, botx, boty;\r\n\r\n  /* Ceason pointed to a problem when x1 or y1 were a string, and\r\n      concatenation would happen instead of addition */\r\n  if (typeof (x1) === 'string') x1 = parseInt(x1, 10);\r\n  if (typeof (y1) == 'string') y1 = parseInt(y1, 10);\r\n  if (typeof (x2) == 'string') x2 = parseInt(x2, 10);\r\n  if (typeof (y2) == 'string') y2 = parseInt(y2, 10);\r\n  style = typeof (style) != 'undefined' ? style : 3;\r\n  which = typeof (which) != 'undefined' ? which : 1; // end point gets arrow\r\n  angle = typeof (angle) != 'undefined' ? angle : Math.PI / 8;\r\n  d = typeof (d) != 'undefined' ? d : 10;\r\n  // default to using drawHead to draw the head, but if the style\r\n  // argument is a function, use it instead\r\n  var toDrawHead = typeof (style) != 'function' ? drawHead : style;\r\n\r\n  /* For ends with arrow we actually want to stop before we get to the arrow\r\n      so that wide lines won't put a flat end on the arrow. */\r\n  var dist = Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\r\n  var ratio = (dist - d / 3) / dist;\r\n  var tox, toy, fromx, fromy;\r\n  if (which & 1) {\r\n    tox = Math.round(x1 + (x2 - x1) * ratio);\r\n    toy = Math.round(y1 + (y2 - y1) * ratio);\r\n  } else {\r\n    tox = x2;\r\n    toy = y2;\r\n  }\r\n  if (which & 2) {\r\n    fromx = x1 + (x2 - x1) * (1 - ratio);\r\n    fromy = y1 + (y2 - y1) * (1 - ratio);\r\n  } else {\r\n    fromx = x1;\r\n    fromy = y1;\r\n  }\r\n\r\n  /* Original: Draw the shaft of the arrow\r\n     ctx.beginPath();\r\n     ctx.moveTo(fromx,fromy);\r\n     ctx.lineTo(tox,toy);\r\n     ctx.stroke(); */\r\n\r\n  // Modified easelJS-version:\r\n  graphics.beginStroke(color)\r\n     .moveTo(fromx, fromy)\r\n     .lineTo(tox, toy);\r\n\r\n  // calculate the angle of the line\r\n  var lineangle = Math.atan2(y2 - y1, x2 - x1);\r\n  // h is the line length of a side of the arrow head\r\n  var h = Math.abs(d / Math.cos(angle));\r\n\r\n  if (which & 1) { // handle far end arrow head\r\n    angle1 = lineangle + Math.PI + angle;\r\n    topx = x2 + Math.cos(angle1) * h;\r\n    topy = y2 + Math.sin(angle1) * h;\r\n    angle2 = lineangle + Math.PI - angle;\r\n    botx = x2 + Math.cos(angle2) * h;\r\n    boty = y2 + Math.sin(angle2) * h;\r\n    toDrawHead(graphics, topx, topy, x2, y2, botx, boty, style);\r\n  }\r\n  if (which & 2) { // handle near end arrow head\r\n    angle1 = lineangle + angle;\r\n    topx = x1 + Math.cos(angle1) * h;\r\n    topy = y1 + Math.sin(angle1) * h;\r\n    angle2 = lineangle - angle;\r\n    botx = x1 + Math.cos(angle2) * h;\r\n    boty = y1 + Math.sin(angle2) * h;\r\n    toDrawHead(graphics, topx, topy, x1, y1, botx, boty, style);\r\n  }\r\n\r\n  return true;\r\n\r\n  function drawHead(graphics, x0, y0, x1, y1, x2, y2, style) {\r\n    var backdist;\r\n    x0 = +x0, y0 = +y0, x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2;\r\n    // all cases do this.\r\n    graphics.beginStroke('#F00')\r\n       .moveTo(x0, y0)\r\n       .lineTo(x1, y1)\r\n       .lineTo(x2, y2);\r\n    switch (style) {\r\n      case 0:\r\n        // curved filled, add the bottom as an arcTo curve and fill\r\n        backdist = Math.sqrt(((x2 - x0) * (x2 - x0)) + ((y2 - y0) * (y2 -\r\n           y0)));\r\n        graphics.arcTo(x1, y1, x0, y0, 0.55 * backdist);\r\n        graphics.fill();\r\n        break;\r\n      case 1:\r\n        // straight filled, add the bottom as a line and fill.\r\n        graphics.beginStroke('#F00')\r\n           .moveTo(x0, y0)\r\n           .lineTo(x1, y1)\r\n           .lineTo(x2, y2)\r\n           .lineTo(x0, y0)\r\n           .fill();\r\n        break;\r\n      case 2:\r\n        // unfilled head, just stroke.\r\n        break;\r\n      case 3:\r\n        // filled head, add the bottom as a quadraticCurveTo curve and fill\r\n        var cpx = (x0 + x1 + x2) / 3;\r\n        var cpy = (y0 + y1 + y2) / 3;\r\n        graphics.beginFill()\r\n           .quadraticCurveTo(cpx, cpy, x0, y0);\r\n        break;\r\n      case 4:\r\n        // filled head, add the bottom as a bezierCurveTo curve and fill\r\n        var cp1x, cp1y, cp2x, cp2y;\r\n        var shiftamt = 5;\r\n        if (x2 === x0) {\r\n          // Avoid a divide by zero if x2==x0\r\n          backdist = y2 - y0;\r\n          cp1x = (x1 + x0) / 2;\r\n          cp2x = (x1 + x0) / 2;\r\n          cp1y = y1 + backdist / shiftamt;\r\n          cp2y = y1 - backdist / shiftamt;\r\n        } else {\r\n          backdist = Math.sqrt(((x2 - x0) * (x2 - x0)) + ((y2 - y0) * (y2 -\r\n             y0)));\r\n          var xback = (x0 + x2) / 2;\r\n          var yback = (y0 + y2) / 2;\r\n          var xmid = (xback + x1) / 2;\r\n          var ymid = (yback + y1) / 2;\r\n\r\n          var m = (y2 - y0) / (x2 - x0);\r\n          var dx = (backdist / (2 * Math.sqrt(m * m + 1))) / shiftamt;\r\n          var dy = m * dx;\r\n          cp1x = xmid - dx;\r\n          cp1y = ymid - dy;\r\n          cp2x = xmid + dx;\r\n          cp2y = ymid + dy;\r\n        }\r\n\r\n        graphics.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x0, y0);\r\n        graphics.fill();\r\n        break;\r\n    }\r\n  }\r\n}\r\n/* eslint-enable */\r\n/* eslint-disable */\r\nfunction drawArcedArrow(graphics, x, y, r, startangle, endangle, anticlockwise,\r\n   style, which, angle, d) {\r\n  var sx, sy, lineangle, destx, desty;\r\n\r\n  style = typeof (style) != 'undefined' ? style : 3;\r\n  which = typeof (which) != 'undefined' ? which : 1; // end point gets arrow\r\n  angle = typeof (angle) != 'undefined' ? angle : Math.PI / 8;\r\n  d = typeof (d) != 'undefined' ? d : 10;\r\n  // Old: ctx.save();\r\n  graphics.beginPath();\r\n  graphics.arc(x, y, r, startangle, endangle, anticlockwise);\r\n  graphics.stroke();\r\n\r\n  graphics.strokeStyle = 'rgba(0,0,0,0)'; // don't show the shaft\r\n  if (which & 1) { // draw the destination end\r\n    sx = Math.cos(startangle) * r + x;\r\n    sy = Math.sin(startangle) * r + y;\r\n    lineangle = Math.atan2(x - sx, sy - y);\r\n\r\n    if (anticlockwise) {\r\n      destx = sx + 10 * Math.cos(lineangle);\r\n      desty = sy + 10 * Math.sin(lineangle);\r\n    } else {\r\n      destx = sx - 10 * Math.cos(lineangle);\r\n      desty = sy - 10 * Math.sin(lineangle);\r\n    }\r\n    drawArrow(graphics, sx, sy, destx, desty, style, 2, angle, d);\r\n  }\r\n  if (which & 2) { // draw the origination end\r\n    sx = Math.cos(endangle) * r + x;\r\n    sy = Math.sin(endangle) * r + y;\r\n    lineangle = Math.atan2(x - sx, sy - y);\r\n    if (anticlockwise) {\r\n      destx = sx - 10 * Math.cos(lineangle);\r\n      desty = sy - 10 * Math.sin(lineangle);\r\n    } else {\r\n      destx = sx + 10 * Math.cos(lineangle);\r\n      desty = sy + 10 * Math.sin(lineangle);\r\n    }\r\n    drawArrow(graphics, sx, sy, destx, desty, style, 2, angle, d);\r\n  }\r\n}\r\n/* eslint-enable */\r\n/* =============================== */\r\n\r\nfunction drawLine(graphics, from, to, options = { color: '#000000', style: 5 }) {\r\n  const { color, style } = options;\r\n\r\n  graphics.lineStyle(style, color);\r\n  graphics.moveTo(from.x, from.y);\r\n  graphics.lineTo(to.x, to.y);\r\n\r\n  return graphics;\r\n}\r\n\r\nexport {\r\n  drawArrow,\r\n  drawArcedArrow,\r\n  drawLine\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/UIs/default/utils/arrows.js\n **/","import Q from 'q';\r\nimport * as PIXI from 'pixi.js';\r\n\r\nclass Preload {\r\n  /**\r\n   * Preloads assets before initializing map.\r\n   *\r\n   * @namespace flatworld\r\n   * @class Preload\r\n   * @constructor\r\n   * @requires Q for promises\r\n   * @todo should you use PIXI here or just https://github.com/englercj/resource-loader straight?\r\n   */\r\n  constructor(baseUrl, options = { concurrency: 15, crossOrigin: false }) {\r\n    const { concurrency } = options;\r\n\r\n    this.preloaderClass = new PIXI.loaders.Loader(baseUrl, concurrency);\r\n  }\r\n  /**\r\n   * @method resolveOnComplete\r\n   * @return {Promise} Return promise object, that will be resolved when the preloading is finished\r\n   **/\r\n  resolveOnComplete() {\r\n    const promise = Q.defer();\r\n\r\n    this.preloaderClass.load();\r\n\r\n    this.preloaderClass.once('complete', function (loader, resources) {\r\n      promise.resolve(loader, resources);\r\n    });\r\n\r\n    return promise.promise;\r\n  }\r\n  /**\r\n   * @method addResource\r\n   **/\r\n  addResource(resource) {\r\n    this.preloaderClass.add(resource);\r\n  }\r\n  /**\r\n   * Preload assets\r\n   *\r\n   * @method loadManifest\r\n   **/\r\n  loadManifest() {\r\n    return this;\r\n  }\r\n  /**\r\n   * Error handler if something goes wrong when preloading\r\n   *\r\n   * @method setErrorHandler\r\n   **/\r\n  setErrorHandler(errorCB) {\r\n    this.preloaderClass.on('error', errorCB);\r\n\r\n    return this;\r\n  }\r\n  /**\r\n   * Progress handler for loading. You should look easeljs docs for more information\r\n   *\r\n   * @method setProgressHandler\r\n   **/\r\n  setProgressHandler(progressCB) {\r\n    this.preloaderClass.on('error', progressCB);\r\n\r\n    return this;\r\n  }\r\n  /**\r\n   * Activate sound preloading also\r\n   *\r\n   * @method activateSound\r\n   **/\r\n  activateSound() {\r\n    this.preloaderClass.installPlugin();\r\n  }\r\n}\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport {\r\n  Preload\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/preloading/Preload.js\n **/","import * as PIXI from 'pixi.js';\r\nimport { Flatworld, utils, log } from '../core/';\r\nimport { ObjectHexaTerrain, ObjectHexaUnit } from '../extensions/hexagons/Objects';\r\n\r\n/*---------------------\r\n------- PUBLIC --------\r\n----------------------*/\r\n/**\r\n * This constructs a whole horizontally aligned hexagonal map. Some polyfills are needed and added for IE11 (\r\n * http://babeljs.io/docs/usage/polyfill/ ). These are found in utils\r\n *\r\n * @class factories.hexaFactory\r\n * @requires PIXI in global space\r\n * @param {HTMLElement} mapCanvas              Canvas element used for the map\r\n * @param {Object} datas                       Object with mapDatas to construct the map structure\r\n * @param {Object} datas.map                   Holds all the stage, layer and object data needed to construct a full map\r\n * @param {Object} datas.game                  More general game data (like turn number, map size etc.)\r\n * @param {Object} datas.type                  Type data such as different unit types and their graphics (tank, soldier etc.)\r\n * @param {UITheme} UITheme                    An instance of the UITheme class that the map uses.\r\n * @param {Object} {}                          Optional options\r\n * @param {Object} {}.isHiddenByDefault        When we use mapMovement plugin, it is best to keep all the obejcts hidden at the beginnig.\r\n * @param {Function} {}.trackFPSCB             Callback to track FPS\r\n **/\r\nfunction hexaFactory(mapCanvas, datas, {\r\n      trackFPSCB = false,\r\n      isHiddenByDefault = true,\r\n      minimapCanvas,\r\n      scaleMode = PIXI.SCALE_MODES.DEFAULT } = {}) {\r\n  log.debug('============== Hexagonal Map factory started =============');\r\n  const pixelRatio = utils.environment.getPixelRatio();\r\n  const DATA_MAP = (typeof datas.map === 'string') ? JSON.parse(datas.map) : datas.map;\r\n  const DATA_TYPE = (typeof datas.type === 'string') ? JSON.parse(datas.type) : datas.type;\r\n  const DATA_GAME = (typeof datas.game === 'string') ? JSON.parse(datas.game) : datas.game;\r\n  const DATA_GRAPHIC = (typeof datas.graphic === 'string') ? JSON.parse(datas.graphic) : datas.graphic;\r\n  const WINDOW_SIZE = utils.resize.getWindowSize();\r\n  /*---------------------\r\n  ------ VARIABLES ------\r\n  ----------------------*/\r\n  const functionsInObj = {\r\n    ObjectTerrain: ObjectHexaTerrain,\r\n    ObjectUnit: ObjectHexaUnit\r\n  };\r\n  const mapProperties = {\r\n    mapSize: DATA_GAME.mapSize,\r\n    bounds: {\r\n      x: 0,\r\n      y: 0,\r\n      width: WINDOW_SIZE.x,\r\n      height: WINDOW_SIZE.y\r\n    },\r\n    rendererOptions: {\r\n      resolution: pixelRatio, // We might need this later on, when doing mobile optimizations, for different pizel density devices\r\n      autoResize: true,\r\n      transparent: true,\r\n      antialias: false // TEST. Only should work in chrome atm.?\r\n    },\r\n    subcontainers: {\r\n      width: 500,\r\n      height: 500,\r\n      maxDetectionOffset: 100,\r\n      isHiddenByDefault\r\n    },\r\n    trackFPSCB,\r\n    defaultScaleMode: scaleMode,\r\n    minimapCanvas\r\n  };\r\n  const map = new Flatworld(mapCanvas, mapProperties);\r\n\r\n  PIXI.SCALE_MODES.DEFAULT = 1;\r\n\r\n  DATA_MAP.layers.forEach(layerData => {\r\n    if (typeof layerData !== 'object') {\r\n      log.error('Problem in hexaFactory, with layerData:' + JSON.stringify(layerData));\r\n      throw new Error('Problem in hexaFactory, with layerData:', layerData);\r\n    }\r\n\r\n    const renderer = map.getRenderer();\r\n    const layerOptions = {\r\n      name: layerData.name,\r\n      coord: layerData.coord,\r\n      drawOutsideViewport: {\r\n        x: renderer.width,\r\n        y: renderer.height\r\n      },\r\n      selectable: layerData.name === 'unitLayer' ? true : false\r\n    };\r\n    let thisLayer;\r\n\r\n    try {\r\n      thisLayer = map.addLayer(layerOptions);\r\n\r\n      layerData.objectGroups.forEach(objectGroup => {\r\n        const spritesheetType = objectGroup.typeImageData;\r\n\r\n        if (!spritesheetType) {\r\n          log.error('Error with spritesheetType-data');\r\n          return;\r\n        }\r\n\r\n        objectGroup.objects.forEach(object => {\r\n          let objTypeData, objectOptions, texture, newObject;\r\n\r\n          try {\r\n            objTypeData = DATA_TYPE[spritesheetType][object.objType];\r\n            if (!objTypeData) {\r\n              const error = new Error('Bad mapData for type:' + spritesheetType.toString() + object.objType.toString() + object.name.toString());\r\n              log.error(error);\r\n              throw error;\r\n            }\r\n\r\n            texture = PIXI.Texture.fromFrame(objTypeData.image);\r\n            objectOptions = {\r\n              data: {\r\n                typeData: objTypeData,\r\n                activeData: object.data\r\n              },\r\n              radius: DATA_GAME.hexagonRadius,\r\n              minimapColor: objTypeData.minimapColor,\r\n              minimapSize: objTypeData.minimapSize\r\n            };\r\n\r\n            newObject = new functionsInObj[objectGroup.type](texture, object.coord, objectOptions);\r\n            /** @todo This is here to test using higher resolution sprites, that would handle zooming more gracefully. This should not really be here, but rather as some kind of option or in the object classes that are extended */\r\n            if (DATA_GRAPHIC[objectGroup.typeImageData].initialScale) {\r\n              newObject.scale.x = DATA_GRAPHIC[objectGroup.typeImageData].initialScale;\r\n              newObject.scale.y = DATA_GRAPHIC[objectGroup.typeImageData].initialScale;\r\n            }\r\n\r\n            thisLayer.addChild(newObject);\r\n          } catch (e) {\r\n            log.error(e);\r\n          }\r\n        });\r\n      });\r\n    } catch (e) {\r\n      log.error('Problem:' + JSON.stringify(layerData.type) + ' ---- ' + JSON.stringify(e.stack));\r\n    }\r\n  });\r\n\r\n  map.moveMap(DATA_GAME.startPoint);\r\n\r\n  return map;\r\n}\r\n\r\n/*---------------------\r\n--------- API ---------\r\n----------------------*/\r\nexport {\r\n  hexaFactory\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/factories/hexaFactory.js\n **/"],"sourceRoot":""}